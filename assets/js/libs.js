function Runtime(){}function BrowserRuntime(){function e(e){var t,n,i=e.length,r=0;for(t=0;i>t;t+=1)n=e.charCodeAt(t),r+=1+(n>128)+(n>2048),n>55040&&57344>n&&(r+=1,t+=1);return r}function t(e,t,n){var i,r,o=e.length;for(t=new Uint8Array(new ArrayBuffer(t)),n?(t[0]=239,t[1]=187,t[2]=191,r=3):r=0,n=0;o>n;n+=1)i=e.charCodeAt(n),128>i?(t[r]=i,r+=1):2048>i?(t[r]=192|i>>>6,t[r+1]=128|63&i,r+=2):55040>=i||i>=57344?(t[r]=224|i>>>12&15,t[r+1]=128|i>>>6&63,t[r+2]=128|63&i,r+=3):(n+=1,i=(i-55296<<10|e.charCodeAt(n)-56320)+65536,t[r]=240|i>>>18&7,t[r+1]=128|i>>>12&63,t[r+2]=128|i>>>6&63,t[r+3]=128|63&i,r+=4);return t}function n(e){var t,n=e.length,i=new Uint8Array(new ArrayBuffer(n));for(t=0;n>t;t+=1)i[t]=255&e.charCodeAt(t);return i}function i(e,t){var n;void 0!==t?n=e:t=e,console.log(t),a.enableAlerts&&"alert"===n&&alert(t)}function r(i,r,o){if(0!==o.status||o.responseText)if(200===o.status||0===o.status){if(o.response&&"string"!=typeof o.response)"binary"===r?(o=o.response,o=new Uint8Array(o)):o=String(o.response);else if("binary"===r)if(null!==o.responseBody&&"undefined"!==String(typeof VBArray)){o=new VBArray(o.responseBody).toArray();var s=o.length;for(r=new Uint8Array(new ArrayBuffer(s)),i=0;s>i;i+=1)r[i]=o[i];o=r}else{if((i=o.getResponseHeader("Content-Length"))&&(i=parseInt(i,10)),i&&i!==o.responseText.length)e:{s=o.responseText,r=!1;var a=e(s);if("number"==typeof i){if(i!==a&&i!==a+3){s=void 0;break e}r=a+3===i,a=i}s=t(s,a,r)}void 0===s&&(s=n(o.responseText)),o=s}else o=o.responseText;o={err:null,data:o}}else o={err:o.responseText||o.statusText,data:null};else o={err:"File "+i+" is empty.",data:null};return o}function o(e,t,n){var i=new XMLHttpRequest;return i.open("GET",e,n),i.overrideMimeType&&("binary"!==t?i.overrideMimeType("text/plain; charset="+t):i.overrideMimeType("text/plain; charset=x-user-defined")),i}function s(e,t,n){var i=o(e,t,!0);i.onreadystatechange=function(){var o;4===i.readyState&&(o=r(e,t,i),n(o.err,o.data))};try{i.send(null)}catch(s){n(s.message,null)}}var a=this;this.byteArrayFromString=function(i,r){var o;return"utf8"===r?o=t(i,e(i),!1):("binary"!==r&&a.log("unknown encoding: "+r),o=n(i)),o},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=s,this.read=function(e,t,n,i){s(e,"binary",function(e,r){var o=null;if(r){if("string"==typeof r)throw"This should not happen.";o=r.subarray(t,t+n)}i(e,o)})},this.readFileSync=function(e,t){var n,i=o(e,t,!1);try{if(i.send(null),n=r(e,t,i),n.err)throw n.err;if(null===n.data)throw"No data read from "+e+"."}catch(s){throw s}return n.data},this.writeFile=function(e,t,n){var i,r=new XMLHttpRequest;r.open("PUT",e,!0),r.onreadystatechange=function(){4===r.readyState&&n(0!==r.status||r.responseText?200<=r.status&&300>r.status||0===r.status?null:"Status "+String(r.status)+": "+r.responseText||r.statusText:"File "+e+" is empty.")},i=t.buffer&&!r.sendAsBinary?t.buffer:a.byteArrayToString(t,"binary");try{r.sendAsBinary?r.sendAsBinary(i):r.send(i)}catch(o){a.log("HUH? "+o+" "+t),n(o.message)}},this.deleteFile=function(e,t){var n=new XMLHttpRequest;n.open("DELETE",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(200>n.status&&300<=n.status?n.responseText:null)},n.send(null)},this.loadXML=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onreadystatechange=function(){4===n.readyState&&(0!==n.status||n.responseText?200===n.status||0===n.status?t(null,n.responseXML):t(n.responseText,null):t("File "+e+" is empty.",null))};try{n.send(null)}catch(i){t(i.message,null)}},this.log=i,this.enableAlerts=!0,this.assert=Runtime.assert,this.setTimeout=function(e,t){return setTimeout(function(){e()},t)},this.clearTimeout=function(e){clearTimeout(e)},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(){},this.currentDirectory=function(){return""},this.type=function(){return"BrowserRuntime"},this.getDOMImplementation=function(){return window.document.implementation},this.parseXML=function(e){return(new DOMParser).parseFromString(e,"text/xml")},this.exit=function(e){i("Calling exit with code "+String(e)+", but exit() is not implemented.")},this.getWindow=function(){return window},this.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,n=0;return t?(t.bind(window),n=t(e)):setTimeout(e,15)},this.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;t?(t.bind(window),t(e)):clearTimeout(e)}}function NodeJSRuntime(){function e(e){var t,n=e.length,i=new Uint8Array(new ArrayBuffer(n));for(t=0;n>t;t+=1)i[t]=e[t];return i}function t(t,n,i){function r(n,r){return n?i(n,null):r?"string"==typeof r?i(n,r):void i(n,e(r)):i("No data for "+t+".",null)}t=s.resolve(a,t),"binary"!==n?o.readFile(t,n,r):o.readFile(t,null,r)}var n,i,r=this,o=require("fs"),s=require("path"),a="";this.byteArrayFromString=function(e,t){var n,i=new Buffer(e,t),r=i.length,o=new Uint8Array(new ArrayBuffer(r));for(n=0;r>n;n+=1)o[n]=i[n];return o},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.readFile=t,this.loadXML=function(e,n){t(e,"utf-8",function(t,i){return t?n(t,null):i?void n(null,r.parseXML(i)):n("No data for "+e+".",null)})},this.writeFile=function(e,t,n){t=new Buffer(t),e=s.resolve(a,e),o.writeFile(e,t,"binary",function(e){n(e||null)})},this.deleteFile=function(e,t){e=s.resolve(a,e),o.unlink(e,t)},this.read=function(t,n,i,r){t=s.resolve(a,t),o.open(t,"r+",666,function(t,s){if(t)r(t,null);else{var a=new Buffer(i);o.read(s,a,0,i,n,function(t){o.close(s),r(t,e(a))})}})},this.readFileSync=function(t,n){var i;if(i=o.readFileSync(t,"binary"===n?null:n),null===i)throw"File "+t+" could not be read.";return"binary"===n&&(i=e(i)),i},this.log=function(e,t){var n;void 0!==t?n=e:t=e,"alert"===n&&process.stderr.write("\n!!!!! ALERT !!!!!\n"),process.stderr.write(t+"\n"),"alert"===n&&process.stderr.write("!!!!! ALERT !!!!!\n")},this.assert=Runtime.assert,this.setTimeout=function(e,t){return setTimeout(function(){e()},t)},this.clearTimeout=function(e){clearTimeout(e)},this.libraryPaths=function(){return[__dirname]},this.setCurrentDirectory=function(e){a=e},this.currentDirectory=function(){return a},this.type=function(){return"NodeJSRuntime"},this.getDOMImplementation=function(){return i},this.parseXML=function(e){return n.parseFromString(e,"text/xml")},this.exit=process.exit,this.getWindow=function(){return null},this.requestAnimationFrame=function(e){return setTimeout(e,15)},this.cancelAnimationFrame=function(e){clearTimeout(e)},n=new(require("xmldom").DOMParser),i=r.parseXML("<a/>").implementation}function RhinoRuntime(){var e,t,n=this,i={},r=i.javax.xml.parsers.DocumentBuilderFactory.newInstance(),o="";r.setValidating(!1),r.setNamespaceAware(!0),r.setExpandEntityReferences(!1),r.setSchema(null),t=i.org.xml.sax.EntityResolver({resolveEntity:function(e,t){var n=new i.java.io.FileReader(t);return new i.org.xml.sax.InputSource(n)}}),e=r.newDocumentBuilder(),e.setEntityResolver(t),this.byteArrayFromString=function(e,t){var n,i=e.length,r=new Uint8Array(new ArrayBuffer(i));for(n=0;i>n;n+=1)r[n]=255&e.charCodeAt(n);return r},this.byteArrayToString=Runtime.byteArrayToString,this.getVariable=Runtime.getVariable,this.fromJson=Runtime.fromJson,this.toJson=Runtime.toJson,this.loadXML=function(t,n){var r=new i.java.io.File(t),o=null;try{o=e.parse(r)}catch(s){return print(s),n(s,null)}n(null,o)},this.readFile=function(e,t,r){o&&(e=o+"/"+e);var s=new i.java.io.File(e),a="binary"===t?"latin1":t;s.isFile()?((e=readFile(e,a))&&"binary"===t&&(e=n.byteArrayFromString(e,"binary")),r(null,e)):r(e+" is not a file.",null)},this.writeFile=function(e,t,n){o&&(e=o+"/"+e),e=new i.java.io.FileOutputStream(e);var r,s=t.length;for(r=0;s>r;r+=1)e.write(t[r]);e.close(),n(null)},this.deleteFile=function(e,t){o&&(e=o+"/"+e);var n=new i.java.io.File(e),r=e+Math.random(),r=new i.java.io.File(r);n.rename(r)?(r.deleteOnExit(),t(null)):t("Could not delete "+e)},this.read=function(e,t,n,r){o&&(e=o+"/"+e);var s;s=e;var a="binary";new i.java.io.File(s).isFile()?("binary"===a&&(a="latin1"),s=readFile(s,a)):s=null,s?r(null,this.byteArrayFromString(s.substring(t,t+n),"binary")):r("Cannot read "+e,null)},this.readFileSync=function(e,t){if(!t)return"";var n=readFile(e,t);if(null===n)throw"File could not be read.";return n},this.log=function(e,t){var n;void 0!==t?n=e:t=e,"alert"===n&&print("\n!!!!! ALERT !!!!!"),print(t),"alert"===n&&print("!!!!! ALERT !!!!!")},this.assert=Runtime.assert,this.setTimeout=function(e){return e(),0},this.clearTimeout=function(){},this.libraryPaths=function(){return["lib"]},this.setCurrentDirectory=function(e){o=e},this.currentDirectory=function(){return o},this.type=function(){return"RhinoRuntime"},this.getDOMImplementation=function(){return e.getDOMImplementation()},this.parseXML=function(t){return t=new i.java.io.StringReader(t),t=new i.org.xml.sax.InputSource(t),e.parse(t)},this.exit=quit,this.getWindow=function(){return null},this.requestAnimationFrame=function(e){return e(),0},this.cancelAnimationFrame=function(){}}function makeBase64(){function e(e){var t,n=e.length,i=new Uint8Array(new ArrayBuffer(n));for(t=0;n>t;t+=1)i[t]=255&e.charCodeAt(t);return i}function t(e){var t,n,i="",r=e.length-2;for(n=0;r>n;n+=3)t=e[n]<<16|e[n+1]<<8|e[n+2],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t>>>18],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t>>>12&63],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t>>>6&63],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t];return n===r+1?(t=e[n]<<4,i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t>>>6],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t],i+="=="):n===r&&(t=e[n]<<10|e[n+1]<<2,i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t>>>12],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t>>>6&63],i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&t],i+="="),i}function n(e){e=e.replace(/[^A-Za-z0-9+\/]+/g,"");var t,n,i=e.length,r=new Uint8Array(new ArrayBuffer(3*i)),o=e.length%4,s=0;for(t=0;i>t;t+=4)n=(y[e.charAt(t)]||0)<<18|(y[e.charAt(t+1)]||0)<<12|(y[e.charAt(t+2)]||0)<<6|(y[e.charAt(t+3)]||0),r[s]=n>>16,r[s+1]=n>>8&255,r[s+2]=255&n,s+=3;return i=3*i-[0,0,2,1][o],r.subarray(0,i)}function i(e){var t,n,i=e.length,r=0,o=new Uint8Array(new ArrayBuffer(3*i));for(t=0;i>t;t+=1)n=e[t],128>n?o[r++]=n:(2048>n?o[r++]=192|n>>>6:(o[r++]=224|n>>>12&15,o[r++]=128|n>>>6&63),o[r++]=128|63&n);return o.subarray(0,r)}function r(e){var t,n,i,r,o=e.length,s=new Uint8Array(new ArrayBuffer(o)),a=0;for(t=0;o>t;t+=1)n=e[t],128>n?s[a++]=n:(t+=1,i=e[t],224>n?s[a++]=(31&n)<<6|63&i:(t+=1,r=e[t],s[a++]=(15&n)<<12|(63&i)<<6|63&r));return s.subarray(0,a)}function o(n){return t(e(n))}function s(e){return String.fromCharCode.apply(String,n(e))}function a(t){return r(e(t))}function l(e){e=r(e);for(var t="",n=0;n<e.length;)t+=String.fromCharCode.apply(String,e.subarray(n,n+45e3)),n+=45e3;return t}function u(e,t,n){var i,r,o,s="";for(o=t;n>o;o+=1)t=255&e.charCodeAt(o),128>t?s+=String.fromCharCode(t):(o+=1,i=255&e.charCodeAt(o),224>t?s+=String.fromCharCode((31&t)<<6|63&i):(o+=1,r=255&e.charCodeAt(o),s+=String.fromCharCode((15&t)<<12|(63&i)<<6|63&r)));return s}function c(e,t){function n(){var o=r+1e5;o>e.length&&(o=e.length),i+=u(e,r,o),r=o,o=r===e.length,t(i,o)&&!o&&runtime.setTimeout(n,0)}var i="",r=0;1e5>e.length?t(u(e,0,e.length),!0):("string"!=typeof e&&(e=e.slice()),n())}function d(t){return i(e(t))}function h(e){return String.fromCharCode.apply(String,i(e))}function f(t){return String.fromCharCode.apply(String,i(e(t)))}var p,m,g,v,y=function(e){var t,n,i={};for(t=0,n=e.length;n>t;t+=1)i[e.charAt(t)]=t;return i}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),b=runtime.getWindow();return b&&b.btoa?(g=b.btoa,p=function(e){return g(f(e))}):(g=o,p=function(e){return t(d(e))}),b&&b.atob?(v=b.atob,m=function(e){return e=v(e),u(e,0,e.length)}):(v=s,m=function(e){return l(n(e))}),core.Base64=function(){return this.convertByteArrayToBase64=this.convertUTF8ArrayToBase64=t,this.convertBase64ToByteArray=this.convertBase64ToUTF8Array=n,this.convertUTF16ArrayToByteArray=this.convertUTF16ArrayToUTF8Array=i,this.convertByteArrayToUTF16Array=this.convertUTF8ArrayToUTF16Array=r,this.convertUTF8StringToBase64=o,this.convertBase64ToUTF8String=s,this.convertUTF8StringToUTF16Array=a,this.convertByteArrayToUTF16String=this.convertUTF8ArrayToUTF16String=l,this.convertUTF8StringToUTF16String=c,this.convertUTF16StringToByteArray=this.convertUTF16StringToUTF8Array=d,this.convertUTF16ArrayToUTF8String=h,this.convertUTF16StringToUTF8String=f,this.convertUTF16StringToBase64=p,this.convertBase64ToUTF16String=m,this.fromBase64=s,this.toBase64=o,this.atob=v,this.btoa=g,this.utob=f,this.btou=c,this.encode=p,this.encodeURI=function(e){return p(e).replace(/[+\/]/g,function(e){return"+"===e?"-":"_"}).replace(/\\=+$/,"")},this.decode=function(e){return m(e.replace(/[\-_]/g,function(e){return"-"===e?"+":"/"}))},this},core.Base64}function createXPathSingleton(){function e(e,t,n){return-1!==e&&(t>e||-1===t)&&(n>e||-1===n)}function t(t){for(var n,i=[],r=0,o=t.length;o>r;){var s=t,a=o,l=i,c="",d=[],h=s.indexOf("[",r),f=s.indexOf("/",r),p=s.indexOf("=",r);if(e(f,h,p)?(c=s.substring(r,f),r=f+1):e(h,f,p)?(c=s.substring(r,h),r=u(s,h,d)):e(p,f,h)?(c=s.substring(r,p),r=p):(c=s.substring(r,a),r=a),l.push({location:c,predicates:d}),o>r&&"="===t[r]){if(n=t.substring(r+1,o),2<n.length&&("'"===n[0]||'"'===n[0]))n=n.slice(1,n.length-1);else try{n=parseInt(n,10)}catch(m){}r=o}}return{steps:i,value:n}}function n(){var e=null,t=!1;this.setNode=function(t){e=t},this.reset=function(){t=!1},this.next=function(){var n=t?null:e;return t=!0,n}}function i(e,t,n){this.reset=function(){e.reset()},this.next=function(){for(var i=e.next();i&&(i.nodeType===Node.ELEMENT_NODE&&(i=i.getAttributeNodeNS(t,n)),!i);)i=e.next();return i}}function r(e,t){var n=e.next(),i=null;this.reset=function(){e.reset(),n=e.next(),i=null},this.next=function(){for(;n;){if(i)if(t&&i.firstChild)i=i.firstChild;else{for(;!i.nextSibling&&i!==n;)i=i.parentNode;i===n?n=e.next():i=i.nextSibling}else do(i=n.firstChild)||(n=e.next());while(n&&!i);if(i&&i.nodeType===Node.ELEMENT_NODE)return i}return null}}function o(e,t){this.reset=function(){e.reset()},this.next=function(){for(var n=e.next();n&&!t(n);)n=e.next();return n}}function s(e,t,n){t=t.split(":",2);var i=n(t[0]),r=t[1];return new o(e,function(e){return e.localName===r&&e.namespaceURI===i})}function a(e,t,i){var r=new n,s=l(r,t,i),a=t.value;return void 0===a?new o(e,function(e){return r.setNode(e),s.reset(),null!==s.next()}):new o(e,function(e){return r.setNode(e),s.reset(),(e=s.next())?e.nodeValue===a:!1})}var l,u;return u=function(e,n,i){for(var r=n,o=e.length,s=0;o>r;)"]"===e[r]?(--s,0>=s&&i.push(t(e.substring(n,r)))):"["===e[r]&&(0>=s&&(n=r+1),s+=1),r+=1;return r},l=function(e,t,n){var o,l,u,c;for(o=0;o<t.steps.length;o+=1){if(u=t.steps[o],l=u.location,""===l)e=new r(e,!1);else if("@"===l[0]){if(l=l.substr(1).split(":",2),c=n(l[0]),!c)throw"No namespace associated with the prefix "+l[0];e=new i(e,c,l[1])}else"."!==l&&(e=new r(e,!1),-1!==l.indexOf(":")&&(e=s(e,l,n)));for(l=0;l<u.predicates.length;l+=1)c=u.predicates[l],e=a(e,c,n)}return e},{getODFElementsWithXPath:function(e,i,r){var o=e.ownerDocument,s=[],a=null;if(o&&"function"==typeof o.evaluate)for(r=o.evaluate(i,e,r,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null),a=r.iterateNext();null!==a;)a.nodeType===Node.ELEMENT_NODE&&s.push(a),a=r.iterateNext();else{for(s=new n,s.setNode(e),e=t(i),s=l(s,e,r),e=[],r=s.next();r;)e.push(r),r=s.next();s=e}return s}}}function RootFilter(e,t,n){var i=core.PositionFilter.FilterResult.FILTER_ACCEPT,r=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(o){o=o.container();var s;return s="string"==typeof e?t[e].getNode():e,n(o)===n(s)?i:r}}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=Q.type(e);return"function"===n||Q.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Q.isFunction(t))return Q.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Q.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ae.test(t))return Q.filter(t,e,n);t=Q.filter(t,e)}return Q.grep(e,function(e){return q.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=pe[e]={};return Q.each(e.match(fe)||[],function(e,n){t[n]=!0}),t}function s(){X.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Q.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+a.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(we,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?Q.parseJSON(n):n}catch(r){}ye.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function d(){try{return X.activeElement}catch(e){}}function h(e,t){return Q.nodeName(e,"table")&&Q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function f(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Me.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function g(e,t){var n,i,r,o,s,a,l,u;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),s=ve.set(t,o),u=o.events)){delete s.handle,s.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)Q.event.add(t,r,u[r][n])}ye.hasData(e)&&(a=ye.access(e),l=Q.extend({},a),ye.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Q.nodeName(e,t)?Q.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ae.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,r=Q(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Q.css(r[0],"display");return r.detach(),o}function w(e){var t=X,n=Ue[e];return n||(n=b(e,t),"none"!==n&&n||(Ie=(Ie||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ie[0].contentDocument,t.write(),t.close(),n=b(e,t),Ie.detach()),Ue[e]=n),n}function C(e,t,n){var i,r,o,s,a=e.style;return n=n||je(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Q.contains(e.ownerDocument,e)||(s=Q.style(e,t)),ze.test(s)&&He.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function x(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Ye.length;r--;)if(t=Ye[r]+n,t in e)return t;return i}function A(e,t,n){var i=Ve.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Q.css(e,n+xe[o],!0,r)),i?("content"===n&&(s-=Q.css(e,"padding"+xe[o],!0,r)),"margin"!==n&&(s-=Q.css(e,"border"+xe[o]+"Width",!0,r))):(s+=Q.css(e,"padding"+xe[o],!0,r),"padding"!==n&&(s+=Q.css(e,"border"+xe[o]+"Width",!0,r)));return s}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=je(e),s="border-box"===Q.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=C(e,t,o),(0>r||null==r)&&(r=e.style[t]),ze.test(r))return r;i=s&&(Z.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(s?"border":"content"),i,o)+"px"}function $(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=ve.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Se(i)&&(o[s]=ve.access(i,"olddisplay",w(i.nodeName)))):(r=Se(i),"none"===n&&r||ve.set(i,"olddisplay",r?n:Q.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function k(e,t,n,i,r){return new k.prototype.init(e,t,n,i,r)}function D(){return setTimeout(function(){Ze=void 0}),Ze=Q.now()}function T(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=xe[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e,t,n){for(var i,r=(nt[t]||[]).concat(nt["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function L(e,t,n){var i,r,o,s,a,l,u,c,d=this,h={},f=e.style,p=e.nodeType&&Se(e),m=ve.get(e,"fxshow");n.queue||(a=Q._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,Q.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=Q.css(e,"display"),c="none"===u?ve.get(e,"olddisplay")||w(e.nodeName):u,"inline"===c&&"none"===Q.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Je.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||Q.style(e,i)}else u=void 0;if(Q.isEmptyObject(h))"inline"===("none"===u?w(e.nodeName):u)&&(f.display=u);else{m?"hidden"in m&&(p=m.hidden):m=ve.access(e,"fxshow",{}),o&&(m.hidden=!p),p?Q(e).show():d.done(function(){Q(e).hide()}),d.done(function(){var t;ve.remove(e,"fxshow");for(t in h)Q.style(e,t,h[t])});for(i in h)s=F(p?m[i]:0,i,d),i in m||(m[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,r,o,s;for(n in e)if(i=Q.camelCase(n),r=t[i],o=e[n],Q.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=Q.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function N(e,t,n){var i,r,o=0,s=tt.length,a=Q.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Ze||D(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(e,[u,o,n]),1>o&&l?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ze||D(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Q.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);s>o;o++)if(i=tt[o].call(u,e,c,u.opts))return i;return Q.map(c,F,u),Q.isFunction(u.opts.start)&&u.opts.start.call(e,u),Q.fx.timer(Q.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(fe)||[];if(Q.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function M(e,t,n,i){function r(a){var l;return o[a]=!0,Q.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=e===bt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function R(e,t){var n,i,r=Q.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Q.extend(!0,e,i),e}function P(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function I(e,t,n,i){var r,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(e,t,n,i){var r;if(Q.isArray(t))Q.each(t,function(t,r){n||At.test(e)?i(e,r):U(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Q.type(t))i(e,t);else for(r in t)U(e+"["+r+"]",t[r],n,i)}function H(e){return Q.isWindow(e)?e:9===e.nodeType&&e.defaultView}var z=[],j=z.slice,W=z.concat,V=z.push,q=z.indexOf,K={},G=K.toString,Y=K.hasOwnProperty,Z={},X=e.document,J="2.1.4",Q=function(e,t){return new Q.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,ie=function(e,t){return t.toUpperCase()};Q.fn=Q.prototype={jquery:J,constructor:Q,selector:"",length:0,toArray:function(){return j.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:j.call(this)},pushStack:function(e){var t=Q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Q.each(this,e,t)},map:function(e){return this.pushStack(Q.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(j.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:z.sort,splice:z.splice},Q.extend=Q.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||Q.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(u&&i&&(Q.isPlainObject(i)||(r=Q.isArray(i)))?(r?(r=!1,o=n&&Q.isArray(n)?n:[]):o=n&&Q.isPlainObject(n)?n:{},s[t]=Q.extend(u,o,i)):void 0!==i&&(s[t]=i));return s},Q.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Q.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Q.type(e)||e.nodeType||Q.isWindow(e)?!1:e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?K[G.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Q.trim(e),e&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,ie)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Q.merge(i,"string"==typeof e?[e]:e):V.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:q.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&l.push(r);return W.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Q.isFunction(e)?(i=j.call(arguments,2),r=function(){return e.apply(t||this,i.concat(j.call(arguments)))},r.guid=e.guid=e.guid||Q.guid++,r):void 0},now:Date.now,support:Z}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()});var re=function(e){function t(e,t,n,i){var r,o,s,a,l,u,d,f,p,m;if((t?t.ownerDocument||t:U)!==L&&F(t),t=t||L,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!i&&N){if(11!==a&&(r=ye.exec(e)))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&P(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return J.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&C.getElementsByClassName)return J.apply(n,t.getElementsByClassName(s)),n}if(C.qsa&&(!B||!B.test(e))){if(f=d=I,p=t,m=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(u=_(e),(d=t.getAttribute("id"))?f=d.replace(we,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+h(u[l]);p=be.test(e)&&c(t.parentNode)||t,m=u.join(",")}if(m)try{return J.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return $(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[I]=!0,e}function r(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=z++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,u=[H,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[I]||(t[I]={}),(a=l[i])&&a[0]===H&&a[1]===o)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;
return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,u=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),u&&t.push(a));return s}function v(e,t,n,r,o,s){return r&&!r[I]&&(r=v(r)),o&&!o[I]&&(o=v(o,s)),i(function(i,s,a,l){var u,c,d,h=[],f=[],p=s.length,v=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?v:g(v,h,e,a,l),b=n?o||(i?e:p||r)?[]:s:y;if(n&&n(y,b,a,l),r)for(u=g(b,f),r(u,[],a,l),c=u.length;c--;)(d=u[c])&&(b[f[c]]=!(y[f[c]]=d));if(i){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?ee(i,d):h[c])>-1&&(i[u]=!(s[u]=d))}}else b=g(b===s?b.splice(p,b.length):b),o?o(null,s,b,l):J.apply(s,b)})}function y(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,l=f(function(e){return e===t},s,!0),u=f(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var r=!o&&(i||n!==k)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];r>a;a++)if(n=x.relative[e[a].type])c=[f(p(c),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[I]){for(i=++a;r>i&&!x.relative[e[i].type];i++);return v(a>1&&p(c),a>1&&h(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(le,"$1"),n,i>a&&y(e.slice(a,i)),r>i&&y(e=e.slice(i)),r>i&&h(e))}c.push(n)}return p(c)}function b(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,l,u){var c,d,h,f=0,p="0",m=i&&[],v=[],y=k,b=i||o&&x.find.TAG("*",u),w=H+=null==y?1:Math.random()||.1,C=b.length;for(u&&(k=s!==L&&s);p!==C&&null!=(c=b[p]);p++){if(o&&c){for(d=0;h=e[d++];)if(h(c,s,a)){l.push(c);break}u&&(H=w)}r&&((c=!h&&c)&&f--,i&&m.push(c))}if(f+=p,r&&p!==f){for(d=0;h=n[d++];)h(m,v,s,a);if(i){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=Z.call(l));v=g(v)}J.apply(l,v),u&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&(H=w,k=y),m};return r?i(s):s}var w,C,x,S,A,_,E,$,k,D,T,F,L,O,N,B,M,R,P,I="sizzle"+1*new Date,U=e.document,H=0,z=0,j=n(),W=n(),V=n(),q=function(e,t){return e===t&&(T=!0),0},K=1<<31,G={}.hasOwnProperty,Y=[],Z=Y.pop,X=Y.push,J=Y.push,Q=Y.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ie.replace("w","w#"),oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(se),fe=new RegExp("^"+re+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),xe=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){F()};try{J.apply(Y=Q.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(Ae){J={apply:Y.length?function(e,t){X.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}C=t.support={},A=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},F=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:U;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,O=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),N=!A(i),C.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=ve.test(i.getElementsByClassName),C.getById=r(function(e){return O.appendChild(e).id=I,!i.getElementsByName||!i.getElementsByName(I).length}),C.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(Ce,xe);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(Ce,xe);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=C.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):C.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=C.getElementsByClassName&&function(e,t){return N?t.getElementsByClassName(e):void 0},M=[],B=[],(C.qsa=ve.test(i.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||B.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+I+"-]").length||B.push("~="),e.querySelectorAll(":checked").length||B.push(":checked"),e.querySelectorAll("a#"+I+"+*").length||B.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&B.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")})),(C.matchesSelector=ve.test(R=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){C.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),M.push("!=",se)}),B=B.length&&new RegExp(B.join("|")),M=M.length&&new RegExp(M.join("|")),t=ve.test(O.compareDocumentPosition),P=t||ve.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return T=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===U&&P(U,e)?-1:t===i||t.ownerDocument===U&&P(U,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return T=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,l=[e],u=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:D?ee(D,e)-ee(D,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===U?-1:u[r]===U?1:0},i):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&F(e),n=n.replace(de,"='$1']"),C.matchesSelector&&N&&(!M||!M.test(n))&&(!B||!B.test(n)))try{var i=R.call(e,n);if(i||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&F(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&F(e);var n=x.attrHandle[t.toLowerCase()],i=n&&G.call(x.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:C.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(T=!C.detectDuplicates,D=!C.sortStable&&e.slice(0),e.sort(q),T){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return D=null,e},S=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(Ce,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ce,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,f,p,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(c=g[I]||(g[I]={}),u=c[e]||[],f=u[0]===H&&u[1],h=u[0]===H&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(h=f=0)||p.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[H,f,h];break}}else if(y&&(u=(t[I]||(t[I]={}))[e])&&u[0]===H)h=u[1];else for(;(d=++f&&d&&d[m]||(h=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[I]||(d[I]={}))[e]=[H,h]),d!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[I]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=ee(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=E(e.replace(le,"$1"));return r[I]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(Ce,xe),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ce,xe).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=l(w);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,_=t.tokenize=function(e,n){var i,r,o,s,a,l,u,c=W[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=x.preFilter;a;){(!i||(r=ue.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ce.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(le," ")}),a=a.slice(i.length));for(s in x.filter)!(r=pe[s].exec(a))||u[s]&&!(r=u[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):W(e,l).slice(0)},E=t.compile=function(e,t){var n,i=[],r=[],o=V[e+" "];if(!o){for(t||(t=_(e)),n=t.length;n--;)o=y(t[n]),o[I]?i.push(o):r.push(o);o=V(e,b(r,i)),o.selector=e}return o},$=t.select=function(e,t,n,i){var r,o,s,a,l,u="function"==typeof e&&e,d=!i&&_(e=u.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&C.getById&&9===t.nodeType&&N&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(Ce,xe),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(Ce,xe),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return J.apply(n,i),n;break}}return(u||E(e,d))(i,t,!N,n,be.test(e)&&c(t.parentNode)||t),n},C.sortStable=I.split("").sort(q).join("")===I,C.detectDuplicates=!!T,F(),C.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Q.find=re,Q.expr=re.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=re.uniqueSort,Q.text=re.getText,Q.isXMLDoc=re.isXML,Q.contains=re.contains;var oe=Q.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Q.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Q.find.matchesSelector(i,e)?[i]:[]:Q.find.matches(e,Q.grep(t,function(e){return 1===e.nodeType}))},Q.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(Q(e).filter(function(){for(t=0;n>t;t++)if(Q.contains(r[t],this))return!0}));for(t=0;n>t;t++)Q.find(e,r[t],i);return i=this.pushStack(n>1?Q.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&oe.test(e)?Q(e):e||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Q.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ue.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Q?t[0]:t,Q.merge(this,Q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),se.test(n[1])&&Q.isPlainObject(t))for(n in t)Q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=X.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(Q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))};ce.prototype=Q.fn,le=Q(X);var de=/^(?:parents|prev(?:Until|All))/,he={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Q(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Q.fn.extend({has:function(e){var t=Q(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Q.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=oe.test(e)||"string"!=typeof e?Q(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(e){return e?"string"==typeof e?q.call(Q(e),this[0]):q.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Q.unique(Q.merge(this.get(),Q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(n,i){var r=Q.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Q.filter(i,r)),this.length>1&&(he[e]||Q.unique(r),de.test(e)&&r.reverse()),this.pushStack(r)}});var fe=/\S+/g,pe={};Q.Callbacks=function(e){e="string"==typeof e?pe[e]||o(e):Q.extend({},e);var t,n,i,r,s,a,l=[],u=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function o(t){Q.each(t,function(t,n){var i=Q.type(n);"function"===i?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=l.length:t&&(r=n,c(t))}return this},remove:function(){return l&&Q.each(arguments,function(e,t){for(var n;(n=Q.inArray(t,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Q.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(n){Q.each(t,function(t,o){var s=Q.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,i):i}},r={};return i.pipe=i.then,Q.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=j.call(arguments),s=o.length,a=1!==s||e&&Q.isFunction(e.promise)?s:0,l=1===a?e:Q.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?j.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Q.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var me;Q.fn.ready=function(e){return Q.ready.promise().done(e),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){(e===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,e!==!0&&--Q.readyWait>0||(me.resolveWith(X,[Q]),Q.fn.triggerHandler&&(Q(X).triggerHandler("ready"),Q(X).off("ready"))))}}),Q.ready.promise=function(t){return me||(me=Q.Deferred(),"complete"===X.readyState?setTimeout(Q.ready):(X.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),me.promise(t)},Q.ready.promise();var ge=Q.access=function(e,t,n,i,r,o,s){var a=0,l=e.length,u=null==n;if("object"===Q.type(n)){r=!0;for(a in n)Q.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Q.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(Q(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):l?t(e[0],n):o};Q.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Q.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Q.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(Q.isEmptyObject(o))Q.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Q.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Q.isArray(t)?i=t.concat(t.map(Q.camelCase)):(r=Q.camelCase(t),t in s?i=[t,r]:(i=r,i=i in s?[i]:i.match(fe)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!Q.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new a,ye=new a,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;Q.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Q.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Q.camelCase(i.slice(5)),l(o,i,r[i])));ve.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ge(this,function(t){var n,i=Q.camelCase(e);if(o&&void 0===t){if(n=ye.get(o,e),void 0!==n)return n;if(n=ye.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,i);ye.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Q.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),n&&(!i||Q.isArray(n)?i=ve.access(e,t,Q.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),i=n.length,r=n.shift(),o=Q._queueHooks(e,t),s=function(){Q.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Q.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Q.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Q.queue(this[0],e):void 0===t?this:this.each(function(){var n=Q.queue(this,e,t);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Q.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ve.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=["Top","Right","Bottom","Left"],Se=function(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)},Ae=/^(?:checkbox|radio)$/i;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var _e="undefined";Z.focusinBubbles="onfocusin"in e;var Ee=/^key/,$e=/^(?:mouse|pointer|contextmenu)|click/,ke=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,u,c,d,h,f,p,m,g=ve.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Q.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return typeof Q!==_e&&Q.event.triggered!==t.type?Q.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(fe)||[""],u=t.length;u--;)a=De.exec(t[u])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f&&(d=Q.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=Q.event.special[f]||{},c=Q.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Q.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||(h=l[f]=[],h.delegateCount=0,d.setup&&d.setup.call(e,i,p,s)!==!1||e.addEventListener&&e.addEventListener(f,s,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),Q.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,u,c,d,h,f,p,m,g=ve.hasData(e)&&ve.get(e);if(g&&(l=g.events)){for(t=(t||"").match(fe)||[""],u=t.length;u--;)if(a=De.exec(t[u])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(d=Q.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,h=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)c=h[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));s&&!h.length&&(d.teardown&&d.teardown.call(e,p,g.handle)!==!1||Q.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)Q.event.remove(e,f+t[u],n,i,!0);Q.isEmptyObject(l)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,l,u,c,d,h=[i||X],f=Y.call(t,"type")?t.type:t,p=Y.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||X,3!==i.nodeType&&8!==i.nodeType&&!ke.test(f+Q.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[Q.expando]?t:new Q.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Q.makeArray(n,[t]),d=Q.event.special[f]||{},r||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!r&&!d.noBubble&&!Q.isWindow(i)){for(l=d.delegateType||f,ke.test(l+f)||(s=s.parentNode);s;s=s.parentNode)h.push(s),a=s;a===(i.ownerDocument||X)&&h.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=h[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||f,c=(ve.get(s,"events")||{})[t.type]&&ve.get(s,"handle"),c&&c.apply(s,n),c=u&&s[u],c&&c.apply&&Q.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),n)!==!1||!Q.acceptData(i)||u&&Q.isFunction(i[f])&&!Q.isWindow(i)&&(a=i[u],a&&(i[u]=null),Q.event.triggered=f,i[f](),Q.event.triggered=void 0,a&&(i[u]=a)),t.result}},dispatch:function(e){e=Q.event.fix(e);var t,n,i,r,o,s=[],a=j.call(arguments),l=(ve.get(this,"events")||{})[e.type]||[],u=Q.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=Q.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Q.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Q(r,this).index(l)>=0:Q.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||X,i=n.documentElement,r=n.body,
e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Q.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=$e.test(r)?this.mouseHooks:Ee.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new Q.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Q.event.trigger(r,null,t):Q.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Q.Event=function(e,t){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:c):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(e,t)},Q.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!Q.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Z.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ve.access(i,t);r||i.addEventListener(e,n,!0),ve.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ve.access(i,t)-1;r?ve.access(i,t,r):(i.removeEventListener(e,n,!0),ve.remove(i,t))}}}),Q.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=c;else if(!i)return this;return 1===r&&(o=i,i=function(e){return Q().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Q(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Q.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Q.event.trigger(e,t,n,!0):void 0}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fe=/<([\w:]+)/,Le=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^$|\/(?:java|ecma)script/i,Me=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,Q.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=Q.contains(e.ownerDocument,e);if(!(Z.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(s=v(a),o=v(e),i=0,r=o.length;r>i;i++)y(o[i],s[i]);if(t)if(n)for(o=o||v(e),s=s||v(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(e,a);return s=v(a,"script"),s.length>0&&m(s,!l&&v(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,u,c=t.createDocumentFragment(),d=[],h=0,f=e.length;f>h;h++)if(r=e[h],r||0===r)if("object"===Q.type(r))Q.merge(d,r.nodeType?[r]:r);else if(Le.test(r)){for(o=o||c.appendChild(t.createElement("div")),s=(Fe.exec(r)||["",""])[1].toLowerCase(),a=Pe[s]||Pe._default,o.innerHTML=a[1]+r.replace(Te,"<$1></$2>")+a[2],u=a[0];u--;)o=o.lastChild;Q.merge(d,o.childNodes),o=c.firstChild,o.textContent=""}else d.push(t.createTextNode(r));for(c.textContent="",h=0;r=d[h++];)if((!i||-1===Q.inArray(r,i))&&(l=Q.contains(r.ownerDocument,r),o=v(c.appendChild(r),"script"),l&&m(o),n))for(u=0;r=o[u++];)Be.test(r.type||"")&&n.push(r);return c},cleanData:function(e){for(var t,n,i,r,o=Q.event.special,s=0;void 0!==(n=e[s]);s++){if(Q.acceptData(n)&&(r=n[ve.expando],r&&(t=ve.cache[r]))){if(t.events)for(i in t.events)o[i]?Q.event.remove(n,i):Q.removeEvent(n,i,t.handle);ve.cache[r]&&delete ve.cache[r]}delete ye.cache[n[ye.expando]]}}}),Q.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Q.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Q.cleanData(v(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Q.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Pe[(Fe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Te,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Q.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Q.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var n,i,r,o,s,a,l=0,u=this.length,c=this,d=u-1,h=e[0],m=Q.isFunction(h);if(m||u>1&&"string"==typeof h&&!Z.checkClone&&Ne.test(h))return this.each(function(n){var i=c.eq(n);m&&(e[0]=h.call(this,n,i.html())),i.domManip(e,t)});if(u&&(n=Q.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Q.map(v(n,"script"),f),o=r.length;u>l;l++)s=n,l!==d&&(s=Q.clone(s,!0,!0),o&&Q.merge(r,v(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,Q.map(r,p),l=0;o>l;l++)s=r[l],Be.test(s.type||"")&&!ve.access(s,"globalEval")&&Q.contains(a,s)&&(s.src?Q._evalUrl&&Q._evalUrl(s.src):Q.globalEval(s.textContent.replace(Re,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(e){for(var n,i=[],r=Q(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Q(r[s])[t](n),V.apply(i,n.get());return this.pushStack(i)}});var Ie,Ue={},He=/^margin/,ze=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),je=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(o)}var n,i,r=X.documentElement,o=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Q.extend(Z,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(o),s.removeChild(n),t}}))}(),Q.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var We=/^(none|table(?!-c[ea]).+)/,Ve=new RegExp("^("+Ce+")(.*)$","i"),qe=new RegExp("^([+-])=("+Ce+")","i"),Ke={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=C(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=Q.camelCase(t),l=e.style;return t=Q.cssProps[a]||(Q.cssProps[a]=S(l,a)),s=Q.cssHooks[t]||Q.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=qe.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Q.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Q.cssNumber[a]||(n+="px"),Z.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,o,s,a=Q.camelCase(t);return t=Q.cssProps[a]||(Q.cssProps[a]=S(e.style,a)),s=Q.cssHooks[t]||Q.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=C(e,t,i)),"normal"===r&&t in Ge&&(r=Ge[t]),""===n||n?(o=parseFloat(r),n===!0||Q.isNumeric(o)?o||0:r):r}}),Q.each(["height","width"],function(e,t){Q.cssHooks[t]={get:function(e,n,i){return n?We.test(Q.css(e,"display"))&&0===e.offsetWidth?Q.swap(e,Ke,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var r=i&&je(e);return A(e,n,i?_(e,t,i,"border-box"===Q.css(e,"boxSizing",!1,r),r):0)}}}),Q.cssHooks.marginRight=x(Z.reliableMarginRight,function(e,t){return t?Q.swap(e,{display:"inline-block"},C,[e,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+xe[i]+t]=o[i]||o[i-2]||o[0];return r}},He.test(e)||(Q.cssHooks[e+t].set=A)}),Q.fn.extend({css:function(e,t){return ge(this,function(e,t,n){var i,r,o={},s=0;if(Q.isArray(t)){for(i=je(e),r=t.length;r>s;s++)o[t[s]]=Q.css(e,t[s],!1,i);return o}return void 0!==n?Q.style(e,t,n):Q.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Se(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=k,k.prototype={constructor:k,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var e=k.propHooks[this.prop];return e&&e.get?e.get(this):k.propHooks._default.get(this)},run:function(e){var t,n=k.propHooks[this.prop];return this.options.duration?this.pos=t=Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):k.propHooks._default.set(this),this}},k.prototype.init.prototype=k.prototype,k.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},k.propHooks.scrollTop=k.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.fx=k.prototype.init,Q.fx.step={};var Ze,Xe,Je=/^(?:toggle|show|hide)$/,Qe=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[L],nt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Qe.exec(t),o=r&&r[3]||(Q.cssNumber[e]?"":"px"),s=(Q.cssNumber[e]||"px"!==o&&+i)&&Qe.exec(Q.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Q.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Q.Animation=Q.extend(N,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Q.speed=function(e,t,n){var i=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Se).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Q.isEmptyObject(e),o=Q.speed(t,n,i),s=function(){var t=N(this,Q.extend({},e),o);(r||ve.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=Q.timers,s=ve.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&et.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&Q.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=Q.timers,s=i?i.length:0;for(n.finish=!0,Q.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(e,t){var n=Q.fn[t];Q.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(T(t,!0),e,i,r)}}),Q.each({slideDown:T("show"),slideUp:T("hide"),slideToggle:T("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Q.timers=[],Q.fx.tick=function(){var e,t=0,n=Q.timers;for(Ze=Q.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Q.fx.stop(),Ze=void 0},Q.fx.timer=function(e){Q.timers.push(e),e()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Xe||(Xe=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Xe),Xe=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",Z.checkOn=""!==e.value,Z.optSelected=n.selected,t.disabled=!0,Z.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",Z.radioValue="t"===e.value}();var it,rt,ot=Q.expr.attrHandle;Q.fn.extend({attr:function(e,t){return ge(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})}}),Q.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===_e?Q.prop(e,t,n):(1===o&&Q.isXMLDoc(e)||(t=t.toLowerCase(),i=Q.attrHooks[t]||(Q.expr.match.bool.test(t)?rt:it)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Q.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Q.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(fe);if(o&&1===e.nodeType)for(;n=o[r++];)i=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Z.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),rt={set:function(e,t,n){return t===!1?Q.removeAttr(e,n):e.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||Q.find.attr;ot[t]=function(e,t,i){var r,o;return i||(o=ot[t],ot[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ot[t]=o),r}});var st=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(e,t){return ge(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Q.propFix[e]||e]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Q.isXMLDoc(e),o&&(t=Q.propFix[t]||t,r=Q.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||st.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Z.optSelected||(Q.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(e){var t,n,i,r,o,s,a="string"==typeof e&&e,l=0,u=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(fe)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Q.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(fe)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?Q.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):Q.isFunction(e)?this.each(function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=Q(this),o=e.match(fe)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===_e||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;Q.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=Q.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Q(this).val()):e,null==r?r="":"number"==typeof r?r+="":Q.isArray(r)&&(r=Q.map(r,function(e){return null==e?"":e+""})),t=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=Q.valHooks[r.type]||Q.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)}}}),Q.extend({valHooks:{option:{get:function(e){var t=Q.find.attr(e,"value");return null!=t?t:Q.trim(Q.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],(n.selected||l===r)&&(Z.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!Q.nodeName(n.parentNode,"optgroup"))){if(t=Q(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=Q.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=Q.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(e,t){return Q.isArray(t)?e.checked=Q.inArray(Q(e).val(),t)>=0:void 0}},Z.checkOn||(Q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Q.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ut=Q.now(),ct=/\?/;Q.parseJSON=function(e){return JSON.parse(e+"")},Q.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+e),t};var dt=/#.*$/,ht=/([?&])_=[^&]*/,ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mt=/^(?:GET|HEAD)$/,gt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},wt="*/".concat("*"),Ct=e.location.href,xt=vt.exec(Ct.toLowerCase())||[];Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct,type:"GET",isLocal:pt.test(xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Q.ajaxSettings),t):R(Q.ajaxSettings,e)},ajaxPrefilter:B(yt),ajaxTransport:B(bt),ajax:function(e,t){function n(e,t,n,s){var l,c,v,y,w,x=t;2!==b&&(b=2,a&&clearTimeout(a),i=void 0,o=s||"",C.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=P(d,C,n)),y=I(d,y,C,l),l?(d.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(Q.lastModified[r]=w),w=C.getResponseHeader("etag"),w&&(Q.etag[r]=w)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=y.state,c=y.data,v=y.error,l=!v)):(v=x,(e||!x)&&(x="error",0>e&&(e=0))),C.status=e,C.statusText=(t||x)+"",l?p.resolveWith(h,[c,x,C]):p.rejectWith(h,[C,x,v]),C.statusCode(g),g=void 0,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[C,d,l?c:v]),m.fireWith(h,[C,x]),u&&(f.trigger("ajaxComplete",[C,d]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,l,u,c,d=Q.ajaxSetup({},t),h=d.context||d,f=d.context&&(h.nodeType||h.jquery)?Q(h):Q.event,p=Q.Deferred(),m=Q.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=ft.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),n(0,t),this}};if(p.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,d.url=((e||d.url||Ct)+"").replace(dt,"").replace(gt,xt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=Q.trim(d.dataType||"*").toLowerCase().match(fe)||[""],null==d.crossDomain&&(l=vt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===xt[1]&&l[2]===xt[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(xt[3]||("http:"===xt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Q.param(d.data,d.traditional)),M(yt,d,t,C),2===b)return C;u=Q.event&&d.global,u&&0===Q.active++&&Q.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!mt.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(ct.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ht.test(r)?r.replace(ht,"$1_="+ut++):r+(ct.test(r)?"&":"?")+"_="+ut++)),d.ifModified&&(Q.lastModified[r]&&C.setRequestHeader("If-Modified-Since",Q.lastModified[r]),Q.etag[r]&&C.setRequestHeader("If-None-Match",Q.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&C.setRequestHeader("Content-Type",d.contentType),C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+wt+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)C.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(d.beforeSend.call(h,C,d)===!1||2===b))return C.abort();w="abort";for(c in{success:1,error:1,complete:1})C[c](d[c]);if(i=M(bt,d,t,C)){C.readyState=1,u&&f.trigger("ajaxSend",[C,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){C.abort("timeout")},d.timeout));try{b=1,i.send(v,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return C},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},getScript:function(e,t){return Q.get(e,void 0,t,"script")}}),Q.each(["get","post"],function(e,t){Q[t]=function(e,n,i,r){return Q.isFunction(n)&&(r=r||i,i=n,n=void 0),Q.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Q._evalUrl=function(e){return Q.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(e){var t;return Q.isFunction(e)?this.each(function(t){Q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return Q.isFunction(e)?this.each(function(t){Q(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(n){Q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)};var St=/%20/g,At=/\[\]$/,_t=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,$t=/^(?:input|select|textarea|keygen)/i;Q.param=function(e,t){var n,i=[],r=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){r(this.name,this.value)});else for(n in e)U(n,e[n],t,r);return i.join("&").replace(St,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&$t.test(this.nodeName)&&!Et.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:n.replace(_t,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var kt=0,Dt={},Tt={0:200,1223:204},Ft=Q.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Dt)Dt[e]()}),Z.cors=!!Ft&&"withCredentials"in Ft,Z.ajax=Ft=!!Ft,Q.ajaxTransport(function(e){var t;return Z.cors||Ft&&!e.crossDomain?{send:function(n,i){var r,o=e.xhr(),s=++kt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Dt[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Tt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Dt[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Q("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type);
}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],Ot=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||Q.expando+"_"+ut++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(Ot.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ot,"$1"+r):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||Q.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(r)),s&&Q.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var i=se.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Q.buildFragment([e],t,r),r&&r.length&&Q(r).remove(),Q.merge([],i.childNodes))};var Nt=Q.fn.load;Q.fn.load=function(e,t,n){if("string"!=typeof e&&Nt)return Nt.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=Q.trim(e.slice(a)),e=e.slice(0,a)),Q.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&Q.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?Q("<div>").append(Q.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length};var Bt=e.document.documentElement;Q.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,u,c=Q.css(e,"position"),d=Q(e),h={};"static"===c&&(e.style.position="relative"),a=d.offset(),o=Q.css(e,"top"),l=Q.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=d.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),Q.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):d.css(h)}},Q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,Q.contains(t,i)?(typeof i.getBoundingClientRect!==_e&&(r=i.getBoundingClientRect()),n=H(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Q.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Q.nodeName(e[0],"html")||(i=e.offset()),i.top+=Q.css(e[0],"borderTopWidth",!0),i.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Q.css(n,"marginTop",!0),left:t.left-i.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Bt;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||Bt})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Q.fn[t]=function(r){return ge(this,function(t,r,o){var s=H(t);return void 0===o?s?s[n]:t[r]:void(s?s.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),Q.each(["top","left"],function(e,t){Q.cssHooks[t]=x(Z.pixelPosition,function(e,n){return n?(n=C(e,t),ze.test(n)?Q(e).position()[t]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(e,t){Q.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Q.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return ge(this,function(t,n,i){var r;return Q.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Q.css(t,n,s):Q.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Mt=e.jQuery,Rt=e.$;return Q.noConflict=function(t){return e.$===Q&&(e.$=Rt),t&&e.jQuery===Q&&(e.jQuery=Mt),Q},typeof t===_e&&(e.jQuery=e.$=Q),Q}),function(e){"use strict";function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function r(t,n){e.fn[t]=function(r){if("string"==typeof r){for(var s=i.call(arguments,1),a=0,l=this.length;l>a;a++){var u=this[a],c=e.data(u,t);if(c)if(e.isFunction(c[r])&&"_"!==r.charAt(0)){var d=c[r].apply(c,s);if(void 0!==d)return d}else o("no such method '"+r+"' for "+t+" instance");else o("cannot call methods on "+t+" prior to initialization; attempted to call '"+r+"'")}return this}return this.each(function(){var i=e.data(this,t);i?(i.option(r),i._init()):(i=new n(this,r),e.data(this,t,i))})}}if(e){var o="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),r(e,t)},e.bridget}}var i=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof exports?require("jquery"):e.jQuery)}(window),function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,s,a=this.getListenersAsObject(e);for(o in a)if(a.hasOwnProperty(o))for(n=a[o].slice(0),r=n.length;r--;)i=n[r],i.once===!0&&this.removeListener(e,i.listener),s=i.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:r.EventEmitter=e}.call(this),function(e){"use strict";function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define(o):"object"==typeof exports?module.exports=o:e.eventie=o}(window),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){"use strict";function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===h.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var r=this;setTimeout(function(){r.check()})}function a(e){this.img=e}function l(e){this.src=e,f[e]=this}var u=e.jQuery,c=e.console,d="undefined"!=typeof c,h=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var a=r[o];this.addImage(a)}}},s.prototype.addImage=function(e){var t=new a(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&d&&c.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},u&&(u.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(u(this))}),a.prototype=new t,a.prototype.check=function(){var e=f[this.img.src]||new l(this.img.src);if(e.isConfirmed)return void this.confirm(e.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},a.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var f={};return l.prototype=new t,l.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},l.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},l.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},l.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s}),function(e,t,n){"use strict";function i(e,t){return t=t||Error,function(){var n,i,r=2,o=arguments,s=o[0],a="["+(e?e+":":"")+s+"] ",l=o[1];for(a+=l.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+r;return n<o.length?be(o[n]):e}),a+="\nhttp://errors.angularjs.org/1.4.7/"+(e?e+"/":"")+s,i=r,n="?";i<o.length;i++,n="&")a+=n+"p"+(i-r)+"="+encodeURIComponent(be(o[i]));return new t(a)}}function r(e){if(null==e||k(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===Ki&&t?!0:S(e)||Pi(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function o(e,t,n){var i,s;if(e)if(E(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i,e);else if(Pi(e)||r(e)){var a="object"!=typeof e;for(i=0,s=e.length;s>i;i++)(a||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else if(x(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)Ci.call(e,i)&&t.call(n,e[i],i,e);return e}function s(e,t,n){for(var i=Object.keys(e).sort(),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function a(e){return function(t,n){e(n,t)}}function l(){return++Mi}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e,t,n){for(var i=e.$$hashKey,r=0,o=t.length;o>r;++r){var s=t[r];if(C(s)||E(s))for(var a=Object.keys(s),l=0,d=a.length;d>l;l++){var h=a[l],f=s[h];n&&C(f)?_(f)?e[h]=new Date(f.valueOf()):$(f)?e[h]=new RegExp(f):(C(e[h])||(e[h]=Pi(f)?[]:{}),c(e[h],[f],!0)):e[h]=f}}return u(e,i),e}function d(e){return c(e,Di.call(arguments,1),!1)}function h(e){return c(e,Di.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function p(e,t){return d(Object.create(e),t)}function m(){}function g(e){return e}function v(e){return function(){return e}}function y(e){return E(e.toString)&&e.toString!==Object.prototype.toString}function b(e){return"undefined"==typeof e}function w(e){return"undefined"!=typeof e}function C(e){return null!==e&&"object"==typeof e}function x(e){return null!==e&&"object"==typeof e&&!Oi(e)}function S(e){return"string"==typeof e}function A(e){return"number"==typeof e}function _(e){return"[object Date]"===Li.call(e)}function E(e){return"function"==typeof e}function $(e){return"[object RegExp]"===Li.call(e)}function k(e){return e&&e.window===e}function D(e){return e&&e.$evalAsync&&e.$watch}function T(e){return"[object File]"===Li.call(e)}function F(e){return"[object FormData]"===Li.call(e)}function L(e){return"[object Blob]"===Li.call(e)}function O(e){return"boolean"==typeof e}function N(e){return e&&E(e.then)}function B(e){return Ii.test(Li.call(e))}function M(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function R(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function P(e){return wi(e.nodeName||e[0]&&e[0].nodeName)}function I(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t,n,i){if(k(e)||D(e))throw Ni("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(B(t))throw Ni("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t){if(e===t)throw Ni("cpi","Can't copy! Source and destination are identical.");n=n||[],i=i||[],C(e)&&(n.push(e),i.push(t));var r;if(Pi(e)){t.length=0;for(var s=0;s<e.length;s++)t.push(U(e[s],null,n,i))}else{var a=t.$$hashKey;if(Pi(t)?t.length=0:o(t,function(e,n){delete t[n]}),x(e))for(r in e)t[r]=U(e[r],null,n,i);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=U(e[r],null,n,i));else for(r in e)Ci.call(e,r)&&(t[r]=U(e[r],null,n,i));u(t,a)}}else if(t=e,C(e)){var l;if(n&&-1!==(l=n.indexOf(e)))return i[l];if(Pi(e))return U(e,[],n,i);if(B(e))t=new e.constructor(e);else if(_(e))t=new Date(e.getTime());else if($(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else{if(!E(e.cloneNode)){var c=Object.create(Oi(e));return U(e,c,n,i)}t=e.cloneNode(!0)}i&&(n.push(e),i.push(t))}return t}function H(e,t){if(Pi(e)){t=t||[];for(var n=0,i=e.length;i>n;n++)t[n]=e[n]}else if(C(e)){t=t||{};for(var r in e)("$"!==r.charAt(0)||"$"!==r.charAt(1))&&(t[r]=e[r])}return t||e}function z(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,i,r,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!Pi(e)){if(_(e))return _(t)?z(e.getTime(),t.getTime()):!1;if($(e))return $(t)?e.toString()==t.toString():!1;if(D(e)||D(t)||k(e)||k(t)||Pi(t)||_(t)||$(t))return!1;r=ge();for(i in e)if("$"!==i.charAt(0)&&!E(e[i])){if(!z(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&"$"!==i.charAt(0)&&w(t[i])&&!E(t[i]))return!1;return!0}if(!Pi(t))return!1;if((n=e.length)==t.length){for(i=0;n>i;i++)if(!z(e[i],t[i]))return!1;return!0}}return!1}function j(e,t,n){return e.concat(Di.call(t,n))}function W(e,t){return Di.call(e,t||0)}function V(e,t){var n=arguments.length>2?W(arguments,2):[];return!E(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,j(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function q(e,i){var r=i;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=n:k(i)?r="$WINDOW":i&&t===i?r="$DOCUMENT":D(i)&&(r="$SCOPE"),r}function K(e,t){return"undefined"==typeof e?n:(A(t)||(t=t?2:null),JSON.stringify(e,q,t))}function G(e){return S(e)?JSON.parse(e):e}function Y(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Z(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function X(e,t,n){n=n?-1:1;var i=Y(t,e.getTimezoneOffset());return Z(e,n*(i-e.getTimezoneOffset()))}function J(e){e=Ei(e).clone();try{e.empty()}catch(t){}var n=Ei("<div>").append(e).html();try{return e[0].nodeType===Yi?wi(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+wi(t)})}catch(t){return wi(n)}}function Q(e){try{return decodeURIComponent(e)}catch(t){}}function ee(e){var t={};return o((e||"").split("&"),function(e){var n,i,r;e&&(i=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(i=e.substring(0,n),r=e.substring(n+1)),i=Q(i),w(i)&&(r=w(r)?Q(r):!0,Ci.call(t,i)?Pi(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r))}),t}function te(e){var t=[];return o(e,function(e,n){Pi(e)?o(e,function(e){t.push(ie(n,!0)+(e===!0?"":"="+ie(e,!0)))}):t.push(ie(n,!0)+(e===!0?"":"="+ie(e,!0)))}),t.length?t.join("&"):""}function ne(e){return ie(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ie(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function re(e,t){var n,i,r=Wi.length;for(i=0;r>i;++i)if(n=Wi[i]+t,S(n=e.getAttribute(n)))return n;return null}function oe(e,t){var n,i,r={};o(Wi,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,i=e.getAttribute(r))}),o(Wi,function(t){var r,o=t+"app";!n&&(r=e.querySelector("["+o.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(o))}),n&&(r.strictDi=null!==re(n,"strict-di"),t(n,i?[i]:[],r))}function se(n,i,r){C(r)||(r={});var s={strictDi:!1};r=d(s,r);var a=function(){if(n=Ei(n),n.injector()){var e=n[0]===t?"document":J(n);throw Ni("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}i=i||[],i.unshift(["$provide",function(e){e.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),i.unshift("ng");var o=Je(i,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),o},l=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return e&&l.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(l,"")),e&&!u.test(e.name)?a():(e.name=e.name.replace(u,""),Bi.resumeBootstrap=function(e){return o(e,function(e){i.push(e)}),a()},void(E(Bi.resumeDeferredBootstrap)&&Bi.resumeDeferredBootstrap()))}function ae(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function le(e){var t=Bi.element(e).injector();if(!t)throw Ni("test","no injector found for element argument to getTestability");return t.get("$$testability")}function ue(e,t){return t=t||"_",e.replace(Vi,function(e,n){return(n?t:"")+e.toLowerCase()})}function ce(){var t;if(!qi){var i=ji();$i=b(i)?e.jQuery:i?e[i]:n,$i&&$i.fn.on?(Ei=$i,d($i.fn,{scope:fr.scope,isolateScope:fr.isolateScope,controller:fr.controller,injector:fr.injector,inheritedData:fr.inheritedData}),t=$i.cleanData,$i.cleanData=function(e){var n;if(Ri)Ri=!1;else for(var i,r=0;null!=(i=e[r]);r++)n=$i._data(i,"events"),n&&n.$destroy&&$i(i).triggerHandler("$destroy");t(e)}):Ei=ke,Bi.element=Ei,qi=!0}}function de(e,t,n){if(!e)throw Ni("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function he(e,t,n){return n&&Pi(e)&&(e=e[e.length-1]),de(E(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function fe(e,t){if("hasOwnProperty"===e)throw Ni("badname","hasOwnProperty is not a valid {0} name",t)}function pe(e,t,n){if(!t)return e;for(var i,r=t.split("."),o=e,s=r.length,a=0;s>a;a++)i=r[a],e&&(e=(o=e)[i]);return!n&&E(e)?V(o,e):e}function me(e){for(var t,n=e[0],i=e[e.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(t||e[r]!==n)&&(t||(t=Ei(Di.call(e,0,r))),t.push(n));return t||e}function ge(){return Object.create(null)}function ve(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=i("$injector"),r=i("ng"),o=t(e,"angular",Object);return o.$$minErr=o.$$minErr||i,t(o,"module",function(){var e={};return function(i,o,s){var a=function(e,t){if("hasOwnProperty"===e)throw r("badname","hasOwnProperty is not a valid {0} name",t)};return a(i,"module"),o&&e.hasOwnProperty(i)&&(e[i]=null),t(e,i,function(){function e(e,t,n,i){return i||(i=r),function(){return i[n||"push"]([e,t,arguments]),c}}function t(e,t){return function(n,o){return o&&E(o)&&(o.$$moduleName=i),r.push([e,t,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var r=[],a=[],l=[],u=e("$injector","invoke","push",a),c={_invokeQueue:r,_configBlocks:a,_runBlocks:l,requires:o,name:i,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:u,run:function(e){return l.push(e),this}};return s&&u(s),c})}})}function ye(e){var t=[];return JSON.stringify(e,function(e,n){if(n=q(e,n),C(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function be(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):b(e)?"undefined":"string"!=typeof e?ye(e):e}function we(t){d(t,{bootstrap:se,copy:U,extend:d,merge:h,equals:z,element:Ei,forEach:o,injector:Je,noop:m,bind:V,toJson:K,fromJson:G,identity:g,isUndefined:b,isDefined:w,isString:S,isFunction:E,isObject:C,isNumber:A,isElement:M,isArray:Pi,version:Qi,isDate:_,lowercase:wi,uppercase:xi,callbacks:{counter:0},getTestability:le,$$minErr:i,$$csp:zi,reloadWithDebugInfo:ae}),(ki=ve(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:vn}),e.provider("$compile",lt).directive({a:po,input:Fo,textarea:Fo,form:bo,script:Ss,select:Es,style:ks,option:$s,ngBind:No,ngBindHtml:Mo,ngBindTemplate:Bo,ngClass:Po,ngClassEven:Uo,ngClassOdd:Io,ngCloak:Ho,ngController:zo,ngForm:wo,ngHide:vs,ngIf:Vo,ngInclude:qo,ngInit:Go,ngNonBindable:ls,ngPluralize:hs,ngRepeat:fs,ngShow:gs,ngStyle:ys,ngSwitch:bs,ngSwitchWhen:ws,ngSwitchDefault:Cs,ngOptions:ds,ngTransclude:xs,ngModel:os,ngList:Yo,ngChange:Ro,pattern:Ts,ngPattern:Ts,required:Ds,ngRequired:Ds,minlength:Ls,ngMinlength:Ls,maxlength:Fs,ngMaxlength:Fs,ngValue:Oo,ngModelOptions:as}).directive({ngInclude:Ko}).directive(mo).directive(jo),e.provider({$anchorScroll:Qe,$animate:kr,$animateCss:Dr,$$animateQueue:$r,$$AnimateRunner:Er,$browser:ot,$cacheFactory:st,$controller:ft,$document:pt,$exceptionHandler:mt,$filter:Fn,$$forceReflow:Nr,$interpolate:Dt,$interval:Tt,$http:_t,$httpParamSerializer:vt,$httpParamSerializerJQLike:yt,$httpBackend:$t,$xhrFactory:Et,$location:Wt,$log:Vt,$parse:dn,$rootScope:gn,$q:hn,$$q:fn,$sce:Cn,$sceDelegate:wn,$sniffer:xn,$templateCache:at,$templateRequest:Sn,$$testability:An,$timeout:_n,$window:kn,$$rAF:mn,$$jqLite:Ke,$$HashMap:vr,$$cookieReader:Tn})}])}function Ce(){return++tr}function xe(e){return e.replace(rr,function(e,t,n,i){return i?n.toUpperCase():n}).replace(or,"Moz$1")}function Se(e){return!ur.test(e)}function Ae(e){var t=e.nodeType;return t===Ki||!t||t===Xi}function _e(e){for(var t in er[e.ng339])return!0;return!1}function Ee(e,t){var n,i,r,s,a=t.createDocumentFragment(),l=[];if(Se(e))l.push(t.createTextNode(e));else{for(n=n||a.appendChild(t.createElement("div")),i=(cr.exec(e)||["",""])[1].toLowerCase(),r=hr[i]||hr._default,n.innerHTML=r[1]+e.replace(dr,"<$1></$2>")+r[2],s=r[0];s--;)n=n.lastChild;l=j(l,n.childNodes),n=a.firstChild,n.textContent=""}return a.textContent="",a.innerHTML="",o(l,function(e){a.appendChild(e)}),a}function $e(e,n){n=n||t;var i;return(i=lr.exec(e))?[n.createElement(i[1])]:(i=Ee(e,n))?i.childNodes:[]}function ke(e){if(e instanceof ke)return e;var t;if(S(e)&&(e=Ui(e),t=!0),!(this instanceof ke)){if(t&&"<"!=e.charAt(0))throw ar("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ke(e)}t?Pe(this,$e(e)):Pe(this,e)}function De(e){return e.cloneNode(!0)}function Te(e,t){if(t||Le(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),i=0,r=n.length;r>i;i++)Le(n[i])}function Fe(e,t,n,i){if(w(i))throw ar("offargs","jqLite#off() does not support the `selector` argument");var r=Oe(e),s=r&&r.events,a=r&&r.handle;if(a)if(t)o(t.split(" "),function(t){if(w(n)){var i=s[t];if(I(i||[],n),i&&i.length>0)return}ir(e,t,a),delete s[t]});else for(t in s)"$destroy"!==t&&ir(e,t,a),delete s[t]}function Le(e,t){var i=e.ng339,r=i&&er[i];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Fe(e)),delete er[i],e.ng339=n}}function Oe(e,t){var i=e.ng339,r=i&&er[i];return t&&!r&&(e.ng339=i=Ce(),r=er[i]={events:{},data:{},handle:n}),r}function Ne(e,t,n){if(Ae(e)){var i=w(n),r=!i&&t&&!C(t),o=!t,s=Oe(e,!r),a=s&&s.data;if(i)a[t]=n;else{if(o)return a;if(r)return a&&a[t];d(a,t)}}}function Be(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Me(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",Ui((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Ui(t)+" "," ")))})}function Re(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=Ui(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Ui(n))}}function Pe(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;n>i;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function Ie(e,t){return Ue(e,"$"+(t||"ngController")+"Controller")}function Ue(e,t,n){e.nodeType==Xi&&(e=e.documentElement);for(var i=Pi(t)?t:[t];e;){for(var r=0,o=i.length;o>r;r++)if(w(n=Ei.data(e,i[r])))return n;e=e.parentNode||e.nodeType===Ji&&e.host}}function He(e){for(Te(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function ze(e,t){t||Te(e);var n=e.parentNode;n&&n.removeChild(e)}function je(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Ei(n).on("load",t)}function We(e,t){var n=pr[t.toLowerCase()];return n&&mr[P(e)]&&n}function Ve(e){return gr[e]}function qe(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],o=r?r.length:0;if(o){if(b(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},o>1&&(r=H(r));for(var a=0;o>a;a++)n.isImmediatePropagationStopped()||r[a].call(e,n)}};return n.elem=e,n}function Ke(){this.$get=function(){return d(ke,{hasClass:function(e,t){return e.attr&&(e=e[0]),Be(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Re(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Me(e,t)}})}}function Ge(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"==i||"object"==i&&null!==e?e.$$hashKey=i+":"+(t||l)():i+":"+e}function Ye(e,t){if(t){var n=0;this.nextUid=function(){return++n}}o(e,this.put,this)}function Ze(e){var t=e.toString().replace(Cr,""),n=t.match(yr);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Xe(e,t,n){var i,r,s,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw S(n)&&n||(n=e.name||Ze(e)),xr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=e.toString().replace(Cr,""),s=r.match(yr),o(s[1].split(br),function(e){e.replace(wr,function(e,t,n){i.push(n)})})}e.$inject=i}}else Pi(e)?(a=e.length-1,he(e[a],"fn"),i=e.slice(0,a)):he(e,"fn",!0);return i}function Je(e,t){function i(e){return function(t,n){return C(t)?void o(t,a(e)):e(t,n)}}function r(e,t){if(fe(e,"service"),(E(t)||Pi(t))&&(t=A.instantiate(t)),!t.$get)throw xr("pget","Provider '{0}' must define $get factory method.",e);return x[e+g]=t}function s(e,t){return function(){var n=$.invoke(t,this);if(b(n))throw xr("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function l(e,t,n){return r(e,{$get:n!==!1?s(e,t):t})}function u(e,t){return l(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return l(e,v(t),!1)}function d(e,t){fe(e,"constant"),x[e]=t,_[e]=t}function h(e,t){var n=A.get(e+g),i=n.$get;n.$get=function(){var e=$.invoke(i,n);return $.invoke(t,null,{$delegate:e})}}function f(e){de(b(e)||Pi(e),"modulesToLoad","not an array");var t,n=[];return o(e,function(e){function i(e){var t,n;for(t=0,n=e.length;n>t;t++){var i=e[t],r=A.get(i[0]);r[i[1]].apply(r,i[2])}}if(!w.get(e)){w.put(e,!0);try{S(e)?(t=ki(e),n=n.concat(f(t.requires)).concat(t._runBlocks),i(t._invokeQueue),i(t._configBlocks)):E(e)?n.push(A.invoke(e)):Pi(e)?n.push(A.invoke(e)):he(e,"module")}catch(r){throw Pi(e)&&(e=e[e.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),xr("modulerr","Failed to instantiate module {0} due to:\n{1}",e,r.stack||r.message||r)}}}),n}function p(e,n){function i(t,i){if(e.hasOwnProperty(t)){if(e[t]===m)throw xr("cdep","Circular dependency found: {0}",t+" <- "+y.join(" <- "));return e[t]}try{return y.unshift(t),e[t]=m,e[t]=n(t,i)}catch(r){throw e[t]===m&&delete e[t],r}finally{y.shift()}}function r(e,n,r,o){"string"==typeof r&&(o=r,r=null);var s,a,l,u=[],c=Je.$$annotate(e,t,o);for(a=0,s=c.length;s>a;a++){if(l=c[a],"string"!=typeof l)throw xr("itkn","Incorrect injection token! Expected service name as string, got {0}",l);u.push(r&&r.hasOwnProperty(l)?r[l]:i(l,o))}return Pi(e)&&(e=e[s]),e.apply(n,u)}function o(e,t,n){var i=Object.create((Pi(e)?e[e.length-1]:e).prototype||null),o=r(e,i,t,n);return C(o)||E(o)?o:i}return{invoke:r,instantiate:o,get:i,annotate:Je.$$annotate,has:function(t){return x.hasOwnProperty(t+g)||e.hasOwnProperty(t)}}}t=t===!0;var m={},g="Provider",y=[],w=new Ye([],!0),x={
$provide:{provider:i(r),factory:i(l),service:i(u),value:i(c),constant:i(d),decorator:h}},A=x.$injector=p(x,function(e,t){throw Bi.isString(t)&&y.push(t),xr("unpr","Unknown provider: {0}",y.join(" <- "))}),_={},$=_.$injector=p(_,function(e,t){var i=A.get(e+g,t);return $.invoke(i.$get,i,n,e)});return o(f(e),function(e){e&&$.invoke(e)}),$}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function r(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===P(e)?(t=e,!0):void 0}),t}function o(){var e=a.yOffset;if(E(e))e=e();else if(M(e)){var n=e[0],i=t.getComputedStyle(n);e="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else A(e)||(e=0);return e}function s(e){if(e){e.scrollIntoView();var n=o();if(n){var i=e.getBoundingClientRect().top;t.scrollBy(0,i-n)}}else t.scrollTo(0,0)}function a(e){e=S(e)?e:n.hash();var t;e?(t=l.getElementById(e))?s(t):(t=r(l.getElementsByName(e)))?s(t):"top"===e&&s(null):s(null)}var l=t.document;return e&&i.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&je(function(){i.$evalAsync(a)})}),a}]}function et(e,t){return e||t?e?t?(Pi(e)&&(e=e.join(" ")),Pi(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function tt(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Ar)return n}}function nt(e){S(e)&&(e=e.split(" "));var t=ge();return o(e,function(e){e.length&&(t[e]=!0)}),t}function it(e){return C(e)?e:{}}function rt(e,t,n,i){function r(e){try{e.apply(null,W(arguments,1))}finally{if(y--,0===y)for(;w.length;)try{w.pop()()}catch(t){n.error(t)}}}function s(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function a(){_=null,u(),c()}function l(){try{return f.state}catch(e){}}function u(){C=l(),C=b(C)?null:C,z(C,k)&&(C=k),k=C}function c(){(S!==d.url()||x!==C)&&(S=d.url(),x=C,o(E,function(e){e(d.url(),C)}))}var d=this,h=(t[0],e.location),f=e.history,p=e.setTimeout,g=e.clearTimeout,v={};d.isMock=!1;var y=0,w=[];d.$$completeOutstandingRequest=r,d.$$incOutstandingRequestCount=function(){y++},d.notifyWhenNoOutstandingRequests=function(e){0===y?e():w.push(e)};var C,x,S=h.href,A=t.find("base"),_=null;u(),x=C,d.url=function(t,n,r){if(b(r)&&(r=null),h!==e.location&&(h=e.location),f!==e.history&&(f=e.history),t){var o=x===r;if(S===t&&(!i.history||o))return d;var a=S&&Bt(S)===Bt(t);return S=t,x=r,!i.history||a&&o?((!a||_)&&(_=t),n?h.replace(t):a?h.hash=s(t):h.href=t,h.href!==t&&(_=t)):(f[n?"replaceState":"pushState"](r,"",t),u(),x=C),d}return _||h.href.replace(/%27/g,"'")},d.state=function(){return C};var E=[],$=!1,k=null;d.onUrlChange=function(t){return $||(i.history&&Ei(e).on("popstate",a),Ei(e).on("hashchange",a),$=!0),E.push(t),t},d.$$applicationDestroyed=function(){Ei(e).off("hashchange popstate",a)},d.$$checkUrlChange=c,d.baseHref=function(){var e=A.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},d.defer=function(e,t){var n;return y++,n=p(function(){delete v[n],r(e)},t||0),v[n]=!0,n},d.defer.cancel=function(e){return v[e]?(delete v[e],g(e),r(m),!0):!1}}function ot(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new rt(e,i,t,n)}]}function st(){this.$get=function(){function e(e,n){function r(e){e!=h&&(f?f==e&&(f=e.n):f=e,o(e.n,e.p),o(e,h),h=e,h.n=null)}function o(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var s=0,a=d({},n,{id:e}),l={},u=n&&n.capacity||Number.MAX_VALUE,c={},h=null,f=null;return t[e]={put:function(e,t){if(!b(t)){if(u<Number.MAX_VALUE){var n=c[e]||(c[e]={key:e});r(n)}return e in l||s++,l[e]=t,s>u&&this.remove(f.key),t}},get:function(e){if(u<Number.MAX_VALUE){var t=c[e];if(!t)return;r(t)}return l[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=c[e];if(!t)return;t==h&&(h=t.p),t==f&&(f=t.n),o(t.n,t.p),delete c[e]}delete l[e],s--},removeAll:function(){l={},s=0,c={},h=f=null},destroy:function(){l=null,a=null,c=null,delete t[e]},info:function(){return d({},a,{size:s})}}}var t={};return e.info=function(){var e={};return o(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function at(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function lt(e,i){function r(e,t,n){var i=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return o(e,function(e,o){var s=e.match(i);if(!s)throw Tr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,o,e,n?"controller bindings definition":"isolate scope definition");r[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o}}),r}function s(e,t){var n={isolateScope:null,bindToController:null};if(C(e.scope)&&(e.bindToController===!0?(n.bindToController=r(e.scope,t,!0),n.isolateScope={}):n.isolateScope=r(e.scope,t,!1)),C(e.bindToController)&&(n.bindToController=r(e.bindToController,t,!0)),C(n.bindToController)){var i=e.controller,o=e.controllerAs;if(!i)throw Tr("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!ht(i,o))throw Tr("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function l(e){var t=e.charAt(0);if(!t||t!==wi(t))throw Tr("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw Tr("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}var u={},c="Directive",h=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,y=R("ngSrc,ngSrcset,src,srcset"),x=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,A=/^(on[a-z]+|formaction)$/;this.directive=function $(t,n){return fe(t,"directive"),S(t)?(l(t),de(n,"directiveFactory"),u.hasOwnProperty(t)||(u[t]=[],e.factory(t+c,["$injector","$exceptionHandler",function(e,n){var i=[];return o(u[t],function(r,o){try{var a=e.invoke(r);E(a)?a={compile:v(a)}:!a.compile&&a.link&&(a.compile=v(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||t,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA";var l=a.$$bindings=s(a,a.name);C(l.isolateScope)&&(a.$$isolateBindings=l.isolateScope),a.$$moduleName=r.$$moduleName,i.push(a)}catch(u){n(u)}}),i}])),u[t].push(n)):o(t,a($)),this},this.aHrefSanitizationWhitelist=function(e){return w(e)?(i.aHrefSanitizationWhitelist(e),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return w(e)?(i.imgSrcSanitizationWhitelist(e),this):i.imgSrcSanitizationWhitelist()};var _=!0;this.debugInfoEnabled=function(e){return w(e)?(_=e,this):_},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,i,r,s,a,l,v,w,$,k,T){function F(e,t){try{e.addClass(t)}catch(n){}}function L(e,t,n,i,r){e instanceof Ei||(e=Ei(e)),o(e,function(t,n){t.nodeType==Yi&&t.nodeValue.match(/\S+/)&&(e[n]=Ei(t).wrap("<span></span>").parent()[0])});var s=N(e,t,e,n,i,r);L.$$addScopeClass(e);var a=null;return function(t,n,i){de(t,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,o=i.transcludeControllers,l=i.futureParentElement;r&&r.$$boundTransclude&&(r=r.$$boundTransclude),a||(a=O(l));var u;if(u="html"!==a?Ei(Q(a,Ei("<div>").append(e).html())):n?fr.clone.call(e):e,o)for(var c in o)u.data("$"+c+"Controller",o[c].instance);return L.$$addScopeInfo(u,t),n&&n(u,t),s&&s(t,u,u,r),u}}function O(e){var t=e&&e[0];return t&&"foreignobject"!==P(t)&&t.toString().match(/SVG/)?"svg":"html"}function N(e,t,i,r,o,s){function a(e,i,r,o){var s,a,l,u,c,d,h,f,g;if(p){var v=i.length;for(g=new Array(v),c=0;c<m.length;c+=3)h=m[c],g[h]=i[h]}else g=i;for(c=0,d=m.length;d>c;)if(l=g[m[c++]],s=m[c++],a=m[c++],s){if(s.scope){u=e.$new(),L.$$addScopeInfo(Ei(l),u);var y=s.$$destroyBindings;y&&(s.$$destroyBindings=null,u.$on("$destroyed",y))}else u=e;f=s.transcludeOnThisElement?B(e,s.transclude,o):!s.templateOnThisElement&&o?o:!o&&t?B(e,t):null,s(a,u,l,r,f,s)}else a&&a(e,l.childNodes,n,o)}for(var l,u,c,d,h,f,p,m=[],g=0;g<e.length;g++)l=new se,u=M(e[g],[],l,0===g?r:n,o),c=u.length?H(u,e[g],l,t,i,null,[],[],s):null,c&&c.scope&&L.$$addScopeClass(l.$$element),h=c&&c.terminal||!(d=e[g].childNodes)||!d.length?null:N(d,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||h)&&(m.push(g,c,h),f=!0,p=p||c),s=null;return f?a:null}function B(e,t,n){var i=function(i,r,o,s,a){return i||(i=e.$new(!1,a),i.$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})};return i}function M(e,t,n,i,r){var o,s,a=e.nodeType,l=n.$attr;switch(a){case Ki:V(t,ut(P(e)),"E",i,r);for(var u,c,d,p,m,g,v=e.attributes,y=0,b=v&&v.length;b>y;y++){var w=!1,x=!1;u=v[y],c=u.name,m=Ui(u.value),p=ut(c),(g=he.test(p))&&(c=c.replace(Fr,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var A=p.replace(/(Start|End)$/,"");q(A)&&p===A+"Start"&&(w=c,x=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),d=ut(c.toLowerCase()),l[d]=c,(g||!n.hasOwnProperty(d))&&(n[d]=m,We(e,d)&&(n[d]=!0)),te(e,t,m,d,g),V(t,d,"A",i,r,w,x)}if(s=e.className,C(s)&&(s=s.animVal),S(s)&&""!==s)for(;o=f.exec(s);)d=ut(o[2]),V(t,d,"C",i,r)&&(n[d]=Ui(o[3])),s=s.substr(o.index+o[0].length);break;case Yi:if(11===_i)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===Yi;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);X(t,e.nodeValue);break;case Zi:try{o=h.exec(e.nodeValue),o&&(d=ut(o[1]),V(t,d,"M",i,r)&&(n[d]=Ui(o[2])))}catch(_){}}return t.sort(Y),t}function R(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Tr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==Ki&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0)}else i.push(e);return Ei(i)}function U(e,t,n){return function(i,r,o,s,a){return r=R(r[0],t,n),e(i,r,o,s,a)}}function H(e,i,o,s,a,u,c,d,h){function f(e,t,n,i){e&&(n&&(e=U(e,n,i)),e.require=v.require,e.directiveName=y,(T===v||v.$$isolateScope)&&(e=ie(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=U(t,n,i)),t.require=v.require,t.directiveName=y,(T===v||v.$$isolateScope)&&(t=ie(t,{isolateScope:!0})),d.push(t))}function p(e,t,n,i){var r;if(S(t)){var o=t.match(x),s=t.substring(o[0].length),a=o[1]||o[3],l="?"===o[2];if("^^"===a?n=n.parent():(r=i&&i[s],r=r&&r.instance),!r){var u="$"+s+"Controller";r=a?n.inheritedData(u):n.data(u)}if(!r&&!l)throw Tr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(Pi(t)){r=[];for(var c=0,d=t.length;d>c;c++)r[c]=p(e,t[c],n,i)}return r||null}function m(e,t,n,i,r,o){var s=ge();for(var a in i){var u=i[a],c={$scope:u===T||u.$$isolateScope?r:o,$element:e,$attrs:t,$transclude:n},d=u.controller;"@"==d&&(d=t[u.name]);var h=l(d,c,!0,u.controllerAs);s[u.name]=h,P||e.data("$"+u.name+"Controller",h.instance)}return s}function g(e,t,r,s,a,l){function u(e,t,i){var r;return D(e)||(i=t,t=e,e=n),P&&(r=b),i||(i=P?C.parent():C),a(e,t,r,i,O)}var h,f,g,v,y,b,w,C,x;if(i===r?(x=o,C=o.$$element):(C=Ei(r),x=new se(C,o)),T&&(y=t.$new(!0)),a&&(w=u,w.$$boundTransclude=a),k&&(b=m(C,x,w,k,y,t)),T&&(L.$$addScopeInfo(C,y,!0,!(F&&(F===T||F===T.$$originalDirective))),L.$$addScopeClass(C,!0),y.$$isolateBindings=T.$$isolateBindings,oe(t,x,y,y.$$isolateBindings,T,y)),b){var S,A,_=T||$;_&&b[_.name]&&(S=_.$$bindings.bindToController,v=b[_.name],v&&v.identifier&&S&&(A=v,l.$$destroyBindings=oe(t,x,v.instance,S,_)));for(h in b){v=b[h];var E=v();E!==v.instance&&(v.instance=E,C.data("$"+h+"Controller",E),v===A&&(l.$$destroyBindings(),l.$$destroyBindings=oe(t,x,E,S,_)))}}for(h=0,f=c.length;f>h;h++)g=c[h],re(g,g.isolateScope?y:t,C,x,g.require&&p(g.directiveName,g.require,C,b),w);var O=t;for(T&&(T.template||null===T.templateUrl)&&(O=y),e&&e(O,r.childNodes,n,a),h=d.length-1;h>=0;h--)g=d[h],re(g,g.isolateScope?y:t,C,x,g.require&&p(g.directiveName,g.require,C,b),w)}h=h||{};for(var v,y,b,w,A,_=-Number.MAX_VALUE,$=h.newScopeDirective,k=h.controllerDirectives,T=h.newIsolateScopeDirective,F=h.templateDirective,O=h.nonTlbTranscludeDirective,N=!1,B=!1,P=h.hasElementTranscludeDirective,I=o.$$element=Ei(i),H=u,z=s,V=0,q=e.length;q>V;V++){v=e[V];var Y=v.$$start,X=v.$$end;if(Y&&(I=R(i,Y,X)),b=n,_>v.priority)break;if((A=v.scope)&&(v.templateUrl||(C(A)?(Z("new/isolated scope",T||$,v,I),T=v):Z("new/isolated scope",T,v,I)),$=$||v),y=v.name,!v.templateUrl&&v.controller&&(A=v.controller,k=k||ge(),Z("'"+y+"' controller",k[y],v,I),k[y]=v),(A=v.transclude)&&(N=!0,v.$$tlb||(Z("transclusion",O,v,I),O=v),"element"==A?(P=!0,_=v.priority,b=I,I=o.$$element=Ei(t.createComment(" "+y+": "+o[y]+" ")),i=I[0],ne(a,W(b),i),z=L(b,s,_,H&&H.name,{nonTlbTranscludeDirective:O})):(b=Ei(De(i)).contents(),I.empty(),z=L(b,s))),v.template)if(B=!0,Z("template",F,v,I),F=v,A=E(v.template)?v.template(I,o):v.template,A=ce(A),v.replace){if(H=v,b=Se(A)?[]:dt(Q(v.templateNamespace,Ui(A))),i=b[0],1!=b.length||i.nodeType!==Ki)throw Tr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");ne(a,I,i);var ee={$attr:{}},te=M(i,[],ee),ae=e.splice(V+1,e.length-(V+1));T&&j(te),e=e.concat(te).concat(ae),K(o,ee),q=e.length}else I.html(A);if(v.templateUrl)B=!0,Z("template",F,v,I),F=v,v.replace&&(H=v),g=G(e.splice(V,e.length-V),I,o,a,N&&z,c,d,{controllerDirectives:k,newScopeDirective:$!==v&&$,newIsolateScopeDirective:T,templateDirective:F,nonTlbTranscludeDirective:O}),q=e.length;else if(v.compile)try{w=v.compile(I,o,z),E(w)?f(null,w,Y,X):w&&f(w.pre,w.post,Y,X)}catch(le){r(le,J(I))}v.terminal&&(g.terminal=!0,_=Math.max(_,v.priority))}return g.scope=$&&$.scope===!0,g.transcludeOnThisElement=N,g.templateOnThisElement=B,g.transclude=z,h.hasElementTranscludeDirective=P,g}function j(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function V(t,n,i,o,s,a,l){if(n===s)return null;var d=null;if(u.hasOwnProperty(n))for(var h,f=e.get(n+c),m=0,g=f.length;g>m;m++)try{h=f[m],(b(o)||o>h.priority)&&-1!=h.restrict.indexOf(i)&&(a&&(h=p(h,{$$start:a,$$end:l})),t.push(h),d=h)}catch(v){r(v)}return d}function q(t){if(u.hasOwnProperty(t))for(var n,i=e.get(t+c),r=0,o=i.length;o>r;r++)if(n=i[r],n.multiElement)return!0;return!1}function K(e,t){var n=t.$attr,i=e.$attr,r=e.$$element;o(e,function(i,r){"$"!=r.charAt(0)&&(t[r]&&t[r]!==i&&(i+=("style"===r?";":" ")+t[r]),e.$set(r,i,!0,n[r]))}),o(t,function(t,o){"class"==o?(F(r,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==o?(r.attr("style",r.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==o.charAt(0)||e.hasOwnProperty(o)||(e[o]=t,i[o]=n[o])})}function G(e,t,n,i,r,a,l,u){var c,d,h=[],f=t[0],m=e.shift(),g=p(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=E(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,y=m.templateNamespace;return t.empty(),s(v).then(function(s){var p,b,w,x;if(s=ce(s),m.replace){if(w=Se(s)?[]:dt(Q(y,Ui(s))),p=w[0],1!=w.length||p.nodeType!==Ki)throw Tr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);b={$attr:{}},ne(i,t,p);var S=M(p,[],b);C(m.scope)&&j(S),e=S.concat(e),K(n,b)}else p=f,t.html(s);for(e.unshift(g),c=H(e,p,n,r,t,m,a,l,u),o(i,function(e,n){e==p&&(i[n]=t[0])}),d=N(t[0].childNodes,r);h.length;){var A=h.shift(),_=h.shift(),E=h.shift(),$=h.shift(),k=t[0];if(!A.$$destroyed){if(_!==f){var D=_.className;u.hasElementTranscludeDirective&&m.replace||(k=De(p)),ne(E,Ei(_),k),F(Ei(k),D)}x=c.transcludeOnThisElement?B(A,c.transclude,$):$,c(d,A,k,i,x,c)}}h=null}),function(e,t,n,i,r){var o=r;t.$$destroyed||(h?h.push(t,n,i,o):(c.transcludeOnThisElement&&(o=B(t,c.transclude,r)),c(d,t,n,i,o,c)))}}function Y(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function Z(e,t,n,i){function r(e){return e?" (module: "+e+")":""}if(t)throw Tr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,r(t.$$moduleName),n.name,r(n.$$moduleName),e,J(i))}function X(e,t){var n=i(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),i=!!t.length;return i&&L.$$addBindingClass(t),function(e,t){var r=t.parent();i||L.$$addBindingClass(r),L.$$addBindingInfo(r,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function Q(e,n){switch(e=wi(e||"html")){case"svg":case"math":var i=t.createElement("div");return i.innerHTML="<"+e+">"+n+"</"+e+">",i.childNodes[0].childNodes;default:return n}}function ee(e,t){if("srcdoc"==t)return $.HTML;var n=P(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?$.RESOURCE_URL:void 0}function te(e,t,n,r,o){var s=ee(e,r);o=y[r]||o;var a=i(n,!0,s,o);if(a){if("multiple"===r&&"select"===P(e))throw Tr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",J(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){var u=l.$$observers||(l.$$observers=ge());if(A.test(r))throw Tr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=l[r];c!==n&&(a=c&&i(c,!0,s,o),n=c),a&&(l[r]=a(e),(u[r]||(u[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||e).$watch(a,function(e,t){"class"===r&&e!=t?l.$updateClass(e,t):l.$set(r,e)}))}}}})}}function ne(e,n,i){var r,o,s=n[0],a=n.length,l=s.parentNode;if(e)for(r=0,o=e.length;o>r;r++)if(e[r]==s){e[r++]=i;for(var u=r,c=u+a-1,d=e.length;d>u;u++,c++)d>c?e[u]=e[c]:delete e[u];e.length-=a-1,e.context===s&&(e.context=i);break}l&&l.replaceChild(i,s);var h=t.createDocumentFragment();h.appendChild(s),Ei.hasData(s)&&(Ei(i).data(Ei(s).data()),$i?(Ri=!0,$i.cleanData([s])):delete Ei.cache[s[Ei.expando]]);for(var f=1,p=n.length;p>f;f++){var m=n[f];Ei(m).remove(),h.appendChild(m),delete n[f]}n[0]=i,n.length=1}function ie(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function re(e,t,n,i,o,s){try{e(t,n,i,o,s)}catch(a){r(a,J(n))}}function oe(e,t,n,r,s,l){var u;o(r,function(r,o){var l,c,d,h,f=r.attrName,p=r.optional,g=r.mode;switch(g){case"@":p||Ci.call(t,f)||(n[o]=t[f]=void 0),t.$observe(f,function(e){S(e)&&(n[o]=e)}),t.$$observers[f].$$scope=e,S(t[f])&&(n[o]=i(t[f])(e));break;case"=":if(!Ci.call(t,f)){if(p)break;t[f]=void 0}if(p&&!t[f])break;c=a(t[f]),h=c.literal?z:function(e,t){return e===t||e!==e&&t!==t},d=c.assign||function(){throw l=n[o]=c(e),Tr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",t[f],s.name)},l=n[o]=c(e);var v=function(t){return h(t,n[o])||(h(t,l)?d(e,t=n[o]):n[o]=t),l=t};v.$stateful=!0;var y;y=r.collection?e.$watchCollection(t[f],v):e.$watch(a(t[f],v),null,c.literal),u=u||[],u.push(y);break;case"&":if(c=t.hasOwnProperty(f)?a(t[f]):m,c===m&&p)break;n[o]=function(t){return c(e,t)}}});var c=u?function(){for(var e=0,t=u.length;t>e;++e)u[e]()}:m;return l&&c!==m?(l.$on("$destroy",c),m):c}var se=function(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;i>n;n++)r=o[n],this[r]=t[r]}else this.$attr={};this.$$element=e};se.prototype={$normalize:ut,$addClass:function(e){e&&e.length>0&&k.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&k.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=ct(e,t);n&&n.length&&k.addClass(this.$$element,n);var i=ct(t,e);i&&i.length&&k.removeClass(this.$$element,i)},$set:function(e,t,n,i){var s,a=this.$$element[0],l=We(a,e),u=Ve(e),c=e;if(l?(this.$$element.prop(e,t),i=l):u&&(this[u]=t,c=u),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=ue(e,"-"))),s=P(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=T(t,"src"===e);else if("img"===s&&"srcset"===e){for(var d="",h=Ui(t),f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(h)?f:/(,)/,m=h.split(p),g=Math.floor(m.length/2),v=0;g>v;v++){var y=2*v;d+=T(Ui(m[y]),!0),d+=" "+Ui(m[y+1])}var w=Ui(m[2*v]).split(/\s/);d+=T(Ui(w[0]),!0),2===w.length&&(d+=" "+Ui(w[1])),this[e]=t=d}n!==!1&&(null===t||b(t)?this.$$element.removeAttr(i):this.$$element.attr(i,t));var C=this.$$observers;C&&o(C[c],function(e){try{e(t)}catch(n){r(n)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=ge()),r=i[e]||(i[e]=[]);return r.push(t),v.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(e)||b(n[e])||t(n[e])}),function(){I(r,t)}}};var ae=i.startSymbol(),le=i.endSymbol(),ce="{{"==ae||"}}"==le?g:function(e){return e.replace(/\{\{/g,ae).replace(/}}/g,le)},he=/^ngAttr[A-Z]/;return L.$$addBindingInfo=_?function(e,t){var n=e.data("$binding")||[];Pi(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:m,L.$$addBindingClass=_?function(e){F(e,"ng-binding")}:m,L.$$addScopeInfo=_?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:m,L.$$addScopeClass=_?function(e,t){F(e,t?"ng-isolate-scope":"ng-scope")}:m,L}]}function ut(e){return xe(e.replace(Fr,""))}function ct(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var o=0;o<i.length;o++){for(var s=i[o],a=0;a<r.length;a++)if(s==r[a])continue e;n+=(n.length>0?" ":"")+s}return n}function dt(e){e=Ei(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===Zi&&Ti.call(e,t,1)}return e}function ht(e,t){if(t&&S(t))return t;if(S(e)){var n=Or.exec(e);if(n)return n[3]}}function ft(){var e={},t=!1;this.register=function(t,n){fe(t,"controller"),C(t)?d(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(r,o){function s(e,t,n,r){if(!e||!C(e.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}return function(i,a,l,u){var c,h,f,p;if(l=l===!0,u&&S(u)&&(p=u),S(i)){if(h=i.match(Or),!h)throw Lr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",i);f=h[1],p=p||h[3],i=e.hasOwnProperty(f)?e[f]:pe(a.$scope,f,!0)||(t?pe(o,f,!0):n),he(i,f,!0)}if(l){var m=(Pi(i)?i[i.length-1]:i).prototype;c=Object.create(m||null),p&&s(a,p,c,f||i.name);var g;return g=d(function(){var e=r.invoke(i,c,a,f);return e!==c&&(C(e)||E(e))&&(c=e,p&&s(a,p,c,f||i.name)),c},{instance:c,identifier:p})}return c=r.instantiate(i,a,f),p&&s(a,p,c,f||i.name),c}}]}function pt(){this.$get=["$window",function(e){return Ei(e.document)}]}function mt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function gt(e){return C(e)?_(e)?e.toISOString():K(e):e}function vt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return s(e,function(e,n){null===e||b(e)||(Pi(e)?o(e,function(e,i){t.push(ie(n)+"="+ie(gt(e)))}):t.push(ie(n)+"="+ie(gt(e))))}),t.join("&")}}}function yt(){this.$get=function(){return function(e){function t(e,i,r){null===e||b(e)||(Pi(e)?o(e,function(e,n){t(e,i+"["+(C(e)?n:"")+"]")}):C(e)&&!_(e)?s(e,function(e,n){t(e,i+(r?"":"[")+n+(r?"":"]"))}):n.push(ie(i)+"="+ie(gt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function bt(e,t){if(S(e)){var n=e.replace(Ir,"").trim();if(n){var i=t("Content-Type");(i&&0===i.indexOf(Br)||wt(n))&&(e=G(n))}}return e}function wt(e){var t=e.match(Rr);return t&&Pr[t[0]].test(e)}function Ct(e){function t(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}var n,i=ge();return S(e)?o(e.split("\n"),function(e){n=e.indexOf(":"),t(wi(Ui(e.substr(0,n))),Ui(e.substr(n+1)))}):C(e)&&o(e,function(e,n){t(wi(n),Ui(e))}),i}function xt(e){var t;return function(n){if(t||(t=Ct(e)),n){var i=t[wi(n)];return void 0===i&&(i=null),i}return t}}function St(e,t,n,i){return E(i)?i(e,t,n):(o(i,function(i){e=i(e,t,n)}),e)}function At(e){return e>=200&&300>e}function _t(){var e=this.defaults={transformResponse:[bt],transformRequest:[function(e){return!C(e)||T(e)||L(e)||F(e)?e:K(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:H(Mr),put:H(Mr),patch:H(Mr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return w(e)?(t=!!e,this):t};var r=!0;this.useLegacyPromiseExtensions=function(e){return w(e)?(r=!!e,this):r};var s=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,l,u,c,h,f){function p(t){function s(e){var t=d({},e);return e.data?t.data=St(e.data,e.headers,e.status,u.transformResponse):t.data=e.data,At(e.status)?t:h.reject(t)}function a(e,t){var n,i={};return o(e,function(e,r){E(e)?(n=e(t),null!=n&&(i[r]=n)):i[r]=e}),i}function l(t){var n,i,r,o=e.headers,s=d({},t.headers);o=d({},o.common,o[wi(t.method)]);e:for(n in o){i=wi(n);for(r in s)if(wi(r)===i)continue e;s[n]=o[n]}return a(s,H(t))}if(!Bi.isObject(t))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var u=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},t);u.headers=l(t),u.method=xi(u.method),u.paramSerializer=S(u.paramSerializer)?f.get(u.paramSerializer):u.paramSerializer;var c=function(t){var i=t.headers,r=St(t.data,xt(i),n,t.transformRequest);return b(r)&&o(i,function(e,t){"content-type"===wi(t)&&delete i[t]}),b(t.withCredentials)&&!b(e.withCredentials)&&(t.withCredentials=e.withCredentials),v(t,r).then(s,s)},p=[c,n],m=h.when(u);for(o(A,function(e){(e.request||e.requestError)&&p.unshift(e.request,e.requestError),(e.response||e.responseError)&&p.push(e.response,e.responseError)});p.length;){var g=p.shift(),y=p.shift();m=m.then(g,y)}return r?(m.success=function(e){return he(e,"fn"),m.then(function(t){e(t.data,t.status,t.headers,u)}),m},m.error=function(e){return he(e,"fn"),m.then(null,function(t){e(t.data,t.status,t.headers,u)}),m}):(m.success=Hr("success"),m.error=Hr("error")),m}function m(e){o(arguments,function(e){p[e]=function(t,n){return p(d({},n||{},{method:e,url:t}))}})}function g(e){o(arguments,function(e){p[e]=function(t,n,i){return p(d({},i||{},{method:e,url:t,data:n}))}})}function v(i,r){function o(e,n,i,r){function o(){s(n,e,i,r)}f&&(At(e)?f.put(A,[e,n,Ct(i),r]):f.remove(A)),t?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function s(e,t,n,r){t=t>=-1?t:0,(At(t)?g.resolve:g.reject)({data:e,status:t,headers:xt(n),config:i,statusText:r})}function u(e){s(e.data,e.status,H(e.headers()),e.statusText)}function d(){var e=p.pendingRequests.indexOf(i);-1!==e&&p.pendingRequests.splice(e,1)}var f,m,g=h.defer(),v=g.promise,S=i.headers,A=y(i.url,i.paramSerializer(i.params));if(p.pendingRequests.push(i),v.then(d,d),!i.cache&&!e.cache||i.cache===!1||"GET"!==i.method&&"JSONP"!==i.method||(f=C(i.cache)?i.cache:C(e.cache)?e.cache:x),f&&(m=f.get(A),w(m)?N(m)?m.then(u,u):Pi(m)?s(m[1],m[0],H(m[2]),m[3]):s(m,200,{},"OK"):f.put(A,v)),b(m)){var _=$n(i.url)?l()[i.xsrfCookieName||e.xsrfCookieName]:n;_&&(S[i.xsrfHeaderName||e.xsrfHeaderName]=_),a(i.method,A,r,o,S,i.timeout,i.withCredentials,i.responseType)}return v}function y(e,t){return t.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}var x=u("$http");e.paramSerializer=S(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var A=[];return o(s,function(e){A.unshift(S(e)?f.get(e):f.invoke(e))}),p.pendingRequests=[],m("get","delete","head","jsonp"),g("post","put","patch"),p.defaults=e,p}]}function Et(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function $t(){this.$get=["$browser","$window","$document","$xhrFactory",function(e,t,n,i){return kt(e,i,e.defer,t.angular.callbacks,n[0])}]}function kt(e,t,n,i,r){function s(e,t,n){var o=r.createElement("script"),s=null;return o.type="text/javascript",o.src=e,o.async=!0,s=function(e){ir(o,"load",s),ir(o,"error",s),r.body.removeChild(o),o=null;var a=-1,l="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),l=e.type,a="error"===e.type?404:200),n&&n(a,l)},nr(o,"load",s),nr(o,"error",s),r.body.appendChild(o),s}return function(r,a,l,u,c,d,h,f){function p(){y&&y(),C&&C.abort()}function g(t,i,r,o,s){w(A)&&n.cancel(A),y=C=null,t(i,r,o,s),e.$$completeOutstandingRequest(m)}if(e.$$incOutstandingRequestCount(),a=a||e.url(),"jsonp"==wi(r)){var v="_"+(i.counter++).toString(36);i[v]=function(e){i[v].data=e,i[v].called=!0};var y=s(a.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(e,t){g(u,e,i[v].data,"",t),i[v]=m})}else{var C=t(r,a);C.open(r,a,!0),o(c,function(e,t){w(e)&&C.setRequestHeader(t,e)}),C.onload=function(){var e=C.statusText||"",t="response"in C?C.response:C.responseText,n=1223===C.status?204:C.status;0===n&&(n=t?200:"file"==En(a).protocol?404:0),g(u,n,t,C.getAllResponseHeaders(),e)};var x=function(){g(u,-1,null,null,"")};if(C.onerror=x,C.onabort=x,h&&(C.withCredentials=!0),f)try{C.responseType=f}catch(S){if("json"!==f)throw S}C.send(b(l)?null:l)}if(d>0)var A=n(p,d);else N(d)&&d.then(p)}}function Dt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(e){return"\\\\\\"+e}function s(n){return n.replace(h,e).replace(f,t)}function a(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=K(e)}return e}function l(o,l,h,f){function p(e){try{return e=k(e),f&&!w(e)?e:a(e)}catch(t){i(zr.interr(o,t))}}f=!!f;for(var m,g,v,y=0,C=[],x=[],S=o.length,A=[],_=[];S>y;){if(-1==(m=o.indexOf(e,y))||-1==(g=o.indexOf(t,m+u))){y!==S&&A.push(s(o.substring(y)));break}y!==m&&A.push(s(o.substring(y,m))),v=o.substring(m+u,g),C.push(v),x.push(n(v,p)),y=g+c,_.push(A.length),A.push("")}if(h&&A.length>1&&zr.throwNoconcat(o),!l||C.length){var $=function(e){for(var t=0,n=C.length;n>t;t++){if(f&&b(e[t]))return;A[_[t]]=e[t]}return A.join("")},k=function(e){return h?r.getTrusted(h,e):r.valueOf(e)};return d(function(e){var t=0,n=C.length,r=new Array(n);try{for(;n>t;t++)r[t]=x[t](e);return $(r)}catch(s){i(zr.interr(o,s))}},{exp:o,expressions:C,$$watchDelegate:function(e,t){var n;return e.$watchGroup(x,function(i,r){var o=$(i);E(t)&&t.call(this,o,i!==r?n:o,e),n=o})}})}}var u=e.length,c=t.length,h=new RegExp(e.replace(/./g,o),"g"),f=new RegExp(t.replace(/./g,o),"g");return l.startSymbol=function(){return e},l.endSymbol=function(){return t},l}]}function Tt(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,i){function r(r,s,a,l){var u=arguments.length>4,c=u?W(arguments,4):[],d=t.setInterval,h=t.clearInterval,f=0,p=w(l)&&!l,m=(p?i:n).defer(),g=m.promise;return a=w(a)?a:0,g.then(null,null,u?function(){r.apply(null,c)}:r),g.$$intervalId=d(function(){m.notify(f++),a>0&&f>=a&&(m.resolve(f),h(g.$$intervalId),delete o[g.$$intervalId]),p||e.$apply()},s),o[g.$$intervalId]=m,g}var o={};return r.cancel=function(e){return e&&e.$$intervalId in o?(o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0):!1},r}]}function Ft(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ne(t[n]);return t.join("/")}function Lt(e,t){var n=En(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||Wr[n.protocol]||null}function Ot(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var i=En(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=ee(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Nt(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function Bt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Mt(e){return e.replace(/(#.+)|#$/,"$1")}function Rt(e){return e.substr(0,Bt(e).lastIndexOf("/")+1)}function Pt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function It(e,t,n){this.$$html5=!0,n=n||"",Lt(e,this),this.$$parse=function(e){var n=Nt(t,e);if(!S(n))throw Vr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Ot(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),n=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Ft(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s,a;return w(o=Nt(e,i))?(s=o,a=w(o=Nt(n,o))?t+(Nt("/",o)||o):e+s):w(o=Nt(t,i))?a=t+o:t==i+"/"&&(a=t),a&&this.$$parse(a),!!a}}function Ut(e,t,n){Lt(e,this),this.$$parse=function(i){function r(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),
r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var o,s=Nt(e,i)||Nt(t,i);b(s)||"#"!==s.charAt(0)?this.$$html5?o=s:(o="",b(s)&&(e=i,this.replace())):(o=Nt(n,s),b(o)&&(o=s)),Ot(o,this),this.$$path=r(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=te(this.$$search),i=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Ft(this.$$path)+(t?"?"+t:"")+i,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Bt(e)==Bt(t)?(this.$$parse(t),!0):!1}}function Ht(e,t,n){this.$$html5=!0,Ut.apply(this,arguments),this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,s;return e==Bt(i)?o=i:(s=Nt(t,i))?o=e+n+s:t===i+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=te(this.$$search),i=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Ft(this.$$path)+(t?"?"+t:"")+i,this.$$absUrl=e+n+this.$$url}}function zt(e){return function(){return this[e]}}function jt(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Wt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return w(t)?(e=t,this):e},this.html5Mode=function(e){return O(e)?(t.enabled=e,this):C(e)?(O(e.enabled)&&(t.enabled=e.enabled),O(e.requireBase)&&(t.requireBase=e.requireBase),O(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,s){function a(e,t,n){var r=u.url(),o=u.$$state;try{i.url(e,t,n),u.$$state=i.state()}catch(s){throw u.url(r),u.$$state=o,s}}function l(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,c,d,h=i.baseHref(),f=i.url();if(t.enabled){if(!h&&t.requireBase)throw Vr("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=Pt(f)+(h||"/"),c=r.history?It:Ht}else d=Bt(f),c=Ut;var p=Rt(d);u=new c(d,p,"#"+e),u.$$parseLinkUrl(f,f),u.$$state=i.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var r=Ei(e.target);"a"!==P(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var a=r.prop("href"),l=r.attr("href")||r.attr("xlink:href");C(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=En(a.animVal).href),m.test(a)||!a||r.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(a,l)&&(e.preventDefault(),u.absUrl()!=i.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),Mt(u.absUrl())!=Mt(f)&&i.url(u.absUrl(),!0);var g=!0;return i.onUrlChange(function(e,t){return b(Nt(p,e))?void(s.location.href=e):(n.$evalAsync(function(){var i,r=u.absUrl(),o=u.$$state;u.$$parse(e),u.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,o).defaultPrevented,u.absUrl()===e&&(i?(u.$$parse(r),u.$$state=o,a(r,!1,o)):(g=!1,l(r,o)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=Mt(i.url()),t=Mt(u.absUrl()),o=i.state(),s=u.$$replace,c=e!==t||u.$$html5&&r.history&&o!==u.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var t=u.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,u.$$state,o).defaultPrevented;u.absUrl()===t&&(i?(u.$$parse(e),u.$$state=o):(c&&a(t,s,o===u.$$state?null:u.$$state),l(e,o)))})),u.$$replace=!1}),u}]}function Vt(){var e=!0,t=this;this.debugEnabled=function(t){return w(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function r(e){var t=n.console||{},r=t[e]||t.log||m,s=!1;try{s=!!r.apply}catch(a){}return s?function(){var e=[];return o(arguments,function(t){e.push(i(t))}),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function qt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Kr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Kt(e,t){if(e+="",!S(e))throw Kr("iseccst","Cannot convert object to primitive value! Expression: {0}",t);return e}function Gt(e,t){if(e){if(e.constructor===e)throw Kr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Kr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Kr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Kr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Yt(e,t){if(e){if(e.constructor===e)throw Kr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Gr||e===Yr||e===Zr)throw Kr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Zt(e,t){if(e&&(e===0..constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor))throw Kr("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}function Xt(e,t){return"undefined"!=typeof e?e:t}function Jt(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function Qt(e,t){var n=e(t);return!n.$stateful}function en(e,t){var n,i;switch(e.type){case eo.Program:n=!0,o(e.body,function(e){en(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case eo.Literal:e.constant=!0,e.toWatch=[];break;case eo.UnaryExpression:en(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case eo.BinaryExpression:en(e.left,t),en(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case eo.LogicalExpression:en(e.left,t),en(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case eo.ConditionalExpression:en(e.test,t),en(e.alternate,t),en(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case eo.Identifier:e.constant=!1,e.toWatch=[e];break;case eo.MemberExpression:en(e.object,t),e.computed&&en(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case eo.CallExpression:n=e.filter?Qt(t,e.callee.name):!1,i=[],o(e.arguments,function(e){en(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&Qt(t,e.callee.name)?i:[e];break;case eo.AssignmentExpression:en(e.left,t),en(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case eo.ArrayExpression:n=!0,i=[],o(e.elements,function(e){en(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case eo.ObjectExpression:n=!0,i=[],o(e.properties,function(e){en(e.value,t),n=n&&e.value.constant,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case eo.ThisExpression:e.constant=!1,e.toWatch=[]}}function tn(e){if(1==e.length){var t=e[0].expression,i=t.toWatch;return 1!==i.length?i:i[0]!==t?i:n}}function nn(e){return e.type===eo.Identifier||e.type===eo.MemberExpression}function rn(e){return 1===e.body.length&&nn(e.body[0].expression)?{type:eo.AssignmentExpression,left:e.body[0].expression,right:{type:eo.NGValueParameter},operator:"="}:void 0}function on(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===eo.Literal||e.body[0].expression.type===eo.ArrayExpression||e.body[0].expression.type===eo.ObjectExpression)}function sn(e){return e.constant}function an(e,t){this.astBuilder=e,this.$filter=t}function ln(e,t){this.astBuilder=e,this.$filter=t}function un(e){return"constructor"==e}function cn(e){return E(e.valueOf)?e.valueOf():no.call(e)}function dn(){var e=ge(),t=ge();this.$get=["$filter",function(i){function r(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=cn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function s(e,t,i,o,s){var a,l=o.inputs;if(1===l.length){var u=r;return l=l[0],e.$watch(function(e){var t=l(e);return r(t,u)||(a=o(e,n,n,[t]),u=t&&cn(t)),a},t,i,s)}for(var c=[],d=[],h=0,f=l.length;f>h;h++)c[h]=r,d[h]=null;return e.$watch(function(e){for(var t=!1,i=0,s=l.length;s>i;i++){var u=l[i](e);(t||(t=!r(u,c[i])))&&(d[i]=u,c[i]=u&&cn(u))}return t&&(a=o(e,n,n,d)),a},t,i,s)}function a(e,t,n,i){var r,o;return r=e.$watch(function(e){return i(e)},function(e,n,i){o=e,E(t)&&t.apply(this,arguments),w(e)&&i.$$postDigest(function(){w(o)&&r()})},n)}function l(e,t,n,i){function r(e){var t=!0;return o(e,function(e){w(e)||(t=!1)}),t}var s,a;return s=e.$watch(function(e){return i(e)},function(e,n,i){a=e,E(t)&&t.call(this,e,n,i),r(e)&&i.$$postDigest(function(){r(a)&&s()})},n)}function u(e,t,n,i){var r;return r=e.$watch(function(e){return i(e)},function(e,n,i){E(t)&&t.apply(this,arguments),r()},n)}function c(e,t){if(!t)return e;var n=e.$$watchDelegate,i=n!==l&&n!==a,r=i?function(n,i,r,o){var s=e(n,i,r,o);return t(s,n,i)}:function(n,i,r,o){var s=e(n,i,r,o),a=t(s,n,i);return w(s)?a:s};return e.$$watchDelegate&&e.$$watchDelegate!==s?r.$$watchDelegate=e.$$watchDelegate:t.$stateful||(r.$$watchDelegate=s,r.inputs=e.inputs?e.inputs:[e]),r}var d=zi().noUnsafeEval,h={csp:d,expensiveChecks:!1},f={csp:d,expensiveChecks:!0};return function(n,r,o){var d,p,g;switch(typeof n){case"string":n=n.trim(),g=n;var v=o?t:e;if(d=v[g],!d){":"===n.charAt(0)&&":"===n.charAt(1)&&(p=!0,n=n.substring(2));var y=o?f:h,b=new Qr(y),w=new to(b,i,y);d=w.parse(n),d.constant?d.$$watchDelegate=u:p?d.$$watchDelegate=d.literal?l:a:d.inputs&&(d.$$watchDelegate=s),v[g]=d}return c(d,r);case"function":return c(n,r);default:return m}}}]}function hn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return pn(function(t){e.$evalAsync(t)},t)}]}function fn(){this.$get=["$browser","$exceptionHandler",function(e,t){return pn(function(t){e.defer(t)},t)}]}function pn(e,t){function r(e,t,n){function i(t){return function(n){r||(r=!0,t.call(e,n))}}var r=!1;return[i(t),i(n)]}function s(){this.$$state={status:0}}function a(e,t){return function(n){t.call(e,n)}}function l(e){var i,r,o;o=e.pending,e.processScheduled=!1,e.pending=n;for(var s=0,a=o.length;a>s;++s){r=o[s][0],i=o[s][e.status];try{E(i)?r.resolve(i(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(l){r.reject(l),t(l)}}}function u(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){l(t)}))}function c(){this.promise=new s,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}function h(e){var t=new c,n=0,i=Pi(e)?[]:{};return o(e,function(e,r){n++,y(e).then(function(e){i.hasOwnProperty(r)||(i[r]=e,--n||t.resolve(i))},function(e){i.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(i),t.promise}var f=i("$q",TypeError),p=function(){return new c};d(s.prototype,{then:function(e,t,n){if(b(e)&&b(t)&&b(n))return this;var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&u(this.$$state),i.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return v(t,!0,e)},function(t){return v(t,!1,e)},t)}}),d(c.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(f("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,i;i=r(this,this.$$resolve,this.$$reject);try{(C(e)||E(e))&&(n=e&&e.then),E(n)?(this.promise.$$state.status=-1,n.call(e,i[0],i[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,u(this.promise.$$state))}catch(o){i[1](o),t(o)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;this.promise.$$state.status<=0&&i&&i.length&&e(function(){for(var e,r,o=0,s=i.length;s>o;o++){r=i[o][0],e=i[o][3];try{r.notify(E(e)?e(n):n)}catch(a){t(a)}}})}});var m=function(e){var t=new c;return t.reject(e),t.promise},g=function(e,t){var n=new c;return t?n.resolve(e):n.reject(e),n.promise},v=function(e,t,n){var i=null;try{E(n)&&(i=n())}catch(r){return g(r,!1)}return N(i)?i.then(function(){return g(e,t)},function(e){return g(e,!1)}):g(e,t)},y=function(e,t,n,i){var r=new c;return r.resolve(e),r.promise.then(t,n,i)},w=y,x=function S(e){function t(e){i.resolve(e)}function n(e){i.reject(e)}if(!E(e))throw f("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof S))return new S(e);var i=new c;return e(t,n),i.promise};return x.defer=p,x.reject=m,x.when=y,x.resolve=w,x.all=h,x}function mn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=r,o}]}function gn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=l(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=i("$rootScope"),s=null,a=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,u,c,d){function h(e){e.currentScope.$$destroyed=!0}function f(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(e){if(A.$$phase)throw n("inprog","{0} already in progress",A.$$phase);A.$$phase=e}function g(){A.$$phase=null}function v(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function y(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function x(){for(;k.length;)try{k.shift()()}catch(e){u(e)}a=null}function S(){null===a&&(a=d.defer(function(){A.$apply(x)}))}f.prototype={constructor:f,$new:function(t,n){var i;return n=n||this,t?(i=new f,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),i=new this.$$ChildScope),i.$parent=n,i.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=i,n.$$childTail=i):n.$$childHead=n.$$childTail=i,(t||n!=this)&&i.$on("$destroy",h),i},$watch:function(e,t,n,i){var r=c(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,n,r,e);var o=this,a=o.$$watchers,l={fn:t,last:w,get:r,exp:i||e,eq:!!n};return s=null,E(t)||(l.fn=m),a||(a=o.$$watchers=[]),a.unshift(l),v(this,1),function(){I(a,l)>=0&&v(o,-1),s=null}},$watchGroup:function(e,t){function n(){l=!1,u?(u=!1,t(r,r,a)):t(r,i,a)}var i=new Array(e.length),r=new Array(e.length),s=[],a=this,l=!1,u=!0;if(!e.length){var c=!0;return a.$evalAsync(function(){c&&t(r,r,a)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){r[0]=e,i[0]=n,t(r,e===n?r:i,o)}):(o(e,function(e,t){var o=a.$watch(e,function(e,o){r[t]=e,i[t]=o,l||(l=!0,a.$evalAsync(n))});s.push(o)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,i,a,l;if(!b(o)){if(C(o))if(r(o)){s!==f&&(s=f,g=s.length=0,d++),t=o.length,g!==t&&(d++,s.length=g=t);for(var u=0;t>u;u++)l=s[u],a=o[u],i=l!==l&&a!==a,i||l===a||(d++,s[u]=a)}else{s!==p&&(s=p={},g=0,d++),t=0;for(n in o)Ci.call(o,n)&&(t++,a=o[n],l=s[n],n in s?(i=l!==l&&a!==a,i||l===a||(d++,s[n]=a)):(g++,s[n]=a,d++));if(g>t){d++;for(n in s)Ci.call(o,n)||(g--,delete s[n])}}else s!==o&&(s=o,d++);return d}}function i(){if(m?(m=!1,t(o,o,l)):t(o,a,l),u)if(C(o))if(r(o)){a=new Array(o.length);for(var e=0;e<o.length;e++)a[e]=o[e]}else{a={};for(var n in o)Ci.call(o,n)&&(a[n]=o[n])}else a=o}n.$stateful=!0;var o,s,a,l=this,u=t.length>1,d=0,h=c(e,n),f=[],p={},m=!0,g=0;return this.$watch(h,i)},$digest:function(){var e,i,r,o,l,c,h,f,m,v,y=t,b=this,C=[];p("$digest"),d.$$checkUrlChange(),this===A&&null!==a&&(d.defer.cancel(a),x()),s=null;do{for(c=!1,f=b;_.length;){try{v=_.shift(),v.scope.$eval(v.expression,v.locals)}catch(S){u(S)}s=null}e:do{if(o=f.$$watchers)for(l=o.length;l--;)try{if(e=o[l])if((i=e.get(f))===(r=e.last)||(e.eq?z(i,r):"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))){if(e===s){c=!1;break e}}else c=!0,s=e,e.last=e.eq?U(i,null):i,e.fn(i,r===w?i:r,f),5>y&&(m=4-y,C[m]||(C[m]=[]),C[m].push({msg:E(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:i,oldVal:r}))}catch(S){u(S)}if(!(h=f.$$watchersCount&&f.$$childHead||f!==b&&f.$$nextSibling))for(;f!==b&&!(h=f.$$nextSibling);)f=f.$parent}while(f=h);if((c||_.length)&&!y--)throw g(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,C)}while(c||_.length);for(g();$.length;)try{$.shift()()}catch(S){u(S)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===A&&d.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=m,this.$on=this.$watch=this.$watchGroup=function(){return m},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){A.$$phase||_.length||d.defer(function(){_.length&&A.$digest()}),_.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){$.push(e)},$apply:function(e){try{p("$apply");try{return this.$eval(e)}finally{g()}}catch(t){u(t)}finally{try{A.$digest()}catch(t){throw u(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&k.push(t),S()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,y(r,1,e))}},$emit:function(e,t){var n,i,r,o=[],s=this,a=!1,l={name:e,targetScope:s,stopPropagation:function(){a=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=j([l],arguments,1);do{for(n=s.$$listeners[e]||o,l.currentScope=s,i=0,r=n.length;r>i;i++)if(n[i])try{n[i].apply(null,c)}catch(d){u(d)}else n.splice(i,1),i--,r--;if(a)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(e,t){var n=this,i=n,r=n,o={name:e,targetScope:n,preventDefault:function(){o.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return o;for(var s,a,l,c=j([o],arguments,1);i=r;){for(o.currentScope=i,s=i.$$listeners[e]||[],a=0,l=s.length;l>a;a++)if(s[a])try{s[a].apply(null,c)}catch(d){u(d)}else s.splice(a,1),a--,l--;if(!(r=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(r=i.$$nextSibling);)i=i.$parent}return o.currentScope=null,o}};var A=new f,_=A.$$asyncQueue=[],$=A.$$postDigestQueue=[],k=A.$$applyAsyncQueue=[];return A}]}function vn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return w(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return w(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,o=i?t:e;return r=En(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function yn(e){if("self"===e)return e;if(S(e)){if(e.indexOf("***")>-1)throw io("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Hi(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if($(e))return new RegExp("^"+e.source+"$");throw io("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function bn(e){var t=[];return w(e)&&o(e,function(e){t.push(yn(e))}),t}function wn(){this.SCE_CONTEXTS=ro;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=bn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=bn(e)),t},this.$get=["$injector",function(n){function i(e,t){return"self"===e?$n(t):!!e.exec(t.href)}function r(n){var r,o,s=En(n.toString()),a=!1;for(r=0,o=e.length;o>r;r++)if(i(e[r],s)){a=!0;break}if(a)for(r=0,o=t.length;o>r;r++)if(i(t[r],s)){a=!1;break}return a}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var n=d.hasOwnProperty(e)?d[e]:null;if(!n)throw io("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||b(t)||""===t)return t;if("string"!=typeof t)throw io("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function a(e){return e instanceof c?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||b(t)||""===t)return t;var n=d.hasOwnProperty(e)?d[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===ro.RESOURCE_URL){if(r(t))return t;throw io("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===ro.HTML)return u(t);throw io("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw io("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var c=o(),d={};return d[ro.HTML]=o(c),d[ro.CSS]=o(c),d[ro.URL]=o(c),d[ro.JS]=o(c),d[ro.RESOURCE_URL]=o(d[ro.URL]),{trustAs:s,getTrusted:l,valueOf:a}}]}function Cn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>_i)throw io("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=H(ro);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=g),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,s=i.getTrusted,a=i.trustAs;return o(ro,function(e,t){var n=wi(t);i[xe("parse_as_"+n)]=function(t){return r(e,t)},i[xe("get_trusted_"+n)]=function(t){return s(e,t)},i[xe("trust_as_"+n)]=function(t){return a(e,t)}}),i}]}function xn(){this.$get=["$window","$document",function(e,t){var n,i,r={},o=f((/android (\d+)/.exec(wi((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),a=t[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,u=a.body&&a.body.style,c=!1,d=!1;if(u){for(var h in u)if(i=l.exec(h)){n=i[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),c=!!("transition"in u||n+"Transition"in u),d=!!("animation"in u||n+"Animation"in u),!o||c&&d||(c=S(u.webkitTransition),d=S(u.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>o||s),hasEvent:function(e){if("input"===e&&11>=_i)return!1;if(b(r[e])){var t=a.createElement("div");r[e]="on"+e in t}return r[e]},csp:zi(),vendorPrefix:n,transitions:c,animations:d,android:o}}]}function Sn(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,i){function r(o,s){function a(e){if(!s)throw Tr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",o,e.status,e.statusText);return n.reject(e)}r.totalPendingRequests++,S(o)&&e.get(o)||(o=i.getTrustedResourceUrl(o));var l=t.defaults&&t.defaults.transformResponse;Pi(l)?l=l.filter(function(e){return e!==bt}):l===bt&&(l=null);var u={cache:e,transformResponse:l};return t.get(o,u)["finally"](function(){r.totalPendingRequests--}).then(function(t){return e.put(o,t.data),t.data},a)}return r.totalPendingRequests=0,r}]}function An(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),r=[];return o(i,function(e){var i=Bi.element(e).data("$binding");i&&o(i,function(i){if(n){var o=new RegExp("(^|\\s)"+Hi(t)+"(\\s|\\||$)");o.test(i)&&r.push(e)}else-1!=i.indexOf(t)&&r.push(e)})}),r},i.findModels=function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=n?"=":"*=",s="["+i[r]+"model"+o+'"'+t+'"]',a=e.querySelectorAll(s);if(a.length)return a}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function _n(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function o(o,a,l){E(o)||(l=a,a=o,o=m);var u,c=W(arguments,3),d=w(l)&&!l,h=(d?i:n).defer(),f=h.promise;return u=t.defer(function(){try{h.resolve(o.apply(null,c))}catch(t){h.reject(t),r(t)}finally{delete s[f.$$timeoutId]}d||e.$apply()},a),f.$$timeoutId=u,s[u]=h,f}var s={};return o.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function En(e){var t=e;return _i&&(oo.setAttribute("href",t),t=oo.href),oo.setAttribute("href",t),{href:oo.href,protocol:oo.protocol?oo.protocol.replace(/:$/,""):"",host:oo.host,search:oo.search?oo.search.replace(/^\?/,""):"",hash:oo.hash?oo.hash.replace(/^#/,""):"",hostname:oo.hostname,port:oo.port,pathname:"/"===oo.pathname.charAt(0)?oo.pathname:"/"+oo.pathname}}function $n(e){var t=S(e)?En(e):e;return t.protocol===so.protocol&&t.host===so.host}function kn(){this.$get=v(e)}function Dn(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var n=e[0]||{},i={},r="";return function(){var e,o,s,a,l,u=n.cookie||"";if(u!==r)for(r=u,e=r.split("; "),i={},s=0;s<e.length;s++)o=e[s],a=o.indexOf("="),a>0&&(l=t(o.substring(0,a)),b(i[l])&&(i[l]=t(o.substring(a+1))));return i}}function Tn(){this.$get=Dn}function Fn(e){function t(i,r){if(C(i)){var s={};return o(i,function(e,n){s[n]=t(n,e)}),s}return e.factory(i+n,r)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Mn),t("date",Yn),t("filter",Ln),t("json",Zn),t("limitTo",Xn),t("lowercase",ho),t("number",Rn),t("orderBy",Jn),t("uppercase",fo)}function Ln(){return function(e,t,n){if(!r(e)){if(null==e)return e;throw i("filter")("notarray","Expected array but received: {0}",e)}var o,s,a=Bn(t);switch(a){case"function":o=t;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":o=On(t,n,s);break;default:return e}return Array.prototype.filter.call(e,o)}}function On(e,t,n){var i,r=C(e)&&"$"in e;return t===!0?t=z:E(t)||(t=function(e,t){return b(e)?!1:null===e||null===t?e===t:C(t)||C(e)&&!y(e)?!1:(e=wi(""+e),t=wi(""+t),-1!==e.indexOf(t))}),i=function(i){return r&&!C(i)?Nn(i,e.$,t,!1):Nn(i,e,t,n)}}function Nn(e,t,n,i,r){var o=Bn(e),s=Bn(t);if("string"===s&&"!"===t.charAt(0))return!Nn(e,t.substring(1),n,i);if(Pi(e))return e.some(function(e){return Nn(e,t,n,i)});switch(o){case"object":var a;if(i){for(a in e)if("$"!==a.charAt(0)&&Nn(e[a],t,n,!0))return!0;return r?!1:Nn(e,t,n,!1)}if("object"===s){for(a in t){var l=t[a];if(!E(l)&&!b(l)){var u="$"===a,c=u?e:e[a];if(!Nn(c,l,n,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Bn(e){return null===e?"null":typeof e}function Mn(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return b(n)&&(n=t.CURRENCY_SYM),b(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:Pn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Rn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Pn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Pn(e,t,n,i,r){if(C(e))return"";var o=0>e;e=Math.abs(e);var s=e===1/0;if(!s&&!isFinite(e))return"";var a=e+"",l="",u=!1,c=[];if(s&&(l="∞"),!s&&-1!==a.indexOf("e")){var d=a.match(/([\d\.]+)e(-?)(\d+)/);d&&"-"==d[2]&&d[3]>r+1?e=0:(l=a,u=!0)}if(s||u)r>0&&1>e&&(l=e.toFixed(r),e=parseFloat(l),l=l.replace(ao,i));else{var h=(a.split(ao)[1]||"").length;b(r)&&(r=Math.min(Math.max(t.minFrac,h),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+r)).toString()+"e"+-r);var f=(""+e).split(ao),p=f[0];f=f[1]||"";var m,g=0,v=t.lgSize,y=t.gSize;if(p.length>=v+y)for(g=p.length-v,m=0;g>m;m++)(g-m)%y===0&&0!==m&&(l+=n),l+=p.charAt(m);for(m=g;m<p.length;m++)(p.length-m)%v===0&&0!==m&&(l+=n),l+=p.charAt(m);for(;f.length<r;)f+="0";r&&"0"!==r&&(l+=i+f.substr(0,r))}return 0===e&&(o=!1),c.push(o?t.negPre:t.posPre,l,o?t.negSuf:t.posSuf),c.join("")}function In(e,t,n){var i="";for(0>e&&(i="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),i+e}function Un(e,t,n,i){return n=n||0,function(r){var o=r["get"+e]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),In(o,t,i)}}function Hn(e,t){return function(n,i){var r=n["get"+e](),o=xi(t?"SHORT"+e:e);return i[o][r]}}function zn(e,t,n){var i=-1*n,r=i>=0?"+":"";return r+=In(Math[i>0?"floor":"ceil"](i/60),2)+In(Math.abs(i%60),2)}function jn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function Wn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Vn(e){return function(t){var n=jn(t.getFullYear()),i=Wn(t),r=+i-+n,o=1+Math.round(r/6048e5);return In(o,e)}}function qn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Kn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Gn(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function Yn(e){function t(e){var t;if(t=e.match(n)){var i=new Date(0),r=0,o=0,s=t[8]?i.setUTCFullYear:i.setFullYear,a=t[8]?i.setUTCHours:i.setHours;t[9]&&(r=f(t[9]+t[10]),o=f(t[9]+t[11])),s.call(i,f(t[1]),f(t[2])-1,f(t[3]));var l=f(t[4]||0)-r,u=f(t[5]||0)-o,c=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return a.call(i,l,u,c,d),i}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var s,a,l="",u=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,S(n)&&(n=co.test(n)?f(n):t(n)),A(n)&&(n=new Date(n)),!_(n)||!isFinite(n.getTime()))return n;for(;i;)a=uo.exec(i),a?(u=j(u,a,1),i=u.pop()):(u.push(i),i=null);var c=n.getTimezoneOffset();return r&&(c=Y(r,n.getTimezoneOffset()),n=X(n,r,!0)),o(u,function(t){s=lo[t],l+=s?s(n,e.DATETIME_FORMATS,c):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function Zn(){return function(e,t){return b(t)&&(t=2),K(e,t)}}function Xn(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):f(t),isNaN(t)?e:(A(e)&&(e=e.toString()),Pi(e)||S(e)?(n=!n||isNaN(n)?0:f(n),n=0>n&&n>=-e.length?e.length+n:n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function Jn(e){function t(t,n){return n=n?-1:1,t.map(function(t){var i=1,r=g;if(E(t))r=t;else if(S(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(i="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var o=r();r=function(e){return e[o]}}return{get:r,descending:i*n}})}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function i(e,t){return"function"==typeof e.valueOf&&(e=e.valueOf(),n(e))?e:y(e)&&(e=e.toString(),n(e))?e:t}function o(e,t){var n=typeof e;return null===e?(n="string",e="null"):"string"===n?e=e.toLowerCase():"object"===n&&(e=i(e,t)),{value:e,type:n
}}function s(e,t){var n=0;return e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}return function(e,n,i){function a(e,t){return{value:e,predicateValues:u.map(function(n){return o(n.get(e),t)})}}function l(e,t){for(var n=0,i=0,r=u.length;r>i&&!(n=s(e.predicateValues[i],t.predicateValues[i])*u[i].descending);++i);return n}if(!r(e))return e;Pi(n)||(n=[n]),0===n.length&&(n=["+"]);var u=t(n,i);u.push({get:function(){return{}},descending:i?-1:1});var c=Array.prototype.map.call(e,a);return c.sort(l),e=c.map(function(e){return e.value})}}function Qn(e){return E(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function ei(e,t){e.$name=t}function ti(e,t,i,r,s){var a=this,l=[];a.$error={},a.$$success={},a.$pending=n,a.$name=s(t.name||t.ngForm||"")(i),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,a.$$parentForm=go,a.$rollbackViewValue=function(){o(l,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){o(l,function(e){e.$commitViewValue()})},a.$addControl=function(e){fe(e.$name,"input"),l.push(e),e.$name&&(a[e.$name]=e),e.$$parentForm=a},a.$$renameControl=function(e,t){var n=e.$name;a[n]===e&&delete a[n],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],o(a.$pending,function(t,n){a.$setValidity(n,null,e)}),o(a.$error,function(t,n){a.$setValidity(n,null,e)}),o(a.$$success,function(t,n){a.$setValidity(n,null,e)}),I(l,e),e.$$parentForm=go},gi({ctrl:this,$element:e,set:function(e,t,n){var i=e[t];if(i){var r=i.indexOf(n);-1===r&&i.push(n)}else e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(I(i,n),0===i.length&&delete e[t])},$animate:r}),a.$setDirty=function(){r.removeClass(e,Jo),r.addClass(e,Qo),a.$dirty=!0,a.$pristine=!1,a.$$parentForm.$setDirty()},a.$setPristine=function(){r.setClass(e,Jo,Qo+" "+vo),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,o(l,function(e){e.$setPristine()})},a.$setUntouched=function(){o(l,function(e){e.$setUntouched()})},a.$setSubmitted=function(){r.addClass(e,vo),a.$submitted=!0,a.$$parentForm.$setSubmitted()}}function ni(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function ii(e,t,n,i,r,o){ri(e,t,n,i,r,o),ni(i)}function ri(e,t,n,i,r,o){var s=wi(t[0].type);if(!r.android){var a=!1;t.on("compositionstart",function(e){a=!0}),t.on("compositionend",function(){a=!1,l()})}var l=function(e){if(u&&(o.defer.cancel(u),u=null),!a){var r=t.val(),l=e&&e.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(r=Ui(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,l)}};if(r.hasEvent("input"))t.on("input",l);else{var u,c=function(e,t,n){u||(u=o.defer(function(){u=null,t&&t.value===n||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||c(e,this,this.value)}),r.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",l),i.$render=function(){var e=i.$isEmpty(i.$viewValue)?"":i.$viewValue;t.val()!==e&&t.val(e)}}function oi(e,t){if(_(e))return e;if(S(e)){$o.lastIndex=0;var n=$o.exec(e);if(n){var i=+n[1],r=+n[2],o=0,s=0,a=0,l=0,u=jn(i),c=7*(r-1);return t&&(o=t.getHours(),s=t.getMinutes(),a=t.getSeconds(),l=t.getMilliseconds()),new Date(i,0,u.getDate()+c,o,s,a,l)}}return NaN}function si(e,t){return function(n,i){var r,s;if(_(n))return n;if(S(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Co.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n))return r.shift(),s=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(r,function(e,n){n<t.length&&(s[t[n]]=+e)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function ai(e,t,i,r){return function(o,s,a,l,u,c,d){function h(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return w(e)&&!_(e)?i(e)||n:e}li(o,s,a,l),ri(o,s,a,l,u,c);var p,m=l&&l.$options&&l.$options.timezone;if(l.$$parserName=e,l.$parsers.push(function(e){if(l.$isEmpty(e))return null;if(t.test(e)){var r=i(e,p);return m&&(r=X(r,m)),r}return n}),l.$formatters.push(function(e){if(e&&!_(e))throw is("datefmt","Expected `{0}` to be a date",e);return h(e)?(p=e,p&&m&&(p=X(p,m,!0)),d("date")(e,r,m)):(p=null,"")}),w(a.min)||a.ngMin){var g;l.$validators.min=function(e){return!h(e)||b(g)||i(e)>=g},a.$observe("min",function(e){g=f(e),l.$validate()})}if(w(a.max)||a.ngMax){var v;l.$validators.max=function(e){return!h(e)||b(v)||i(e)<=v},a.$observe("max",function(e){v=f(e),l.$validate()})}}}function li(e,t,i,r){var o=t[0],s=r.$$hasNativeValidators=C(o.validity);s&&r.$parsers.push(function(e){var i=t.prop(bi)||{};return i.badInput&&!i.typeMismatch?n:e})}function ui(e,t,i,r,o,s){if(li(e,t,i,r),ri(e,t,i,r,o,s),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:Ao.test(e)?parseFloat(e):n}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!A(e))throw is("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),w(i.min)||i.ngMin){var a;r.$validators.min=function(e){return r.$isEmpty(e)||b(a)||e>=a},i.$observe("min",function(e){w(e)&&!A(e)&&(e=parseFloat(e,10)),a=A(e)&&!isNaN(e)?e:n,r.$validate()})}if(w(i.max)||i.ngMax){var l;r.$validators.max=function(e){return r.$isEmpty(e)||b(l)||l>=e},i.$observe("max",function(e){w(e)&&!A(e)&&(e=parseFloat(e,10)),l=A(e)&&!isNaN(e)?e:n,r.$validate()})}}function ci(e,t,n,i,r,o){ri(e,t,n,i,r,o),ni(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||xo.test(n)}}function di(e,t,n,i,r,o){ri(e,t,n,i,r,o),ni(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||So.test(n)}}function hi(e,t,n,i){b(n.name)&&t.attr("name",l());var r=function(e){t[0].checked&&i.$setViewValue(n.value,e&&e.type)};t.on("click",r),i.$render=function(){var e=n.value;t[0].checked=e==i.$viewValue},n.$observe("value",i.$render)}function fi(e,t,n,i,r){var o;if(w(i)){if(o=e(i),!o.constant)throw is("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return r}function pi(e,t,n,i,r,o,s,a){var l=fi(a,e,"ngTrueValue",n.ngTrueValue,!0),u=fi(a,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){i.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return e===!1},i.$formatters.push(function(e){return z(e,l)}),i.$parsers.push(function(e){return e?l:u})}function mi(e,t){return e="ngClass"+e,["$animate",function(n){function i(e,t){var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r==t[o])continue e;n.push(r)}return n}function r(e){var t=[];return Pi(e)?(o(e,function(e){t=t.concat(r(e))}),t):S(e)?e.split(" "):C(e)?(o(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(s,a,l){function u(e){var t=d(e,1);l.$addClass(t)}function c(e){var t=d(e,-1);l.$removeClass(t)}function d(e,t){var n=a.data("$classCounts")||ge(),i=[];return o(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&i.push(e))}),a.data("$classCounts",n),i.join(" ")}function h(e,t){var r=i(t,e),o=i(e,t);r=d(r,1),o=d(o,-1),r&&r.length&&n.addClass(a,r),o&&o.length&&n.removeClass(a,o)}function f(e){if(t===!0||s.$index%2===t){var n=r(e||[]);if(p){if(!z(e,p)){var i=r(p);h(i,n)}}else u(n)}p=H(e)}var p;s.$watch(l[e],f,!0),l.$observe("class",function(t){f(s.$eval(l[e]))}),"ngClass"!==e&&s.$watch("$index",function(n,i){var o=1&n;if(o!==(1&i)){var a=r(s.$eval(l[e]));o===t?u(a):c(a)}})}}}]}function gi(e){function t(e,t,l){b(t)?i("$pending",e,l):r("$pending",e,l),O(t)?t?(d(a.$error,e,l),c(a.$$success,e,l)):(c(a.$error,e,l),d(a.$$success,e,l)):(d(a.$error,e,l),d(a.$$success,e,l)),a.$pending?(o(ns,!0),a.$valid=a.$invalid=n,s("",null)):(o(ns,!1),a.$valid=vi(a.$error),a.$invalid=!a.$valid,s("",a.$valid));var u;u=a.$pending&&a.$pending[e]?n:a.$error[e]?!1:a.$$success[e]?!0:null,s(e,u),a.$$parentForm.$setValidity(e,u,a)}function i(e,t,n){a[e]||(a[e]={}),c(a[e],t,n)}function r(e,t,i){a[e]&&d(a[e],t,i),vi(a[e])&&(a[e]=n)}function o(e,t){t&&!u[e]?(h.addClass(l,e),u[e]=!0):!t&&u[e]&&(h.removeClass(l,e),u[e]=!1)}function s(e,t){e=e?"-"+ue(e,"-"):"",o(Zo+e,t===!0),o(Xo+e,t===!1)}var a=e.ctrl,l=e.$element,u={},c=e.set,d=e.unset,h=e.$animate;u[Xo]=!(u[Zo]=l.hasClass(Zo)),a.$setValidity=t}function vi(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var yi=/^\/(.+)\/([a-z]*)$/,bi="validity",wi=function(e){return S(e)?e.toLowerCase():e},Ci=Object.prototype.hasOwnProperty,xi=function(e){return S(e)?e.toUpperCase():e},Si=function(e){return S(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Ai=function(e){return S(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(wi=Si,xi=Ai);var _i,Ei,$i,ki,Di=[].slice,Ti=[].splice,Fi=[].push,Li=Object.prototype.toString,Oi=Object.getPrototypeOf,Ni=i("ng"),Bi=e.angular||(e.angular={}),Mi=0;_i=t.documentMode,m.$inject=[],g.$inject=[];var Ri,Pi=Array.isArray,Ii=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Ui=function(e){return S(e)?e.trim():e},Hi=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},zi=function(){function e(){try{return new Function(""),!1}catch(e){return!0}}if(!w(zi.rules)){var n=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]");if(n){var i=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");zi.rules={noUnsafeEval:!i||-1!==i.indexOf("no-unsafe-eval"),noInlineStyle:!i||-1!==i.indexOf("no-inline-style")}}else zi.rules={noUnsafeEval:e(),noInlineStyle:!1}}return zi.rules},ji=function(){if(w(ji.name_))return ji.name_;var e,n,i,r,o=Wi.length;for(n=0;o>n;++n)if(i=Wi[n],e=t.querySelector("["+i.replace(":","\\:")+"jq]")){r=e.getAttribute(i+"jq");break}return ji.name_=r},Wi=["ng-","data-ng-","ng:","x-ng-"],Vi=/[A-Z]/g,qi=!1,Ki=1,Gi=2,Yi=3,Zi=8,Xi=9,Ji=11,Qi={full:"1.4.7",major:1,minor:4,dot:7,codeName:"dark-luminescence"};ke.expando="ng339";var er=ke.cache={},tr=1,nr=function(e,t,n){e.addEventListener(t,n,!1)},ir=function(e,t,n){e.removeEventListener(t,n,!1)};ke._data=function(e){return this.cache[e[this.expando]]||{}};var rr=/([\:\-\_]+(.))/g,or=/^moz([A-Z])/,sr={mouseleave:"mouseout",mouseenter:"mouseover"},ar=i("jqLite"),lr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ur=/<|&#?\w+;/,cr=/<([\w:-]+)/,dr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,hr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};hr.optgroup=hr.option,hr.tbody=hr.tfoot=hr.colgroup=hr.caption=hr.thead,hr.th=hr.td;var fr=ke.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),ke(e).on("load",i))},toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Ei(e>=0?this[e]:this[this.length+e])},length:0,push:Fi,sort:[].sort,splice:[].splice},pr={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){pr[wi(e)]=e});var mr={};o("input,select,option,textarea,button,form,details".split(","),function(e){mr[e]=!0});var gr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:Ne,removeData:Le,hasData:_e},function(e,t){ke[t]=e}),o({data:Ne,inheritedData:Ue,scope:function(e){return Ei.data(e,"$scope")||Ue(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Ei.data(e,"$isolateScope")||Ei.data(e,"$isolateScopeNoTemplate")},controller:Ie,injector:function(e){return Ue(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Be,css:function(e,t,n){return t=xe(t),w(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,i){var r=e.nodeType;if(r!==Yi&&r!==Gi&&r!==Zi){var o=wi(t);if(pr[o]){if(!w(i))return e[t]||(e.attributes.getNamedItem(t)||m).specified?o:n;i?(e[t]=!0,e.setAttribute(t,o)):(e[t]=!1,e.removeAttribute(o))}else if(w(i))e.setAttribute(t,i);else if(e.getAttribute){var s=e.getAttribute(t,2);return null===s?n:s}}},prop:function(e,t,n){return w(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(b(t)){var n=e.nodeType;return n===Ki||n===Yi?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(b(t)){if(e.multiple&&"select"===P(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return b(t)?e.innerHTML:(Te(e,!0),void(e.innerHTML=t))},empty:He},function(e,t){ke.prototype[t]=function(t,n){var i,r,o=this.length;if(e!==He&&b(2==e.length&&e!==Be&&e!==Ie?t:n)){if(C(t)){for(i=0;o>i;i++)if(e===Ne)e(this[i],t);else for(r in t)e(this[i],r,t[r]);return this}for(var s=e.$dv,a=b(s)?Math.min(o,1):o,l=0;a>l;l++){var u=e(this[l],t,n);s=s?s+u:u}return s}for(i=0;o>i;i++)e(this[i],t,n);return this}}),o({removeData:Le,on:function Os(e,t,n,i){if(w(i))throw ar("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ae(e)){var r=Oe(e,!0),o=r.events,s=r.handle;s||(s=r.handle=qe(e,o));for(var a=t.indexOf(" ")>=0?t.split(" "):[t],l=a.length;l--;){t=a[l];var u=o[t];u||(o[t]=[],"mouseenter"===t||"mouseleave"===t?Os(e,sr[t],function(e){var n=this,i=e.relatedTarget;(!i||i!==n&&!n.contains(i))&&s(e,t)}):"$destroy"!==t&&nr(e,t,s),u=o[t]),u.push(n)}}},off:Fe,one:function(e,t,n){e=Ei(e),e.on(t,function i(){e.off(t,n),e.off(t,i)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;Te(e),o(new ke(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===Ki&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Ki||n===Ji){t=new ke(t);for(var i=0,r=t.length;r>i;i++){var o=t[i];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===Ki){var n=e.firstChild;o(new ke(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Ei(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:ze,detach:function(e){ze(e,!0)},after:function(e,t){var n=e,i=e.parentNode;t=new ke(t);for(var r=0,o=t.length;o>r;r++){var s=t[r];i.insertBefore(s,n.nextSibling),n=s}},addClass:Re,removeClass:Me,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var i=n;b(i)&&(i=!Be(e,t)),(i?Re:Me)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Ji?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:De,triggerHandler:function(e,t,n){var i,r,s,a=t.type||t,l=Oe(e),u=l&&l.events,c=u&&u[a];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:m,type:a,target:e},t.type&&(i=d(i,t)),r=H(c),s=n?[i].concat(n):[i],o(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,s)}))}},function(e,t){ke.prototype[t]=function(t,n,i){for(var r,o=0,s=this.length;s>o;o++)b(r)?(r=e(this[o],t,n,i),w(r)&&(r=Ei(r))):Pe(r,e(this[o],t,n,i));return w(r)?r:this},ke.prototype.bind=ke.prototype.on,ke.prototype.unbind=ke.prototype.off}),Ye.prototype={put:function(e,t){this[Ge(e,this.nextUid)]=t},get:function(e){return this[Ge(e,this.nextUid)]},remove:function(e){var t=this[e=Ge(e,this.nextUid)];return delete this[e],t}};var vr=[function(){this.$get=[function(){return Ye}]}],yr=/^[^\(]*\(\s*([^\)]*)\)/m,br=/,/,wr=/^\s*(_?)(\S+?)\1\s*$/,Cr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,xr=i("$injector");Je.$$annotate=Xe;var Sr=i("$animate"),Ar=1,_r="ng-animate",Er=function(){this.$get=["$q","$$rAF",function(e,t){function n(){}return n.all=m,n.chain=m,n.prototype={end:m,cancel:m,resume:m,pause:m,complete:m,then:function(n,i){return e(function(e){t(function(){e()})}).then(n,i)}},n}]},$r=function(){var e=new Ye,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function r(e,t,n){var i=!1;return t&&(t=S(t)?t.split(" "):Pi(t)?t:[],o(t,function(t){t&&(i=!0,e[t]=n)})),i}function s(){o(t,function(t){var n=e.get(t);if(n){var i=nt(t.attr("class")),r="",s="";o(n,function(e,t){var n=!!i[t];e!==n&&(e?r+=(r.length?" ":"")+t:s+=(s.length?" ":"")+t)}),o(t,function(e){r&&Re(e,r),s&&Me(e,s)}),e.remove(t)}}),t.length=0}function a(n,o,a){var l=e.get(n)||{},u=r(l,o,!0),c=r(l,a,!1);(u||c)&&(e.put(n,l),t.push(n),1===t.length&&i.$$postDigest(s))}return{enabled:m,on:m,off:m,pin:m,push:function(e,t,i,r){return r&&r(),i=i||{},i.from&&e.css(i.from),i.to&&e.css(i.to),(i.addClass||i.removeClass)&&a(e,i.addClass,i.removeClass),new n}}}]},kr=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw Sr("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";t.$$registeredAnimations[n.substr(1)]=r,e.factory(r,i)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+_r+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Sr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',_r)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var i=tt(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,i,r,o){return i=i&&Ei(i),r=r&&Ei(r),i=i||r.parent(),t(n,i,r),e.push(n,"enter",it(o))},move:function(n,i,r,o){return i=i&&Ei(i),r=r&&Ei(r),i=i||r.parent(),t(n,i,r),e.push(n,"move",it(o))},leave:function(t,n){return e.push(t,"leave",it(n),function(){t.remove()})},addClass:function(t,n,i){return i=it(i),i.addClass=et(i.addclass,n),e.push(t,"addClass",i)},removeClass:function(t,n,i){return i=it(i),i.removeClass=et(i.removeClass,n),e.push(t,"removeClass",i)},setClass:function(t,n,i,r){return r=it(r),r.addClass=et(r.addClass,n),r.removeClass=et(r.removeClass,i),e.push(t,"setClass",r)},animate:function(t,n,i,r,o){return o=it(o),o.from=o.from?d(o.from,n):n,o.to=o.to?d(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=et(o.tempClasses,r),e.push(t,"animate",o)}}}]}],Dr=function(){this.$get=["$$rAF","$q",function(e,t){var n=function(){};return n.prototype={done:function(e){this.defer&&this.defer[e===!0?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=t.defer()),this.defer.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)}},function(t,i){function r(){return e(function(){o(),s||a.done(),s=!0}),a}function o(){i.addClass&&(t.addClass(i.addClass),i.addClass=null),i.removeClass&&(t.removeClass(i.removeClass),i.removeClass=null),i.to&&(t.css(i.to),i.to=null)}i.cleanupStyles&&(i.from=i.to=null),i.from&&(t.css(i.from),i.from=null);var s,a=new n;return{start:r,end:r}}}]},Tr=i("$compile");lt.$inject=["$provide","$$sanitizeUriProvider"];var Fr=/^((?:x|data)[\:\-_])/i,Lr=i("$controller"),Or=/^(\S+)(\s+as\s+(\w+))?$/,Nr=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Ei&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Br="application/json",Mr={"Content-Type":Br+";charset=utf-8"},Rr=/^\[|^\{(?!\{)/,Pr={"[":/]$/,"{":/}$/},Ir=/^\)\]\}',?\n/,Ur=i("$http"),Hr=function(e){return function(){throw Ur("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},zr=Bi.$interpolateMinErr=i("$interpolate");zr.throwNoconcat=function(e){throw zr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},zr.interr=function(e,t){return zr("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var jr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Wr={http:80,https:443,ftp:21},Vr=i("$location"),qr={$$html5:!1,$$replace:!1,absUrl:zt("$$absUrl"),url:function(e){if(b(e))return this.$$url;var t=jr.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:zt("$$protocol"),host:zt("$$host"),port:zt("$$port"),path:jt("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(S(e)||A(e))e=e.toString(),this.$$search=ee(e);else{if(!C(e))throw Vr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),o(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:b(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:jt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([Ht,Ut,It],function(e){e.prototype=Object.create(qr),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==It||!this.$$html5)throw Vr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(t)?null:t,this}});var Kr=i("$parse"),Gr=Function.prototype.call,Yr=Function.prototype.apply,Zr=Function.prototype.bind,Xr=ge();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Xr[e]=!0});var Jr={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Qr=function(e){this.options=e};Qr.prototype={constructor:Qr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=Xr[t],o=Xr[n],s=Xr[i];if(r||o||s){var a=s?i:o?n:t;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=w(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Kr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=wi(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{var a=Jr[o];n+=a||o}r=!1}else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var eo=function(e,t){this.lexer=e,this.options=t};eo.Program="Program",eo.ExpressionStatement="ExpressionStatement",eo.AssignmentExpression="AssignmentExpression",eo.ConditionalExpression="ConditionalExpression",eo.LogicalExpression="LogicalExpression",eo.BinaryExpression="BinaryExpression",eo.UnaryExpression="UnaryExpression",eo.CallExpression="CallExpression",eo.MemberExpression="MemberExpression",eo.Identifier="Identifier",eo.Literal="Literal",eo.ArrayExpression="ArrayExpression",eo.Property="Property",eo.ObjectExpression="ObjectExpression",eo.ThisExpression="ThisExpression",eo.NGValueParameter="NGValueParameter",eo.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:eo.Program,body:e}},expressionStatement:function(){return{type:eo.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:eo.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:eo.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:eo.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:eo.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:eo.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:eo.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:eo.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:eo.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:eo.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=U(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:eo.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:eo.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:eo.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:eo.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:eo.Identifier,name:e.text}},constant:function(){return{type:eo.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:eo.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:eo.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:eo.ObjectExpression,properties:t}},throwError:function(e,t){throw Kr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Kr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Kr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var o=this.tokens[e],s=o.text;if(s===t||s===n||s===i||s===r||!t&&!n&&!i&&!r)return o}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return r?(this.tokens.shift(),r):!1},constants:{"true":{type:eo.Literal,value:!0},"false":{type:eo.Literal,value:!1},"null":{type:eo.Literal,value:null},undefined:{type:eo.Literal,value:n},"this":{type:eo.ThisExpression}}},an.prototype={compile:function(e,t){var i=this,r=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},en(r,i.$filter);var s,a="";if(this.stage="assign",s=rn(r)){this.state.computing="assign";var l=this.nextId();this.recurse(s,l),this.return_(l),a="fn.assign="+this.generateFunction("assign","s,v,l")}var u=tn(r.body);i.stage="inputs",o(u,function(e,t){var n="fn"+t;i.state[n]={vars:[],body:[],own:{}},i.state.computing=n;var r=i.nextId();i.recurse(e,r),i.return_(r),i.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(r);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",d=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",c)(this.$filter,qt,Gt,Yt,Kt,Zt,Xt,Jt,e);return this.state=this.stage=n,d.literal=on(r),d.constant=sn(r),d},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return o(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return o(this.state.filters,function(n,i){e.push(n+"=$filter("+t.escape(i)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,i,r,s,a){
var l,u,c,d,h=this;if(r=r||m,!a&&w(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,i,r,s,!0));switch(e.type){case eo.Program:o(e.body,function(t,i){h.recurse(t.expression,n,n,function(e){u=e}),i!==e.body.length-1?h.current().body.push(u,";"):h.return_(u)});break;case eo.Literal:d=this.escape(e.value),this.assign(t,d),r(d);break;case eo.UnaryExpression:this.recurse(e.argument,n,n,function(e){u=e}),d=e.operator+"("+this.ifDefined(u,0)+")",this.assign(t,d),r(d);break;case eo.BinaryExpression:this.recurse(e.left,n,n,function(e){l=e}),this.recurse(e.right,n,n,function(e){u=e}),d="+"===e.operator?this.plus(l,u):"-"===e.operator?this.ifDefined(l,0)+e.operator+this.ifDefined(u,0):"("+l+")"+e.operator+"("+u+")",this.assign(t,d),r(d);break;case eo.LogicalExpression:t=t||this.nextId(),h.recurse(e.left,t),h.if_("&&"===e.operator?t:h.not(t),h.lazyRecurse(e.right,t)),r(t);break;case eo.ConditionalExpression:t=t||this.nextId(),h.recurse(e.test,t),h.if_(t,h.lazyRecurse(e.alternate,t),h.lazyRecurse(e.consequent,t)),r(t);break;case eo.Identifier:t=t||this.nextId(),i&&(i.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),i.computed=!1,i.name=e.name),qt(e.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",e.name)),function(){h.if_("inputs"===h.stage||"s",function(){s&&1!==s&&h.if_(h.not(h.nonComputedMember("s",e.name)),h.lazyAssign(h.nonComputedMember("s",e.name),"{}")),h.assign(t,h.nonComputedMember("s",e.name))})},t&&h.lazyAssign(t,h.nonComputedMember("l",e.name))),(h.state.expensiveChecks||un(e.name))&&h.addEnsureSafeObject(t),r(t);break;case eo.MemberExpression:l=i&&(i.context=this.nextId())||this.nextId(),t=t||this.nextId(),h.recurse(e.object,l,n,function(){h.if_(h.notNull(l),function(){e.computed?(u=h.nextId(),h.recurse(e.property,u),h.getStringValue(u),h.addEnsureSafeMemberName(u),s&&1!==s&&h.if_(h.not(h.computedMember(l,u)),h.lazyAssign(h.computedMember(l,u),"{}")),d=h.ensureSafeObject(h.computedMember(l,u)),h.assign(t,d),i&&(i.computed=!0,i.name=u)):(qt(e.property.name),s&&1!==s&&h.if_(h.not(h.nonComputedMember(l,e.property.name)),h.lazyAssign(h.nonComputedMember(l,e.property.name),"{}")),d=h.nonComputedMember(l,e.property.name),(h.state.expensiveChecks||un(e.property.name))&&(d=h.ensureSafeObject(d)),h.assign(t,d),i&&(i.computed=!1,i.name=e.property.name))},function(){h.assign(t,"undefined")}),r(t)},!!s);break;case eo.CallExpression:t=t||this.nextId(),e.filter?(u=h.filter(e.callee.name),c=[],o(e.arguments,function(e){var t=h.nextId();h.recurse(e,t),c.push(t)}),d=u+"("+c.join(",")+")",h.assign(t,d),r(t)):(u=h.nextId(),l={},c=[],h.recurse(e.callee,u,l,function(){h.if_(h.notNull(u),function(){h.addEnsureSafeFunction(u),o(e.arguments,function(e){h.recurse(e,h.nextId(),n,function(e){c.push(h.ensureSafeObject(e))})}),l.name?(h.state.expensiveChecks||h.addEnsureSafeObject(l.context),d=h.member(l.context,l.name,l.computed)+"("+c.join(",")+")"):d=u+"("+c.join(",")+")",d=h.ensureSafeObject(d),h.assign(t,d)},function(){h.assign(t,"undefined")}),r(t)}));break;case eo.AssignmentExpression:if(u=this.nextId(),l={},!nn(e.left))throw Kr("lval","Trying to assing a value to a non l-value");this.recurse(e.left,n,l,function(){h.if_(h.notNull(l.context),function(){h.recurse(e.right,u),h.addEnsureSafeObject(h.member(l.context,l.name,l.computed)),h.addEnsureSafeAssignContext(l.context),d=h.member(l.context,l.name,l.computed)+e.operator+u,h.assign(t,d),r(t||d)})},1);break;case eo.ArrayExpression:c=[],o(e.elements,function(e){h.recurse(e,h.nextId(),n,function(e){c.push(e)})}),d="["+c.join(",")+"]",this.assign(t,d),r(d);break;case eo.ObjectExpression:c=[],o(e.properties,function(e){h.recurse(e.value,h.nextId(),n,function(t){c.push(h.escape(e.key.type===eo.Identifier?e.key.name:""+e.key.value)+":"+t)})}),d="{"+c.join(",")+"}",this.assign(t,d),r(d);break;case eo.ThisExpression:this.assign(t,"s"),r("s");break;case eo.NGValueParameter:this.assign(t,"v"),r("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),i[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var i=this.current().body;i.push("if(",e,"){"),t(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+",text)")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,i,r,o){var s=this;return function(){s.recurse(e,t,n,i,r,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(S(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(A(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Kr("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},ln.prototype={compile:function(e,t){var n=this,i=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,en(i,n.$filter);var r,s;(r=rn(i))&&(s=this.recurse(r));var a,l=tn(i.body);l&&(a=[],o(l,function(e,t){var i=n.recurse(e);e.input=i,a.push(i),e.watchId=t}));var u=[];o(i.body,function(e){u.push(n.recurse(e.expression))});var c=0===i.body.length?function(){}:1===i.body.length?u[0]:function(e,t){var n;return o(u,function(i){n=i(e,t)}),n};return s&&(c.assign=function(e,t,n){return s(e,n,t)}),a&&(c.inputs=a),c.literal=on(i),c.constant=sn(i),c},recurse:function(e,t,i){var r,s,a,l=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case eo.Literal:return this.value(e.value,t);case eo.UnaryExpression:return s=this.recurse(e.argument),this["unary"+e.operator](s,t);case eo.BinaryExpression:return r=this.recurse(e.left),s=this.recurse(e.right),this["binary"+e.operator](r,s,t);case eo.LogicalExpression:return r=this.recurse(e.left),s=this.recurse(e.right),this["binary"+e.operator](r,s,t);case eo.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case eo.Identifier:return qt(e.name,l.expression),l.identifier(e.name,l.expensiveChecks||un(e.name),t,i,l.expression);case eo.MemberExpression:return r=this.recurse(e.object,!1,!!i),e.computed||(qt(e.property.name,l.expression),s=e.property.name),e.computed&&(s=this.recurse(e.property)),e.computed?this.computedMember(r,s,t,i,l.expression):this.nonComputedMember(r,s,l.expensiveChecks,t,i,l.expression);case eo.CallExpression:return a=[],o(e.arguments,function(e){a.push(l.recurse(e))}),e.filter&&(s=this.$filter(e.callee.name)),e.filter||(s=this.recurse(e.callee,!0)),e.filter?function(e,i,r,o){for(var l=[],u=0;u<a.length;++u)l.push(a[u](e,i,r,o));var c=s.apply(n,l,o);return t?{context:n,name:n,value:c}:c}:function(e,n,i,r){var o,u=s(e,n,i,r);if(null!=u.value){Gt(u.context,l.expression),Yt(u.value,l.expression);for(var c=[],d=0;d<a.length;++d)c.push(Gt(a[d](e,n,i,r),l.expression));o=Gt(u.value.apply(u.context,c),l.expression)}return t?{value:o}:o};case eo.AssignmentExpression:return r=this.recurse(e.left,!0,1),s=this.recurse(e.right),function(e,n,i,o){var a=r(e,n,i,o),u=s(e,n,i,o);return Gt(a.value,l.expression),Zt(a.context),a.context[a.name]=u,t?{value:u}:u};case eo.ArrayExpression:return a=[],o(e.elements,function(e){a.push(l.recurse(e))}),function(e,n,i,r){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,i,r));return t?{value:o}:o};case eo.ObjectExpression:return a=[],o(e.properties,function(e){a.push({key:e.key.type===eo.Identifier?e.key.name:""+e.key.value,value:l.recurse(e.value)})}),function(e,n,i,r){for(var o={},s=0;s<a.length;++s)o[a[s].key]=a[s].value(e,n,i,r);return t?{value:o}:o};case eo.ThisExpression:return function(e){return t?{value:e}:e};case eo.NGValueParameter:return function(e,n,i,r){return t?{value:i}:i}}},"unary+":function(e,t){return function(n,i,r,o){var s=e(n,i,r,o);return s=w(s)?+s:0,t?{value:s}:s}},"unary-":function(e,t){return function(n,i,r,o){var s=e(n,i,r,o);return s=w(s)?-s:0,t?{value:s}:s}},"unary!":function(e,t){return function(n,i,r,o){var s=!e(n,i,r,o);return t?{value:s}:s}},"binary+":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s),l=t(i,r,o,s),u=Jt(a,l);return n?{value:u}:u}},"binary-":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s),l=t(i,r,o,s),u=(w(a)?a:0)-(w(l)?l:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)*t(i,r,o,s);return n?{value:a}:a}},"binary/":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)/t(i,r,o,s);return n?{value:a}:a}},"binary%":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)%t(i,r,o,s);return n?{value:a}:a}},"binary===":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)===t(i,r,o,s);return n?{value:a}:a}},"binary!==":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)!==t(i,r,o,s);return n?{value:a}:a}},"binary==":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)==t(i,r,o,s);return n?{value:a}:a}},"binary!=":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)!=t(i,r,o,s);return n?{value:a}:a}},"binary<":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)<t(i,r,o,s);return n?{value:a}:a}},"binary>":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)>t(i,r,o,s);return n?{value:a}:a}},"binary<=":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)<=t(i,r,o,s);return n?{value:a}:a}},"binary>=":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)>=t(i,r,o,s);return n?{value:a}:a}},"binary&&":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)&&t(i,r,o,s);return n?{value:a}:a}},"binary||":function(e,t,n){return function(i,r,o,s){var a=e(i,r,o,s)||t(i,r,o,s);return n?{value:a}:a}},"ternary?:":function(e,t,n,i){return function(r,o,s,a){var l=e(r,o,s,a)?t(r,o,s,a):n(r,o,s,a);return i?{value:l}:l}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,i,r,o){return function(s,a,l,u){var c=a&&e in a?a:s;r&&1!==r&&c&&!c[e]&&(c[e]={});var d=c?c[e]:n;return t&&Gt(d,o),i?{context:c,name:e,value:d}:d}},computedMember:function(e,t,n,i,r){return function(o,s,a,l){var u,c,d=e(o,s,a,l);return null!=d&&(u=t(o,s,a,l),u=Kt(u),qt(u,r),i&&1!==i&&d&&!d[u]&&(d[u]={}),c=d[u],Gt(c,r)),n?{context:d,name:u,value:c}:c}},nonComputedMember:function(e,t,i,r,o,s){return function(a,l,u,c){var d=e(a,l,u,c);o&&1!==o&&d&&!d[t]&&(d[t]={});var h=null!=d?d[t]:n;return(i||un(t))&&Gt(h,s),r?{context:d,name:t,value:h}:h}},inputs:function(e,t){return function(n,i,r,o){return o?o[t]:e(n,i,r)}}};var to=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new eo(this.lexer),this.astCompiler=n.csp?new ln(this.ast,t):new an(this.ast,t)};to.prototype={constructor:to,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var no=(ge(),ge(),Object.prototype.valueOf),io=i("$sce"),ro={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Tr=i("$compile"),oo=t.createElement("a"),so=En(e.location.href);Dn.$inject=["$document"],Fn.$inject=["$provide"],Mn.$inject=["$locale"],Rn.$inject=["$locale"];var ao=".",lo={yyyy:Un("FullYear",4),yy:Un("FullYear",2,0,!0),y:Un("FullYear",1),MMMM:Hn("Month"),MMM:Hn("Month",!0),MM:Un("Month",2,1),M:Un("Month",1,1),dd:Un("Date",2),d:Un("Date",1),HH:Un("Hours",2),H:Un("Hours",1),hh:Un("Hours",2,-12),h:Un("Hours",1,-12),mm:Un("Minutes",2),m:Un("Minutes",1),ss:Un("Seconds",2),s:Un("Seconds",1),sss:Un("Milliseconds",3),EEEE:Hn("Day"),EEE:Hn("Day",!0),a:qn,Z:zn,ww:Vn(2),w:Vn(1),G:Kn,GG:Kn,GGG:Kn,GGGG:Gn},uo=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,co=/^\-?\d+$/;Yn.$inject=["$locale"];var ho=v(wi),fo=v(xi);Jn.$inject=["$parse"];var po=v({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Li.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),mo={};o(pr,function(e,t){function n(e,n,r){e.$watch(r[i],function(e){r.$set(t,!!e)})}if("multiple"!=e){var i=ut("ng-"+t),r=n;"checked"===e&&(r=function(e,t,r){r.ngModel!==r[i]&&n(e,t,r)}),mo[i]=function(){return{restrict:"A",priority:100,link:r}}}}),o(gr,function(e,t){mo[t]=function(){return{priority:100,link:function(e,n,i){if("ngPattern"===t&&"/"==i.ngPattern.charAt(0)){var r=i.ngPattern.match(yi);if(r)return void i.$set("ngPattern",new RegExp(r[1],r[2]))}e.$watch(i[t],function(e){i.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=ut("ng-"+e);mo[t]=function(){return{priority:99,link:function(n,i,r){var o=e,s=e;"href"===e&&"[object SVGAnimatedString]"===Li.call(i.prop("href"))&&(s="xlinkHref",r.$attr[s]="xlink:href",o=null),r.$observe(t,function(t){return t?(r.$set(s,t),void(_i&&o&&i.prop(o,r[s]))):void("href"===e&&r.$set(s,null))})}}}});var go={$addControl:m,$$renameControl:ei,$removeControl:m,$setValidity:m,$setDirty:m,$setPristine:m,$setSubmitted:m},vo="ng-submitted";ti.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var yo=function(e){return["$timeout","$parse",function(t,i){function r(e){return""===e?i('this[""]').assign:i(e).assign||m}var o={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:ti,compile:function(i,o){i.addClass(Jo).addClass(Zo);var s=o.name?"name":e&&o.ngForm?"ngForm":!1;return{pre:function(e,i,o,a){var l=a[0];if(!("action"in o)){var u=function(t){e.$apply(function(){l.$commitViewValue(),l.$setSubmitted()}),t.preventDefault()};nr(i[0],"submit",u),i.on("$destroy",function(){t(function(){ir(i[0],"submit",u)},0,!1)})}var c=a[1]||l.$$parentForm;c.$addControl(l);var h=s?r(l.$name):m;s&&(h(e,l),o.$observe(s,function(t){l.$name!==t&&(h(e,n),l.$$parentForm.$$renameControl(l,t),(h=r(l.$name))(e,l))})),i.on("$destroy",function(){l.$$parentForm.$removeControl(l),h(e,n),d(l,go)})}}}};return o}]},bo=yo(),wo=yo(!0),Co=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,xo=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,So=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ao=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,_o=/^(\d{4})-(\d{2})-(\d{2})$/,Eo=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,$o=/^(\d{4})-W(\d\d)$/,ko=/^(\d{4})-(\d\d)$/,Do=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,To={text:ii,date:ai("date",_o,si(_o,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ai("datetimelocal",Eo,si(Eo,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:ai("time",Do,si(Do,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ai("week",$o,oi,"yyyy-Www"),month:ai("month",ko,si(ko,["yyyy","MM"]),"yyyy-MM"),number:ui,url:ci,email:di,radio:hi,checkbox:pi,hidden:m,button:m,submit:m,reset:m,file:m},Fo=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,s,a){a[0]&&(To[wi(s.type)]||To.text)(r,o,s,a[0],t,e,n,i)}}}}],Lo=/^(true|false|\d+)$/,Oo=function(){return{restrict:"A",priority:100,compile:function(e,t){return Lo.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},No=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,i){e.$$addBindingInfo(n,i.ngBind),n=n[0],t.$watch(i.ngBind,function(e){n.textContent=b(e)?"":e})}}}}],Bo=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,i,r){var o=e(i.attr(r.$attr.ngBindTemplate));t.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(e){i.textContent=b(e)?"":e})}}}}],Mo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var o=t(r.ngBindHtml),s=t(r.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(s,function(){i.html(e.getTrustedHtml(o(t))||"")})}}}}],Ro=v({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Po=mi("",!0),Io=mi("Odd",0),Uo=mi("Even",1),Ho=Qn({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),zo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],jo={},Wo={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=ut("ng-"+e);jo[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var s=n(o[t],null,!0);return function(t,n){n.on(e,function(n){var r=function(){s(t,{$event:n})};Wo[e]&&i.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var Vo=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,s){var a,l,u;n.$watch(r.ngIf,function(n){n?l||s(function(n,o){l=o,n[n.length++]=t.createComment(" end ngIf: "+r.ngIf+" "),a={clone:n},e.enter(n,i.parent(),i)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),a&&(u=me(a.clone),e.leave(u).then(function(){u=null}),a=null))})}}}],qo=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Bi.noop,compile:function(i,r){var o=r.ngInclude||r.src,s=r.onload||"",a=r.autoscroll;return function(i,r,l,u,c){var d,h,f,p=0,m=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),f&&(n.leave(f).then(function(){h=null}),h=f,f=null)};i.$watch(o,function(o){var l=function(){!w(a)||a&&!i.$eval(a)||t()},h=++p;o?(e(o,!0).then(function(e){if(h===p){var t=i.$new();u.template=e;var a=c(t,function(e){m(),n.enter(e,null,r).then(l)});d=t,f=a,d.$emit("$includeContentLoaded",o),i.$eval(s)}},function(){h===p&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),u.template=null)})}}}}],Ko=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){return/SVG/.test(i[0].toString())?(i.empty(),void e(Ee(o.template,t).childNodes)(n,function(e){i.append(e)},{futureParentElement:i})):(i.html(o.template),void e(i.contents())(n))}}}],Go=Qn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Yo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,i,r){var s=t.attr(i.$attr.ngList)||", ",a="false"!==i.ngTrim,l=a?Ui(s):s,u=function(e){if(!b(e)){var t=[];return e&&o(e.split(l),function(e){e&&t.push(a?Ui(e):e)}),t}};r.$parsers.push(u),r.$formatters.push(function(e){return Pi(e)?e.join(s):n}),r.$isEmpty=function(e){return!e||!e.length}}}},Zo="ng-valid",Xo="ng-invalid",Jo="ng-pristine",Qo="ng-dirty",es="ng-untouched",ts="ng-touched",ns="ng-pending",is=i("ngModel"),rs=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,i,r,s,a,l,u,c,d){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=d(i.name||"",!1)(e),this.$$parentForm=go;var h,f=s(i.ngModel),p=f.assign,g=f,v=p,y=null,C=this;this.$$setOptions=function(e){if(C.$options=e,e&&e.getterSetter){var t=s(i.ngModel+"()"),n=s(i.ngModel+"($$$p)");g=function(e){var n=f(e);return E(n)&&(n=t(e)),n},v=function(e,t){E(f(e))?n(e,{$$$p:C.$modelValue}):p(e,C.$modelValue)}}else if(!f.assign)throw is("nonassign","Expression '{0}' is non-assignable. Element: {1}",i.ngModel,J(r))},this.$render=m,this.$isEmpty=function(e){return b(e)||""===e||null===e||e!==e};var x=0;gi({ctrl:this,$element:r,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:a}),this.$setPristine=function(){C.$dirty=!1,C.$pristine=!0,a.removeClass(r,Qo),a.addClass(r,Jo)},this.$setDirty=function(){C.$dirty=!0,C.$pristine=!1,a.removeClass(r,Jo),a.addClass(r,Qo),C.$$parentForm.$setDirty()},this.$setUntouched=function(){C.$touched=!1,C.$untouched=!0,a.setClass(r,es,ts)},this.$setTouched=function(){C.$touched=!0,C.$untouched=!1,a.setClass(r,ts,es)},this.$rollbackViewValue=function(){l.cancel(y),C.$viewValue=C.$$lastCommittedViewValue,C.$render()},this.$validate=function(){if(!A(C.$modelValue)||!isNaN(C.$modelValue)){var e=C.$$lastCommittedViewValue,t=C.$$rawModelValue,i=C.$valid,r=C.$modelValue,o=C.$options&&C.$options.allowInvalid;C.$$runValidators(t,e,function(e){o||i===e||(C.$modelValue=e?t:n,C.$modelValue!==r&&C.$$writeModelToScope())})}},this.$$runValidators=function(e,t,i){function r(){var e=C.$$parserName||"parse";return b(h)?(l(e,null),!0):(h||(o(C.$validators,function(e,t){l(t,null)}),o(C.$asyncValidators,function(e,t){l(t,null)})),l(e,h),h)}function s(){var n=!0;return o(C.$validators,function(i,r){var o=i(e,t);n=n&&o,l(r,o)}),n?!0:(o(C.$asyncValidators,function(e,t){l(t,null)}),!1)}function a(){var i=[],r=!0;o(C.$asyncValidators,function(o,s){var a=o(e,t);if(!N(a))throw is("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",a);l(s,n),i.push(a.then(function(){l(s,!0)},function(e){r=!1,l(s,!1)}))}),i.length?c.all(i).then(function(){u(r)},m):u(!0)}function l(e,t){d===x&&C.$setValidity(e,t)}function u(e){d===x&&i(e)}x++;var d=x;return r()&&s()?void a():void u(!1)},this.$commitViewValue=function(){var e=C.$viewValue;l.cancel(y),(C.$$lastCommittedViewValue!==e||""===e&&C.$$hasNativeValidators)&&(C.$$lastCommittedViewValue=e,C.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){C.$modelValue!==s&&C.$$writeModelToScope()}var i=C.$$lastCommittedViewValue,r=i;if(h=b(r)?n:!0)for(var o=0;o<C.$parsers.length;o++)if(r=C.$parsers[o](r),b(r)){h=!1;break}A(C.$modelValue)&&isNaN(C.$modelValue)&&(C.$modelValue=g(e));var s=C.$modelValue,a=C.$options&&C.$options.allowInvalid;C.$$rawModelValue=r,a&&(C.$modelValue=r,t()),C.$$runValidators(r,C.$$lastCommittedViewValue,function(e){a||(C.$modelValue=e?r:n,t())})},this.$$writeModelToScope=function(){v(e,C.$modelValue),o(C.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){C.$viewValue=e,(!C.$options||C.$options.updateOnDefault)&&C.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,i=0,r=C.$options;r&&w(r.debounce)&&(n=r.debounce,A(n)?i=n:A(n[t])?i=n[t]:A(n["default"])&&(i=n["default"])),l.cancel(y),i?y=l(function(){C.$commitViewValue()},i):u.$$phase?C.$commitViewValue():e.$apply(function(){C.$commitViewValue()})},e.$watch(function(){var t=g(e);if(t!==C.$modelValue&&(C.$modelValue===C.$modelValue||t===t)){C.$modelValue=C.$$rawModelValue=t,h=n;for(var i=C.$formatters,r=i.length,o=t;r--;)o=i[r](o);C.$viewValue!==o&&(C.$viewValue=C.$$lastCommittedViewValue=o,C.$render(),C.$$runValidators(t,o,m))}return t})}],os=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:rs,priority:1,compile:function(t){return t.addClass(Jo).addClass(es).addClass(Zo),{pre:function(e,t,n,i){var r=i[0],o=i[1]||r.$$parentForm;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(e){r.$name!==e&&r.$$parentForm.$$renameControl(r,e)}),e.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(t,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){o.$touched||(e.$$phase?t.$evalAsync(o.$setTouched):t.$apply(o.$setTouched))})}}}}}],ss=/(\s+|^)default(\s+|$)/,as=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=U(e.$eval(t.ngModelOptions)),w(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Ui(this.$options.updateOn.replace(ss,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ls=Qn({terminal:!0,priority:1e3}),us=i("ngOptions"),cs=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ds=["$compile","$parse",function(e,n){function i(e,t,i){function o(e,t,n,i,r){this.selectValue=e,this.viewValue=t,this.label=n,this.group=i,this.disabled=r}function s(e){var t;if(!u&&r(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var a=e.match(cs);if(!a)throw us("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,J(t));var l=a[5]||a[7],u=a[6],c=/ as /.test(a[0])&&a[1],d=a[9],h=n(a[2]?a[1]:l),f=c&&n(c),p=f||h,m=d&&n(d),g=d?function(e,t){return m(i,t)}:function(e){return Ge(e)},v=function(e,t){return g(e,S(e,t))},y=n(a[2]||a[1]),b=n(a[3]||""),w=n(a[4]||""),C=n(a[8]),x={},S=u?function(e,t){return x[u]=t,x[l]=e,x}:function(e){return x[l]=e,x};return{trackBy:d,getTrackByValue:v,getWatchables:n(C,function(e){var t=[];e=e||[];for(var n=s(e),r=n.length,o=0;r>o;o++){var l=e===n?o:n[o],u=(e[l],S(e[l],l)),c=g(e[l],u);if(t.push(c),a[2]||a[1]){var d=y(i,u);t.push(d)}if(a[4]){var h=w(i,u);t.push(h)}}return t}),getOptions:function(){for(var e=[],t={},n=C(i)||[],r=s(n),a=r.length,l=0;a>l;l++){var u=n===r?l:r[l],c=n[u],h=S(c,u),f=p(i,h),m=g(f,h),x=y(i,h),A=b(i,h),_=w(i,h),E=new o(m,f,x,A,_);e.push(E),t[m]=E}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return d?Bi.copy(e.viewValue):e.viewValue}}}}}var s=t.createElement("option"),a=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,n,r,l){function u(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function c(e,t,n,i){var r;return t&&wi(t.nodeName)===n?r=t:(r=i.cloneNode(!1),t?e.insertBefore(r,t):e.appendChild(r)),r}function d(e){for(var t;e;)t=e.nextSibling,ze(e),e=t}function h(e){var t=m&&m[0],n=x&&x[0];if(t||n)for(;e&&(e===t||e===n||t&&t.nodeType===Zi);)e=e.nextSibling;return e}function f(){var e=S&&g.readValue();S=A.getOptions();var t={},i=n[0].firstChild;if(C&&n.prepend(m),i=h(i),S.items.forEach(function(e){var r,o,l;e.group?(r=t[e.group],r||(o=c(n[0],i,"optgroup",a),i=o.nextSibling,o.label=e.group,r=t[e.group]={groupElement:o,currentOptionElement:o.firstChild}),l=c(r.groupElement,r.currentOptionElement,"option",s),u(e,l),r.currentOptionElement=l.nextSibling):(l=c(n[0],i,"option",s),u(e,l),i=l.nextSibling)}),Object.keys(t).forEach(function(e){d(t[e].currentOptionElement)}),d(i),p.$render(),!p.$isEmpty(e)){var r=g.readValue();(A.trackBy?z(e,r):e===r)||(p.$setViewValue(r),p.$render())}}var p=l[1];if(p){for(var m,g=l[0],v=r.multiple,y=0,b=n.children(),w=b.length;w>y;y++)if(""===b[y].value){m=b.eq(y);break}var C=!!m,x=Ei(s.cloneNode(!1));x.val("?");var S,A=i(r.ngOptions,n,t),_=function(){C||n.prepend(m),n.val(""),m.prop("selected",!0),m.attr("selected",!0)},E=function(){C||m.remove()},$=function(){n.prepend(x),n.val("?"),x.prop("selected",!0),x.attr("selected",!0)},k=function(){x.remove()};v?(p.$isEmpty=function(e){return!e||0===e.length},g.writeValue=function(e){S.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=S.getOptionFromViewValue(e);t&&!t.disabled&&(t.element.selected=!0)})},g.readValue=function(){var e=n.val()||[],t=[];return o(e,function(e){var n=S.selectValueMap[e];n&&!n.disabled&&t.push(S.getViewValueFromOption(n))}),t},A.trackBy&&t.$watchCollection(function(){return Pi(p.$viewValue)?p.$viewValue.map(function(e){return A.getTrackByValue(e)}):void 0},function(){p.$render()})):(g.writeValue=function(e){var t=S.getOptionFromViewValue(e);t&&!t.disabled?n[0].value!==t.selectValue&&(k(),E(),n[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):null===e||C?(k(),_()):(E(),$())},g.readValue=function(){var e=S.selectValueMap[n.val()];return e&&!e.disabled?(E(),k(),S.getViewValueFromOption(e)):null},A.trackBy&&t.$watch(function(){return A.getTrackByValue(p.$viewValue)},function(){p.$render()})),C?(m.remove(),e(m)(t),m.removeClass("ng-scope")):m=Ei(s.cloneNode(!1)),f(),t.$watchCollection(A.getWatchables,f)}}}}],hs=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(s,a,l){function u(e){a.text(e||"")}var c,d=l.count,h=l.$attr.when&&a.attr(l.$attr.when),f=l.offset||0,p=s.$eval(h)||{},g={},v=t.startSymbol(),y=t.endSymbol(),w=v+d+"-"+f+y,C=Bi.noop;o(l,function(e,t){var n=r.exec(t);if(n){var i=(n[1]?"-":"")+wi(n[2]);p[i]=a.attr(l.$attr[t])}}),o(p,function(e,n){g[n]=t(e.replace(i,w))}),s.$watch(d,function(t){var i=parseFloat(t),r=isNaN(i);if(r||i in p||(i=e.pluralCat(i-f)),i!==c&&!(r&&A(c)&&isNaN(c))){C();var o=g[i];b(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+h),C=m,u()):C=s.$watch(o,u),c=i}})}}}],fs=["$parse","$animate",function(e,s){var a="$$NG_REMOVED",l=i("ngRepeat"),u=function(e,t,n,i,r,o,s){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===s-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},d=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,h){var f=h.ngRepeat,p=t.createComment(" end ngRepeat: "+f+" "),m=f.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",f);var g=m[1],v=m[2],y=m[3],b=m[4];if(m=g.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!m)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var w=m[3]||m[1],C=m[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var x,S,A,_,E={$id:Ge};return b?x=e(b):(A=function(e,t){
return Ge(t)},_=function(e){return e}),function(e,t,i,h,m){x&&(S=function(t,n,i){return C&&(E[C]=t),E[w]=n,E.$index=i,x(e,E)});var g=ge();e.$watchCollection(v,function(i){var h,v,b,x,E,$,k,D,T,F,L,O,N=t[0],B=ge();if(y&&(e[y]=i),r(i))T=i,D=S||A;else{D=S||_,T=[];for(var M in i)Ci.call(i,M)&&"$"!==M.charAt(0)&&T.push(M)}for(x=T.length,L=new Array(x),h=0;x>h;h++)if(E=i===T?h:T[h],$=i[E],k=D(E,$,h),g[k])F=g[k],delete g[k],B[k]=F,L[h]=F;else{if(B[k])throw o(L,function(e){e&&e.scope&&(g[e.id]=e)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",f,k,$);L[h]={id:k,scope:n,clone:n},B[k]=!0}for(var R in g){if(F=g[R],O=me(F.clone),s.leave(O),O[0].parentNode)for(h=0,v=O.length;v>h;h++)O[h][a]=!0;F.scope.$destroy()}for(h=0;x>h;h++)if(E=i===T?h:T[h],$=i[E],F=L[h],F.scope){b=N;do b=b.nextSibling;while(b&&b[a]);c(F)!=b&&s.move(me(F.clone),null,Ei(N)),N=d(F),u(F.scope,h,w,$,C,E,x)}else m(function(e,t){F.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,s.enter(e,null,Ei(N)),N=n,F.clone=e,B[F.id]=F,u(F.scope,h,w,$,C,E,x)});g=B})}}}}],ps="ng-hide",ms="ng-hide-animate",gs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,ps,{tempClasses:ms})})}}}],vs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,ps,{tempClasses:ms})})}}}],ys=Qn(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),bs=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,s){var a=r.ngSwitch||r.on,l=[],u=[],c=[],d=[],h=function(e,t){return function(){e.splice(t,1)}};n.$watch(a,function(n){var i,r;for(i=0,r=c.length;r>i;++i)e.cancel(c[i]);for(c.length=0,i=0,r=d.length;r>i;++i){var a=me(u[i].clone);d[i].$destroy();var f=c[i]=e.leave(a);f.then(h(c,i))}u.length=0,d.length=0,(l=s.cases["!"+n]||s.cases["?"])&&o(l,function(n){n.transclude(function(i,r){d.push(r);var o=n.element;i[i.length++]=t.createComment(" end ngSwitchWhen: ");var s={clone:i};u.push(s),e.enter(i,o.parent(),o)})})})}}}],ws=Qn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:t})}}),Cs=Qn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),xs=Qn({restrict:"EAC",link:function(e,t,n,r,o){if(!o)throw i("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",J(t));o(function(e){t.empty(),t.append(e)})}}),Ss=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],As={$setViewValue:m,$render:m},_s=["$element","$scope","$attrs",function(e,i,r){var o=this,s=new Ye;o.ngModelCtrl=As,o.unknownOption=Ei(t.createElement("option")),o.renderUnknownOption=function(t){var n="? "+Ge(t)+" ?";o.unknownOption.val(n),e.prepend(o.unknownOption),e.val(n)},i.$on("$destroy",function(){o.renderUnknownOption=m}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),e.val()},o.writeValue=function(t){o.hasOption(t)?(o.removeUnknownOption(),e.val(t),""===t&&o.emptyOption.prop("selected",!0)):null==t&&o.emptyOption?(o.removeUnknownOption(),e.val("")):o.renderUnknownOption(t)},o.addOption=function(e,t){fe(e,'"option value"'),""===e&&(o.emptyOption=t);var n=s.get(e)||0;s.put(e,n+1)},o.removeOption=function(e){var t=s.get(e);t&&(1===t?(s.remove(e),""===e&&(o.emptyOption=n)):s.put(e,t-1))},o.hasOption=function(e){return!!s.get(e)}}],Es=function(){return{restrict:"E",require:["select","?ngModel"],controller:_s,link:function(e,t,n,i){var r=i[1];if(r){var s=i[0];if(s.ngModelCtrl=r,r.$render=function(){s.writeValue(r.$viewValue)},t.on("change",function(){e.$apply(function(){r.$setViewValue(s.readValue())})}),n.multiple){s.readValue=function(){var e=[];return o(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},s.writeValue=function(e){var n=new Ye(e);o(t.find("option"),function(e){e.selected=w(n.get(e.value))})};var a,l=NaN;e.$watch(function(){l!==r.$viewValue||z(a,r.$viewValue)||(a=H(r.$viewValue),r.$render()),l=r.$viewValue}),r.$isEmpty=function(e){return!e||0===e.length}}}}}},$s=["$interpolate",function(e){function t(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,i){if(w(i.value))var r=e(i.value,!0);else{var o=e(n.text(),!0);o||i.$set("value",n.text())}return function(e,n,i){function s(e){u.addOption(e,n),u.ngModelCtrl.$render(),t(n)}var a="$selectController",l=n.parent(),u=l.data(a)||l.parent().data(a);if(u&&u.ngModelCtrl){if(r){var c;i.$observe("value",function(e){w(c)&&u.removeOption(c),c=e,s(e)})}else o?e.$watch(o,function(e,t){i.$set("value",e),t!==e&&u.removeOption(t),s(e)}):s(i.value);n.on("$destroy",function(){u.removeOption(i.value),u.ngModelCtrl.$render()})}}}}}],ks=v({restrict:"E",terminal:!1}),Ds=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},Ts=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,o){if(o){var s,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(S(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,J(t));s=e||n,o.$validate()}),o.$validators.pattern=function(e,t){return o.$isEmpty(t)||b(s)||s.test(t)}}}}},Fs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=f(e);r=isNaN(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return 0>r||i.$isEmpty(t)||t.length<=r}}}}},Ls=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=f(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ce(),we(Bi),Bi.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function i(e,i){var r=i;n===r&&(r=Math.min(t(e),3));var o=Math.pow(10,r),s=(e*o|0)%o;return{v:r,f:s}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",pluralCat:function(e,t){var n=0|e,o=i(e,t);return 1==n&&0==o.v?r.ONE:r.OTHER}})}]),void Ei(t).ready(function(){oe(t,se)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),angular.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var i=n;void 0===i&&(i=Math.min(t(e),3));var r=Math.pow(10,i),o=(e*r|0)%r;return{v:i,f:o}}var i={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["vorm.","nachm."],DAY:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],ERANAMES:["v. Chr.","n. Chr."],ERAS:["v. Chr.","n. Chr."],FIRSTDAYOFWEEK:0,MONTH:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],SHORTDAY:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],SHORTMONTH:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],WEEKENDRANGE:[5,6],fullDate:"EEEE, d. MMMM y",longDate:"d. MMMM y",medium:"dd.MM.y HH:mm:ss",mediumDate:"dd.MM.y",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"€",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"de",pluralCat:function(e,t){var r=0|e,o=n(e,t);return 1==r&&0==o.v?i.ONE:i.OTHER}})}]),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Nn.apply(null,arguments)}function t(e){Nn=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function r(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,i){return ke(e,t,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(e){return null==e._pf&&(e._pf=l()),e._pf}function c(e){if(null==e._isValid){var t=u(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=a(NaN);return null!=e?s(u(t),e):u(t).userInvalidated=!0,t}function h(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=u(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Mn.length>0)for(n in Mn)i=Mn[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function f(t){h(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Rn===!1&&(Rn=!0,e.updateOffset(this),Rn=!1)}function p(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=m(t)),n}function v(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&g(e[i])!==g(t[i]))&&s++;return s+o}function y(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,i,r,o=0;o<e.length;){for(r=b(e[o]).split("-"),t=r.length,n=b(e[o+1]),n=n?n.split("-"):null;t>0;){if(i=C(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&v(r,n,!0)>=t-1)break;t--}o++}return null}function C(e){var t=null;if(!Pn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Bn._abbr,require("./locale/"+e),x(t)}catch(n){}return Pn[e]}function x(e,t){var n;return e&&(n="undefined"==typeof t?A(e):S(e,t),n&&(Bn=n)),Bn._abbr}function S(e,t){return null!==t?(t.abbr=e,Pn[e]=Pn[e]||new y,Pn[e].set(t),x(e),Pn[e]):(delete Pn[e],null)}function A(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Bn;if(!n(e)){if(t=C(e))return t;e=[e]}return w(e)}function _(e,t){var n=e.toLowerCase();In[n]=In[n+"s"]=In[t]=e}function E(e){return"string"==typeof e?In[e]||In[e.toLowerCase()]:void 0}function $(e){var t,n,i={};for(n in e)o(e,n)&&(t=E(n),t&&(i[t]=e[n]));return i}function k(t,n){return function(i){return null!=i?(T(this,t,i),e.updateOffset(this,n),this):D(this,t)}}function D(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function T(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function F(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=E(e),"function"==typeof this[e])return this[e](t);return this}function L(e,t,n){var i=""+Math.abs(e),r=t-i.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function O(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(jn[e]=r),t&&(jn[t[0]]=function(){return L(r.apply(this,arguments),t[1],t[2])}),n&&(jn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,n,i=e.match(Un);for(t=0,n=i.length;n>t;t++)jn[i[t]]?i[t]=jn[i[t]]:i[t]=N(i[t]);return function(r){var o="";for(t=0;n>t;t++)o+=i[t]instanceof Function?i[t].call(r,e):i[t];return o}}function M(e,t){return e.isValid()?(t=R(t,e.localeData()),zn[t]=zn[t]||B(t),zn[t](e)):e.localeData().invalidDate()}function R(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Hn.lastIndex=0;i>=0&&Hn.test(e);)e=e.replace(Hn,n),Hn.lastIndex=0,i-=1;return e}function P(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function I(e,t,n){ri[e]=P(t)?t:function(e){return e&&n?n:t}}function U(e,t){return o(ri,e)?ri[e](t._strict,t._locale):new RegExp(H(e))}function H(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=g(e)}),n=0;n<e.length;n++)oi[e[n]]=i}function j(e,t){z(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function W(e,t,n){null!=t&&o(oi,e)&&oi[e](t,n._a,n,e)}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function q(e){return this._months[e.month()]}function K(e){return this._monthsShort[e.month()]}function G(e,t,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=a([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function Y(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function Z(t){return null!=t?(Y(this,t),e.updateOffset(this,!0),this):D(this,"Month")}function X(){return V(this.year(),this.month())}function J(e){var t,n=e._a;return n&&-2===u(e).overflow&&(t=n[ai]<0||n[ai]>11?ai:n[li]<1||n[li]>V(n[si],n[ai])?li:n[ui]<0||n[ui]>24||24===n[ui]&&(0!==n[ci]||0!==n[di]||0!==n[hi])?ui:n[ci]<0||n[ci]>59?ci:n[di]<0||n[di]>59?di:n[hi]<0||n[hi]>999?hi:-1,u(e)._overflowDayOfYear&&(si>t||t>li)&&(t=li),u(e).overflow=t),e}function Q(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ee(e,t){var n=!0;return s(function(){return n&&(Q(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function te(e,t){mi[e]||(Q(t),mi[e]=!0)}function ne(e){var t,n,i=e._i,r=gi.exec(i);if(r){for(u(e).iso=!0,t=0,n=vi.length;n>t;t++)if(vi[t][1].exec(i)){e._f=vi[t][0];break}for(t=0,n=yi.length;n>t;t++)if(yi[t][1].exec(i)){e._f+=(r[6]||" ")+yi[t][0];break}i.match(ti)&&(e._f+="Z"),Ce(e)}else e._isValid=!1}function ie(t){var n=bi.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(ne(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function re(e,t,n,i,r,o,s){var a=new Date(e,t,n,i,r,o,s);return 1970>e&&a.setFullYear(e),a}function oe(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function se(e){return ae(e)?366:365}function ae(e){return e%4===0&&e%100!==0||e%400===0}function le(){return ae(this.year())}function ue(e,t,n){var i,r=n-t,o=n-e.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=De(e).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ce(e){return ue(e,this._week.dow,this._week.doy).week}function de(){return this._week.dow}function he(){return this._week.doy}function fe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function pe(e){var t=ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function me(e,t,n,i,r){var o,s=6+r-i,a=oe(e,0,1+s),l=a.getUTCDay();return r>l&&(l+=7),n=null!=n?1*n:r,o=1+s+7*(t-1)-l+n,{year:o>0?e:e-1,dayOfYear:o>0?o:se(e-1)+o}}function ge(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ve(e,t,n){return null!=e?e:null!=t?t:n}function ye(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function be(e){var t,n,i,r,o=[];if(!e._d){for(i=ye(e),e._w&&null==e._a[li]&&null==e._a[ai]&&we(e),e._dayOfYear&&(r=ve(e._a[si],i[si]),e._dayOfYear>se(r)&&(u(e)._overflowDayOfYear=!0),n=oe(r,0,e._dayOfYear),e._a[ai]=n.getUTCMonth(),e._a[li]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=o[t]=i[t];for(;7>t;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ui]&&0===e._a[ci]&&0===e._a[di]&&0===e._a[hi]&&(e._nextDay=!0,e._a[ui]=0),e._d=(e._useUTC?oe:re).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ui]=24)}}function we(e){var t,n,i,r,o,s,a;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,s=4,n=ve(t.GG,e._a[si],ue(De(),1,4).year),i=ve(t.W,1),r=ve(t.E,1)):(o=e._locale._week.dow,s=e._locale._week.doy,n=ve(t.gg,e._a[si],ue(De(),o,s).year),i=ve(t.w,1),null!=t.d?(r=t.d,o>r&&++i):r=null!=t.e?t.e+o:o),a=me(n,i,r,s,o),e._a[si]=a.year,e._dayOfYear=a.dayOfYear}function Ce(t){if(t._f===e.ISO_8601)return void ne(t);t._a=[],u(t).empty=!0;var n,i,r,o,s,a=""+t._i,l=a.length,c=0;for(r=R(t._f,t._locale).match(Un)||[],n=0;n<r.length;n++)o=r[n],i=(a.match(U(o,t))||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&u(t).unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),c+=i.length),jn[o]?(i?u(t).empty=!1:u(t).unusedTokens.push(o),W(o,i,t)):t._strict&&!i&&u(t).unusedTokens.push(o);u(t).charsLeftOver=l-c,a.length>0&&u(t).unusedInput.push(a),u(t).bigHour===!0&&t._a[ui]<=12&&t._a[ui]>0&&(u(t).bigHour=void 0),t._a[ui]=xe(t._locale,t._a[ui],t._meridiem),be(t),J(t)}function xe(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function Se(e){var t,n,i,r,o;if(0===e._f.length)return u(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)o=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],Ce(t),c(t)&&(o+=u(t).charsLeftOver,o+=10*u(t).unusedTokens.length,u(t).score=o,(null==i||i>o)&&(i=o,n=t));s(e,n||t)}function Ae(e){if(!e._d){var t=$(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],be(e)}}function _e(e){var t=new f(J(Ee(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Ee(e){var t=e._i,r=e._f;return e._locale=e._locale||A(e._l),null===t||void 0===r&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),p(t)?new f(J(t)):(n(r)?Se(e):r?Ce(e):i(t)?e._d=t:$e(e),e))}function $e(t){var o=t._i;void 0===o?t._d=new Date:i(o)?t._d=new Date(+o):"string"==typeof o?ie(t):n(o)?(t._a=r(o.slice(0),function(e){return parseInt(e,10)}),be(t)):"object"==typeof o?Ae(t):"number"==typeof o?t._d=new Date(o):e.createFromInputFallback(t)}function ke(e,t,n,i,r){var o={};return"boolean"==typeof n&&(i=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=e,o._f=t,o._strict=i,_e(o)}function De(e,t,n,i){return ke(e,t,n,i,!1)}function Te(e,t){var i,r;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return De();for(i=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](i))&&(i=t[r]);return i}function Fe(){var e=[].slice.call(arguments,0);return Te("isBefore",e)}function Le(){var e=[].slice.call(arguments,0);return Te("isAfter",e)}function Oe(e){var t=$(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=A(),this._bubble()}function Ne(e){return e instanceof Oe}function Be(e,t){O(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)})}function Me(e){var t=(e||"").match(ti)||[],n=t[t.length-1]||[],i=(n+"").match(Ai)||["-",0,0],r=+(60*i[1])+g(i[2]);return"+"===i[0]?r:-r}function Re(t,n){var r,o;return n._isUTC?(r=n.clone(),o=(p(t)||i(t)?+t:+De(t))-+r,r._d.setTime(+r._d+o),e.updateOffset(r,!1),r):De(t).local()}function Pe(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ie(t,n){var i,r=this._offset||0;return null!=t?("string"==typeof t&&(t=Me(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(i=Pe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!n||this._changeInProgress?tt(this,Ze(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Pe(this)}function Ue(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function He(e){return this.utcOffset(0,e)}function ze(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pe(this),"m")),this}function je(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Me(this._i)),this}function We(e){return e=e?De(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qe(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(h(e,this),e=Ee(e),e._a){var t=e._isUTC?a(e._a):De(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ke(){return!this._isUTC}function Ge(){return this._isUTC}function Ye(){return this._isUTC&&0===this._offset}function Ze(e,t){var n,i,r,s=e,a=null;return Ne(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(a=_i.exec(e))?(n="-"===a[1]?-1:1,s={y:0,d:g(a[li])*n,h:g(a[ui])*n,m:g(a[ci])*n,s:g(a[di])*n,ms:g(a[hi])*n}):(a=Ei.exec(e))?(n="-"===a[1]?-1:1,s={y:Xe(a[2],n),M:Xe(a[3],n),d:Xe(a[4],n),h:Xe(a[5],n),m:Xe(a[6],n),s:Xe(a[7],n),w:Xe(a[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Qe(De(s.from),De(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),i=new Oe(s),Ne(e)&&o(e,"_locale")&&(i._locale=e._locale),i}function Xe(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Je(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Qe(e,t){var n;return t=Re(t,e),e.isBefore(t)?n=Je(e,t):(n=Je(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function et(e,t){return function(n,i){var r,o;return null===i||isNaN(+i)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=Ze(n,i),tt(this,r,e),this}}function tt(t,n,i,r){var o=n._milliseconds,s=n._days,a=n._months;r=null==r?!0:r,o&&t._d.setTime(+t._d+o*i),s&&T(t,"Date",D(t,"Date")+s*i),a&&Y(t,D(t,"Month")+a*i),r&&e.updateOffset(t,s||a)}function nt(e,t){var n=e||De(),i=Re(n,this).startOf("day"),r=this.diff(i,"days",!0),o=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(t&&t[o]||this.localeData().calendar(o,this,De(n)))}function it(){return new f(this)}function rt(e,t){var n;return t=E("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=p(e)?e:De(e),+this>+e):(n=p(e)?+e:+De(e),n<+this.clone().startOf(t))}function ot(e,t){var n;return t=E("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=p(e)?e:De(e),+e>+this):(n=p(e)?+e:+De(e),+this.clone().endOf(t)<n)}function st(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function at(e,t){var n;return t=E(t||"millisecond"),"millisecond"===t?(e=p(e)?e:De(e),+this===+e):(n=+De(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function lt(e,t,n){var i,r,o=Re(e,this),s=6e4*(o.utcOffset()-this.utcOffset());return t=E(t),"year"===t||"month"===t||"quarter"===t?(r=ut(this,o),"quarter"===t?r/=3:"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-s)/864e5:"week"===t?(i-s)/6048e5:i),n?r:m(r)}function ut(e,t){var n,i,r=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(r,"months");return 0>t-o?(n=e.clone().add(r-1,"months"),i=(t-o)/(o-n)):(n=e.clone().add(r+1,"months"),i=(t-o)/(n-o)),-(r+i)}function ct(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():M(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ht(t){var n=M(this,t||e.defaultFormat);return this.localeData().postformat(n)}function ft(e,t){return this.isValid()?Ze({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pt(e){return this.from(De(),e)}function mt(e,t){return this.isValid()?Ze({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.to(De(),e)}function vt(e){var t;return void 0===e?this._locale._abbr:(t=A(e),null!=t&&(this._locale=t),this)}function yt(){return this._locale}function bt(e){switch(e=E(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=E(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function Ct(){return+this._d-6e4*(this._offset||0)}function xt(){return Math.floor(+this/1e3)}function St(){return this._offset?new Date(+this):this._d}function At(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function _t(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Et(){return c(this)}function $t(){return s({},u(this))}function kt(){return u(this).overflow}function Dt(e,t){O(0,[e,e.length],0,t)}function Tt(e,t,n){return ue(De([e,11,31+t-n]),t,n).week}function Ft(e){var t=ue(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Lt(e){var t=ue(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Ot(){return Tt(this.year(),1,4)}function Nt(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function Bt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Mt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Rt(e){return this._weekdays[e.day()]}function Pt(e){return this._weekdaysShort[e.day()]}function It(e){return this._weekdaysMin[e.day()]}function Ut(e){var t,n,i;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=De([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ht(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Mt(e,this.localeData()),this.add(e-t,"d")):t}function zt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function jt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Wt(e,t){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Vt(e,t){return t._meridiemParse}function qt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Kt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Gt(e,t){t[hi]=g(1e3*("0."+e))}function Yt(){return this._isUTC?"UTC":""}function Zt(){return this._isUTC?"Coordinated Universal Time":""}function Xt(e){return De(1e3*e)}function Jt(){return De.apply(null,arguments).parseZone()}function Qt(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.call(t,n):i}function en(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function tn(){return this._invalidDate}function nn(e){return this._ordinal.replace("%d",e)}function rn(e){return e}function on(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)}function sn(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function an(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ln(e,t,n,i){var r=A(),o=a().set(i,t);return r[n](o,e)}function un(e,t,n,i,r){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ln(e,t,n,r);var o,s=[];for(o=0;i>o;o++)s[o]=ln(e,o,n,r);return s}function cn(e,t){return un(e,t,"months",12,"month")}function dn(e,t){return un(e,t,"monthsShort",12,"month")}function hn(e,t){return un(e,t,"weekdays",7,"day")}function fn(e,t){return un(e,t,"weekdaysShort",7,"day")}function pn(e,t){return un(e,t,"weekdaysMin",7,"day")}function mn(){var e=this._data;return this._milliseconds=Yi(this._milliseconds),this._days=Yi(this._days),this._months=Yi(this._months),e.milliseconds=Yi(e.milliseconds),e.seconds=Yi(e.seconds),e.minutes=Yi(e.minutes),e.hours=Yi(e.hours),e.months=Yi(e.months),e.years=Yi(e.years),this}function gn(e,t,n,i){var r=Ze(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function vn(e,t){return gn(this,e,t,1);
}function yn(e,t){return gn(this,e,t,-1)}function bn(e){return 0>e?Math.floor(e):Math.ceil(e)}function wn(){var e,t,n,i,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||0>=o&&0>=s&&0>=a||(o+=864e5*bn(xn(a)+s),s=0,a=0),l.milliseconds=o%1e3,e=m(o/1e3),l.seconds=e%60,t=m(e/60),l.minutes=t%60,n=m(t/60),l.hours=n%24,s+=m(n/24),r=m(Cn(s)),a+=r,s-=bn(xn(r)),i=m(a/12),a%=12,l.days=s,l.months=a,l.years=i,this}function Cn(e){return 4800*e/146097}function xn(e){return 146097*e/4800}function Sn(e){var t,n,i=this._milliseconds;if(e=E(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+Cn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(xn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function An(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function _n(e){return function(){return this.as(e)}}function En(e){return e=E(e),this[e+"s"]()}function $n(e){return function(){return this._data[e]}}function kn(){return m(this.days()/7)}function Dn(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function Tn(e,t,n){var i=Ze(e).abs(),r=dr(i.as("s")),o=dr(i.as("m")),s=dr(i.as("h")),a=dr(i.as("d")),l=dr(i.as("M")),u=dr(i.as("y")),c=r<hr.s&&["s",r]||1===o&&["m"]||o<hr.m&&["mm",o]||1===s&&["h"]||s<hr.h&&["hh",s]||1===a&&["d"]||a<hr.d&&["dd",a]||1===l&&["M"]||l<hr.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,Dn.apply(null,c)}function Fn(e,t){return void 0===hr[e]?!1:void 0===t?hr[e]:(hr[e]=t,!0)}function Ln(e){var t=this.localeData(),n=Tn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function On(){var e,t,n,i=fr(this._milliseconds)/1e3,r=fr(this._days),o=fr(this._months);e=m(i/60),t=m(e/60),i%=60,e%=60,n=m(o/12),o%=12;var s=n,a=o,l=r,u=t,c=e,d=i,h=this.asSeconds();return h?(0>h?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(u||c||d?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var Nn,Bn,Mn=e.momentProperties=[],Rn=!1,Pn={},In={},Un=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Hn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zn={},jn={},Wn=/\d/,Vn=/\d\d/,qn=/\d{3}/,Kn=/\d{4}/,Gn=/[+-]?\d{6}/,Yn=/\d\d?/,Zn=/\d{1,3}/,Xn=/\d{1,4}/,Jn=/[+-]?\d{1,6}/,Qn=/\d+/,ei=/[+-]?\d+/,ti=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ri={},oi={},si=0,ai=1,li=2,ui=3,ci=4,di=5,hi=6;O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),_("month","M"),I("M",Yn),I("MM",Yn,Vn),I("MMM",ii),I("MMMM",ii),z(["M","MM"],function(e,t){t[ai]=g(e)-1}),z(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[ai]=r:u(n).invalidMonth=e});var fi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mi={};e.suppressDeprecationWarnings=!1;var gi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),_("year","y"),I("Y",ei),I("YY",Yn,Vn),I("YYYY",Xn,Kn),I("YYYYY",Jn,Gn),I("YYYYYY",Jn,Gn),z(["YYYYY","YYYYYY"],si),z("YYYY",function(t,n){n[si]=2===t.length?e.parseTwoDigitYear(t):g(t)}),z("YY",function(t,n){n[si]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var wi=k("FullYear",!1);O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),_("week","w"),_("isoWeek","W"),I("w",Yn),I("ww",Yn,Vn),I("W",Yn),I("WW",Yn,Vn),j(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=g(e)});var Ci={dow:0,doy:6};O("DDD",["DDDD",3],"DDDo","dayOfYear"),_("dayOfYear","DDD"),I("DDD",Zn),I("DDDD",qn),z(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),e.ISO_8601=function(){};var xi=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=De.apply(null,arguments);return this>e?this:e}),Si=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=De.apply(null,arguments);return e>this?this:e});Be("Z",":"),Be("ZZ",""),I("Z",ti),I("ZZ",ti),z(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Me(e)});var Ai=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var _i=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ei=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ze.fn=Oe.prototype;var $i=et(1,"add"),ki=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Di=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Dt("gggg","weekYear"),Dt("ggggg","weekYear"),Dt("GGGG","isoWeekYear"),Dt("GGGGG","isoWeekYear"),_("weekYear","gg"),_("isoWeekYear","GG"),I("G",ei),I("g",ei),I("GG",Yn,Vn),I("gg",Yn,Vn),I("GGGG",Xn,Kn),I("gggg",Xn,Kn),I("GGGGG",Jn,Gn),I("ggggg",Jn,Gn),j(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=g(e)}),j(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),O("Q",0,0,"quarter"),_("quarter","Q"),I("Q",Wn),z("Q",function(e,t){t[ai]=3*(g(e)-1)}),O("D",["DD",2],"Do","date"),_("date","D"),I("D",Yn),I("DD",Yn,Vn),I("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),z(["D","DD"],li),z("Do",function(e,t){t[li]=g(e.match(Yn)[0],10)});var Ti=k("Date",!0);O("d",0,"do","day"),O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),_("day","d"),_("weekday","e"),_("isoWeekday","E"),I("d",Yn),I("e",Yn),I("E",Yn),I("dd",ii),I("ddd",ii),I("dddd",ii),j(["dd","ddd","dddd"],function(e,t,n){var i=n._locale.weekdaysParse(e);null!=i?t.d=i:u(n).invalidWeekday=e}),j(["d","e","E"],function(e,t,n,i){t[i]=g(e)});var Fi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Li="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Oi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");O("H",["HH",2],0,"hour"),O("h",["hh",2],0,function(){return this.hours()%12||12}),Wt("a",!0),Wt("A",!1),_("hour","h"),I("a",Vt),I("A",Vt),I("H",Yn),I("h",Yn),I("HH",Yn,Vn),I("hh",Yn,Vn),z(["H","HH"],ui),z(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),z(["h","hh"],function(e,t,n){t[ui]=g(e),u(n).bigHour=!0});var Ni=/[ap]\.?m?\.?/i,Bi=k("Hours",!0);O("m",["mm",2],0,"minute"),_("minute","m"),I("m",Yn),I("mm",Yn,Vn),z(["m","mm"],ci);var Mi=k("Minutes",!1);O("s",["ss",2],0,"second"),_("second","s"),I("s",Yn),I("ss",Yn,Vn),z(["s","ss"],di);var Ri=k("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,function(){return 10*this.millisecond()}),O(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),O(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),O(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),O(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),O(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),_("millisecond","ms"),I("S",Zn,Wn),I("SS",Zn,Vn),I("SSS",Zn,qn);var Pi;for(Pi="SSSS";Pi.length<=9;Pi+="S")I(Pi,Qn);for(Pi="S";Pi.length<=9;Pi+="S")z(Pi,Gt);var Ii=k("Milliseconds",!1);O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var Ui=f.prototype;Ui.add=$i,Ui.calendar=nt,Ui.clone=it,Ui.diff=lt,Ui.endOf=wt,Ui.format=ht,Ui.from=ft,Ui.fromNow=pt,Ui.to=mt,Ui.toNow=gt,Ui.get=F,Ui.invalidAt=kt,Ui.isAfter=rt,Ui.isBefore=ot,Ui.isBetween=st,Ui.isSame=at,Ui.isValid=Et,Ui.lang=Di,Ui.locale=vt,Ui.localeData=yt,Ui.max=Si,Ui.min=xi,Ui.parsingFlags=$t,Ui.set=F,Ui.startOf=bt,Ui.subtract=ki,Ui.toArray=At,Ui.toObject=_t,Ui.toDate=St,Ui.toISOString=dt,Ui.toJSON=dt,Ui.toString=ct,Ui.unix=xt,Ui.valueOf=Ct,Ui.year=wi,Ui.isLeapYear=le,Ui.weekYear=Ft,Ui.isoWeekYear=Lt,Ui.quarter=Ui.quarters=Bt,Ui.month=Z,Ui.daysInMonth=X,Ui.week=Ui.weeks=fe,Ui.isoWeek=Ui.isoWeeks=pe,Ui.weeksInYear=Nt,Ui.isoWeeksInYear=Ot,Ui.date=Ti,Ui.day=Ui.days=Ht,Ui.weekday=zt,Ui.isoWeekday=jt,Ui.dayOfYear=ge,Ui.hour=Ui.hours=Bi,Ui.minute=Ui.minutes=Mi,Ui.second=Ui.seconds=Ri,Ui.millisecond=Ui.milliseconds=Ii,Ui.utcOffset=Ie,Ui.utc=He,Ui.local=ze,Ui.parseZone=je,Ui.hasAlignedHourOffset=We,Ui.isDST=Ve,Ui.isDSTShifted=qe,Ui.isLocal=Ke,Ui.isUtcOffset=Ge,Ui.isUtc=Ye,Ui.isUTC=Ye,Ui.zoneAbbr=Yt,Ui.zoneName=Zt,Ui.dates=ee("dates accessor is deprecated. Use date instead.",Ti),Ui.months=ee("months accessor is deprecated. Use month instead",Z),Ui.years=ee("years accessor is deprecated. Use year instead",wi),Ui.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ue);var Hi=Ui,zi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ji={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Wi="Invalid date",Vi="%d",qi=/\d{1,2}/,Ki={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gi=y.prototype;Gi._calendar=zi,Gi.calendar=Qt,Gi._longDateFormat=ji,Gi.longDateFormat=en,Gi._invalidDate=Wi,Gi.invalidDate=tn,Gi._ordinal=Vi,Gi.ordinal=nn,Gi._ordinalParse=qi,Gi.preparse=rn,Gi.postformat=rn,Gi._relativeTime=Ki,Gi.relativeTime=on,Gi.pastFuture=sn,Gi.set=an,Gi.months=q,Gi._months=fi,Gi.monthsShort=K,Gi._monthsShort=pi,Gi.monthsParse=G,Gi.week=ce,Gi._week=Ci,Gi.firstDayOfYear=he,Gi.firstDayOfWeek=de,Gi.weekdays=Rt,Gi._weekdays=Fi,Gi.weekdaysMin=It,Gi._weekdaysMin=Oi,Gi.weekdaysShort=Pt,Gi._weekdaysShort=Li,Gi.weekdaysParse=Ut,Gi.isPM=qt,Gi._meridiemParse=Ni,Gi.meridiem=Kt,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=ee("moment.lang is deprecated. Use moment.locale instead.",x),e.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",A);var Yi=Math.abs,Zi=_n("ms"),Xi=_n("s"),Ji=_n("m"),Qi=_n("h"),er=_n("d"),tr=_n("w"),nr=_n("M"),ir=_n("y"),rr=$n("milliseconds"),or=$n("seconds"),sr=$n("minutes"),ar=$n("hours"),lr=$n("days"),ur=$n("months"),cr=$n("years"),dr=Math.round,hr={s:45,m:45,h:22,d:26,M:11},fr=Math.abs,pr=Oe.prototype;pr.abs=mn,pr.add=vn,pr.subtract=yn,pr.as=Sn,pr.asMilliseconds=Zi,pr.asSeconds=Xi,pr.asMinutes=Ji,pr.asHours=Qi,pr.asDays=er,pr.asWeeks=tr,pr.asMonths=nr,pr.asYears=ir,pr.valueOf=An,pr._bubble=wn,pr.get=En,pr.milliseconds=rr,pr.seconds=or,pr.minutes=sr,pr.hours=ar,pr.days=lr,pr.weeks=kn,pr.months=ur,pr.years=cr,pr.humanize=Ln,pr.toISOString=On,pr.toString=On,pr.toJSON=On,pr.locale=vt,pr.localeData=yt,pr.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",On),pr.lang=Di,O("X",0,0,"unix"),O("x",0,0,"valueOf"),I("x",ei),I("X",ni),z("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),z("x",function(e,t,n){n._d=new Date(g(e))}),e.version="2.10.6",t(De),e.fn=Hi,e.min=Fe,e.max=Le,e.utc=a,e.unix=Xt,e.months=cn,e.isDate=i,e.locale=x,e.invalid=d,e.duration=Ze,e.isMoment=p,e.weekdays=hn,e.parseZone=Jt,e.localeData=A,e.isDuration=Ne,e.monthsShort=dn,e.weekdaysMin=pn,e.defineLocale=S,e.weekdaysShort=fn,e.normalizeUnits=E,e.relativeTimeThreshold=Fn;var mr=e;return mr}),function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:!0}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,i,r,o){return function(s,a,l){function u(){var e;if(m)e=m;else if(r.serverTime){var t=(new Date).getTime(),i=t-x+r.serverTime;e=n(i)}else e=n();return e}function c(){g&&(t.clearTimeout(g),g=null)}function d(e){var n=u().diff(e,"day"),i=w&&n>=w;if(i?a.text(e.format(C)):a.text(e.from(u(),y)),b&&!a.attr("title")&&a.attr("title",e.local().format(b)),!i){var r=Math.abs(u().diff(e,"minute")),o=3600;1>r?o=1:60>r?o=30:180>r&&(o=300),g=t.setTimeout(function(){d(e)},1e3*o)}}function h(e){_&&a.attr("datetime",e)}function f(){if(c(),p){var e=i.preprocessDate(p,S,v);d(e),h(e.toISOString())}}var p,m,g=null,v=o.format,y=r.withoutSuffix,b=r.titleFormat,w=r.fullDateThreshold,C=r.fullDateFormat,x=(new Date).getTime(),S=o.preprocess,A=l.amTimeAgo,_="TIME"===a[0].nodeName.toUpperCase();s.$watch(A,function(e){return"undefined"==typeof e||null===e||""===e?(c(),void(p&&(a.text(""),h(""),p=null))):(p=e,void f())}),e.isDefined(l.amFrom)&&s.$watch(l.amFrom,function(e){m="undefined"==typeof e||null===e||""===e?null:n(e),f()}),e.isDefined(l.amWithoutSuffix)&&s.$watch(l.amWithoutSuffix,function(e){"boolean"==typeof e?(y=e,f()):y=r.withoutSuffix}),l.$observe("amFormat",function(e){"undefined"!=typeof e&&(v=e,f())}),l.$observe("amPreprocess",function(e){S=e,f()}),l.$observe("amFullDateThreshold",function(e){w=e,f()}),l.$observe("amFullDateFormat",function(e){C=e,f()}),s.$on("$destroy",function(){c()}),s.$on("amMoment:localeChanged",function(){f()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,i,r){this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(i,r){var o=t.locale(i,r);return e.isDefined(i)&&n.$broadcast("amMoment:localeChanged"),o},this.changeTimezone=function(e){r.timezone=e,n.$broadcast("amMoment:timezoneChanged")},this.preprocessDate=function(n,o,s){return e.isUndefined(o)&&(o=r.preprocess),this.preprocessors[o]?this.preprocessors[o](n,s):(o&&i.warn("angular-moment: Ignoring unsupported value for preprocess: "+o),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,s))},this.applyTimezone=function(e,t){return(t=t||r.timezone)?(t.match(/^Z|[+-]\d\d:?\d\d$/i)?e=e.utcOffset(t):e.tz?e=e.tz(t):i.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?"),e):e}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(n,i,r){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,i);var o=e(n);return o.isValid()?t.applyTimezone(o,r).calendar():""}return i.$stateful=n.statefulFilters,i}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(n,i,r,o,s,a){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,s);var l=e(n);if(!l.isValid())return"";var u;if("undefined"==typeof i||null===i)u=e();else if(i=t.preprocessDate(i,a),u=e(i),!u.isValid())return"";return t.applyTimezone(l).diff(t.applyTimezone(u),r,o)}return i.$stateful=n.statefulFilters,i}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(i,r,o,s,a){var l=a||n.format;if("undefined"==typeof i||null===i)return"";i=t.preprocessDate(i,o,l);var u=e(i);return u.isValid()?t.applyTimezone(u,s).format(r):""}return i.$stateful=n.statefulFilters,i}]).filter("amDurationFormat",["moment","angularMomentConfig",function(e,t){function n(t,n,i){return"undefined"==typeof t||null===t?"":e.duration(t,n).humanize(i)}return n.$stateful=t.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(n,i,r,o){var s,a;return"undefined"==typeof n||null===n?"":(n=t.preprocessDate(n,i),s=e(n),s.isValid()?(a=e(o),"undefined"!=typeof o&&a.isValid()?t.applyTimezone(s).from(a,r):t.applyTimezone(s).fromNow(r)):"")}return i.$stateful=n.statefulFilters,i}]).filter("amSubtract",["moment","angularMomentConfig",function(e,t){function n(t,n,i){return"undefined"==typeof t||null===t?"":e(t).subtract(parseInt(n,10),i)}return n.$stateful=t.statefulFilters,n}]).filter("amAdd",["moment","angularMomentConfig",function(e,t){function n(t,n,i){return"undefined"==typeof t||null===t?"":e(t).add(parseInt(n,10),i)}return n.$stateful=t.statefulFilters,n}])}"function"==typeof define&&define.amd?define(["angular","moment"],e):"undefined"!=typeof module&&module&&module.exports?(e(angular,require("moment")),module.exports="angularMoment"):e(angular,("undefined"!=typeof global?global:window).moment)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("../moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}var n=e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return n}),function(e){var t=function(e){var t=e.module("FBAngular",[]);return t.factory("Fullscreen",["$document","$rootScope",function(t,n){var i=t[0],r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element&&Element.ALLOW_KEYBOARD_INPUT,o=n.$new();t.on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){o.$emit("FBFullscreen.change",s.isEnabled())});var s={$on:e.bind(o,o.$on),all:function(){s.enable(i.documentElement)},enable:function(e){e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?/Version\/[\d]{1,2}(\.[\d]{1,2}){1}(\.(\d){1,2}){0,1} Safari/.test(navigator.userAgent)?e.webkitRequestFullscreen():e.webkitRequestFullscreen(r):e.msRequestFullscreen&&e.msRequestFullscreen()},cancel:function(){i.cancelFullScreen?i.cancelFullScreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.msExitFullscreen&&i.msExitFullscreen()},isEnabled:function(){var e=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement||i.msFullscreenElement;return e?!0:!1},toggleAll:function(){s.isEnabled()?s.cancel():s.all()},isSupported:function(){var e=i.documentElement,t=e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen;return t?!0:!1}};return s}]),t.directive("fullscreen",["Fullscreen",function(e){return{link:function(t,n,i){if(i.fullscreen){t.$watch(i.fullscreen,function(t){var i=e.isEnabled();t&&!i?(e.enable(n[0]),n.addClass("isInFullScreen")):!t&&i&&(e.cancel(),n.removeClass("isInFullScreen"))});var r=e.$on("FBFullscreen.change",function(e,r){r||t.$evalAsync(function(){t.$eval(i.fullscreen+"= false"),n.removeClass("isInFullScreen")})});t.$on("$destroy",function(){r()})}else{if(void 0!==i.onlyWatchedProperty)return;n.on("click",function(t){e.enable(n[0])})}}}}]),t};"function"==typeof define&&define.amd?define("FBAngular",["angular"],function(e){return t(e)}):t(e.angular)}(window);var webodf_version="0.5.9";Runtime.prototype.getVariable=function(e){},Runtime.prototype.toJson=function(e){},Runtime.prototype.fromJson=function(e){},Runtime.prototype.byteArrayFromString=function(e,t){},Runtime.prototype.byteArrayToString=function(e,t){},Runtime.prototype.read=function(e,t,n,i){},Runtime.prototype.readFile=function(e,t,n){},Runtime.prototype.readFileSync=function(e,t){},Runtime.prototype.loadXML=function(e,t){},Runtime.prototype.writeFile=function(e,t,n){},Runtime.prototype.deleteFile=function(e,t){},Runtime.prototype.log=function(e,t){},Runtime.prototype.setTimeout=function(e,t){},Runtime.prototype.clearTimeout=function(e){},Runtime.prototype.libraryPaths=function(){},Runtime.prototype.currentDirectory=function(){},Runtime.prototype.setCurrentDirectory=function(e){},Runtime.prototype.type=function(){},Runtime.prototype.getDOMImplementation=function(){},Runtime.prototype.parseXML=function(e){},Runtime.prototype.exit=function(e){},Runtime.prototype.getWindow=function(){},Runtime.prototype.requestAnimationFrame=function(e){},Runtime.prototype.cancelAnimationFrame=function(e){},Runtime.prototype.assert=function(e,t){};var IS_COMPILED_CODE=!0;Runtime.byteArrayToString=function(e,t){function n(e){var t,n="",i=e.length;for(t=0;i>t;t+=1)n+=String.fromCharCode(255&e[t]);return n}function i(e){var t,n,i,r,o,s="",a=e.length,l=[];for(t=a>=3&&239===e[0]&&187===e[1]&&191===e[2]?3:0;a>t;t+=1)n=e[t],128>n?l.push(n):(t+=1,i=e[t],n>=194&&224>n?l.push((31&n)<<6|63&i):(t+=1,r=e[t],n>=224&&240>n?l.push((15&n)<<12|(63&i)<<6|63&r):(t+=1,o=e[t],n>=240&&245>n&&(n=(7&n)<<18|(63&i)<<12|(63&r)<<6|63&o,n-=65536,l.push((n>>10)+55296,(1023&n)+56320))))),1e3<=l.length&&(s+=String.fromCharCode.apply(null,l),l.length=0);return s+String.fromCharCode.apply(null,l)}var r;return"utf8"===t?r=i(e):("binary"!==t&&this.log("Unsupported encoding: "+t),r=n(e)),r},Runtime.getVariable=function(g){try{return eval(g)}catch(k){}},Runtime.toJson=function(e){return JSON.stringify(e)},Runtime.fromJson=function(e){return JSON.parse(e)},Runtime.getFunctionName=function(e){return void 0===e.name?(e=/function\s+(\w+)/.exec(e))&&e[1]:e.name},Runtime.assert=function(e,t){if(!e)throw this.log("alert","ASSERTION FAILED:\n"+t),Error(t)},Runtime.create=function(){return"undefined"!==String(typeof window)?new BrowserRuntime:"undefined"!==String(typeof require)?new NodeJSRuntime:new RhinoRuntime};var runtime=Runtime.create(),core={},gui={},xmldom={},odf={},ops={},webodf={};!function(){webodf.Version="undefined"!==String(typeof webodf_version)?webodf_version:"From Source"}(),function(){function g(e,t,n){var i,r,o=e+"/manifest.json";runtime.log("Loading manifest: "+o);try{i=runtime.readFileSync(o,"utf-8")}catch(s){if(!n)throw console.log(String(s)),s;return void runtime.log("No loadable manifest found.")}n=JSON.parse(i);for(r in n)n.hasOwnProperty(r)&&(t[r]={dir:e,deps:n[r]})}function k(e,t,n){function i(e){if(!s[e]&&!n(e)){if(o[e])throw"Circular dependency detected for "+e+".";if(o[e]=!0,!t[e])throw"Missing dependency information for class "+e+".";var a,l=t[e],u=l.deps,c=u.length;for(a=0;c>a;a+=1)i(u[a]);o[e]=!1,s[e]=!0,r.push(l.dir+"/"+e.replace(".","/")+".js")}}var r=[],o={},s={};return e.forEach(i),r}function d(e,t){return t+("\n//# sourceURL="+e)}function b(b){var f,e;for(f=0;f<b.length;f+=1)e=runtime.readFileSync(b[f],"utf-8"),e=d(b[f],e),eval(e)}function f(e){e=e.split(".");var t,n=p,i=e.length;for(t=0;i>t;t+=1){if(!n.hasOwnProperty(e[t]))return!1;n=n[e[t]]}return!0}var n,p={core:core,gui:gui,xmldom:xmldom,odf:odf,ops:ops};runtime.loadClasses=function(e,t){if(IS_COMPILED_CODE||0===e.length)return t&&t();var i;if(!(i=n)){i=[];var r,o=runtime.libraryPaths();for(runtime.currentDirectory()&&-1===o.indexOf(runtime.currentDirectory())&&g(runtime.currentDirectory(),i,!0),r=0;r<o.length;r+=1)g(o[r],i)}if(n=i,e=k(e,n,f),0===e.length)return t&&t();if("BrowserRuntime"===runtime.type()&&t){i=e,o=document.currentScript||document.documentElement.lastChild,r=document.createDocumentFragment();var s,a;for(a=0;a<i.length;a+=1)s=document.createElement("script"),s.type="text/javascript",s.charset="utf-8",s.async=!1,s.setAttribute("src",i[a]),r.appendChild(s);t&&(s.onload=t),o.parentNode.insertBefore(r,o)}else b(e),t&&t()},runtime.loadClass=function(e,t){runtime.loadClasses([e],t)}}(),function(){var e=function(e){return e};runtime.getTranslator=function(){return e},runtime.setTranslator=function(t){e=t},runtime.tr=function(t){var n=e(t);return n&&"string"===String(typeof n)?n:t}}(),function(g){function k(d){if(d.length){var b=d[0];runtime.readFile(b,"utf8",function(f,n){function g(){var b;(b=eval(k))&&runtime.exit(b)}var r="",r=b.lastIndexOf("/"),k=n,r=-1!==r?b.substring(0,r):".";runtime.setCurrentDirectory(r),f?(runtime.log(f),runtime.exit(1)):null===k?(runtime.log("No code found for "+b),runtime.exit(1)):g.apply(null,d)})}}g=g?Array.prototype.slice.call(g):[],k("NodeJSRuntime"===runtime.type()?process.argv.slice(2):"RhinoRuntime"===runtime.type()?g:g.slice(1))}("undefined"!==String(typeof arguments)&&arguments),function(){core.Async=function(){return{forEach:function(e,t,n){function i(e){s!==o&&(e?(s=o,n(e)):(s+=1,s===o&&n(null)))}var r,o=e.length,s=0;for(r=0;o>r;r+=1)t(e[r],i)},destroyAll:function(e,t){function n(i,r){r?t(r):i<e.length?e[i](function(e){n(i+1,e)}):t()}n(0,void 0)}}}()}(),core.Base64=makeBase64(),core.CSSUnits=function(){var e=this,t={"in":1,cm:2.54,mm:25.4,pt:72,pc:12,px:96};this.convert=function(e,n,i){return e*t[i]/t[n]},this.convertMeasure=function(t,n){var i,r;return t&&n&&(i=parseFloat(t),r=t.replace(i.toString(),""),i=e.convert(i,r,n)),i},this.getUnits=function(e){return e.substr(e.length-2,e.length)}},function(){function e(){var e,t,i,r,o,s,a,l,u;return void 0===n&&(t=(e=runtime.getWindow())&&e.document,s=t.documentElement,a=t.body,n={rangeBCRIgnoresElementBCR:!1,unscaledRangeClientRects:!1,elementBCRIgnoresBodyScroll:!1},t&&(r=t.createElement("div"),r.style.position="absolute",r.style.left="-99999px",r.style.transform="scale(2)",r.style["-webkit-transform"]="scale(2)",o=t.createElement("div"),r.appendChild(o),a.appendChild(r),e=t.createRange(),e.selectNode(o),n.rangeBCRIgnoresElementBCR=0===e.getClientRects().length,o.appendChild(t.createTextNode("Rect transform test")),t=o.getBoundingClientRect(),i=e.getBoundingClientRect(),n.unscaledRangeClientRects=2<Math.abs(t.height-i.height),r.style.transform="",r.style["-webkit-transform"]="",t=s.style.overflow,i=a.style.overflow,l=a.style.height,u=a.scrollTop,s.style.overflow="visible",a.style.overflow="visible",a.style.height="200%",a.scrollTop=a.scrollHeight,n.elementBCRIgnoresBodyScroll=e.getBoundingClientRect().top!==o.getBoundingClientRect().top,a.scrollTop=u,a.style.height=l,a.style.overflow=i,s.style.overflow=t,e.detach(),a.removeChild(r),e=Object.keys(n).map(function(e){return e+":"+String(n[e])}).join(", "),runtime.log("Detected browser quirks - "+e))),n}function t(e,t,n){for(e=e?e.firstElementChild:null;e;){if(e.localName===n&&e.namespaceURI===t)return e;e=e.nextElementSibling}return null}var n;core.DomUtilsImpl=function(){function n(e,t){for(var n,i=0;e.parentNode!==t;)runtime.assert(null!==e.parentNode,"parent is null"),e=e.parentNode;for(n=t.firstChild;n!==e;)i+=1,n=n.nextSibling;return i}function i(e,t){return 0>=e.compareBoundaryPoints(Range.START_TO_START,t)&&0<=e.compareBoundaryPoints(Range.END_TO_END,t)}function r(e,t){return 0>=e.compareBoundaryPoints(Range.END_TO_START,t)&&0<=e.compareBoundaryPoints(Range.START_TO_END,t)}function o(e,t){var n=null;return e.nodeType===Node.TEXT_NODE&&(0===e.length?(e.parentNode.removeChild(e),t.nodeType===Node.TEXT_NODE&&(n=t)):(t.nodeType===Node.TEXT_NODE&&(e.appendData(t.data),t.parentNode.removeChild(t)),n=e)),n}function s(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);return t.removeChild(e),t}function a(e,t){var n,i=e.parentNode,r=e.firstChild,o=t(e);if(o===NodeFilter.FILTER_SKIP)return i;for(;r;)n=r.nextSibling,a(r,t),r=n;return i&&o===NodeFilter.FILTER_REJECT&&s(e),i}function l(e,t){return e===t||Boolean(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)}function u(t,n){return e().unscaledRangeClientRects?t:t/n}function c(e,t,n){Object.keys(t).forEach(function(i){var r=i.split(":"),o=r[1],s=n(r[0]),r=t[i],a=typeof r;"object"===a?Object.keys(r).length&&(i=s?e.getElementsByTagNameNS(s,o)[0]||e.ownerDocument.createElementNS(s,i):e.getElementsByTagName(o)[0]||e.ownerDocument.createElement(i),e.appendChild(i),c(i,r,n)):s&&(runtime.assert("number"===a||"string"===a,"attempting to map unsupported type '"+a+"' (key: "+i+")"),e.setAttributeNS(s,i,String(r)))})}var d=null;this.splitBoundaries=function(e){var t,i,r,o,s=[];if(e.startContainer.nodeType===Node.TEXT_NODE||e.endContainer.nodeType===Node.TEXT_NODE){if(i=e.endContainer,r=e.endContainer.nodeType!==Node.TEXT_NODE?e.endOffset===e.endContainer.childNodes.length:!1,o=e.endOffset,t=e.endContainer,o<t.childNodes.length)for(t=t.childNodes.item(o),o=0;t.firstChild;)t=t.firstChild;else for(;t.lastChild;)t=t.lastChild,o=t.nodeType===Node.TEXT_NODE?t.textContent.length:t.childNodes.length;if(t===i&&(i=null),e.setEnd(t,o),o=e.endContainer,0!==e.endOffset&&o.nodeType===Node.TEXT_NODE&&(t=o,e.endOffset!==t.length&&(s.push(t.splitText(e.endOffset)),s.push(t))),o=e.startContainer,0!==e.startOffset&&o.nodeType===Node.TEXT_NODE&&(t=o,e.startOffset!==t.length&&(o=t.splitText(e.startOffset),s.push(t),s.push(o),e.setStart(o,0))),null!==i){for(o=e.endContainer;o.parentNode&&o.parentNode!==i;)o=o.parentNode;r=r?i.childNodes.length:n(o,i),e.setEnd(i,r)}}return s},this.containsRange=i,this.rangesIntersect=r,this.rangeIntersection=function(e,t){var n;return r(e,t)&&(n=e.cloneRange(),-1===e.compareBoundaryPoints(Range.START_TO_START,t)&&n.setStart(t.startContainer,t.startOffset),1===e.compareBoundaryPoints(Range.END_TO_END,t)&&n.setEnd(t.endContainer,t.endOffset)),n},this.getNodesInRange=function(e,t,n){var i=[],r=e.commonAncestorContainer,r=r.nodeType===Node.TEXT_NODE?r.parentNode:r;n=e.startContainer.ownerDocument.createTreeWalker(r,n,t,!1);var o,s;if(e.endContainer.childNodes[e.endOffset-1]?(o=e.endContainer.childNodes[e.endOffset-1],s=Node.DOCUMENT_POSITION_PRECEDING|Node.DOCUMENT_POSITION_CONTAINED_BY):(o=e.endContainer,s=Node.DOCUMENT_POSITION_PRECEDING),e.startContainer.childNodes[e.startOffset])e=e.startContainer.childNodes[e.startOffset],n.currentNode=e;else{var a=e.startContainer;e.startOffset===(a.nodeType===Node.TEXT_NODE?a.length:a.childNodes.length)?(e=e.startContainer,n.currentNode=e,n.lastChild(),e=n.nextNode()):(e=e.startContainer,n.currentNode=e)}if(e){if(e=n.currentNode,e!==r)for(e=e.parentNode;e&&e!==r;)t(e)===NodeFilter.FILTER_REJECT&&(n.currentNode=e),e=e.parentNode;switch(e=n.currentNode,t(e)){case NodeFilter.FILTER_REJECT:
for(e=n.nextSibling();!e&&n.parentNode();)e=n.nextSibling();break;case NodeFilter.FILTER_SKIP:e=n.nextNode()}for(;e&&(t=o.compareDocumentPosition(e),0===t||0!==(t&s));)i.push(e),e=n.nextNode()}return i},this.normalizeTextNodes=function(e){e&&e.nextSibling&&(e=o(e,e.nextSibling)),e&&e.previousSibling&&o(e.previousSibling,e)},this.rangeContainsNode=function(e,t){var n,r=t.ownerDocument.createRange(),o=t.ownerDocument.createRange();return r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),o.selectNodeContents(t),n=i(r,o),r.detach(),o.detach(),n},this.mergeIntoParent=s,this.removeUnwantedNodes=a,this.removeAllChildNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},this.getElementsByTagNameNS=function(e,t,n){var i=[];for(e=e.getElementsByTagNameNS(t,n),i.length=n=e.length,t=0;n>t;t+=1)i[t]=e.item(t);return i},this.getElementsByTagName=function(e,t){var n,i,r,o=[];for(n=e.getElementsByTagName(t),o.length=r=n.length,i=0;r>i;i+=1)o[i]=n.item(i);return o},this.containsNode=function(e,t){return e===t||e.contains(t)},this.comparePoints=function(e,t,i,r){if(e===i)return r-t;var o=e.compareDocumentPosition(i);return 2===o?o=-1:4===o?o=1:10===o?(t=n(e,i),o=r>t?1:-1):(r=n(i,e),o=t>r?-1:1),o},this.adaptRangeDifferenceToZoomLevel=u,this.translateRect=function(e,t,n){return{top:u(e.top-t.top,n),left:u(e.left-t.left,n),bottom:u(e.bottom-t.top,n),right:u(e.right-t.left,n),width:u(e.width,n),height:u(e.height,n)}},this.getBoundingClientRect=function(t){var n=t.ownerDocument,i=e(),r=n.body;if((!1===i.unscaledRangeClientRects||i.rangeBCRIgnoresElementBCR)&&t.nodeType===Node.ELEMENT_NODE)return t=t.getBoundingClientRect(),i.elementBCRIgnoresBodyScroll?{left:t.left+r.scrollLeft,right:t.right+r.scrollLeft,top:t.top+r.scrollTop,bottom:t.bottom+r.scrollTop,width:t.width,height:t.height}:t;var o;return d?o=d:d=o=n.createRange(),i=o,i.selectNode(t),i.getBoundingClientRect()},this.mapKeyValObjOntoNode=function(e,t,n){Object.keys(t).forEach(function(i){var r=i.split(":"),o=r[1],r=n(r[0]),s=t[i];r?(o=e.getElementsByTagNameNS(r,o)[0],o||(o=e.ownerDocument.createElementNS(r,i),e.appendChild(o)),o.textContent=s):runtime.log("Key ignored: "+i)})},this.removeKeyElementsFromNode=function(e,t,n){t.forEach(function(t){var i=t.split(":"),r=i[1];(i=n(i[0]))?(r=e.getElementsByTagNameNS(i,r)[0])?r.parentNode.removeChild(r):runtime.log("Element for "+t+" not found."):runtime.log("Property Name ignored: "+t)})},this.getKeyValRepresentationOfNode=function(e,t){for(var n,i={},r=e.firstElementChild;r;)(n=t(r.namespaceURI))&&(i[n+":"+r.localName]=r.textContent),r=r.nextElementSibling;return i},this.mapObjOntoNode=c,this.cloneEvent=function(e){var t=Object.create(null);return Object.keys(e.constructor.prototype).forEach(function(n){t[n]=e[n]}),t.prototype=e.constructor.prototype,t},this.getDirectChild=t,function(e){var t,n;n=runtime.getWindow(),null!==n&&(t=n.navigator.appVersion.toLowerCase(),n=-1===t.indexOf("chrome")&&(-1!==t.indexOf("applewebkit")||-1!==t.indexOf("safari")),t=-1!==t.indexOf("msie")||-1!==t.indexOf("trident"),n||t)&&(e.containsNode=l)}(this)},core.DomUtils=new core.DomUtilsImpl}(),core.Cursor=function(e,t){function n(e){e.parentNode&&(l.push(e.previousSibling),l.push(e.nextSibling),e.parentNode.removeChild(e))}function i(e,t,n){if(t.nodeType===Node.TEXT_NODE){runtime.assert(Boolean(t),"putCursorIntoTextNode: invalid container");var i=t.parentNode;runtime.assert(Boolean(i),"putCursorIntoTextNode: container without parent"),runtime.assert(n>=0&&n<=t.length,"putCursorIntoTextNode: offset is out of bounds"),0===n?i.insertBefore(e,t):(n!==t.length&&t.splitText(n),i.insertBefore(e,t.nextSibling))}else t.nodeType===Node.ELEMENT_NODE&&t.insertBefore(e,t.childNodes.item(n));l.push(e.previousSibling),l.push(e.nextSibling)}var r,o,s=e.createElementNS("urn:webodf:names:cursor","cursor"),a=e.createElementNS("urn:webodf:names:cursor","anchor"),l=[],u=e.createRange(),c=core.DomUtils;this.getNode=function(){return s},this.getAnchorNode=function(){return a.parentNode?a:s},this.getSelectedRange=function(){return o?(u.setStartBefore(s),u.collapse(!0)):(u.setStartAfter(r?a:s),u.setEndBefore(r?s:a)),u},this.setSelectedRange=function(e,t){u&&u!==e&&u.detach(),u=e,r=!1!==t,(o=e.collapsed)?(n(a),n(s),i(s,e.startContainer,e.startOffset)):(n(a),n(s),i(r?s:a,e.endContainer,e.endOffset),i(r?a:s,e.startContainer,e.startOffset)),l.forEach(c.normalizeTextNodes),l.length=0},this.hasForwardSelection=function(){return r},this.remove=function(){n(s),l.forEach(c.normalizeTextNodes),l.length=0},s.setAttributeNS("urn:webodf:names:cursor","memberId",t),a.setAttributeNS("urn:webodf:names:cursor","memberId",t)},core.Destroyable=function(){},core.Destroyable.prototype.destroy=function(e){},core.EventSource=function(){},core.EventSource.prototype.subscribe=function(e,t){},core.EventSource.prototype.unsubscribe=function(e,t){},core.EventNotifier=function(e){function t(e){runtime.assert(!n.hasOwnProperty(e),'Duplicated event ids: "'+e+'" registered more than once.'),n[e]=[]}var n={};this.emit=function(e,t){var i,r;for(runtime.assert(n.hasOwnProperty(e),'unknown event fired "'+e+'"'),r=n[e],i=0;i<r.length;i+=1)r[i](t)},this.subscribe=function(e,t){runtime.assert(n.hasOwnProperty(e),'tried to subscribe to unknown event "'+e+'"'),n[e].push(t)},this.unsubscribe=function(e,t){var i;runtime.assert(n.hasOwnProperty(e),'tried to unsubscribe from unknown event "'+e+'"'),i=n[e].indexOf(t),runtime.assert(-1!==i,'tried to unsubscribe unknown callback from event "'+e+'"'),-1!==i&&n[e].splice(i,1)},this.register=t,e&&e.forEach(t)},core.ScheduledTask=function(e,t,n){function i(){s&&(n(o),s=!1)}function r(){i(),e.apply(void 0,a),a=null}var o,s=!1,a=[],l=!1;this.trigger=function(){runtime.assert(!1===l,"Can't trigger destroyed ScheduledTask instance"),a=Array.prototype.slice.call(arguments),s||(s=!0,o=t(r))},this.triggerImmediate=function(){runtime.assert(!1===l,"Can't trigger destroyed ScheduledTask instance"),a=Array.prototype.slice.call(arguments),r()},this.processRequests=function(){s&&r()},this.cancel=i,this.restart=function(){runtime.assert(!1===l,"Can't trigger destroyed ScheduledTask instance"),i(),s=!0,o=t(r)},this.destroy=function(e){i(),l=!0,e()}},function(){var e;core.Task={},core.Task.SUPPRESS_MANUAL_PROCESSING=!1,core.Task.processTasks=function(){core.Task.SUPPRESS_MANUAL_PROCESSING||e.performRedraw()},core.Task.createRedrawTask=function(t){return new core.ScheduledTask(t,e.requestRedrawTask,e.cancelRedrawTask)},core.Task.createTimeoutTask=function(e,t){return new core.ScheduledTask(e,function(e){return runtime.setTimeout(e,t)},runtime.clearTimeout)},e=new function(){var e={};this.requestRedrawTask=function(t){var n=runtime.requestAnimationFrame(function(){t(),delete e[n]});return e[n]=t,n},this.performRedraw=function(){Object.keys(e).forEach(function(t){e[t](),runtime.cancelAnimationFrame(parseInt(t,10))}),e={}},this.cancelRedrawTask=function(t){runtime.cancelAnimationFrame(t),delete e[t]}}}(),core.EventSubscriptions=function(){function e(e,t,i){e.subscribe(t,i),n.push({eventSource:e,eventid:t,callback:i})}function t(){var e=[];n.forEach(function(e){e.eventSource.unsubscribe(e.eventid,e.callback)}),n.length=0,Object.keys(r).forEach(function(t){r[t].forEach(function(t){e.push(t.task.destroy)}),delete r[t]}),core.Async.destroyAll(e,function(){}),i=new core.EventNotifier}var n=[],i=new core.EventNotifier,r={},o=0;this.addSubscription=e,this.addFrameSubscription=function(t,n,s){var a,l,u,c;for(r.hasOwnProperty(n)||(r[n]=[]),u=r[n],c=0;c<u.length;c+=1)if(u[c].eventSource===t){a=u[c];break}a||(l="s"+o,o+=1,i.register(l),a={frameEventId:l,eventSource:t,task:core.Task.createRedrawTask(function(){i.emit(l,void 0)})},u.push(a),e(t,n,a.task.trigger)),i.subscribe(a.frameEventId,s)},this.unsubscribeAll=t,this.destroy=function(e){t(),e()}},core.LazyProperty=function(e){var t,n=!1;this.value=function(){return n||(t=e(),n=!0),t},this.reset=function(){n=!1}},core.LoopWatchDog=function(e,t){var n=Date.now(),i=0;this.check=function(){var r;if(e&&(r=Date.now(),r-n>e))throw runtime.log("alert","watchdog timeout"),"timeout!";if(t>0&&(i+=1,i>t))throw runtime.log("alert","watchdog loop overflow"),"loop overflow"}},core.NodeFilterChain=function(e){var t=NodeFilter.FILTER_REJECT,n=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(i){var r;for(r=0;r<e.length;r+=1)if(e[r].acceptNode(i)===t)return t;return n}},core.PositionIterator=function(e,t,n,i){function r(){this.acceptNode=function(e){return!e||e.nodeType===f&&0===e.length?g:m}}function o(e){this.acceptNode=function(t){return!t||t.nodeType===f&&0===t.length?g:e.acceptNode(t)}}function s(){var e=u.currentNode,t=e.nodeType;c=t===f?e.length-1:t===p?1:0}function a(){if(null===u.previousSibling()){if(!u.parentNode()||u.currentNode===e)return u.firstChild(),!1;c=0}else s();return!0}function l(){var t,n=u.currentNode;if(t=d(n),n!==e)for(n=n.parentNode;n&&n!==e;)d(n)===g&&(u.currentNode=n,t=g),n=n.parentNode;return t===g?(c=u.currentNode.nodeType===f?n.length:1,n=h.nextPosition()):n=t===m?!0:h.nextPosition(),n&&runtime.assert(d(u.currentNode)===m,"moveToAcceptedNode did not result in walker being on an accepted node"),n}var u,c,d,h=this,f=Node.TEXT_NODE,p=Node.ELEMENT_NODE,m=NodeFilter.FILTER_ACCEPT,g=NodeFilter.FILTER_REJECT;this.nextPosition=function(){var t=u.currentNode,n=t.nodeType;if(t===e)return!1;if(0===c&&n===p)null===u.firstChild()&&(c=1);else if(n===f&&c+1<t.length)c+=1;else if(null!==u.nextSibling())c=0;else{if(!u.parentNode())return!1;c=1}return!0},this.previousPosition=function(){var t=!0,n=u.currentNode;return 0===c?t=a():n.nodeType===f?--c:null!==u.lastChild()?s():n===e?t=!1:c=0,t},this.previousNode=a,this.container=function(){var e=u.currentNode,t=e.nodeType;return 0===c&&t!==f&&(e=e.parentNode),e},this.rightNode=function(){var e=u.currentNode,t=e.nodeType;if(t===f&&c===e.length)for(e=e.nextSibling;e&&d(e)!==m;)e=e.nextSibling;else t===p&&1===c&&(e=null);return e},this.leftNode=function(){var e=u.currentNode;if(0===c)for(e=e.previousSibling;e&&d(e)!==m;)e=e.previousSibling;else if(e.nodeType===p)for(e=e.lastChild;e&&d(e)!==m;)e=e.previousSibling;return e},this.getCurrentNode=function(){return u.currentNode},this.unfilteredDomOffset=function(){if(u.currentNode.nodeType===f)return c;for(var e=0,t=u.currentNode,t=1===c?t.lastChild:t.previousSibling;t;)e+=1,t=t.previousSibling;return e},this.getPreviousSibling=function(){var e=u.currentNode,t=u.previousSibling();return u.currentNode=e,t},this.getNextSibling=function(){var e=u.currentNode,t=u.nextSibling();return u.currentNode=e,t},this.setPositionBeforeElement=function(e){return runtime.assert(Boolean(e),"setPositionBeforeElement called without element"),u.currentNode=e,c=0,l()},this.setUnfilteredPosition=function(e,t){return runtime.assert(Boolean(e),"PositionIterator.setUnfilteredPosition called without container"),u.currentNode=e,e.nodeType===f?(c=t,runtime.assert(t<=e.length,"Error in setPosition: "+t+" > "+e.length),runtime.assert(t>=0,"Error in setPosition: "+t+" < 0"),t===e.length&&(u.nextSibling()?c=0:u.parentNode()?c=1:runtime.assert(!1,"Error in setUnfilteredPosition: position not valid."))):t<e.childNodes.length?(u.currentNode=e.childNodes.item(t),c=0):c=1,l()},this.moveToEnd=function(){u.currentNode=e,c=1},this.moveToEndOfNode=function(e){e.nodeType===f?h.setUnfilteredPosition(e,e.length):(u.currentNode=e,c=1)},this.isBeforeNode=function(){return 0===c},this.getNodeFilter=function(){return d},d=(n?new o(n):new r).acceptNode,d.acceptNode=d,t=t||NodeFilter.SHOW_ALL,runtime.assert(e.nodeType!==Node.TEXT_NODE,"Internet Explorer doesn't allow tree walker roots to be text nodes"),u=e.ownerDocument.createTreeWalker(e,t,d,i),c=0,null===u.firstChild()&&(c=1)},core.PositionFilter=function(){},core.PositionFilter.FilterResult={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3},core.PositionFilter.prototype.acceptPosition=function(e){},core.PositionFilterChain=function(){var e=[],t=core.PositionFilter.FilterResult.FILTER_ACCEPT,n=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(i){var r;for(r=0;r<e.length;r+=1)if(e[r].acceptPosition(i)===n)return n;return t},this.addFilter=function(t){e.push(t)}},core.StepDirection={PREVIOUS:1,NEXT:2},core.StepIterator=function(e,t){function n(){u=null,d=c=void 0}function i(){return void 0===d&&(d=e.acceptPosition(t)===h),d}function r(e,i){return n(),t.setUnfilteredPosition(e,i)}function o(){return u||(u=t.container()),u}function s(){return void 0===c&&(c=t.unfilteredDomOffset()),c}function a(){for(n();t.nextPosition();)if(n(),i())return!0;return!1}function l(){for(n();t.previousPosition();)if(n(),i())return!0;return!1}var u,c,d,h=core.PositionFilter.FilterResult.FILTER_ACCEPT,f=core.StepDirection.NEXT;this.isStep=i,this.setPosition=r,this.container=o,this.offset=s,this.nextStep=a,this.previousStep=l,this.advanceStep=function(e){return e===f?a():l()},this.roundToClosestStep=function(){var e,t,n=i();return n||(e=o(),t=s(),n=l(),n||(r(e,t),n=a())),n},this.roundToPreviousStep=function(){var e=i();return e||(e=l()),e},this.roundToNextStep=function(){var e=i();return e||(e=a()),e},this.leftNode=function(){return t.leftNode()},this.snapshot=function(){return new core.StepIterator.StepSnapshot(o(),s())},this.restore=function(e){r(e.container,e.offset)}},core.StepIterator.StepSnapshot=function(e,t){this.container=e,this.offset=t},core.Utils=function(){function e(t,n){if(n&&Array.isArray(n)){if(t=t||[],!Array.isArray(t))throw"Destination is not an array.";t=t.concat(n.map(function(t){return e(null,t)}))}else if(n&&"object"==typeof n){if(t=t||{},"object"!=typeof t)throw"Destination is not an object.";Object.keys(n).forEach(function(i){t[i]=e(t[i],n[i])})}else t=n;return t}this.hashString=function(e){var t,n,i=0;for(t=0,n=e.length;n>t;t+=1)i=(i<<5)-i+e.charCodeAt(t),i|=0;return i},this.mergeObjects=function(t,n){return Object.keys(n).forEach(function(i){t[i]=e(t[i],n[i])}),t}},core.Zip=function(e,t){function n(e,t){var n=s.file(e);n?t(null,n.asUint8Array()):t(e+" not found.",null)}function i(e,t){n(e,function(e,n){if(e||null===n)return t(e,null);var i=runtime.byteArrayToString(n,"utf8");t(null,i)})}function r(e,t){try{e(s.generate({type:"uint8array",compression:"STORE"}))}catch(n){t(n.message)}}function o(e,t){r(function(n){runtime.writeFile(e,n,t)},t)}var s,a=this,l=new core.Base64;this.load=n,this.save=function(e,t,n,i){s.file(e,t,{date:i,compression:n?"DEFLATE":"STORE"})},this.remove=function(e){var t=null!==s.file(e);return s.remove(e),t},this.write=function(t){o(e,t)},this.writeAs=o,this.createByteArray=r,this.loadContentXmlAsFragments=function(e,t){i(e,function(e,n){return e?t.rootElementReady(e):void t.rootElementReady(null,n,!0)})},this.loadAsString=i,this.loadAsDOM=function(e,t){i(e,function(e,n){if(e||null===n)t(e,null);else{var i=(new DOMParser).parseFromString(n,"text/xml");t(null,i)}})},this.loadAsDataURL=function(e,t,i){n(e,function(e,n){if(e||!n)return i(e,null);var r,o=0;for(t||(t=80===n[1]&&78===n[2]&&71===n[3]?"image/png":255===n[0]&&216===n[1]&&255===n[2]?"image/jpeg":71===n[0]&&73===n[1]&&70===n[2]?"image/gif":""),r="data:"+t+";base64,";o<n.length;)r+=l.convertUTF8ArrayToBase64(n.subarray(o,Math.min(o+45e3,n.length))),o+=45e3;i(null,r)})},this.getEntries=function(){return Object.keys(s.files).map(function(e){return{filename:e,date:s.files[e].date}})},s=new externs.JSZip,null!==t&&runtime.readFile(e,"binary",function(n,i){if("string"==typeof i&&(n="file was read as a string. Should be Uint8Array."),n||!i||0===i.length)t("File '"+e+"' cannot be read. Err: "+(n||"[none]"),a);else try{s.load(i,{checkCRC32:!1}),t(null,a)}catch(r){t(r.message,a)}})},core.SimpleClientRect=null,gui.CommonConstraints={EDIT:{ANNOTATIONS:{ONLY_DELETE_OWN:"onlyDeleteOwn"},REVIEW_MODE:"reviewMode"}},gui.SessionConstraints=function(){function e(e){t.hasOwnProperty(e)||(t[e]=!1,n.register(e))}var t={},n=new core.EventNotifier;this.registerConstraint=e,this.subscribe=function(t,i){e(t),n.subscribe(t,i)},this.unsubscribe=function(e,t){n.unsubscribe(e,t)},this.setState=function(e,i){runtime.assert(!0===t.hasOwnProperty(e),"No such constraint"),t[e]!==i&&(t[e]=i,n.emit(e,i))},this.getState=function(e){return runtime.assert(!0===t.hasOwnProperty(e),"No such constraint"),t[e]}},gui.BlacklistNamespaceNodeFilter=function(e){var t={},n=NodeFilter.FILTER_REJECT,i=NodeFilter.FILTER_ACCEPT;this.acceptNode=function(e){return!e||t.hasOwnProperty(e.namespaceURI)?n:i},function(){e.forEach(function(e){t[e]=!0})}()},odf.Namespaces={namespaceMap:{config:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",db:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dc:"http://purl.org/dc/elements/1.1/",dr3d:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",draw:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chart:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fo:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",form:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",math:"http://www.w3.org/1998/Math/MathML",meta:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",number:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",office:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentation:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",style:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svg:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",table:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",text:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xforms:"http://www.w3.org/2002/xforms",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},prefixMap:{},configns:"urn:oasis:names:tc:opendocument:xmlns:config:1.0",dbns:"urn:oasis:names:tc:opendocument:xmlns:database:1.0",dcns:"http://purl.org/dc/elements/1.1/",dr3dns:"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",drawns:"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",chartns:"urn:oasis:names:tc:opendocument:xmlns:chart:1.0",fons:"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",formns:"urn:oasis:names:tc:opendocument:xmlns:form:1.0",mathns:"http://www.w3.org/1998/Math/MathML",metans:"urn:oasis:names:tc:opendocument:xmlns:meta:1.0",numberns:"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",officens:"urn:oasis:names:tc:opendocument:xmlns:office:1.0",presentationns:"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",stylens:"urn:oasis:names:tc:opendocument:xmlns:style:1.0",svgns:"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",tablens:"urn:oasis:names:tc:opendocument:xmlns:table:1.0",textns:"urn:oasis:names:tc:opendocument:xmlns:text:1.0",xformsns:"http://www.w3.org/2002/xforms",xlinkns:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/XML/1998/namespace"},function(){var e,t=odf.Namespaces.namespaceMap,n=odf.Namespaces.prefixMap;for(e in t)t.hasOwnProperty(e)&&(n[t[e]]=e)}(),odf.Namespaces.forEachPrefix=function(e){var t,n=odf.Namespaces.namespaceMap;for(t in n)n.hasOwnProperty(t)&&e(t,n[t])},odf.Namespaces.lookupNamespaceURI=function(e){var t=null;return odf.Namespaces.namespaceMap.hasOwnProperty(e)&&(t=odf.Namespaces.namespaceMap[e]),t},odf.Namespaces.lookupPrefix=function(e){var t=odf.Namespaces.prefixMap;return t.hasOwnProperty(e)?t[e]:null},odf.Namespaces.lookupNamespaceURI.lookupNamespaceURI=odf.Namespaces.lookupNamespaceURI,function(){odf.OdfSchemaImpl=function(){var e=[["config:config-item","uncategorized"],["form:item","object"],["form:option","uncategorized"],["math:math","field"],["meta:user-defined","uncategorized"],["number:currency-symbol","uncategorized"],["number:embedded-text","uncategorized"],["number:text","uncategorized"],["presentation:date-time-decl","uncategorized"],["presentation:footer-decl","uncategorized"],["presentation:header-decl","uncategorized"],["svg:desc","text"],["svg:title","text"],["table:desc","uncategorized"],["table:title","uncategorized"],["text:a","text"],["text:author-initials","field"],["text:author-name","field"],["text:bibliography-mark","field"],["text:bookmark-ref","field"],["text:chapter","field"],["text:character-count","field"],["text:conditional-text","field"],["text:creation-date","field"],["text:creation-time","field"],["text:creator","field"],["text:database-display","field"],["text:database-name","field"],["text:database-row-number","field"],["text:date","field"],["text:dde-connection","field"],["text:description","field"],["text:editing-cycles","field"],["text:editing-duration","field"],["text:execute-macro","uncategorized"],["text:expression","uncategorized"],["text:file-name","field"],["text:h","text"],["text:hidden-paragraph","text"],["text:hidden-text","text"],["text:image-count","field"],["text:index-entry-span","uncategorized"],["text:index-title-template","uncategorized"],["text:initial-creator","field"],["text:keywords","field"],["text:linenumbering-separator","style"],["text:measure","uncategorized"],["text:meta","uncategorized"],["text:meta-field","uncategorized"],["text:modification-date","field"],["text:modification-time","field"],["text:note-citation","field"],["text:note-continuation-notice-backward","style"],["text:note-continuation-notice-forward","style"],["text:note-ref","field"],["text:object-count","field"],["text:p","text"],["text:page-continuation","uncategorized"],["text:page-count","field"],["text:page-number","field"],["text:page-variable-get","field"],["text:page-variable-set","field"],["text:paragraph-count","field"],["text:placeholder","field"],["text:print-date","field"],["text:print-time","field"],["text:printed-by","field"],["text:reference-ref","field"],["text:ruby-base","text"],["text:ruby-text","text"],["text:script","text"],["text:sender-city","field"],["text:sender-company","field"],["text:sender-country","field"],["text:sender-email","field"],["text:sender-fax","field"],["text:sender-firstname","field"],["text:sender-initials","field"],["text:sender-lastname","field"],["text:sender-phone-private","field"],["text:sender-phone-work","field"],["text:sender-position","field"],["text:sender-postal-code","field"],["text:sender-state-or-province","field"],["text:sender-street","field"],["text:sender-title","field"],["text:sequence","uncategorized"],["text:sequence-ref","uncategorized"],["text:sheet-name","uncategorized"],["text:span","text"],["text:subject","field"],["text:table-count","field"],["text:table-formula","deprecated"],["text:template-name","uncategorized"],["text:text-input","field"],["text:time","field"],["text:title","field"],["text:user-defined","field"],["text:user-field-get","field"],["text:user-field-input","field"],["text:variable-get","field"],["text:variable-input","field"],["text:variable-set","field"],["text:word-count","field"],["xforms:model","uncategorized"]],t={};this.isTextContainer=function(e,n){return"text"===t[e+":"+n]},this.isField=function(e,n){return"field"===t[e+":"+n]},this.getFields=function(){return e.filter(function(e){return"field"===e[1]}).map(function(e){return e[0]})},function(){e.forEach(function(e){var n=e[1],i=e[0].split(":");e=i[0];var i=i[1],r=odf.Namespaces.lookupNamespaceURI(e);r?t[r+":"+i]=n:runtime.log("DEBUG: OdfSchema - unknown prefix '"+e+"'")})}()},odf.OdfSchema=new odf.OdfSchemaImpl}(),odf.OdfUtilsImpl=function(){function e(e){return"image"===(e&&e.localName)&&e.namespaceURI===O}function t(e){return null!==e&&e.nodeType===Node.ELEMENT_NODE&&"frame"===e.localName&&e.namespaceURI===O&&"as-char"===e.getAttributeNS(L,"anchor-type")}function n(e){var t;return(t="annotation"===(e&&e.localName)&&e.namespaceURI===odf.Namespaces.officens)||(t="div"===(e&&e.localName)&&"annotationWrapper"===e.className),t}function i(e){return"a"===(e&&e.localName)&&e.namespaceURI===L}function r(e){var t=e&&e.localName;return("p"===t||"h"===t)&&e.namespaceURI===L}function o(e,t){for(e&&void 0!==t&&!r(e)&&e.childNodes.item(t)&&(e=e.childNodes.item(t));e&&!r(e);)e=e.parentNode;return e}function s(e,t){for(;e&&e!==t;){if(e.namespaceURI===odf.Namespaces.officens&&"annotation"===e.localName)return e;e=e.parentNode}return null}function a(e){return/^[ \t\r\n]+$/.test(e)}function l(e){if(null===e||e.nodeType!==Node.ELEMENT_NODE)return!1;var t=e.localName;return R.isTextContainer(e.namespaceURI,t)||"span"===t&&"webodf-annotationHighlight"===e.className}function u(e){return null===e||e.nodeType!==Node.ELEMENT_NODE?!1:R.isField(e.namespaceURI,e.localName)}function c(e){var t=e&&e.localName,n=!1;return t&&(e=e.namespaceURI,e===L&&(n="s"===t||"tab"===t||"line-break"===t)),n}function d(e){return c(e)||u(e)||t(e)||n(e)}function h(e){var t=e&&e.localName,n=!1;return t&&(e=e.namespaceURI,e===L&&(n="s"===t)),n}function f(e){return-1!==M.indexOf(e.namespaceURI)}function p(e){if(c(e)||u(e))return!1;if(l(e.parentNode)&&e.nodeType===Node.TEXT_NODE)return 0===e.textContent.length;for(e=e.firstChild;e;){if(f(e)||!p(e))return!1;e=e.nextSibling}return!0}function m(e){for(;null!==e.firstChild&&l(e);)e=e.firstChild;return e}function g(e){for(;null!==e.lastChild&&l(e);)e=e.lastChild;return e}function v(e){for(;!r(e)&&null===e.previousSibling;)e=e.parentNode;return r(e)?null:g(e.previousSibling)}function y(e){for(;!r(e)&&null===e.nextSibling;)e=e.parentNode;return r(e)?null:m(e.nextSibling)}function b(e){for(var t=!1;e;)if(e.nodeType===Node.TEXT_NODE){if(0!==e.length)return!a(e.data.substr(e.length-1,1));e=v(e)}else d(e)?(t=!1===h(e),e=null):e=v(e);return t}function w(e){var t,n=!1;for(e=e&&m(e);e;){if(t=e.nodeType===Node.TEXT_NODE?e.length:0,t>0&&!a(e.data)){n=!0;break}if(d(e)){n=!0;break}e=y(e)}return n}function C(e,t){return a(e.data.substr(t))?!w(y(e)):!1}function x(e,t){var n,i=e.data;return!a(i[t])||d(e.parentNode)?!1:(t>0?a(i[t-1])||(n=!0):b(v(e))&&(n=!0),!0===n?C(e,t)?!1:!0:!1)}function S(e){return(e=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px)|(%))/.exec(e))?{value:parseFloat(e[1]),unit:e[3]}:null}function A(e){return(e=S(e))&&(0>e.value||"%"===e.unit)?null:e}function _(e){return(e=S(e))&&"%"!==e.unit?null:e}function E(e){switch(e.namespaceURI){case odf.Namespaces.drawns:case odf.Namespaces.svgns:case odf.Namespaces.dr3dns:return!1;case odf.Namespaces.textns:switch(e.localName){case"note-body":case"ruby-text":return!1}break;case odf.Namespaces.officens:switch(e.localName){case"annotation":case"binary-data":case"event-listeners":return!1}break;default:switch(e.localName){case"cursor":case"editinfo":return!1}}return!0}function $(e){return Boolean(o(e)&&(!a(e.textContent)||x(e,0)))}function k(e,t){for(;0<t.length&&!B.rangeContainsNode(e,t[0]);)t.shift();for(;0<t.length&&!B.rangeContainsNode(e,t[t.length-1]);)t.pop()}function D(e,t,i){var r;return r=B.getNodesInRange(e,function(e){var t=NodeFilter.FILTER_REJECT;return c(e.parentNode)||u(e.parentNode)||n(e)?t=NodeFilter.FILTER_REJECT:e.nodeType===Node.TEXT_NODE?(i||$(e))&&(t=NodeFilter.FILTER_ACCEPT):d(e)?t=NodeFilter.FILTER_ACCEPT:(E(e)||l(e))&&(t=NodeFilter.FILTER_SKIP),t},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),t||k(e,r),r}function T(e,t,i){for(;e;){if(i(e)){t[0]!==e&&t.unshift(e);break}if(n(e))break;e=e.parentNode}}function F(e,t){var n=e;if(t<n.childNodes.length-1)n=n.childNodes[t+1];else{for(;!n.nextSibling;)n=n.parentNode;n=n.nextSibling}for(;n.firstChild;)n=n.firstChild;return n}var L=odf.Namespaces.textns,O=odf.Namespaces.drawns,N=odf.Namespaces.xlinkns,B=core.DomUtils,M=[odf.Namespaces.dbns,odf.Namespaces.dcns,odf.Namespaces.dr3dns,odf.Namespaces.drawns,odf.Namespaces.chartns,odf.Namespaces.formns,odf.Namespaces.numberns,odf.Namespaces.officens,odf.Namespaces.presentationns,odf.Namespaces.stylens,odf.Namespaces.svgns,odf.Namespaces.tablens,odf.Namespaces.textns],R=odf.OdfSchema;this.isImage=e,this.isCharacterFrame=t,this.isInlineRoot=n,this.isTextSpan=function(e){return"span"===(e&&e.localName)&&e.namespaceURI===L},this.isHyperlink=i,this.getHyperlinkTarget=function(e){return e.getAttributeNS(N,"href")||""},this.isParagraph=r,this.getParagraphElement=o,this.getParentAnnotation=s,this.isWithinAnnotation=function(e,t){return Boolean(s(e,t))},this.getAnnotationCreator=function(e){return e.getElementsByTagNameNS(odf.Namespaces.dcns,"creator")[0].textContent},this.isListItem=function(e){return"list-item"===(e&&e.localName)&&e.namespaceURI===L},this.isLineBreak=function(e){return"line-break"===(e&&e.localName)&&e.namespaceURI===L},this.isODFWhitespace=a,this.isGroupingElement=l,this.isFieldElement=u,this.isCharacterElement=c,this.isAnchoredAsCharacterElement=d,this.isSpaceElement=h,this.isODFNode=f,this.hasNoODFContent=p,this.firstChild=m,this.lastChild=g,this.previousNode=v,this.nextNode=y,this.scanLeftForNonSpace=b,this.lookLeftForCharacter=function(e){var t,n=t=0;return e.nodeType===Node.TEXT_NODE&&(n=e.length),n>0?(t=e.data,t=a(t.substr(n-1,1))?1===n?b(v(e))?2:0:a(t.substr(n-2,1))?0:2:1):d(e)&&(t=1),t},this.lookRightForCharacter=function(e){var t=!1,n=0;return e&&e.nodeType===Node.TEXT_NODE&&(n=e.length),n>0?t=!a(e.data.substr(0,1)):d(e)&&(t=!0),t},this.scanLeftForAnyCharacter=function(e){var t,n=!1;for(e=e&&g(e);e;){if(t=e.nodeType===Node.TEXT_NODE?e.length:0,t>0&&!a(e.data)){n=!0;break}if(d(e)){n=!0;break}e=v(e)}return n},this.scanRightForAnyCharacter=w,this.isTrailingWhitespace=C,this.isSignificantWhitespace=x,this.isDowngradableSpaceElement=function(e){return h(e)?b(v(e))&&w(y(e)):!1},this.parseLength=S,this.parseNonNegativeLength=A,this.parseFoFontSize=function(e){var t;return t=(t=S(e))&&(0>=t.value||"%"===t.unit)?null:t,t||_(e)},this.parseFoLineHeight=function(e){return A(e)||_(e)},this.isTextContentContainingNode=E,this.getTextNodes=function(e,t){var n;return n=B.getNodesInRange(e,function(e){var t=NodeFilter.FILTER_REJECT;return e.nodeType===Node.TEXT_NODE?$(e)&&(t=NodeFilter.FILTER_ACCEPT):E(e)&&(t=NodeFilter.FILTER_SKIP),t},NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT),t||k(e,n),n},this.getTextElements=D,this.getParagraphElements=function(e){var t;return t=B.getNodesInRange(e,function(e){var t=NodeFilter.FILTER_REJECT;return r(e)?t=NodeFilter.FILTER_ACCEPT:(E(e)||l(e))&&(t=NodeFilter.FILTER_SKIP),t},NodeFilter.SHOW_ELEMENT),T(e.startContainer,t,r),t},this.getImageElements=function(t){var n;return n=B.getNodesInRange(t,function(t){var n=NodeFilter.FILTER_SKIP;return e(t)&&(n=NodeFilter.FILTER_ACCEPT),n},NodeFilter.SHOW_ELEMENT),T(t.startContainer,n,e),n},this.getHyperlinkElements=function(e){var t=[],n=e.cloneRange();return e.collapsed&&e.endContainer.nodeType===Node.ELEMENT_NODE&&(e=F(e.endContainer,e.endOffset),e.nodeType===Node.TEXT_NODE&&n.setEnd(e,1)),D(n,!0,!1).forEach(function(e){for(e=e.parentNode;!r(e);){if(i(e)&&-1===t.indexOf(e)){t.push(e);break}e=e.parentNode}}),n.detach(),t},this.getNormalizedFontFamilyName=function(e){return/^(["'])(?:.|[\n\r])*?\1$/.test(e)||(e=e.replace(/^[ \t\r\n\f]*((?:.|[\n\r])*?)[ \t\r\n\f]*$/,"$1"),/[ \t\r\n\f]/.test(e)&&(e="'"+e.replace(/[ \t\r\n\f]+/g," ")+"'")),e}},odf.OdfUtils=new odf.OdfUtilsImpl,gui.OdfTextBodyNodeFilter=function(){var e=odf.OdfUtils,t=Node.TEXT_NODE,n=NodeFilter.FILTER_REJECT,i=NodeFilter.FILTER_ACCEPT,r=odf.Namespaces.textns;this.acceptNode=function(o){if(o.nodeType===t){if(!e.isGroupingElement(o.parentNode))return n}else if(o.namespaceURI===r&&"tracked-changes"===o.localName)return n;return i}},xmldom.LSSerializerFilter=function(){},xmldom.LSSerializerFilter.prototype.acceptNode=function(e){},odf.OdfNodeFilter=function(){this.acceptNode=function(e){return"http://www.w3.org/1999/xhtml"===e.namespaceURI?NodeFilter.FILTER_SKIP:e.namespaceURI&&e.namespaceURI.match(/^urn:webodf:/)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},xmldom.XPathIterator=function(){},xmldom.XPathIterator.prototype.next=function(){},xmldom.XPathIterator.prototype.reset=function(){},xmldom.XPath=createXPathSingleton(),odf.StyleInfo=function(){function e(t,n){var i,r,o,s,a,l=0;for((i=d[t.localName])&&(o=i[t.namespaceURI])&&(l=o.length),i=0;l>i;i+=1)r=o[i],s=r.ns,a=r.localname,(r=t.getAttributeNS(s,a))&&t.setAttributeNS(s,S[s]+a,n+r);for(o=t.firstElementChild;o;)e(o,n),o=o.nextElementSibling}function t(e,n){var i,r,o,s,a,l=0;
for((i=d[e.localName])&&(o=i[e.namespaceURI])&&(l=o.length),i=0;l>i;i+=1)r=o[i],s=r.ns,a=r.localname,(r=e.getAttributeNS(s,a))&&(r=r.replace(n,""),e.setAttributeNS(s,S[s]+a,r));for(o=e.firstElementChild;o;)t(o,n),o=o.nextElementSibling}function n(e,t){var n,i,r,o,s,a=0;for((n=d[e.localName])&&(r=n[e.namespaceURI])&&(a=r.length),n=0;a>n;n+=1)o=r[n],i=o.ns,s=o.localname,(i=e.getAttributeNS(i,s))&&(t=t||{},o=o.keyname,t.hasOwnProperty(o)?t[o][i]=1:(s={},s[i]=1,t[o]=s));return t}function i(e,t){var r,o;for(n(e,t),r=e.firstChild;r;)r.nodeType===Node.ELEMENT_NODE&&(o=r,i(o,t)),r=r.nextSibling}function r(e,t,n){this.key=e,this.name=t,this.family=n,this.requires={}}function o(e,t,n){var i=e+'"'+t,o=n[i];return o||(o=n[i]=new r(i,e,t)),o}function s(e,t,n){var i,r,a,l,u,c=0;if(i=e.getAttributeNS(w,"name"),l=e.getAttributeNS(w,"family"),i&&l&&(t=o(i,l,n)),t)for((i=d[e.localName])&&(a=i[e.namespaceURI])&&(c=a.length),i=0;c>i;i+=1)l=a[i],r=l.ns,u=l.localname,(r=e.getAttributeNS(r,u))&&(l=l.keyname,l=o(r,l,n),t.requires[l.key]=l);for(e=e.firstElementChild;e;)s(e,t,n),e=e.nextElementSibling;return n}function a(e,t){var n=t[e.family];n||(n=t[e.family]={}),n[e.name]=1,Object.keys(e.requires).forEach(function(n){a(e.requires[n],t)})}function l(e,t){var n=s(e,null,{});Object.keys(n).forEach(function(e){e=n[e];var i=t[e.family];i&&i.hasOwnProperty(e.name)&&a(e,t)})}function u(e,t){function n(t){(t=r.getAttributeNS(w,t))&&(e[t]=!0)}var i,r,o=["font-name","font-name-asian","font-name-complex"];for(i=t&&t.firstElementChild;i;)r=i,o.forEach(n),u(e,r),i=i.nextElementSibling}function c(e,t){function n(e){var n=r.getAttributeNS(w,e);n&&t.hasOwnProperty(n)&&r.setAttributeNS(w,"style:"+e,t[n])}var i,r,o=["font-name","font-name-asian","font-name-complex"];for(i=e&&e.firstElementChild;i;)r=i,o.forEach(n),c(r,t),i=i.nextElementSibling}var d,h=odf.Namespaces.chartns,f=odf.Namespaces.dbns,p=odf.Namespaces.dr3dns,m=odf.Namespaces.drawns,g=odf.Namespaces.formns,v=odf.Namespaces.numberns,y=odf.Namespaces.officens,b=odf.Namespaces.presentationns,w=odf.Namespaces.stylens,C=odf.Namespaces.tablens,x=odf.Namespaces.textns,S={"urn:oasis:names:tc:opendocument:xmlns:chart:1.0":"chart:","urn:oasis:names:tc:opendocument:xmlns:database:1.0":"db:","urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0":"dr3d:","urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":"draw:","urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":"fo:","urn:oasis:names:tc:opendocument:xmlns:form:1.0":"form:","urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":"number:","urn:oasis:names:tc:opendocument:xmlns:office:1.0":"office:","urn:oasis:names:tc:opendocument:xmlns:presentation:1.0":"presentation:","urn:oasis:names:tc:opendocument:xmlns:style:1.0":"style:","urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0":"svg:","urn:oasis:names:tc:opendocument:xmlns:table:1.0":"table:","urn:oasis:names:tc:opendocument:xmlns:text:1.0":"chart:","http://www.w3.org/XML/1998/namespace":"xml:"},A={text:[{ens:w,en:"tab-stop",ans:w,a:"leader-text-style"},{ens:w,en:"drop-cap",ans:w,a:"style-name"},{ens:x,en:"notes-configuration",ans:x,a:"citation-body-style-name"},{ens:x,en:"notes-configuration",ans:x,a:"citation-style-name"},{ens:x,en:"a",ans:x,a:"style-name"},{ens:x,en:"alphabetical-index",ans:x,a:"style-name"},{ens:x,en:"linenumbering-configuration",ans:x,a:"style-name"},{ens:x,en:"list-level-style-number",ans:x,a:"style-name"},{ens:x,en:"ruby-text",ans:x,a:"style-name"},{ens:x,en:"span",ans:x,a:"style-name"},{ens:x,en:"a",ans:x,a:"visited-style-name"},{ens:w,en:"text-properties",ans:w,a:"text-line-through-text-style"},{ens:x,en:"alphabetical-index-source",ans:x,a:"main-entry-style-name"},{ens:x,en:"index-entry-bibliography",ans:x,a:"style-name"},{ens:x,en:"index-entry-chapter",ans:x,a:"style-name"},{ens:x,en:"index-entry-link-end",ans:x,a:"style-name"},{ens:x,en:"index-entry-link-start",ans:x,a:"style-name"},{ens:x,en:"index-entry-page-number",ans:x,a:"style-name"},{ens:x,en:"index-entry-span",ans:x,a:"style-name"},{ens:x,en:"index-entry-tab-stop",ans:x,a:"style-name"},{ens:x,en:"index-entry-text",ans:x,a:"style-name"},{ens:x,en:"index-title-template",ans:x,a:"style-name"},{ens:x,en:"list-level-style-bullet",ans:x,a:"style-name"},{ens:x,en:"outline-level-style",ans:x,a:"style-name"}],paragraph:[{ens:m,en:"caption",ans:m,a:"text-style-name"},{ens:m,en:"circle",ans:m,a:"text-style-name"},{ens:m,en:"connector",ans:m,a:"text-style-name"},{ens:m,en:"control",ans:m,a:"text-style-name"},{ens:m,en:"custom-shape",ans:m,a:"text-style-name"},{ens:m,en:"ellipse",ans:m,a:"text-style-name"},{ens:m,en:"frame",ans:m,a:"text-style-name"},{ens:m,en:"line",ans:m,a:"text-style-name"},{ens:m,en:"measure",ans:m,a:"text-style-name"},{ens:m,en:"path",ans:m,a:"text-style-name"},{ens:m,en:"polygon",ans:m,a:"text-style-name"},{ens:m,en:"polyline",ans:m,a:"text-style-name"},{ens:m,en:"rect",ans:m,a:"text-style-name"},{ens:m,en:"regular-polygon",ans:m,a:"text-style-name"},{ens:y,en:"annotation",ans:m,a:"text-style-name"},{ens:g,en:"column",ans:g,a:"text-style-name"},{ens:w,en:"style",ans:w,a:"next-style-name"},{ens:C,en:"body",ans:C,a:"paragraph-style-name"},{ens:C,en:"even-columns",ans:C,a:"paragraph-style-name"},{ens:C,en:"even-rows",ans:C,a:"paragraph-style-name"},{ens:C,en:"first-column",ans:C,a:"paragraph-style-name"},{ens:C,en:"first-row",ans:C,a:"paragraph-style-name"},{ens:C,en:"last-column",ans:C,a:"paragraph-style-name"},{ens:C,en:"last-row",ans:C,a:"paragraph-style-name"},{ens:C,en:"odd-columns",ans:C,a:"paragraph-style-name"},{ens:C,en:"odd-rows",ans:C,a:"paragraph-style-name"},{ens:x,en:"notes-configuration",ans:x,a:"default-style-name"},{ens:x,en:"alphabetical-index-entry-template",ans:x,a:"style-name"},{ens:x,en:"bibliography-entry-template",ans:x,a:"style-name"},{ens:x,en:"h",ans:x,a:"style-name"},{ens:x,en:"illustration-index-entry-template",ans:x,a:"style-name"},{ens:x,en:"index-source-style",ans:x,a:"style-name"},{ens:x,en:"object-index-entry-template",ans:x,a:"style-name"},{ens:x,en:"p",ans:x,a:"style-name"},{ens:x,en:"table-index-entry-template",ans:x,a:"style-name"},{ens:x,en:"table-of-content-entry-template",ans:x,a:"style-name"},{ens:x,en:"table-index-entry-template",ans:x,a:"style-name"},{ens:x,en:"user-index-entry-template",ans:x,a:"style-name"},{ens:w,en:"page-layout-properties",ans:w,a:"register-truth-ref-style-name"}],chart:[{ens:h,en:"axis",ans:h,a:"style-name"},{ens:h,en:"chart",ans:h,a:"style-name"},{ens:h,en:"data-label",ans:h,a:"style-name"},{ens:h,en:"data-point",ans:h,a:"style-name"},{ens:h,en:"equation",ans:h,a:"style-name"},{ens:h,en:"error-indicator",ans:h,a:"style-name"},{ens:h,en:"floor",ans:h,a:"style-name"},{ens:h,en:"footer",ans:h,a:"style-name"},{ens:h,en:"grid",ans:h,a:"style-name"},{ens:h,en:"legend",ans:h,a:"style-name"},{ens:h,en:"mean-value",ans:h,a:"style-name"},{ens:h,en:"plot-area",ans:h,a:"style-name"},{ens:h,en:"regression-curve",ans:h,a:"style-name"},{ens:h,en:"series",ans:h,a:"style-name"},{ens:h,en:"stock-gain-marker",ans:h,a:"style-name"},{ens:h,en:"stock-loss-marker",ans:h,a:"style-name"},{ens:h,en:"stock-range-line",ans:h,a:"style-name"},{ens:h,en:"subtitle",ans:h,a:"style-name"},{ens:h,en:"title",ans:h,a:"style-name"},{ens:h,en:"wall",ans:h,a:"style-name"}],section:[{ens:x,en:"alphabetical-index",ans:x,a:"style-name"},{ens:x,en:"bibliography",ans:x,a:"style-name"},{ens:x,en:"illustration-index",ans:x,a:"style-name"},{ens:x,en:"index-title",ans:x,a:"style-name"},{ens:x,en:"object-index",ans:x,a:"style-name"},{ens:x,en:"section",ans:x,a:"style-name"},{ens:x,en:"table-of-content",ans:x,a:"style-name"},{ens:x,en:"table-index",ans:x,a:"style-name"},{ens:x,en:"user-index",ans:x,a:"style-name"}],ruby:[{ens:x,en:"ruby",ans:x,a:"style-name"}],table:[{ens:f,en:"query",ans:f,a:"style-name"},{ens:f,en:"table-representation",ans:f,a:"style-name"},{ens:C,en:"background",ans:C,a:"style-name"},{ens:C,en:"table",ans:C,a:"style-name"}],"table-column":[{ens:f,en:"column",ans:f,a:"style-name"},{ens:C,en:"table-column",ans:C,a:"style-name"}],"table-row":[{ens:f,en:"query",ans:f,a:"default-row-style-name"},{ens:f,en:"table-representation",ans:f,a:"default-row-style-name"},{ens:C,en:"table-row",ans:C,a:"style-name"}],"table-cell":[{ens:f,en:"column",ans:f,a:"default-cell-style-name"},{ens:C,en:"table-column",ans:C,a:"default-cell-style-name"},{ens:C,en:"table-row",ans:C,a:"default-cell-style-name"},{ens:C,en:"body",ans:C,a:"style-name"},{ens:C,en:"covered-table-cell",ans:C,a:"style-name"},{ens:C,en:"even-columns",ans:C,a:"style-name"},{ens:C,en:"covered-table-cell",ans:C,a:"style-name"},{ens:C,en:"even-columns",ans:C,a:"style-name"},{ens:C,en:"even-rows",ans:C,a:"style-name"},{ens:C,en:"first-column",ans:C,a:"style-name"},{ens:C,en:"first-row",ans:C,a:"style-name"},{ens:C,en:"last-column",ans:C,a:"style-name"},{ens:C,en:"last-row",ans:C,a:"style-name"},{ens:C,en:"odd-columns",ans:C,a:"style-name"},{ens:C,en:"odd-rows",ans:C,a:"style-name"},{ens:C,en:"table-cell",ans:C,a:"style-name"}],graphic:[{ens:p,en:"cube",ans:m,a:"style-name"},{ens:p,en:"extrude",ans:m,a:"style-name"},{ens:p,en:"rotate",ans:m,a:"style-name"},{ens:p,en:"scene",ans:m,a:"style-name"},{ens:p,en:"sphere",ans:m,a:"style-name"},{ens:m,en:"caption",ans:m,a:"style-name"},{ens:m,en:"circle",ans:m,a:"style-name"},{ens:m,en:"connector",ans:m,a:"style-name"},{ens:m,en:"control",ans:m,a:"style-name"},{ens:m,en:"custom-shape",ans:m,a:"style-name"},{ens:m,en:"ellipse",ans:m,a:"style-name"},{ens:m,en:"frame",ans:m,a:"style-name"},{ens:m,en:"g",ans:m,a:"style-name"},{ens:m,en:"line",ans:m,a:"style-name"},{ens:m,en:"measure",ans:m,a:"style-name"},{ens:m,en:"page-thumbnail",ans:m,a:"style-name"},{ens:m,en:"path",ans:m,a:"style-name"},{ens:m,en:"polygon",ans:m,a:"style-name"},{ens:m,en:"polyline",ans:m,a:"style-name"},{ens:m,en:"rect",ans:m,a:"style-name"},{ens:m,en:"regular-polygon",ans:m,a:"style-name"},{ens:y,en:"annotation",ans:m,a:"style-name"}],presentation:[{ens:p,en:"cube",ans:b,a:"style-name"},{ens:p,en:"extrude",ans:b,a:"style-name"},{ens:p,en:"rotate",ans:b,a:"style-name"},{ens:p,en:"scene",ans:b,a:"style-name"},{ens:p,en:"sphere",ans:b,a:"style-name"},{ens:m,en:"caption",ans:b,a:"style-name"},{ens:m,en:"circle",ans:b,a:"style-name"},{ens:m,en:"connector",ans:b,a:"style-name"},{ens:m,en:"control",ans:b,a:"style-name"},{ens:m,en:"custom-shape",ans:b,a:"style-name"},{ens:m,en:"ellipse",ans:b,a:"style-name"},{ens:m,en:"frame",ans:b,a:"style-name"},{ens:m,en:"g",ans:b,a:"style-name"},{ens:m,en:"line",ans:b,a:"style-name"},{ens:m,en:"measure",ans:b,a:"style-name"},{ens:m,en:"page-thumbnail",ans:b,a:"style-name"},{ens:m,en:"path",ans:b,a:"style-name"},{ens:m,en:"polygon",ans:b,a:"style-name"},{ens:m,en:"polyline",ans:b,a:"style-name"},{ens:m,en:"rect",ans:b,a:"style-name"},{ens:m,en:"regular-polygon",ans:b,a:"style-name"},{ens:y,en:"annotation",ans:b,a:"style-name"}],"drawing-page":[{ens:m,en:"page",ans:m,a:"style-name"},{ens:b,en:"notes",ans:m,a:"style-name"},{ens:w,en:"handout-master",ans:m,a:"style-name"},{ens:w,en:"master-page",ans:m,a:"style-name"}],"list-style":[{ens:x,en:"list",ans:x,a:"style-name"},{ens:x,en:"numbered-paragraph",ans:x,a:"style-name"},{ens:x,en:"list-item",ans:x,a:"style-override"},{ens:w,en:"style",ans:w,a:"list-style-name"}],data:[{ens:w,en:"style",ans:w,a:"data-style-name"},{ens:w,en:"style",ans:w,a:"percentage-data-style-name"},{ens:b,en:"date-time-decl",ans:w,a:"data-style-name"},{ens:x,en:"creation-date",ans:w,a:"data-style-name"},{ens:x,en:"creation-time",ans:w,a:"data-style-name"},{ens:x,en:"database-display",ans:w,a:"data-style-name"},{ens:x,en:"date",ans:w,a:"data-style-name"},{ens:x,en:"editing-duration",ans:w,a:"data-style-name"},{ens:x,en:"expression",ans:w,a:"data-style-name"},{ens:x,en:"meta-field",ans:w,a:"data-style-name"},{ens:x,en:"modification-date",ans:w,a:"data-style-name"},{ens:x,en:"modification-time",ans:w,a:"data-style-name"},{ens:x,en:"print-date",ans:w,a:"data-style-name"},{ens:x,en:"print-time",ans:w,a:"data-style-name"},{ens:x,en:"table-formula",ans:w,a:"data-style-name"},{ens:x,en:"time",ans:w,a:"data-style-name"},{ens:x,en:"user-defined",ans:w,a:"data-style-name"},{ens:x,en:"user-field-get",ans:w,a:"data-style-name"},{ens:x,en:"user-field-input",ans:w,a:"data-style-name"},{ens:x,en:"variable-get",ans:w,a:"data-style-name"},{ens:x,en:"variable-input",ans:w,a:"data-style-name"},{ens:x,en:"variable-set",ans:w,a:"data-style-name"}],"page-layout":[{ens:b,en:"notes",ans:w,a:"page-layout-name"},{ens:w,en:"handout-master",ans:w,a:"page-layout-name"},{ens:w,en:"master-page",ans:w,a:"page-layout-name"}]},_=xmldom.XPath;this.collectUsedFontFaces=u,this.changeFontFaceNames=c,this.UsedStyleList=function(e,t){var n={};this.uses=function(e){var t=e.localName,i=e.getAttributeNS(m,"name")||e.getAttributeNS(w,"name");return e="style"===t?e.getAttributeNS(w,"family"):e.namespaceURI===v?"data":t,(e=n[e])?0<e[i]:!1},i(e,n),t&&l(t,n)},this.getStyleName=function(e,t){var n,i,r=d[t.localName];if(r&&(r=r[t.namespaceURI]))for(i=0;i<r.length;i+=1)if(r[i].keyname===e&&(r=r[i],t.hasAttributeNS(r.ns,r.localname))){n=t.getAttributeNS(r.ns,r.localname);break}return n},this.hasDerivedStyles=function(e,t,n){var i=n.getAttributeNS(w,"name");return n=n.getAttributeNS(w,"family"),_.getODFElementsWithXPath(e,'//style:*[@style:parent-style-name="'+i+'"][@style:family="'+n+'"]',t).length?!0:!1},this.prefixStyleNames=function(t,n,i){var r;if(t){for(r=t.firstChild;r;){if(r.nodeType===Node.ELEMENT_NODE){var o=r,s=n,a=o.getAttributeNS(m,"name"),l=void 0;a?l=m:(a=o.getAttributeNS(w,"name"))&&(l=w),l&&o.setAttributeNS(l,S[l]+"name",s+a)}r=r.nextSibling}e(t,n),i&&e(i,n)}},this.removePrefixFromStyleNames=function(e,n,i){var r=new RegExp("^"+n);if(e){for(n=e.firstChild;n;){if(n.nodeType===Node.ELEMENT_NODE){var o=n,s=r,a=o.getAttributeNS(m,"name"),l=void 0;a?l=m:(a=o.getAttributeNS(w,"name"))&&(l=w),l&&(a=a.replace(s,""),o.setAttributeNS(l,S[l]+"name",a))}n=n.nextSibling}t(e,r),i&&t(i,r)}},this.determineStylesForNode=n,d=function(){var e,t,n,i,r,o,s,a,l,u={};for(n in A)if(A.hasOwnProperty(n))for(i=A[n],t=i.length,e=0;t>e;e+=1)r=i[e],a=r.en,l=r.ens,u.hasOwnProperty(a)?o=u[a]:u[a]=o={},o.hasOwnProperty(l)?s=o[l]:o[l]=s=[],s.push({ns:r.ans,localname:r.a,keyname:n});return u}()},"function"!=typeof Object.create&&(Object.create=function(e){var t=function(){};return t.prototype=e,new t}),xmldom.LSSerializer=function(){function e(e){var t=e||{},n=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(e),i=[t],r=[n],o=0;this.push=function(){o+=1,t=i[o]=Object.create(t),n=r[o]=Object.create(n)},this.pop=function(){i.pop(),r.pop(),--o,t=i[o],n=r[o]},this.getLocalNamespaceDefinitions=function(){return n},this.getQName=function(e){var i,r=e.namespaceURI,o=0;if(!r)return e.localName;if(i=n[r])return i+":"+e.localName;do{if(i||!e.prefix?(i="ns"+o,o+=1):i=e.prefix,t[i]===r)break;if(!t[i]){t[i]=r,n[r]=i;break}i=null}while(null===i);return i+":"+e.localName}}function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function n(e,r){var o,s="",a=i.filter?i.filter.acceptNode(r):NodeFilter.FILTER_ACCEPT;if(a===NodeFilter.FILTER_ACCEPT&&r.nodeType===Node.ELEMENT_NODE){e.push(),o=e.getQName(r);var l,u,c,d,h,f=r.attributes,p="";for(l="<"+o,u=f.length,c=0;u>c;c+=1)d=f.item(c),"http://www.w3.org/2000/xmlns/"!==d.namespaceURI&&(h=i.filter?i.filter.acceptNode(d):NodeFilter.FILTER_ACCEPT,h===NodeFilter.FILTER_ACCEPT&&(h=e.getQName(d),d="string"==typeof d.value?t(d.value):d.value,p+=" "+(h+'="'+d+'"')));u=e.getLocalNamespaceDefinitions();for(c in u)u.hasOwnProperty(c)&&((f=u[c])?"xmlns"!==f&&(l+=" xmlns:"+u[c]+'="'+c+'"'):l+=' xmlns="'+c+'"');s+=l+(p+">")}if(a===NodeFilter.FILTER_ACCEPT||a===NodeFilter.FILTER_SKIP){for(a=r.firstChild;a;)s+=n(e,a),a=a.nextSibling;r.nodeValue&&(s+=t(r.nodeValue))}return o&&(s+="</"+o+">",e.pop()),s}var i=this;this.filter=null,this.writeToString=function(t,i){if(!t)return"";var r=new e(i);return n(r,t)}},function(){function e(e){var t,n=a.length;for(t=0;n>t;t+=1)if("urn:oasis:names:tc:opendocument:xmlns:office:1.0"===e.namespaceURI&&e.localName===a[t])return t;return-1}function t(e,t){var n=new r.UsedStyleList(e,t),i=new odf.OdfNodeFilter;this.acceptNode=function(e){var r=i.acceptNode(e);return r===NodeFilter.FILTER_ACCEPT&&e.parentNode===t&&e.nodeType===Node.ELEMENT_NODE&&(r=n.uses(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT),r}}function n(e,n){var i=new t(e,n);this.acceptNode=function(e){var t=i.acceptNode(e);return t!==NodeFilter.FILTER_ACCEPT||!e.parentNode||e.parentNode.namespaceURI!==odf.Namespaces.textns||"s"!==e.parentNode.localName&&"tab"!==e.parentNode.localName||(t=NodeFilter.FILTER_REJECT),t}}function i(t,n){if(n){var i,r=e(n),o=t.firstChild;if(-1!==r){for(;o&&(i=e(o),!(-1!==i&&i>r));)o=o.nextSibling;t.insertBefore(n,o)}}}var r=new odf.StyleInfo,o=core.DomUtils,s=odf.Namespaces.stylens,a="meta settings scripts font-face-decls styles automatic-styles master-styles body".split(" "),l=Date.now()+"_webodf_",u=new core.Base64;odf.ODFElement=function(){},odf.ODFDocumentElement=function(){},odf.ODFDocumentElement.prototype=new odf.ODFElement,odf.ODFDocumentElement.prototype.constructor=odf.ODFDocumentElement,odf.ODFDocumentElement.prototype.fontFaceDecls=null,odf.ODFDocumentElement.prototype.manifest=null,odf.ODFDocumentElement.prototype.settings=null,odf.ODFDocumentElement.namespaceURI="urn:oasis:names:tc:opendocument:xmlns:office:1.0",odf.ODFDocumentElement.localName="document",odf.AnnotationElement=function(){},odf.OdfPart=function(e,t,n,i){var r=this;this.size=0,this.type=null,this.name=e,this.container=n,this.url=null,this.mimetype=t,this.onstatereadychange=this.document=null,this.EMPTY=0,this.LOADING=1,this.DONE=2,this.state=this.EMPTY,this.data="",this.load=function(){null!==i&&(this.mimetype=t,i.loadAsDataURL(e,t,function(e,t){e&&runtime.log(e),r.url=t,r.onchange&&r.onchange(r),r.onstatereadychange&&r.onstatereadychange(r)}))}},odf.OdfPart.prototype.load=function(){},odf.OdfPart.prototype.getUrl=function(){return this.data?"data:;base64,"+u.toBase64(this.data):null},odf.OdfContainer=function c(e,a){function d(e){for(var t,n=e.firstChild;n;)t=n.nextSibling,n.nodeType===Node.ELEMENT_NODE?d(n):n.nodeType===Node.PROCESSING_INSTRUCTION_NODE&&e.removeChild(n),n=t}function h(e){var t,n,i={},r=e.ownerDocument.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,null,!1);for(e=r.nextNode();e;)"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===e.namespaceURI&&("annotation"===e.localName?(t=e.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))&&(i.hasOwnProperty(t)?runtime.log("Warning: annotation name used more than once with <office:annotation/>: '"+t+"'"):i[t]=e):"annotation-end"===e.localName&&((t=e.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","name"))?i.hasOwnProperty(t)?(n=i[t],n.annotationEndElement?runtime.log("Warning: annotation name used more than once with <office:annotation-end/>: '"+t+"'"):n.annotationEndElement=e):runtime.log("Warning: annotation end without an annotation start, name: '"+t+"'"):runtime.log("Warning: annotation end without a name found"))),e=r.nextNode()}function f(e,t){for(var n=e&&e.firstChild;n;)n.nodeType===Node.ELEMENT_NODE&&n.setAttributeNS("urn:webodf:names:scope","scope",t),n=n.nextSibling}function p(e,t){for(var n=j.rootElement.meta,n=n&&n.firstChild;n&&(n.namespaceURI!==e||n.localName!==t);)n=n.nextSibling;for(n=n&&n.firstChild;n&&n.nodeType!==Node.TEXT_NODE;)n=n.nextSibling;return n?n.data:null}function m(e){var t,n={};for(e=e.firstChild;e;)e.nodeType===Node.ELEMENT_NODE&&e.namespaceURI===s&&"font-face"===e.localName&&(t=e.getAttributeNS(s,"name"),n[t]=e),e=e.nextSibling;return n}function g(e,t){var n,i,r,o=null;if(e)for(o=e.cloneNode(!0),n=o.firstElementChild;n;)i=n.nextElementSibling,(r=n.getAttributeNS("urn:webodf:names:scope","scope"))&&r!==t&&o.removeChild(n),n=i;return o}function v(e,t){var n,i,o,a=null,l={};if(e)for(t.forEach(function(e){r.collectUsedFontFaces(l,e)}),a=e.cloneNode(!0),n=a.firstElementChild;n;)i=n.nextElementSibling,o=n.getAttributeNS(s,"name"),l[o]||a.removeChild(n),n=i;return a}function y(e){var t,n=j.rootElement.ownerDocument;if(e){d(e.documentElement);try{t=n.importNode(e.documentElement,!0)}catch(i){}}return t}function b(e){j.state=e,j.onchange&&j.onchange(j),j.onstatereadychange&&j.onstatereadychange(j)}function w(e){z=null,j.rootElement=e,e.fontFaceDecls=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),e.styles=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),e.automaticStyles=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),e.masterStyles=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),e.body=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body"),e.meta=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),e.settings=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),e.scripts=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","scripts"),h(e)}function C(e){var t,n=y(e),s=j.rootElement;n&&"document-styles"===n.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===n.namespaceURI?(s.fontFaceDecls=o.getDirectChild(n,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),i(s,s.fontFaceDecls),t=o.getDirectChild(n,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),s.styles=t||e.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","styles"),i(s,s.styles),t=o.getDirectChild(n,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),s.automaticStyles=t||e.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),f(s.automaticStyles,"document-styles"),i(s,s.automaticStyles),n=o.getDirectChild(n,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),s.masterStyles=n||e.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","master-styles"),i(s,s.masterStyles),r.prefixStyleNames(s.automaticStyles,l,s.masterStyles)):b(c.INVALID)}function x(e){e=y(e);var t,n,a,l;if(e&&"document-content"===e.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===e.namespaceURI){if(t=j.rootElement,a=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","font-face-decls"),t.fontFaceDecls&&a){l=t.fontFaceDecls;var u,d,h,p,g={};for(n=m(l),p=m(a),a=a.firstElementChild;a;){if(u=a.nextElementSibling,a.namespaceURI===s&&"font-face"===a.localName)if(d=a.getAttributeNS(s,"name"),n.hasOwnProperty(d)){if(!a.isEqualNode(n[d])){h=d;for(var v=n,w=p,C=0,x=void 0,x=h=h.replace(/\d+$/,"");v.hasOwnProperty(x)||w.hasOwnProperty(x);)C+=1,x=h+C;h=x,a.setAttributeNS(s,"style:name",h),l.appendChild(a),n[h]=a,delete p[d],g[d]=h}}else l.appendChild(a),n[d]=a,delete p[d];a=u}l=g}else a&&(t.fontFaceDecls=a,i(t,a));if(n=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","automatic-styles"),f(n,"document-content"),l&&r.changeFontFaceNames(n,l),t.automaticStyles&&n)for(l=n.firstChild;l;)t.automaticStyles.appendChild(l),l=n.firstChild;else n&&(t.automaticStyles=n,i(t,n));if(e=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","body"),null===e)throw"<office:body/> tag is mising.";t.body=e,i(t,t.body)}else b(c.INVALID)}function S(e){e=y(e);var t;e&&"document-meta"===e.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===e.namespaceURI&&(t=j.rootElement,t.meta=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),i(t,t.meta))}function A(e){e=y(e);var t;e&&"document-settings"===e.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===e.namespaceURI&&(t=j.rootElement,t.settings=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","settings"),i(t,t.settings))}function _(e){e=y(e);var t;if(e&&"manifest"===e.localName&&"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"===e.namespaceURI)for(t=j.rootElement,t.manifest=e,e=t.manifest.firstElementChild;e;)"file-entry"===e.localName&&"urn:oasis:names:tc:opendocument:xmlns:manifest:1.0"===e.namespaceURI&&(W[e.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","full-path")]=e.getAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","media-type")),e=e.nextElementSibling}function E(e,t,n){e=o.getElementsByTagName(e,t);var i;for(i=0;i<e.length;i+=1)t=e[i],n.hasOwnProperty(t.namespaceURI)||t.parentNode.removeChild(t)}function $(e){E(e,"script",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:office:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:table:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:text:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0":!0}),E(e,"style",{"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0":!0,"urn:oasis:names:tc:opendocument:xmlns:style:1.0":!0})}function k(e){var t,n,i,r=e.firstElementChild,o=[],s=e.attributes,a=s.length;for(t=0;a>t;t+=1)i=s.item(t),n=i.localName.substr(0,2).toLowerCase(),null===i.namespaceURI&&"on"===n&&o.push(i);for(a=o.length,t=0;a>t;t+=1)e.removeAttributeNode(o[t]);for(;r;)k(r),r=r.nextElementSibling}function D(e){var t=e.shift();t?H.loadAsDOM(t.path,function(n,i){i&&($(i),k(i.documentElement)),t.handler(i),j.state===c.INVALID?n?runtime.log("ERROR: Unable to load "+t.path+" - "+n):runtime.log("ERROR: Unable to load "+t.path):(n&&runtime.log("DEBUG: Unable to load "+t.path+" - "+n),D(e))}):(h(j.rootElement),b(c.DONE))}function T(e){var t="";return odf.Namespaces.forEachPrefix(function(e,n){t+=" xmlns:"+e+'="'+n+'"'}),'<?xml version="1.0" encoding="UTF-8"?><office:'+e+" "+t+' office:version="1.2">'}function F(){var e=new xmldom.LSSerializer,t=T("document-meta");return e.filter=new odf.OdfNodeFilter,t+=e.writeToString(j.rootElement.meta,odf.Namespaces.namespaceMap),t+"</office:document-meta>"}function L(e,t){var n=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:file-entry");return n.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:full-path",e),n.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:manifest:1.0","manifest:media-type",t),n}function O(){var e,t=runtime.parseXML('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2"></manifest:manifest>'),n=t.documentElement,i=new xmldom.LSSerializer;for(e in W)W.hasOwnProperty(e)&&n.appendChild(L(e,W[e]));return i.filter=new odf.OdfNodeFilter,'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n'+i.writeToString(t,odf.Namespaces.namespaceMap)}function N(){var e,n,i,o=odf.Namespaces.namespaceMap,s=new xmldom.LSSerializer,a=T("document-styles");return n=g(j.rootElement.automaticStyles,"document-styles"),i=j.rootElement.masterStyles.cloneNode(!0),e=v(j.rootElement.fontFaceDecls,[i,j.rootElement.styles,n]),r.removePrefixFromStyleNames(n,l,i),s.filter=new t(i,n),a+=s.writeToString(e,o),a+=s.writeToString(j.rootElement.styles,o),a+=s.writeToString(n,o),a+=s.writeToString(i,o),a+"</office:document-styles>"}function B(){var e,t,i=odf.Namespaces.namespaceMap,r=new xmldom.LSSerializer,o=T("document-content");return t=g(j.rootElement.automaticStyles,"document-content"),e=v(j.rootElement.fontFaceDecls,[t]),r.filter=new n(j.rootElement.body,t),o+=r.writeToString(e,i),o+=r.writeToString(t,i),o+=r.writeToString(j.rootElement.body,i),o+"</office:document-content>"}function M(e,t){runtime.loadXML(e,function(e,n){if(e)t(e);else if(n){$(n),k(n.documentElement);var i=y(n);i&&"document"===i.localName&&"urn:oasis:names:tc:opendocument:xmlns:office:1.0"===i.namespaceURI?(w(i),b(c.DONE)):b(c.INVALID)}else t("No DOM was loaded.")})}function R(e,t){var n;n=j.rootElement;var r=n.meta;r||(n.meta=r=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0","meta"),i(n,r)),n=r,e&&o.mapKeyValObjOntoNode(n,e,odf.Namespaces.lookupNamespaceURI),t&&o.removeKeyElementsFromNode(n,t,odf.Namespaces.lookupNamespaceURI)}function P(e,t){function n(e,t){var n;t||(t=e),n=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",t),s[e]=n,s.appendChild(n)}var i=new core.Zip("",null),r="application/vnd.oasis.opendocument."+e+(!0===t?"-template":""),o=runtime.byteArrayFromString(r,"utf8"),s=j.rootElement,a=document.createElementNS("urn:oasis:names:tc:opendocument:xmlns:office:1.0",e);return i.save("mimetype",o,!1,new Date),n("meta"),n("settings"),n("scripts"),n("fontFaceDecls","font-face-decls"),n("styles"),n("automaticStyles","automatic-styles"),n("masterStyles","master-styles"),n("body"),s.body.appendChild(a),W["/"]=r,W["settings.xml"]="text/xml",W["meta.xml"]="text/xml",W["styles.xml"]="text/xml",W["content.xml"]="text/xml",b(c.DONE),i}function I(){var e,t=new Date,n="";j.rootElement.settings&&j.rootElement.settings.firstElementChild&&(e=new xmldom.LSSerializer,n=T("document-settings"),e.filter=new odf.OdfNodeFilter,n+=e.writeToString(j.rootElement.settings,odf.Namespaces.namespaceMap),n+="</office:document-settings>"),(e=n)?(e=runtime.byteArrayFromString(e,"utf8"),H.save("settings.xml",e,!0,t)):H.remove("settings.xml"),n=runtime.getWindow(),e="WebODF/"+webodf.Version,n&&(e=e+" "+n.navigator.userAgent),R({"meta:generator":e},null),e=runtime.byteArrayFromString(F(),"utf8"),H.save("meta.xml",e,!0,t),e=runtime.byteArrayFromString(N(),"utf8"),H.save("styles.xml",e,!0,t),e=runtime.byteArrayFromString(B(),"utf8"),H.save("content.xml",e,!0,t),e=runtime.byteArrayFromString(O(),"utf8"),H.save("META-INF/manifest.xml",e,!0,t)}function U(e,t){I(),H.writeAs(e,function(e){t(e)})}var H,z,j=this,W={},V="";this.onstatereadychange=a,this.state=this.onchange=null,this.getMetadata=p,this.setRootElement=w,this.getContentElement=function(){var e;if(z||(e=j.rootElement.body,z=o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","text")||o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","presentation")||o.getDirectChild(e,"urn:oasis:names:tc:opendocument:xmlns:office:1.0","spreadsheet")),!z)throw"Could not find content element in <office:body/>.";return z},this.getDocumentType=function(){var e=j.getContentElement();return e&&e.localName},this.isTemplate=function(){return"-template"===W["/"].substr(-9)},this.setIsTemplate=function(e){var t=W["/"],n="-template"===t.substr(-9);e!==n&&(t=e?t+"-template":t.substr(0,t.length-9),W["/"]=t,e=runtime.byteArrayFromString(t,"utf8"),H.save("mimetype",e,!1,new Date))},this.getPart=function(e){return new odf.OdfPart(e,W[e],j,H)},this.getPartData=function(e,t){H.load(e,t)},this.setMetadata=R,this.incrementEditingCycles=function(){var e=p(odf.Namespaces.metans,"editing-cycles"),e=e?parseInt(e,10):0;return isNaN(e)&&(e=0),R({"meta:editing-cycles":e+1},null),e+1},this.createByteArray=function(e,t){I(),H.createByteArray(e,t)},this.saveAs=U,this.save=function(e){U(V,e)},this.getUrl=function(){return V},this.setBlob=function(e,t,n){n=u.convertBase64ToByteArray(n),H.save(e,n,!1,new Date),W.hasOwnProperty(e)&&runtime.log(e+" has been overwritten."),W[e]=t},this.removeBlob=function(e){var t=H.remove(e);runtime.assert(t,"file is not found: "+e),delete W[e]},this.state=c.LOADING,this.rootElement=function(e){var t,n=document.createElementNS(e.namespaceURI,e.localName);e=new e.Type;for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}({Type:odf.ODFDocumentElement,namespaceURI:odf.ODFDocumentElement.namespaceURI,localName:odf.ODFDocumentElement.localName}),e===odf.OdfContainer.DocumentType.TEXT?H=P("text"):e===odf.OdfContainer.DocumentType.TEXT_TEMPLATE?H=P("text",!0):e===odf.OdfContainer.DocumentType.PRESENTATION?H=P("presentation"):e===odf.OdfContainer.DocumentType.PRESENTATION_TEMPLATE?H=P("presentation",!0):e===odf.OdfContainer.DocumentType.SPREADSHEET?H=P("spreadsheet"):e===odf.OdfContainer.DocumentType.SPREADSHEET_TEMPLATE?H=P("spreadsheet",!0):(V=e,
H=new core.Zip(V,function(e,t){H=t,e?M(V,function(t){e&&(H.error=e+"\n"+t,b(c.INVALID))}):D([{path:"styles.xml",handler:C},{path:"content.xml",handler:x},{path:"meta.xml",handler:S},{path:"settings.xml",handler:A},{path:"META-INF/manifest.xml",handler:_}])}))},odf.OdfContainer.EMPTY=0,odf.OdfContainer.LOADING=1,odf.OdfContainer.DONE=2,odf.OdfContainer.INVALID=3,odf.OdfContainer.SAVING=4,odf.OdfContainer.MODIFIED=5,odf.OdfContainer.getContainer=function(e){return new odf.OdfContainer(e,null)}}(),odf.OdfContainer.DocumentType={TEXT:1,TEXT_TEMPLATE:2,PRESENTATION:3,PRESENTATION_TEMPLATE:4,SPREADSHEET:5,SPREADSHEET_TEMPLATE:6},gui.AnnotatableCanvas=function(){},gui.AnnotatableCanvas.prototype.refreshSize=function(){},gui.AnnotatableCanvas.prototype.getZoomLevel=function(){},gui.AnnotatableCanvas.prototype.getSizer=function(){},gui.AnnotationViewManager=function(e,t,n,i){function r(e){var t=e.annotationEndElement,n=c.createRange(),i=e.getAttributeNS(odf.Namespaces.officens,"name");t&&(n.setStart(e,e.childNodes.length),n.setEnd(t,0),e=d.getTextNodes(n,!1),e.forEach(function(e){var t;e:{for(t=e.parentNode;t.namespaceURI!==odf.Namespaces.officens||"body"!==t.localName;){if("http://www.w3.org/1999/xhtml"===t.namespaceURI&&"webodf-annotationHighlight"===t.className&&t.getAttribute("annotation")===i){t=!0;break e}t=t.parentNode}t=!1}t||(t=c.createElement("span"),t.className="webodf-annotationHighlight",t.setAttribute("annotation",i),e.parentNode.replaceChild(t,e),t.appendChild(e))})),n.detach()}function o(t){var i=e.getSizer();t?(n.style.display="inline-block",i.style.paddingRight=h.getComputedStyle(n).width):(n.style.display="none",i.style.paddingRight=0),e.refreshSize()}function s(){u.sort(function(e,t){return 0!==(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING)?-1:1})}function a(){var t;for(t=0;t<u.length;t+=1){var i=u[t],r=i.parentNode,o=r.nextElementSibling,s=o.nextElementSibling,a=r.parentNode,l=0,l=u[u.indexOf(i)-1],c=void 0,i=e.getZoomLevel();r.style.left=(n.getBoundingClientRect().left-a.getBoundingClientRect().left)/i+"px",r.style.width=n.getBoundingClientRect().width/i+"px",o.style.width=parseFloat(r.style.left)-30+"px",l?(c=l.parentNode.getBoundingClientRect(),20>=(a.getBoundingClientRect().top-c.bottom)/i?r.style.top=Math.abs(a.getBoundingClientRect().top-c.bottom)/i+20+"px":r.style.top="0px"):r.style.top="0px",s.style.left=o.getBoundingClientRect().width/i+"px";var o=s.style,a=s.getBoundingClientRect().left/i,l=s.getBoundingClientRect().top/i,c=r.getBoundingClientRect().left/i,d=r.getBoundingClientRect().top/i,h=0,f=0,h=c-a,h=h*h,f=d-l,f=f*f,a=Math.sqrt(h+f);o.width=a+"px",l=Math.asin((r.getBoundingClientRect().top-s.getBoundingClientRect().top)/(i*parseFloat(s.style.width))),s.style.transform="rotate("+l+"rad)",s.style.MozTransform="rotate("+l+"rad)",s.style.WebkitTransform="rotate("+l+"rad)",s.style.msTransform="rotate("+l+"rad)"}}function l(e){var t=u.indexOf(e),n=e.parentNode.parentNode;"div"===n.localName&&(n.parentNode.insertBefore(e,n),n.parentNode.removeChild(n)),e=e.getAttributeNS(odf.Namespaces.officens,"name"),e=c.querySelectorAll('span.webodf-annotationHighlight[annotation="'+e+'"]');for(var i,n=0;n<e.length;n+=1){for(i=e.item(n);i.firstChild;)i.parentNode.insertBefore(i.firstChild,i);i.parentNode.removeChild(i)}-1!==t&&u.splice(t,1),0===u.length&&o(!1)}var u=[],c=t.ownerDocument,d=odf.OdfUtils,h=runtime.getWindow();runtime.assert(Boolean(h),"Expected to be run in an environment which has a global window, like a browser."),this.rerenderAnnotations=a,this.rehighlightAnnotations=function(){u.forEach(function(e){r(e)})},this.getMinimumHeightForAnnotationPane=function(){return"none"!==n.style.display&&0<u.length?(u[u.length-1].parentNode.getBoundingClientRect().bottom-n.getBoundingClientRect().top)/e.getZoomLevel()+"px":null},this.addAnnotations=function(e){0!==e.length&&(o(!0),e.forEach(function(e){u.push(e);var t,n=c.createElement("div"),o=c.createElement("div"),s=c.createElement("div"),a=c.createElement("div");n.className="annotationWrapper",n.setAttribute("creator",d.getAnnotationCreator(e)),e.parentNode.insertBefore(n,e),o.className="annotationNote",o.appendChild(e),i&&(t=c.createElement("div"),t.className="annotationRemoveButton",o.appendChild(t)),s.className="annotationConnector horizontal",a.className="annotationConnector angular",n.appendChild(o),n.appendChild(s),n.appendChild(a),e.annotationEndElement&&r(e)}),s(),a())},this.forgetAnnotation=l,this.forgetAnnotations=function(){for(;u.length;)l(u[0])}},gui.Viewport=function(){},gui.Viewport.prototype.scrollIntoView=function(e,t){},gui.SingleScrollViewport=function(e){this.scrollIntoView=function(t,n){var i,r,o,s;s=e.offsetHeight-e.clientHeight,o=e.offsetWidth-e.clientWidth;var a=e.getBoundingClientRect();t&&a&&(i=a.left+5,r=a.top+5,o=a.right-(o+5),s=a.bottom-(s+5),n||t.top<r?e.scrollTop-=r-t.top:(t.top>s||t.bottom>s)&&(e.scrollTop=t.bottom-t.top<=s-r?e.scrollTop+(t.bottom-s):e.scrollTop+(t.top-r)),t.left<i?e.scrollLeft-=i-t.left:t.right>o&&(e.scrollLeft=t.right-t.left<=o-i?e.scrollLeft+(t.right-o):e.scrollLeft-(i-t.left)))}},function(){function e(t,n,r,o,s){var a,l,u=0;for(l in t)if(t.hasOwnProperty(l)){if(u===r){a=l;break}u+=1}a?n.getPartData(t[a].href,function(l,u){if(l)runtime.log(l);else if(u){var c="@font-face { font-family: "+(t[a].family||a)+"; src: url(data:application/x-font-ttf;charset=binary;base64,"+i.convertUTF8ArrayToBase64(u)+') format("truetype"); }';try{o.insertRule(c,o.cssRules.length)}catch(d){runtime.log("Problem inserting rule in CSS: "+runtime.toJson(d)+"\nRule: "+c)}}else runtime.log("missing font data for "+t[a].href);e(t,n,r+1,o,s)}):s&&s()}var t=xmldom.XPath,n=odf.OdfUtils,i=new core.Base64;odf.FontLoader=function(){this.loadFonts=function(i,r){for(var o=i.rootElement.fontFaceDecls;r.cssRules.length;)r.deleteRule(r.cssRules.length-1);if(o){var s,a,l,u,c={};if(o)for(o=t.getODFElementsWithXPath(o,"style:font-face[svg:font-face-src]",odf.Namespaces.lookupNamespaceURI),s=0;s<o.length;s+=1)a=o[s],l=a.getAttributeNS(odf.Namespaces.stylens,"name"),u=n.getNormalizedFontFamilyName(a.getAttributeNS(odf.Namespaces.svgns,"font-family")),a=t.getODFElementsWithXPath(a,"svg:font-face-src/svg:font-face-uri",odf.Namespaces.lookupNamespaceURI),0<a.length&&(a=a[0].getAttributeNS(odf.Namespaces.xlinkns,"href"),c[l]={href:a,family:u});e(c,i,0,r)}}}}(),odf.Formatting=function(){function e(e){return(e=x[e])?w.mergeObjects({},e):{}}function t(){for(var e,t,n=d.rootElement.fontFaceDecls,i={},n=n&&n.firstElementChild;n;)(e=n.getAttributeNS(p,"name"))&&((t=n.getAttributeNS(f,"font-family"))||0<n.getElementsByTagNameNS(f,"font-face-uri").length)&&(i[e]=t),n=n.nextElementSibling;return i}function n(e){for(var t=d.rootElement.styles.firstElementChild;t;){if(t.namespaceURI===p&&"default-style"===t.localName&&t.getAttributeNS(p,"family")===e)return t;t=t.nextElementSibling}return null}function i(e,t,n){var i,r,o;for(n=n||[d.rootElement.automaticStyles,d.rootElement.styles],o=0;o<n.length;o+=1)for(i=n[o],i=i.firstElementChild;i;){if(r=i.getAttributeNS(p,"name"),i.namespaceURI===p&&"style"===i.localName&&i.getAttributeNS(p,"family")===t&&r===e||"list-style"===t&&i.namespaceURI===m&&"list-style"===i.localName&&r===e||"data"===t&&i.namespaceURI===g&&r===e)return i;i=i.nextElementSibling}return null}function r(e){for(var t,n,i,r,o={},s=e.firstElementChild;s;){if(s.namespaceURI===p)for(i=o[s.nodeName]={},n=s.attributes,t=0;t<n.length;t+=1)r=n.item(t),i[r.name]=r.value;s=s.nextElementSibling}for(n=e.attributes,t=0;t<n.length;t+=1)r=n.item(t),o[r.name]=r.value;return o}function o(t,o){for(var s,a=d.rootElement.styles,l={},u=t.getAttributeNS(p,"family"),c=t;c;)s=r(c),l=w.mergeObjects(s,l),c=(s=c.getAttributeNS(p,"parent-style-name"))?i(s,u,[a]):null;return(c=n(u))&&(s=r(c),l=w.mergeObjects(s,l)),!1!==o&&(s=e(u),l=w.mergeObjects(s,l)),l}function s(e,t){function n(e){Object.keys(e).forEach(function(t){Object.keys(e[t]).forEach(function(e){s+="|"+t+":"+e+"|"})})}for(var i,r=e.nodeType===Node.TEXT_NODE?e.parentNode:e,o=[],s="",a=!1;r&&!y.isInlineRoot(r)&&r.parentNode!==d.rootElement;)!a&&y.isGroupingElement(r)&&(a=!0),(i=h.determineStylesForNode(r))&&o.push(i),r=r.parentNode;return a&&(o.forEach(n),t&&(t[s]=o)),a?o:void 0}function a(e){var t={orderedStyles:[],styleProperties:{}};return e.forEach(function(e){Object.keys(e).forEach(function(n){var r,s=Object.keys(e[n])[0],a={name:s,family:n,displayName:void 0,isCommonStyle:!1};(r=i(s,n))?(n=o(r),t.styleProperties=w.mergeObjects(n,t.styleProperties),a.displayName=r.getAttributeNS(p,"display-name")||void 0,a.isCommonStyle=r.parentNode===d.rootElement.styles):runtime.log("No style element found for '"+s+"' of family '"+n+"'"),t.orderedStyles.push(a)})}),t}function l(e,t){var n={},i=[];return t||(t={}),e.forEach(function(e){s(e,n)}),Object.keys(n).forEach(function(e){t[e]||(t[e]=a(n[e])),i.push(t[e])}),i}function u(e){for(var t=d.rootElement.masterStyles.firstElementChild;t&&(t.namespaceURI!==p||"master-page"!==t.localName||t.getAttributeNS(p,"name")!==e);)t=t.nextElementSibling;return t}function c(e,t){var n;return e&&(n=C.convertMeasure(e,"px")),void 0===n&&t&&(n=C.convertMeasure(t,"px")),n}var d,h=new odf.StyleInfo,f=odf.Namespaces.svgns,p=odf.Namespaces.stylens,m=odf.Namespaces.textns,g=odf.Namespaces.numberns,v=odf.Namespaces.fons,y=odf.OdfUtils,b=core.DomUtils,w=new core.Utils,C=new core.CSSUnits,x={paragraph:{"style:paragraph-properties":{"fo:text-align":"left"}}};this.getSystemDefaultStyleAttributes=e,this.setOdfContainer=function(e){d=e},this.getFontMap=t,this.getAvailableParagraphStyles=function(){for(var e,t,n=d.rootElement.styles,i=[],n=n&&n.firstElementChild;n;)"style"===n.localName&&n.namespaceURI===p&&(e=n.getAttributeNS(p,"family"),"paragraph"===e&&(e=n.getAttributeNS(p,"name"),t=n.getAttributeNS(p,"display-name")||e,e&&t&&i.push({name:e,displayName:t}))),n=n.nextElementSibling;return i},this.isStyleUsed=function(e){var t,n=d.rootElement;return t=h.hasDerivedStyles(n,odf.Namespaces.lookupNamespaceURI,e),e=new h.UsedStyleList(n.styles).uses(e)||new h.UsedStyleList(n.automaticStyles).uses(e)||new h.UsedStyleList(n.body).uses(e),t||e},this.getDefaultStyleElement=n,this.getStyleElement=i,this.getStyleAttributes=r,this.getInheritedStyleAttributes=o,this.getFirstCommonParentStyleNameOrSelf=function(e){var t,n=d.rootElement.styles;return(t=i(e,"paragraph",[d.rootElement.automaticStyles]))&&(e=t.getAttributeNS(p,"parent-style-name"),!e)?null:(t=i(e,"paragraph",[n]))?e:null},this.hasParagraphStyle=function(e){return Boolean(i(e,"paragraph"))},this.getAppliedStyles=l,this.getAppliedStylesForElement=function(e,t){return l([e],t)[0]},this.updateStyle=function(e,n){var i,r;b.mapObjOntoNode(e,n,odf.Namespaces.lookupNamespaceURI),(i=(i=n["style:text-properties"])&&i["style:font-name"])&&!t().hasOwnProperty(i)&&(r=e.ownerDocument.createElementNS(p,"style:font-face"),r.setAttributeNS(p,"style:name",i),r.setAttributeNS(f,"svg:font-family",i),d.rootElement.fontFaceDecls.appendChild(r))},this.createDerivedStyleObject=function(e,t,n){var o=i(e,t);return runtime.assert(Boolean(o),"No style element found for '"+e+"' of family '"+t+"'"),e=o.parentNode===d.rootElement.styles?{"style:parent-style-name":e}:r(o),e["style:family"]=t,w.mergeObjects(e,n),e},this.getDefaultTabStopDistance=function(){for(var e,t=n("paragraph"),t=t&&t.firstElementChild;t;)t.namespaceURI===p&&"paragraph-properties"===t.localName&&(e=t.getAttributeNS(p,"tab-stop-distance")),t=t.nextElementSibling;return e||(e="1.25cm"),y.parseNonNegativeLength(e)},this.getMasterPageElement=u,this.getContentSize=function(e,t){var n,r,o,s,a,l,h,f,m,g;e:{if(r=i(e,t),runtime.assert("paragraph"===t||"table"===t,"styleFamily must be either paragraph or table"),r&&((r=r.getAttributeNS(p,"master-page-name"))&&((n=u(r))||runtime.log("WARN: No master page definition found for "+r)),n||(n=u("Standard")),n||(n=d.rootElement.masterStyles.getElementsByTagNameNS(p,"master-page")[0])||runtime.log("WARN: Document has no master pages defined"),n))for(r=n.getAttributeNS(p,"page-layout-name"),o=d.rootElement.automaticStyles.getElementsByTagNameNS(p,"page-layout"),s=0;s<o.length;s+=1)if(n=o.item(s),n.getAttributeNS(p,"name")===r)break e;n=null}return n||(n=b.getDirectChild(d.rootElement.styles,p,"default-page-layout")),(n=b.getDirectChild(n,p,"page-layout-properties"))?("landscape"===n.getAttributeNS(p,"print-orientation")?(r="29.7cm",o="21.001cm"):(r="21.001cm",o="29.7cm"),r=c(n.getAttributeNS(v,"page-width"),r),o=c(n.getAttributeNS(v,"page-height"),o),s=c(n.getAttributeNS(v,"margin")),void 0===s?(s=c(n.getAttributeNS(v,"margin-left"),"2cm"),a=c(n.getAttributeNS(v,"margin-right"),"2cm"),l=c(n.getAttributeNS(v,"margin-top"),"2cm"),h=c(n.getAttributeNS(v,"margin-bottom"),"2cm")):s=a=l=h=s,f=c(n.getAttributeNS(v,"padding")),void 0===f?(f=c(n.getAttributeNS(v,"padding-left"),"0cm"),m=c(n.getAttributeNS(v,"padding-right"),"0cm"),g=c(n.getAttributeNS(v,"padding-top"),"0cm"),n=c(n.getAttributeNS(v,"padding-bottom"),"0cm")):f=m=g=n=f):(r=c("21.001cm"),o=c("29.7cm"),s=a=l=h=s=c("2cm"),f=m=g=n=f=c("0cm")),{width:r-s-a-f-m,height:o-l-h-g-n}}},function(){var e=odf.Namespaces.stylens,t=odf.Namespaces.textns,n={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"};odf.StyleTreeNode=function(e){this.derivedStyles={},this.element=e},odf.StyleTree=function(i,r){function o(n){var i,r,o,s={};if(!n)return s;for(n=n.firstElementChild;n;)(r=n.namespaceURI!==e||"style"!==n.localName&&"default-style"!==n.localName?n.namespaceURI===t&&"list-style"===n.localName?"list":n.namespaceURI!==e||"page-layout"!==n.localName&&"default-page-layout"!==n.localName?void 0:"page":n.getAttributeNS(e,"family"))&&((i=n.getAttributeNS(e,"name"))||(i=""),s.hasOwnProperty(r)?o=s[r]:s[r]=o={},o[i]=n),n=n.nextElementSibling;return s}function s(e,t){if(e.hasOwnProperty(t))return e[t];var n,i=null,r=Object.keys(e);for(n=0;n<r.length&&!(i=s(e[r[n]].derivedStyles,t));n+=1);return i}function a(t,n,i){var r,o,l;return n.hasOwnProperty(t)?(r=new odf.StyleTreeNode(n[t]),o=r.element.getAttributeNS(e,"parent-style-name"),l=null,o&&(l=s(i,o)||a(o,n,i)),l?l.derivedStyles[t]=r:i[t]=r,delete n[t],r):null}function l(e,t){e&&Object.keys(e).forEach(function(n){a(n,e,t)})}var u={};this.getStyleTree=function(){return u},function(){var e,t,s;t=o(i),s=o(r),Object.keys(n).forEach(function(n){e=u[n]={},l(t[n],e),l(s[n],e)})}()}}(),function(){function e(e,t){try{e.insertRule(t,e.cssRules.length)}catch(n){runtime.log("cannot load rule: "+t+" - "+n)}}function t(e,t){this.listCounterCount=0,this.contentRules=e,this.counterIdStack=[],this.continuedCounterIdStack=t}function n(n){function i(t,r,s,l){var u=r.namespaceURI===o&&"list"===r.localName,c=r.namespaceURI===o&&"list-item"===r.localName;if(u||c){if(u){var d,h,f,u=s+=1;for(l.listCounterCount+=1,c=t+"-level"+u+"-"+l.listCounterCount,r.setAttributeNS("urn:webodf:names:helper","counter-id",c),d=l.continuedCounterIdStack.shift(),d||(d=c,a+=c+" 1 ",h='text|list[webodfhelper|counter-id="'+c+'"] > text|list-item:first-child > :not(text|list):first-child:before',h+="{",h+="counter-increment: "+d+" 0;",h+="}",e(n,h));l.counterIdStack.length>=u;)l.counterIdStack.pop();for(l.counterIdStack.push(d),f=l.contentRules[u.toString()]||"",h=1;u>=h;h+=1)f=f.replace(h+"webodf-listLevel",l.counterIdStack[h-1]);h='text|list[webodfhelper|counter-id="'+c+'"] > text|list-item > :not(text|list):first-child:before',h+="{",h+=f,h+="counter-increment: "+d+";",h+="}",e(n,h)}for(r=r.firstElementChild;r;)i(t,r,s,l),r=r.nextElementSibling}else l.continuedCounterIdStack=[]}var r=0,a="",l={};this.createCounterRules=function(e,n,o){var a=n.getAttributeNS(s,"id"),u=[];o&&(o=o.getAttributeNS("urn:webodf:names:helper","counter-id"),u=l[o].slice(0)),e=new t(e,u),a?a="Y"+a:(r+=1,a="X"+r),i(a,n,0,e),l[a+"-level1-1"]=e.counterIdStack},this.initialiseCreatedCounters=function(){var t;t="office|document{"+("counter-reset: "+a+";"),t+="}",e(n,t)}}var i=odf.Namespaces.fons,r=odf.Namespaces.stylens,o=odf.Namespaces.textns,s=odf.Namespaces.xmlns,a={1:"decimal",a:"lower-latin",A:"upper-latin",i:"lower-roman",I:"upper-roman"};odf.ListStyleToCss=function(){function t(e){var t=h.parseLength(e);return t?d.convert(t.value,t.unit,"px"):(runtime.log("Could not parse value '"+e+"'."),0)}function l(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function u(e,t){var n;return e&&(n=e.getAttributeNS(o,"style-name")),n===t}function c(e,t,i){t=t.getElementsByTagNameNS(o,"list"),e=new n(e);var c,d,h,f,p,m,g,v={};for(g=0;g<t.length;g+=1)if(c=t.item(g),m=c.getAttributeNS(o,"style-name")){h=c.getAttributeNS(o,"continue-numbering"),f=c.getAttributeNS(o,"continue-list"),(p=c.getAttributeNS(s,"id"))&&(v[p]=c),p=i[m].element.firstElementChild;for(var y=void 0,b={};p;){var y=(y=p.getAttributeNS(o,"level"))&&parseInt(y,10),w=p,C="",x=void 0,S=void 0,A=x=void 0;if("list-level-style-number"===w.localName){var _=w,C=_.getAttributeNS(r,"num-format"),x=_.getAttributeNS(r,"num-suffix")||"",S=_.getAttributeNS(r,"num-prefix")||"",E="",$=_.getAttributeNS(o,"level"),_=_.getAttributeNS(o,"display-levels");if(S&&(E+='"'+l(S)+'"\n'),a.hasOwnProperty(C))for($=$?parseInt($,10):1,_=_?parseInt(_,10):1;_>0;)E+=" counter("+($-_+1)+"webodf-listLevel,"+a[C]+")",_>1&&(E+='"."'),--_;else E=C?E+(' "'+C+'"'):E+' ""';C="content:"+E+' "'+l(x)+'"'}else"list-level-style-image"===w.localName?C="content: none":"list-level-style-bullet"===w.localName&&(C=w.getAttributeNS(o,"bullet-char"),C='content: "'+l(C)+'"');(x=w.getElementsByTagNameNS(r,"list-level-properties")[0])&&(S=x.getAttributeNS(o,"list-level-position-and-space-mode"),"label-alignment"===S&&((x=x.getElementsByTagNameNS(r,"list-level-label-alignment")[0])&&(A=x.getAttributeNS(o,"label-followed-by")),"space"===A&&(C+=' "\\a0"'))),b[y]="\n"+C+";\n",p=p.nextElementSibling}p=b,h&&!f&&u(d,m)?e.createCounterRules(p,c,d):f&&u(v[f],m)?e.createCounterRules(p,c,v[f]):e.createCounterRules(p,c),d=c}e.initialiseCreatedCounters()}var d=new core.CSSUnits,h=odf.OdfUtils;this.applyListStyles=function(n,s,a){var l,u;(l=s.list)&&Object.keys(l).forEach(function(s){u=l[s];for(var a=u.element.firstElementChild;a;){if(a.namespaceURI===o){for(var c=n,d=a,h='text|list[text|style-name="'+s+'"]',f=d.getAttributeNS(o,"level"),p=void 0,m=void 0,g=m=void 0,v=void 0,y=void 0,b=p=void 0,w=void 0,C=void 0,x=void 0,v=void 0,g=(m=d.getElementsByTagNameNS(r,"list-level-properties")[0])&&m.getAttributeNS(o,"list-level-position-and-space-mode"),v=m&&m.getElementsByTagNameNS(r,"list-level-label-alignment")[0],p=f=f&&parseInt(f,10);p>1;)h+=" > text|list-item > text|list",--p;switch(p=m&&m.getAttributeNS(i,"text-align")||"left"){case"end":p="right";break;case"start":p="left"}"label-alignment"===g?(y=v&&v.getAttributeNS(i,"margin-left")||"0px",C=v&&v.getAttributeNS(i,"text-indent")||"0px",x=v&&v.getAttributeNS(o,"label-followed-by"),v=t(y)):(y=m&&m.getAttributeNS(o,"space-before")||"0px",b=m&&m.getAttributeNS(o,"min-label-width")||"0px",w=m&&m.getAttributeNS(o,"min-label-distance")||"0px",v=t(y)+t(b)),m=h+" > text|list-item",m+="{",m+="margin-left: "+v+"px;",m+="}",e(c,m),m=h+" > text|list-item > text|list",m+="{",m+="margin-left: "+-v+"px;",m+="}",e(c,m),m=h+" > text|list-item > :not(text|list):first-child:before",m+="{",m+="text-align: "+p+";",m+="display: inline-block;","label-alignment"===g?(m+="margin-left: "+C+";","listtab"===x&&(m+="padding-right: 0.2cm;")):(m+="min-width: "+b+";",m+="margin-left: "+(0===parseFloat(b)?"":"-")+b+";",m+="padding-right: "+w+";"),m+="}",e(c,m)}a=a.nextElementSibling}}),c(n,a,l)}}}(),odf.LazyStyleProperties=function(e,t){var n={};this.value=function(i){var r;return n.hasOwnProperty(i)?r=n[i]:(r=t[i](),void 0===r&&e&&(r=e.value(i)),n[i]=r),r},this.reset=function(t){e=t,n={}}},odf.StyleParseUtils=function(){function e(e){var t,n;return e=(e=/(-?[0-9]*[0-9][0-9]*(\.[0-9]*)?|0+\.[0-9]*[1-9][0-9]*|\.[0-9]*[1-9][0-9]*)((cm)|(mm)|(in)|(pt)|(pc)|(px))/.exec(e))?{value:parseFloat(e[1]),unit:e[3]}:null,n=e&&e.unit,"px"===n?t=e.value:"cm"===n?t=e.value/2.54*96:"mm"===n?t=e.value/25.4*96:"in"===n?t=96*e.value:"pt"===n?t=e.value/.75:"pc"===n&&(t=16*e.value),t}var t=odf.Namespaces.stylens;this.parseLength=e,this.parsePositiveLengthOrPercent=function(t,n,i){var r;t&&(r=parseFloat(t.substr(0,t.indexOf("%"))),isNaN(r)&&(r=void 0));var o;return void 0!==r?(i&&(o=i.value(n)),r=void 0===o?void 0:o/100*r):r=e(t),r},this.getPropertiesElement=function(e,n,i){for(n=i?i.nextElementSibling:n.firstElementChild;null!==n&&(n.localName!==e||n.namespaceURI!==t);)n=n.nextElementSibling;return n},this.parseAttributeList=function(e){return e&&(e=e.replace(/^\s*(.*?)\s*$/g,"$1")),e&&0<e.length?e.split(/\s+/):[]}},odf.Style2CSS=function(){function e(t,n,i){var r=[];i=i.derivedStyles;var o,s,a=w[t];void 0===a?n=null:(s=n?"["+a+'|style-name="'+n+'"]':"","presentation"===a&&(a="draw",s=n?'[presentation|style-name="'+n+'"]':""),n=a+"|"+C[t].join(s+","+a+"|")+s),null!==n&&r.push(n);for(o in i)i.hasOwnProperty(o)&&(n=e(t,o,i[o]),r=r.concat(n));return r}function t(e){var t="",n="",t=null;return"default-style"===e.localName?null:(t=e.getAttributeNS(f,"parent-style-name"),n=e.getAttributeNS(f,"family"),t=M.getODFElementsWithXPath(l,t?"//style:*[@style:name='"+t+"'][@style:family='"+n+"']":"//style:default-style[@style:family='"+n+"']",odf.Namespaces.lookupNamespaceURI)[0])}function n(e,n){var i,r,o,s="";for(i=0;i<n.length;i+=1)if(r=n[i],o=e.getAttributeNS(r[0],r[1])){if(o=o.trim(),L.hasOwnProperty(r[1])){var a=o,l=a.indexOf(" "),u=void 0;o=void 0,-1!==l?(u=a.substring(0,l),o=a.substring(l)):(u=a,o=""),(u=B.parseLength(u))&&"pt"===u.unit&&.75>u.value&&(a="0.75pt"+o),o=a}else if(O.hasOwnProperty(r[1])){var a=e,l=r[0],u=r[1],c=B.parseLength(o),d=void 0,h=void 0,p=void 0,m=void 0,p=void 0;if(c&&"%"===c.unit){for(d=c.value/100,h=t(a.parentNode),m="0";h;){if((p=y.getDirectChild(h,f,"paragraph-properties"))&&(p=B.parseLength(p.getAttributeNS(l,u)))){if("%"!==p.unit){m=p.value*d+p.unit;break}d*=p.value/100}h=t(h)}o=m}}r[2]&&(s+=r[2]+":"+o+";")}return s}function i(e,t,n,i){return t+t+n+n+i+i}function r(e,t){var n=[e],i=t.derivedStyles;return Object.keys(i).forEach(function(e){e=r(e,i[e]),n=n.concat(e)}),n}function o(e,t,n,i){function o(t,n){var i,r=[];t.forEach(function(e){s.forEach(function(t){r.push('draw|page[webodfhelper|page-style-name="'+t+'"] draw|frame[presentation|class="'+e+'"]')})}),0<r.length&&(i=r.join(",")+"{visibility:"+n+";}",e.insertRule(i,e.cssRules.length))}var s=r(t,i),a=[],l=[];["page-number","date-time","header","footer"].forEach(function(e){var t;t=n.getAttributeNS(v,"display-"+e),"true"===t?a.push(e):"false"===t&&l.push(e)}),o(a,"visible"),o(l,"hidden")}function s(r,l,p,w){var C,L;if("page"===l){var O,M,P=w.element,I="";M=O="",p=y.getDirectChild(P,f,"page-layout-properties");var U;if(p)if(U=P.getAttributeNS(f,"name"),I+=n(p,T),(O=y.getDirectChild(p,f,"background-image"))&&(M=O.getAttributeNS(g,"href"))&&(I=I+("background-image: url('odfkit:"+M+"');")+n(O,S)),"presentation"===a)for(P=(P=y.getDirectChild(P.parentNode.parentNode,h,"master-styles"))&&P.firstElementChild;P;)P.namespaceURI===f&&"master-page"===P.localName&&P.getAttributeNS(f,"page-layout-name")===U&&(M=P.getAttributeNS(f,"name"),O='draw|page[draw|master-page-name="'+M+'"] {'+I+"}",M='office|body, draw|page[draw|master-page-name="'+M+'"] {'+n(p,F)+" }",r.insertRule(O,r.cssRules.length),r.insertRule(M,r.cssRules.length)),P=P.nextElementSibling;else"text"===a&&(O="office|text {"+I+"}",M="office|body {width: "+p.getAttributeNS(d,"page-width")+";}",r.insertRule(O,r.cssRules.length),r.insertRule(M,r.cssRules.length))}else{if(I=e(l,p,w).join(","),U="",P=y.getDirectChild(w.element,f,"text-properties")){var H=P,z=L="";switch(O="",M=1,P=""+n(H,x),C=H.getAttributeNS(f,"text-underline-style"),"solid"===C&&(L+=" underline"),C=H.getAttributeNS(f,"text-line-through-style"),"solid"===C&&(L+=" line-through"),L.length&&(P=P+("text-decoration:"+L+";\n")+("text-decoration-line:"+L+";\n"),P+="-moz-text-decoration-line:"+L+";\n"),C=H.getAttributeNS(f,"text-line-through-type")){case"double":z+=" double";break;case"single":z+=" single"}if(z&&(P+="text-decoration-style:"+z+";\n",P+="-moz-text-decoration-style:"+z+";\n"),(L=H.getAttributeNS(f,"font-name")||H.getAttributeNS(d,"font-family"))&&(C=N[L],P+="font-family: "+(C||L)+";"),(C=H.getAttributeNS(f,"text-position"))&&(L=b.parseAttributeList(C),C=L[0],L=L[1],P+="vertical-align: "+C+"\n; ",L&&(M=parseFloat(L)/100)),H.hasAttributeNS(d,"font-size")||1!==M){for(H=H.parentNode;H;){if(C=(C=y.getDirectChild(H,f,"text-properties"))?B.parseFoFontSize(C.getAttributeNS(d,"font-size")):null){if("%"!==C.unit){O="font-size: "+C.value*M+C.unit+";";break}M*=C.value/100}H=t(H)}O||(O="font-size: "+parseFloat(u)*M+R.getUnits(u)+";")}P+=O,U+=P}(P=y.getDirectChild(w.element,f,"paragraph-properties"))&&(O=P,P=""+n(O,A),(M=y.getDirectChild(O,f,"background-image"))&&(H=M.getAttributeNS(g,"href"))&&(P=P+("background-image: url('odfkit:"+H+"');")+n(M,S)),(O=O.getAttributeNS(d,"line-height"))&&"normal"!==O&&(O=B.parseFoLineHeight(O),P="%"!==O.unit?P+("line-height: "+O.value+O.unit+";"):P+("line-height: "+O.value/100+";")),U+=P),(P=y.getDirectChild(w.element,f,"graphic-properties"))&&(H=P,P=""+n(H,_),O=H.getAttributeNS(c,"opacity"),M=H.getAttributeNS(c,"fill"),H=H.getAttributeNS(c,"fill-color"),"solid"===M||"hatch"===M?H&&"none"!==H?(O=isNaN(parseFloat(O))?1:parseFloat(O)/100,M=H.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i),(H=(M=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(M))?{r:parseInt(M[1],16),g:parseInt(M[2],16),b:parseInt(M[3],16)}:null)&&(P+="background-color: rgba("+H.r+","+H.g+","+H.b+","+O+");")):P+="background: none;":"none"===M&&(P+="background: none;"),U+=P),(P=y.getDirectChild(w.element,f,"drawing-page-properties"))&&(O=P,M=""+n(O,_),"true"===O.getAttributeNS(v,"background-visible")&&(M+="background: none;"),U+=M,o(r,p,P,w)),(P=y.getDirectChild(w.element,f,"table-cell-properties"))&&(p=U,U=""+n(P,E),U=p+U),(P=y.getDirectChild(w.element,f,"table-row-properties"))&&(p=U,U=""+n(P,k),U=p+U),(P=y.getDirectChild(w.element,f,"table-column-properties"))&&(p=U,U=""+n(P,$),U=p+U),(P=y.getDirectChild(w.element,f,"table-properties"))&&(p=U,U=""+n(P,D),P=P.getAttributeNS(m,"border-model"),"collapsing"===P?U+="border-collapse:collapse;":"separating"===P&&(U+="border-collapse:separate;"),U=p+U),0!==U.length&&r.insertRule(I+"{"+U+"}",r.cssRules.length)}for(var j in w.derivedStyles)w.derivedStyles.hasOwnProperty(j)&&s(r,l,j,w.derivedStyles[j])}var a,l,u,c=odf.Namespaces.drawns,d=odf.Namespaces.fons,h=odf.Namespaces.officens,f=odf.Namespaces.stylens,p=odf.Namespaces.svgns,m=odf.Namespaces.tablens,g=odf.Namespaces.xlinkns,v=odf.Namespaces.presentationns,y=core.DomUtils,b=new odf.StyleParseUtils,w={graphic:"draw","drawing-page":"draw",paragraph:"text",presentation:"presentation",ruby:"text",section:"text",table:"table","table-cell":"table","table-column":"table","table-row":"table",text:"text",list:"text",page:"office"},C={graphic:"circle connected control custom-shape ellipse frame g line measure page page-thumbnail path polygon polyline rect regular-polygon".split(" "),paragraph:"alphabetical-index-entry-template h illustration-index-entry-template index-source-style object-index-entry-template p table-index-entry-template table-of-content-entry-template user-index-entry-template".split(" "),presentation:"caption circle connector control custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),"drawing-page":"caption circle connector control page custom-shape ellipse frame g line measure page-thumbnail path polygon polyline rect regular-polygon".split(" "),ruby:["ruby","ruby-text"],section:"alphabetical-index bibliography illustration-index index-title object-index section table-of-content table-index user-index".split(" "),table:["background","table"],"table-cell":"body covered-table-cell even-columns even-rows first-column first-row last-column last-row odd-columns odd-rows table-cell".split(" "),"table-column":["table-column"],"table-row":["table-row"],text:"a index-entry-chapter index-entry-link-end index-entry-link-start index-entry-page-number index-entry-span index-entry-tab-stop index-entry-text index-title-template linenumbering-configuration list-level-style-number list-level-style-bullet outline-level-style span".split(" "),list:["list-item"]},x=[[d,"color","color"],[d,"background-color","background-color"],[d,"font-weight","font-weight"],[d,"font-style","font-style"]],S=[[f,"repeat","background-repeat"]],A=[[d,"background-color","background-color"],[d,"text-align","text-align"],[d,"text-indent","text-indent"],[d,"padding","padding"],[d,"padding-left","padding-left"],[d,"padding-right","padding-right"],[d,"padding-top","padding-top"],[d,"padding-bottom","padding-bottom"],[d,"border-left","border-left"],[d,"border-right","border-right"],[d,"border-top","border-top"],[d,"border-bottom","border-bottom"],[d,"margin","margin"],[d,"margin-left","margin-left"],[d,"margin-right","margin-right"],[d,"margin-top","margin-top"],[d,"margin-bottom","margin-bottom"],[d,"border","border"]],_=[[d,"background-color","background-color"],[d,"min-height","min-height"],[c,"stroke","border"],[p,"stroke-color","border-color"],[p,"stroke-width","border-width"],[d,"border","border"],[d,"border-left","border-left"],[d,"border-right","border-right"],[d,"border-top","border-top"],[d,"border-bottom","border-bottom"]],E=[[d,"background-color","background-color"],[d,"border-left","border-left"],[d,"border-right","border-right"],[d,"border-top","border-top"],[d,"border-bottom","border-bottom"],[d,"border","border"]],$=[[f,"column-width","width"]],k=[[f,"row-height","height"],[d,"keep-together",null]],D=[[f,"width","width"],[d,"margin-left","margin-left"],[d,"margin-right","margin-right"],[d,"margin-top","margin-top"],[d,"margin-bottom","margin-bottom"]],T=[[d,"background-color","background-color"],[d,"padding","padding"],[d,"padding-left","padding-left"],[d,"padding-right","padding-right"],[d,"padding-top","padding-top"],[d,"padding-bottom","padding-bottom"],[d,"border","border"],[d,"border-left","border-left"],[d,"border-right","border-right"],[d,"border-top","border-top"],[d,"border-bottom","border-bottom"],[d,"margin","margin"],[d,"margin-left","margin-left"],[d,"margin-right","margin-right"],[d,"margin-top","margin-top"],[d,"margin-bottom","margin-bottom"]],F=[[d,"page-width","width"],[d,"page-height","height"]],L={border:!0,"border-left":!0,"border-right":!0,"border-top":!0,"border-bottom":!0,"stroke-width":!0},O={margin:!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"margin-bottom":!0},N={},B=odf.OdfUtils,M=xmldom.XPath,R=new core.CSSUnits;this.style2css=function(e,t,n,i,r){function o(e,t){c="@namespace "+e+" url("+t+");";try{n.insertRule(c,n.cssRules.length)}catch(i){}}var c,d,h;for(l=t;n.cssRules.length;)n.deleteRule(n.cssRules.length-1);odf.Namespaces.forEachPrefix(o),o("webodfhelper","urn:webodf:names:helper"),N=i,a=e,u=runtime.getWindow().getComputedStyle(document.body,null).getPropertyValue("font-size")||"12pt";for(h in w)if(w.hasOwnProperty(h))for(d in e=r[h])e.hasOwnProperty(d)&&s(n,h,d,e[d])}},function(){function e(t,n){var i=this;this.getDistance=function(e){var t=i.x-e.x;return e=i.y-e.y,Math.sqrt(t*t+e*e)},this.getCenter=function(t){return new e((i.x+t.x)/2,(i.y+t.y)/2)},i.x=t,i.y=n}gui.ZoomHelper=function(){function t(e,t,n,i){e=i?"translate3d("+e+"px, "+t+"px, 0) scale3d("+n+", "+n+", 1)":"translate("+e+"px, "+t+"px) scale("+n+")",h.style.WebkitTransform=e,h.style.MozTransform=e,h.style.msTransform=e,h.style.OTransform=e,h.style.transform=e}function n(e){e?t(-f.x,-f.y,g,!0):(t(0,0,g,!0),t(0,0,g,!1))}function i(e){if(y&&S){var t=y.style.overflow,n=y.classList.contains("webodf-customScrollbars");e&&n||!e&&!n||(e?(y.classList.add("webodf-customScrollbars"),
y.style.overflow="hidden",runtime.requestAnimationFrame(function(){y.style.overflow=t})):y.classList.remove("webodf-customScrollbars"))}}function r(){t(-f.x,-f.y,g,!0),y.scrollLeft=0,y.scrollTop=0,A=b.style.overflow,b.style.overflow="visible",i(!1)}function o(){t(0,0,g,!0),y.scrollLeft=f.x,y.scrollTop=f.y,b.style.overflow=A||"",i(!0)}function s(t){return new e(t.pageX-h.offsetLeft,t.pageY-h.offsetTop)}function a(t){if(p){f.x-=t.x-p.x,f.y-=t.y-p.y;var n=f;f=new e(Math.min(Math.max(n.x,h.offsetLeft),(h.offsetLeft+h.offsetWidth)*g-y.clientWidth),Math.min(Math.max(n.y,h.offsetTop),(h.offsetTop+h.offsetHeight)*g-y.clientHeight))}p=t}function l(e){var t=e.touches.length,n=t>0?s(e.touches[0]):null;e=t>1?s(e.touches[1]):null,n&&e?(m=n.getDistance(e),v=g,p=n.getCenter(e),r(),x=C.PINCH):n&&(p=n,x=C.SCROLL)}function u(e){var t=e.touches.length,i=t>0?s(e.touches[0]):null,t=t>1?s(e.touches[1]):null;if(i&&t)if(e.preventDefault(),x===C.SCROLL)x=C.PINCH,r(),m=i.getDistance(t);else{e=i.getCenter(t),i=i.getDistance(t)/m,a(e);var t=g,l=Math.min(4,h.offsetParent.clientWidth/h.offsetWidth);g=v*i,g=Math.min(Math.max(g,l),4),i=g/t,f.x+=(i-1)*(e.x+f.x),f.y+=(i-1)*(e.y+f.y),n(!0)}else i&&(x===C.PINCH?(x=C.SCROLL,o()):a(i))}function c(){x===C.PINCH&&(w.emit(gui.ZoomHelper.signalZoomChanged,g),o(),n(!1)),x=C.NONE}function d(){y&&(y.removeEventListener("touchstart",l,!1),y.removeEventListener("touchmove",u,!1),y.removeEventListener("touchend",c,!1))}var h,f,p,m,g,v,y,b,w=new core.EventNotifier([gui.ZoomHelper.signalZoomChanged]),C={NONE:0,SCROLL:1,PINCH:2},x=C.NONE,S=runtime.getWindow().hasOwnProperty("ontouchstart"),A="";this.subscribe=function(e,t){w.subscribe(e,t)},this.unsubscribe=function(e,t){w.unsubscribe(e,t)},this.getZoomLevel=function(){return g},this.setZoomLevel=function(e){h&&(g=e,n(!1),w.emit(gui.ZoomHelper.signalZoomChanged,g))},this.destroy=function(e){d(),i(!1),e()},this.setZoomableElement=function(e){d(),h=e,y=h.offsetParent,b=h.parentNode,n(!1),y&&(y.addEventListener("touchstart",l,!1),y.addEventListener("touchmove",u,!1),y.addEventListener("touchend",c,!1)),i(!0)},v=g=1,f=new e(0,0)},gui.ZoomHelper.signalZoomChanged="zoomChanged"}(),ops.Canvas=function(){},ops.Canvas.prototype.getZoomLevel=function(){},ops.Canvas.prototype.getElement=function(){},ops.Canvas.prototype.getSizer=function(){},ops.Canvas.prototype.getZoomHelper=function(){},function(){function e(){function e(i){n=!0,runtime.setTimeout(function(){try{i()}catch(r){runtime.log(String(r)+"\n"+r.stack)}n=!1,0<t.length&&e(t.pop())},10)}var t=[],n=!1;this.clearQueue=function(){t.length=0},this.addToQueue=function(i){return 0!==t.length||n?void t.push(i):e(i)}}function t(e){function t(){for(;0<n.cssRules.length;)n.deleteRule(0);n.insertRule("#shadowContent draw|page {display:none;}",0),n.insertRule("office|presentation draw|page {display:none;}",1),n.insertRule("#shadowContent draw|page:nth-of-type("+i+") {display:block;}",2),n.insertRule("office|presentation draw|page:nth-of-type("+i+") {display:block;}",3)}var n=e.sheet,i=1;this.showFirstPage=function(){i=1,t()},this.showNextPage=function(){i+=1,t()},this.showPreviousPage=function(){i>1&&(--i,t())},this.showPage=function(e){e>0&&(i=e,t())},this.css=e,this.destroy=function(t){e.parentNode.removeChild(e),t()}}function n(e){e=e.sheet;for(var t=e.cssRules;t.length;)e.deleteRule(t.length-1)}function i(e,t,n){var i=new odf.Style2CSS,r=new odf.ListStyleToCss;n=n.sheet;var o=new odf.StyleTree(e.rootElement.styles,e.rootElement.automaticStyles).getStyleTree();i.style2css(e.getDocumentType(),e.rootElement,n,t.getFontMap(),o),r.applyListStyles(n,o,e.rootElement.body)}function r(e,t){(new odf.FontLoader).loadFonts(e,t.sheet)}function o(e,t,n){var i=null;e=e.rootElement.body.getElementsByTagNameNS(_,n+"-decl"),n=t.getAttributeNS(_,"use-"+n+"-name");var r;if(n&&0<e.length)for(t=0;t<e.length;t+=1)if(r=e[t],r.getAttributeNS(_,"name")===n){i=r.textContent;break}return i}function s(e,t,n,i){var r=e.ownerDocument;for(t=$.getElementsByTagNameNS(e,t,n),e=0;e<t.length;e+=1)$.removeAllChildNodes(t[e]),i&&(n=t[e],n.appendChild(r.createTextNode(i)))}function a(e,t,n){t.setAttributeNS("urn:webodf:names:helper","styleid",e);var i,r=t.getAttributeNS(S,"anchor-type"),o=t.getAttributeNS(C,"x"),s=t.getAttributeNS(C,"y"),a=t.getAttributeNS(C,"width"),l=t.getAttributeNS(C,"height"),u=t.getAttributeNS(y,"min-height"),c=t.getAttributeNS(y,"min-width");"as-char"===r?i="display: inline-block;":r||o||s?i="position: absolute;":(a||l||u||c)&&(i="display: block;"),o&&(i+="left: "+o+";"),s&&(i+="top: "+s+";"),a&&(i+="width: "+a+";"),l&&(i+="height: "+l+";"),u&&(i+="min-height: "+u+";"),c&&(i+="min-width: "+c+";"),i&&(i="draw|"+t.localName+'[webodfhelper|styleid="'+e+'"] {'+i+"}",n.insertRule(i,n.cssRules.length))}function l(e){for(e=e.firstChild;e;){if(e.namespaceURI===b&&"binary-data"===e.localName)return"data:image/png;base64,"+e.textContent.replace(/[\r\n\s]/g,"");e=e.nextSibling}return""}function u(e,t,n,i){function r(t){t&&(t='draw|image[webodfhelper|styleid="'+e+'"] {'+("background-image: url("+t+");")+"}",i.insertRule(t,i.cssRules.length))}function o(e){r(e.url)}n.setAttributeNS("urn:webodf:names:helper","styleid",e);var s,a=n.getAttributeNS(A,"href");if(a)try{s=t.getPart(a),s.onchange=o,s.load()}catch(u){runtime.log("slight problem: "+String(u))}else a=l(n),r(a)}function c(e){var t=e.ownerDocument;$.getElementsByTagNameNS(e,S,"line-break").forEach(function(e){e.hasChildNodes()||e.appendChild(t.createElement("br"))})}function d(e){var t=e.ownerDocument;$.getElementsByTagNameNS(e,S,"s").forEach(function(e){var n,i;if($.removeAllChildNodes(e),e.appendChild(t.createTextNode(" ")),i=parseInt(e.getAttributeNS(S,"c"),10),i>1)for(e.removeAttributeNS(S,"c"),n=1;i>n;n+=1)e.parentNode.insertBefore(e.cloneNode(!0),e)})}function h(e){$.getElementsByTagNameNS(e,S,"tab").forEach(function(e){e.textContent="	"})}function f(e,t){function n(e,n){var i=u.documentElement.namespaceURI;"video/"===n.substr(0,6)?(r=u.createElementNS(i,"video"),r.setAttribute("controls","controls"),o=u.createElementNS(i,"source"),e&&o.setAttribute("src",e),o.setAttribute("type",n),r.appendChild(o),t.parentNode.appendChild(r)):t.innerHtml="Unrecognised Plugin"}function i(e){n(e.url,e.mimetype)}var r,o,s,a,u=t.ownerDocument;if(s=t.getAttributeNS(A,"href"))try{a=e.getPart(s),a.onchange=i,a.load()}catch(c){runtime.log("slight problem: "+String(c))}else runtime.log("using MP4 data fallback"),s=l(t),n(s,"video/mp4")}function p(e){var t,n,i=e.getElementsByTagName("head")[0];for(t=e.styleSheets.length,n=i.firstElementChild;n&&("style"!==n.localName||!n.hasAttribute("webodfcss"));)n=n.nextElementSibling;return n?(t=parseInt(n.getAttribute("webodfcss"),10),n.setAttribute("webodfcss",t+1),n):("string"===String(typeof webodf_css)?t=webodf_css:(n="webodf.css",runtime.currentDirectory&&(n=runtime.currentDirectory(),0<n.length&&"/"!==n.substr(-1)&&(n+="/"),n+="../webodf.css"),t=runtime.readFileSync(n,"utf-8")),n=e.createElementNS(i.namespaceURI,"style"),n.setAttribute("media","screen, print, handheld, projection"),n.setAttribute("type","text/css"),n.setAttribute("webodfcss","1"),n.appendChild(e.createTextNode(t)),i.appendChild(n),n)}function m(e){var t=parseInt(e.getAttribute("webodfcss"),10);1===t?e.parentNode.removeChild(e):e.setAttribute("count",t-1)}function g(e){var t=e.getElementsByTagName("head")[0],n=e.createElementNS(t.namespaceURI,"style"),i="";return n.setAttribute("type","text/css"),n.setAttribute("media","screen, print, handheld, projection"),odf.Namespaces.forEachPrefix(function(e,t){i+="@namespace "+e+" url("+t+");\n"}),i+="@namespace webodfhelper url(urn:webodf:names:helper);\n",n.appendChild(e.createTextNode(i)),t.appendChild(n),n}var v=odf.Namespaces.drawns,y=odf.Namespaces.fons,b=odf.Namespaces.officens,w=odf.Namespaces.stylens,C=odf.Namespaces.svgns,x=odf.Namespaces.tablens,S=odf.Namespaces.textns,A=odf.Namespaces.xlinkns,_=odf.Namespaces.presentationns,E=xmldom.XPath,$=core.DomUtils;odf.OdfCanvas=function(l,y){function C(e,t,n){function i(e,t,n,i){Q.addToQueue(function(){u(e,t,n,i)})}var r,o;for(r=t.getElementsByTagNameNS(v,"image"),t=0;t<r.length;t+=1)o=r.item(t),i("image"+String(t),e,o,n)}function A(e,t){function n(e,t){Q.addToQueue(function(){f(e,t)})}var i,r,o;for(r=t.getElementsByTagNameNS(v,"plugin"),i=0;i<r.length;i+=1)o=r.item(i),n(e,o)}function k(){var e;e=V.firstChild;var t=ee.getZoomLevel();e&&(V.style.WebkitTransformOrigin="0% 0%",V.style.MozTransformOrigin="0% 0%",V.style.msTransformOrigin="0% 0%",V.style.OTransformOrigin="0% 0%",V.style.transformOrigin="0% 0%",Y&&((e=Y.getMinimumHeightForAnnotationPane())?V.style.minHeight=e:V.style.removeProperty("min-height")),l.style.width=Math.round(t*V.offsetWidth)+"px",l.style.height=Math.round(t*V.offsetHeight)+"px",l.style.display="inline-block")}function D(e,t){var n=P.sheet;$.removeAllChildNodes(l),V=j.createElementNS(l.namespaceURI,"div"),V.style.display="inline-block",V.style.background="white",V.style.setProperty("float","left","important"),V.appendChild(t),l.appendChild(V),q=j.createElementNS(l.namespaceURI,"div"),q.id="annotationsPane",I=j.createElementNS(l.namespaceURI,"div"),I.id="shadowContent",I.style.position="absolute",I.style.top=0,I.style.left=0,e.getContentElement().appendChild(I);var i,r,u=t.body,f=[];for(i=u.firstElementChild;i&&i!==u;)if(i.namespaceURI===v&&(f[f.length]=i),i.firstElementChild)i=i.firstElementChild;else{for(;i&&i!==u&&!i.nextElementSibling;)i=i.parentNode;i&&i.nextElementSibling&&(i=i.nextElementSibling)}for(r=0;r<f.length;r+=1)i=f[r],a("frame"+String(r),i,n);for(f=E.getODFElementsWithXPath(u,".//*[*[@text:anchor-type='paragraph']]",odf.Namespaces.lookupNamespaceURI),i=0;i<f.length;i+=1)u=f[i],u.setAttributeNS&&u.setAttributeNS("urn:webodf:names:helper","containsparagraphanchor",!0);u=W,i=I;var p,m,g,y,k,D=0;if(r=e.rootElement.ownerDocument,(f=t.body.firstElementChild)&&f.namespaceURI===b&&("presentation"===f.localName||"drawing"===f.localName))for(f=f.firstElementChild;f;){if(p=(p=f.getAttributeNS(v,"master-page-name"))?u.getMasterPageElement(p):null){for(m=f.getAttributeNS("urn:webodf:names:helper","styleid"),g=r.createElementNS(v,"draw:page"),k=p.firstElementChild,D=0;k;)"true"!==k.getAttributeNS(_,"placeholder")&&(y=k.cloneNode(!0),g.appendChild(y)),k=k.nextElementSibling,D+=1;k=y=D=void 0;for(var T=$.getElementsByTagNameNS(g,v,"frame"),D=0;D<T.length;D+=1)y=T[D],(k=y.getAttributeNS(_,"class"))&&!/^(date-time|footer|header|page-number)$/.test(k)&&y.parentNode.removeChild(y);for(y=$.getElementsByTagNameNS(g,v,"*"),D=0;D<y.length;D+=1)a(m+"_"+D,y[D],n);i.appendChild(g),D=String(i.getElementsByTagNameNS(v,"page").length),s(g,S,"page-number",D),s(g,_,"header",o(e,f,"header")),s(g,_,"footer",o(e,f,"footer")),a(m,g,n),g.setAttributeNS("urn:webodf:names:helper","page-style-name",f.getAttributeNS(v,"style-name")),g.setAttributeNS(v,"draw:master-page-name",p.getAttributeNS(w,"name"))}f=f.nextElementSibling}for(u=l.namespaceURI,f=$.getElementsByTagNameNS(t.body,x,"table-cell"),i=0;i<f.length;i+=1)r=f[i],r.hasAttributeNS(x,"number-columns-spanned")&&r.setAttributeNS(u,"colspan",r.getAttributeNS(x,"number-columns-spanned")),r.hasAttributeNS(x,"number-rows-spanned")&&r.setAttributeNS(u,"rowspan",r.getAttributeNS(x,"number-rows-spanned"));c(t.body),d(t.body),h(t.body),C(e,t.body,n),A(e,t.body),V.insertBefore(I,V.firstChild),ee.setZoomableElement(V)}function T(e){K?(q.parentNode||V.appendChild(q),Y&&Y.forgetAnnotations(),Y=new gui.AnnotationViewManager(z,e.body,q,G),e=$.getElementsByTagNameNS(e.body,b,"annotation"),Y.addAnnotations(e),k()):q.parentNode&&(V.removeChild(q),Y.forgetAnnotations(),k())}function F(e){function t(){n(M),n(R),n(P),$.removeAllChildNodes(l),l.style.display="inline-block";var t=O.rootElement;l.ownerDocument.importNode(t,!0),W.setOdfContainer(O),r(O,M),i(O,W,R),D(O,t),T(t),e||Q.addToQueue(function(){var e=[O];if(Z.hasOwnProperty("statereadychange")){var t,n=Z.statereadychange;for(t=0;t<n.length;t+=1)n[t].apply(null,e)}})}O.state===odf.OdfContainer.DONE?t():(runtime.log("WARNING: refreshOdf called but ODF was not DONE."),U=runtime.setTimeout(function o(){O.state===odf.OdfContainer.DONE?t():(runtime.log("will be back later..."),U=runtime.setTimeout(o,500))},100))}function L(e){Q.clearQueue(),$.removeAllChildNodes(l),l.appendChild(l.ownerDocument.createTextNode(runtime.tr("Loading")+e+"...")),l.removeAttribute("style"),O=new odf.OdfContainer(e,function(e){O=e,F(!1)})}runtime.assert(null!==l&&void 0!==l,"odf.OdfCanvas constructor needs DOM element"),runtime.assert(null!==l.ownerDocument&&void 0!==l.ownerDocument,"odf.OdfCanvas constructor needs DOM");var O,N,B,M,R,P,I,U,H,z=this,j=l.ownerDocument,W=new odf.Formatting,V=null,q=null,K=!1,G=!1,Y=null,Z={},X=!1,J=!1,Q=new e,ee=new gui.ZoomHelper,te=y||new gui.SingleScrollViewport(l.parentNode);this.refreshCSS=function(){X=!0,H.trigger()},this.refreshSize=function(){H.trigger()},this.odfContainer=function(){return O},this.setOdfContainer=function(e,t){O=e,F(!0===t)},this.load=this.load=L,this.save=function(e){O.save(e)},this.addListener=function(e,t){switch(e){case"click":var n=e;l.addEventListener?l.addEventListener(n,t,!1):l.attachEvent?l.attachEvent("on"+n,t):l["on"+n]=t;break;default:n=Z.hasOwnProperty(e)?Z[e]:Z[e]=[],t&&-1===n.indexOf(t)&&n.push(t)}},this.getFormatting=function(){return W},this.getAnnotationViewManager=function(){return Y},this.refreshAnnotations=function(){T(O.rootElement)},this.rerenderAnnotations=function(){Y&&(J=!0,H.trigger())},this.getSizer=function(){return V},this.enableAnnotations=function(e,t){e!==K&&(K=e,G=t,O&&T(O.rootElement))},this.addAnnotation=function(e){Y&&(Y.addAnnotations([e]),k())},this.forgetAnnotation=function(e){Y&&(Y.forgetAnnotation(e),k())},this.getZoomHelper=function(){return ee},this.setZoomLevel=function(e){ee.setZoomLevel(e)},this.getZoomLevel=function(){return ee.getZoomLevel()},this.fitToContainingElement=function(e,t){var n=ee.getZoomLevel(),i=l.offsetHeight/n,n=e/(l.offsetWidth/n);n>t/i&&(n=t/i),ee.setZoomLevel(n)},this.fitToWidth=function(e){var t=l.offsetWidth/ee.getZoomLevel();ee.setZoomLevel(e/t)},this.fitSmart=function(e,t){var n,i;i=ee.getZoomLevel(),n=l.offsetWidth/i,i=l.offsetHeight/i,n=e/n,void 0!==t&&n>t/i&&(n=t/i),ee.setZoomLevel(Math.min(1,n))},this.fitToHeight=function(e){var t=l.offsetHeight/ee.getZoomLevel();ee.setZoomLevel(e/t)},this.showFirstPage=function(){N.showFirstPage()},this.showNextPage=function(){N.showNextPage()},this.showPreviousPage=function(){N.showPreviousPage()},this.showPage=function(e){N.showPage(e),k()},this.getElement=function(){return l},this.getViewport=function(){return te},this.addCssForFrameWithImage=function(e){var t=e.getAttributeNS(v,"name"),n=e.firstElementChild;a(t,e,P.sheet),n&&u(t+"img",O,n,P.sheet)},this.destroy=function(e){var t=j.getElementsByTagName("head")[0],n=[N.destroy,H.destroy];runtime.clearTimeout(U),q&&q.parentNode&&q.parentNode.removeChild(q),ee.destroy(function(){V&&(l.removeChild(V),V=null)}),m(B),t.removeChild(M),t.removeChild(R),t.removeChild(P),core.Async.destroyAll(n,e)},B=p(j),N=new t(g(j)),M=g(j),R=g(j),P=g(j),H=core.Task.createRedrawTask(function(){X&&(i(O,W,R),X=!1),J&&(Y&&Y.rerenderAnnotations(),J=!1),k()}),ee.subscribe(gui.ZoomHelper.signalZoomChanged,k)}}(),odf.StepUtils=function(){this.getContentBounds=function(e){var t,n,i=e.container();return runtime.assert(e.isStep(),"Step iterator must be on a step"),i.nodeType===Node.TEXT_NODE&&0<e.offset()?t=e.offset():(i=e.leftNode())&&i.nodeType===Node.TEXT_NODE&&(t=i.length),i&&(i.nodeType===Node.TEXT_NODE?(runtime.assert(t>0,"Empty text node found"),n={container:i,startOffset:t-1,endOffset:t}):n={container:i,startOffset:0,endOffset:i.childNodes.length}),n}},ops.MemberProperties=function(){},ops.Member=function(e,t){var n=new ops.MemberProperties;this.getMemberId=function(){return e},this.getProperties=function(){return n},this.setProperties=function(e){Object.keys(e).forEach(function(t){n[t]=e[t]})},this.removeProperties=function(e){Object.keys(e).forEach(function(e){"fullName"!==e&&"color"!==e&&"imageUrl"!==e&&n.hasOwnProperty(e)&&delete n[e]})},runtime.assert(Boolean(e),"No memberId was supplied!"),t.fullName||(t.fullName=runtime.tr("Unknown Author")),t.color||(t.color="black"),t.imageUrl||(t.imageUrl="avatar-joe.png"),n=t},ops.Document=function(){},ops.Document.prototype.getMemberIds=function(){},ops.Document.prototype.removeCursor=function(e){},ops.Document.prototype.getDocumentElement=function(){},ops.Document.prototype.getRootNode=function(){},ops.Document.prototype.getDOMDocument=function(){},ops.Document.prototype.cloneDocumentElement=function(){},ops.Document.prototype.setDocumentElement=function(e){},ops.Document.prototype.subscribe=function(e,t){},ops.Document.prototype.unsubscribe=function(e,t){},ops.Document.prototype.getCanvas=function(){},ops.Document.prototype.createRootFilter=function(e){},ops.Document.prototype.createPositionIterator=function(e){},ops.Document.prototype.hasCursor=function(e){},ops.Document.signalCursorAdded="cursor/added",ops.Document.signalCursorRemoved="cursor/removed",ops.Document.signalCursorMoved="cursor/moved",ops.Document.signalMemberAdded="member/added",ops.Document.signalMemberUpdated="member/updated",ops.Document.signalMemberRemoved="member/removed",ops.OdtCursor=function(e,t){var n,i,r=this,o={},s=new core.EventNotifier([ops.OdtCursor.signalCursorUpdated]);this.removeFromDocument=function(){i.remove()},this.subscribe=function(e,t){s.subscribe(e,t)},this.unsubscribe=function(e,t){s.unsubscribe(e,t)},this.getMemberId=function(){return e},this.getNode=function(){return i.getNode()},this.getAnchorNode=function(){return i.getAnchorNode()},this.getSelectedRange=function(){return i.getSelectedRange()},this.setSelectedRange=function(e,t){i.setSelectedRange(e,t),s.emit(ops.OdtCursor.signalCursorUpdated,r)},this.hasForwardSelection=function(){return i.hasForwardSelection()},this.getDocument=function(){return t},this.getSelectionType=function(){return n},this.setSelectionType=function(e){o.hasOwnProperty(e)?n=e:runtime.log("Invalid selection type: "+e)},this.resetSelectionType=function(){r.setSelectionType(ops.OdtCursor.RangeSelection)},i=new core.Cursor(t.getDOMDocument(),e),o[ops.OdtCursor.RangeSelection]=!0,o[ops.OdtCursor.RegionSelection]=!0,r.resetSelectionType()},ops.OdtCursor.RangeSelection="Range",ops.OdtCursor.RegionSelection="Region",ops.OdtCursor.signalCursorUpdated="cursorUpdated",function(){var e=0;ops.StepsCache=function(t,n,i){function r(e,t){var n=this;this.nodeId=e,this.steps=-1,this.node=t,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function(e){e.setPositionBeforeElement(t),i(n.steps,e)}}function o(e,t,n){var r=this;this.nodeId=e,this.steps=t,this.node=n,this.previousBookmark=this.nextBookmark=null,this.setIteratorPosition=function(e){e.setUnfilteredPosition(n,0),i(r.steps,e)}}function s(e,t){var n="["+e.nodeId;return t&&(n+=" => "+t.nodeId),n+"]"}function a(){if(!0===ops.StepsCache.ENABLE_CACHE_VERIFICATION){for(var e,n,i,r=f,o=new core.LoopWatchDog(0,1e5),a={};r;)o.check(),(e=r.previousBookmark)?runtime.assert(e.nextBookmark===r,"Broken bookmark link to previous @"+s(e,r)):(runtime.assert(r===f,"Broken bookmark link @"+s(r)),runtime.assert(void 0===p||f===f||f.steps<=p,"Base point is damaged @"+s(r))),(n=r.nextBookmark)&&runtime.assert(n.previousBookmark===r,"Broken bookmark link to next @"+s(r,n)),(void 0===p||r===f||r.steps<=p)&&(runtime.assert(v.containsNode(t,r.node),"Disconnected node is being reported as undamaged @"+s(r)),e&&(i=r.node.compareDocumentPosition(e.node),runtime.assert(0===i||0!==(i&b),"Bookmark order with previous does not reflect DOM order @"+s(e,r))),n&&v.containsNode(t,n.node)&&(i=r.node.compareDocumentPosition(n.node),runtime.assert(0===i||0!==(i&y),"Bookmark order with next does not reflect DOM order @"+s(r,n)))),r=r.nextBookmark;Object.keys(m).forEach(function(e){var t=m[e];(void 0===p||p>=e)&&runtime.assert(t.steps<=e,"Bookmark step of "+t.steps+" exceeds cached step lookup for "+e+" @"+s(t)),runtime.assert(!1===a.hasOwnProperty(t.nodeId),"Bookmark "+s(t)+" appears twice in cached step lookup at steps "+a[t.nodeId]+" and "+e),a[t.nodeId]=e})}}function l(e){var t="";return e.nodeType===Node.ELEMENT_NODE&&(t=e.getAttributeNS("urn:webodf:names:steps","nodeId")||""),t}function u(t){var n=e.toString();return t.setAttributeNS("urn:webodf:names:steps","nodeId",n),e+=1,n}function c(e){var t,i,r=new core.LoopWatchDog(0,1e4);for(void 0!==p&&e>p&&(e=p),t=Math.floor(e/n)*n;!i&&t>=0;)i=m[t],t-=n;for(i=i||f;i.nextBookmark&&i.nextBookmark.steps<=e;)r.check(),i=i.nextBookmark;return runtime.assert(-1===e||i.steps<=e,"Bookmark @"+s(i)+" at step "+i.steps+" exceeds requested step of "+e),i}function d(e){e.previousBookmark&&(e.previousBookmark.nextBookmark=e.nextBookmark),e.nextBookmark&&(e.nextBookmark.previousBookmark=e.previousBookmark)}function h(e){for(var n,i=null;!i&&e&&e!==t;)(n=l(e))&&(i=g[n])&&i.node!==e&&(runtime.log("Cloned node detected. Creating new bookmark"),i=null,e.removeAttributeNS("urn:webodf:names:steps","nodeId")),e=e.parentNode;return i}var f,p,m={},g={},v=core.DomUtils,y=Node.DOCUMENT_POSITION_FOLLOWING,b=Node.DOCUMENT_POSITION_PRECEDING;this.updateBookmark=function(e,i){var o,s,h,b,w=Math.ceil(e/n)*n;if(void 0!==p&&e>p){for(s=c(p),h=s.nextBookmark;h&&h.steps<=e;)o=h.nextBookmark,b=Math.ceil(h.steps/n)*n,m[b]===h&&delete m[b],v.containsNode(t,h.node)?h.steps=e+1:(d(h),delete g[h.nodeId]),h=o;p=e}else s=c(e);if(h=l(i)||u(i),o=g[h],o?o.node!==i&&(runtime.log("Cloned node detected. Creating new bookmark"),h=u(i),o=g[h]=new r(h,i)):o=g[h]=new r(h,i),h=o,h.steps!==e&&(o=Math.ceil(h.steps/n)*n,o!==w&&m[o]===h&&delete m[o],h.steps=e),s!==h&&s.nextBookmark!==h){if(s.steps===h.steps)for(;0!==(h.node.compareDocumentPosition(s.node)&y)&&s!==f;)s=s.previousBookmark;s!==h&&s.nextBookmark!==h&&(d(h),o=s.nextBookmark,h.nextBookmark=s.nextBookmark,h.previousBookmark=s,s.nextBookmark=h,o&&(o.previousBookmark=h))}s=m[w],(!s||h.steps>s.steps)&&(m[w]=h),a()},this.setToClosestStep=function(e,t){var n;return a(),n=c(e),n.setIteratorPosition(t),n.steps},this.setToClosestDomPoint=function(e,n,i){var r,o;if(a(),e===t&&0===n)r=f;else if(e===t&&n===t.childNodes.length)for(o in r=f,m)m.hasOwnProperty(o)&&(e=m[o],e.steps>r.steps&&(r=e));else if(r=h(e.childNodes.item(n)||e),!r)for(i.setUnfilteredPosition(e,n);!r&&i.previousNode();)r=h(i.getCurrentNode());return r=r||f,void 0!==p&&r.steps>p&&(r=c(p)),r.setIteratorPosition(i),r.steps},this.damageCacheAfterStep=function(e){0>e&&(e=-1),void 0===p?p=e:p>e&&(p=e),a()},function(){var e=l(t)||u(t);f=new o(e,0,t)}()},ops.StepsCache.ENABLE_CACHE_VERIFICATION=!1,ops.StepsCache.Bookmark=function(){},ops.StepsCache.Bookmark.prototype.setIteratorPosition=function(e){}}(),function(){ops.OdtStepsTranslator=function(e,t,n,i){function r(e,t,n){var i=t.getCurrentNode();t.isBeforeNode()&&a.isParagraph(i)&&(n||(e+=1),s.updateBookmark(e,i))}function o(e,t){if(!t||n.acceptPosition(e)===u)return!0;for(;e.previousPosition();)if(n.acceptPosition(e)===u){if(t(c,e.container(),e.unfilteredDomOffset()))return!0;break}for(;e.nextPosition();)if(n.acceptPosition(e)===u){if(t(d,e.container(),e.unfilteredDomOffset()))return!0;break}return!1}var s,a=odf.OdfUtils,l=core.DomUtils,u=core.PositionFilter.FilterResult.FILTER_ACCEPT,c=core.StepDirection.PREVIOUS,d=core.StepDirection.NEXT;this.convertStepsToDomPoint=function(e){var i,o;if(isNaN(e))throw new TypeError("Requested steps is not numeric ("+e+")");if(0>e)throw new RangeError("Requested steps is negative ("+e+")");for(i=s.setToClosestStep(e,t);e>i&&t.nextPosition();)(o=n.acceptPosition(t)===u)&&(i+=1),r(i,t,o);if(i!==e)throw new RangeError("Requested steps ("+e+") exceeds available steps ("+i+")");return{node:t.container(),offset:t.unfilteredDomOffset()}},this.convertDomPointToSteps=function(i,a,c){var d;if(l.containsNode(e,i)||(a=0>l.comparePoints(e,0,i,a),i=e,a=a?0:e.childNodes.length),t.setUnfilteredPosition(i,a),o(t,c)||t.setUnfilteredPosition(i,a),c=t.container(),a=t.unfilteredDomOffset(),i=s.setToClosestDomPoint(c,a,t),0>l.comparePoints(t.container(),t.unfilteredDomOffset(),c,a))return i>0?i-1:i;for(;(t.container()!==c||t.unfilteredDomOffset()!==a)&&t.nextPosition();)(d=n.acceptPosition(t)===u)&&(i+=1),r(i,t,d);return i+0},this.prime=function(){var e,i;for(e=s.setToClosestStep(0,t);t.nextPosition();)(i=n.acceptPosition(t)===u)&&(e+=1),r(e,t,i)},this.handleStepsInserted=function(e){s.damageCacheAfterStep(e.position)},this.handleStepsRemoved=function(e){s.damageCacheAfterStep(e.position-1)},s=new ops.StepsCache(e,i,function(e,t){do{if(n.acceptPosition(t)===u){r(e,t,!0);break}r(e-1,t,!1)}while(t.nextPosition())})}}(),ops.Operation=function(){},ops.Operation.prototype.init=function(e){},ops.Operation.prototype.execute=function(e){},ops.Operation.prototype.spec=function(){},ops.TextPositionFilter=function(){function e(e,t){for(;e&&t(e)!==o;)e=e.previousSibling;return e}function t(t,i,r,a){var l;if(i){if(n.isInlineRoot(i)&&n.isGroupingElement(r))return s;if(a=n.lookLeftForCharacter(i),1===a||2===a&&(n.scanRightForAnyCharacter(r)||n.scanRightForAnyCharacter(n.nextNode(t))))return o}else if(n.isGroupingElement(t)&&n.isInlineRoot(e(t.previousSibling,a)))return o;return a=null===i&&n.isParagraph(t),l=n.lookRightForCharacter(r),a?l?o:n.scanRightForAnyCharacter(r)?s:o:l?(i=i||n.previousNode(t),n.scanLeftForAnyCharacter(i)?s:o):s}var n=odf.OdfUtils,i=Node.ELEMENT_NODE,r=Node.TEXT_NODE,o=core.PositionFilter.FilterResult.FILTER_ACCEPT,s=core.PositionFilter.FilterResult.FILTER_REJECT;this.acceptPosition=function(e){var a,l,u,c=e.container(),d=c.nodeType;if(d!==i&&d!==r)return s;if(d===r){if(d=e.unfilteredDomOffset(),a=c.data,runtime.assert(d!==a.length,"Unexpected offset."),d>0){if(e=a[d-1],!n.isODFWhitespace(e))return o;if(d>1)if(e=a[d-2],n.isODFWhitespace(e)){if(!n.isODFWhitespace(a.substr(0,d)))return s}else u=o;else l=n.previousNode(c),n.scanLeftForNonSpace(l)&&(u=o);return u===o?n.isTrailingWhitespace(c,d)?s:o:(e=a[d],n.isODFWhitespace(e)?s:n.scanLeftForAnyCharacter(n.previousNode(c))?s:o)}l=e.leftNode(),u=c,c=c.parentNode,u=t(c,l,u,e.getNodeFilter())}else n.isGroupingElement(c)?(l=e.leftNode(),u=e.rightNode(),u=t(c,l,u,e.getNodeFilter())):u=s;return u}},ops.OdtDocument=function(e){function t(e){return new core.PositionIterator(e,x,_,!1)}function n(){var t=e.odfContainer().getContentElement(),n=t&&t.localName;return runtime.assert("text"===n,"Unsupported content element type '"+n+"' for OdtDocument"),t}function i(){return m.getDocumentElement().ownerDocument}function r(e){for(;e&&!(e.namespaceURI===odf.Namespaces.officens&&"text"===e.localName||e.namespaceURI===odf.Namespaces.officens&&"annotation"===e.localName);)e=e.parentNode;return e}function o(e,n,i,r){r=t(r);var o;return 1===i.length?o=i[0]:(o=new core.PositionFilterChain,i.forEach(o.addFilter)),i=new core.StepIterator(o,r),i.setPosition(e,n),i}function s(e){var i=t(n());return e=f.convertStepsToDomPoint(e),i.setUnfilteredPosition(e.node,e.offset),i}function a(e){return e===C}function l(t){var n=t.spec(),i=n.memberid,r=new Date(n.timestamp).toISOString(),n=e.odfContainer();t.isEdit&&(i=m.getMember(i).getProperties().fullName,n.setMetadata({"dc:creator":i,"dc:date":r},null),i={setProperties:{"dc:creator":i,"dc:date":r},removedProperties:[]},p||(i.setProperties["meta:editing-cycles"]=n.incrementEditingCycles(),n.setMetadata(null,["meta:editing-duration","meta:document-statistic"])),p=t,m.emit(ops.OdtDocument.signalMetadataUpdated,i))}function u(e){var t,n,i=[],r=2;runtime.assert(e.isStep(),"positionIterator is not at a step");do{if((t=d.getContentBounds(e))&&(t=t.container,g.isDowngradableSpaceElement(t))){for(n=t.lastChild;t.firstChild;)i.push(t.firstChild),t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t),e.setPosition(n,n.nodeType===Node.TEXT_NODE?n.length:n.childNodes.length),e.roundToPreviousStep()}--r}while(r>0&&e.nextStep());i.forEach(v.normalizeTextNodes)}function c(e,t,n){return e=e.childNodes.item(t)||e,(e=g.getParagraphElement(e))&&v.containsNode(n,e)?e:n}var d,h,f,p,m=this,g=odf.OdfUtils,v=core.DomUtils,y={},b={},w=new core.EventNotifier([ops.Document.signalMemberAdded,ops.Document.signalMemberUpdated,ops.Document.signalMemberRemoved,ops.Document.signalCursorAdded,ops.Document.signalCursorRemoved,ops.Document.signalCursorMoved,ops.OdtDocument.signalParagraphChanged,ops.OdtDocument.signalParagraphStyleModified,ops.OdtDocument.signalCommonStyleCreated,ops.OdtDocument.signalCommonStyleDeleted,ops.OdtDocument.signalTableAdded,ops.OdtDocument.signalOperationStart,ops.OdtDocument.signalOperationEnd,ops.OdtDocument.signalProcessingBatchStart,ops.OdtDocument.signalProcessingBatchEnd,ops.OdtDocument.signalUndoStackChanged,ops.OdtDocument.signalStepsInserted,ops.OdtDocument.signalStepsRemoved,ops.OdtDocument.signalMetadataUpdated,ops.OdtDocument.signalAnnotationAdded]),C=core.StepDirection.NEXT,x=NodeFilter.SHOW_ALL,S=new gui.BlacklistNamespaceNodeFilter(["urn:webodf:names:cursor","urn:webodf:names:editinfo"]),A=new gui.OdfTextBodyNodeFilter,_=new core.NodeFilterChain([S,A]);this.createPositionIterator=t,this.getDocumentElement=function(){return e.odfContainer().rootElement},this.cloneDocumentElement=function(){var t=m.getDocumentElement(),n=e.getAnnotationViewManager();return n&&n.forgetAnnotations(),t=t.cloneNode(!0),e.refreshAnnotations(),m.fixCursorPositions(),t},this.setDocumentElement=function(i){var r=e.odfContainer();w.unsubscribe(ops.OdtDocument.signalStepsInserted,f.handleStepsInserted),w.unsubscribe(ops.OdtDocument.signalStepsRemoved,f.handleStepsRemoved),r.setRootElement(i),e.setOdfContainer(r,!0),e.refreshCSS(),i=n(),f=new ops.OdtStepsTranslator(i,t(i),h,500),w.subscribe(ops.OdtDocument.signalStepsInserted,f.handleStepsInserted),w.subscribe(ops.OdtDocument.signalStepsRemoved,f.handleStepsRemoved)},this.getDOMDocument=i,this.getRootElement=r,this.createStepIterator=o,this.getIteratorAtPosition=s,this.convertCursorStepToDomPoint=function(e){return f.convertStepsToDomPoint(e)},this.convertDomPointToCursorStep=function(e,t,n){var i;return n===C&&(i=a),f.convertDomPointToSteps(e,t,i)},this.convertDomToCursorRange=function(e){var t;return t=f.convertDomPointToSteps(e.anchorNode,e.anchorOffset),e=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset?t:f.convertDomPointToSteps(e.focusNode,e.focusOffset),{position:t,length:e-t}},this.convertCursorToDomRange=function(e,t){var n,r,o=i().createRange();return n=f.convertStepsToDomPoint(e),t?(r=f.convertStepsToDomPoint(e+t),t>0?(o.setStart(n.node,n.offset),o.setEnd(r.node,r.offset)):(o.setStart(r.node,r.offset),o.setEnd(n.node,n.offset))):o.setStart(n.node,n.offset),o},this.upgradeWhitespacesAtPosition=function(e){var t,n=s(e),n=new core.StepIterator(h,n),i=2;runtime.assert(n.isStep(),"positionIterator is not at a step (requested step: "+e+")");do{if((t=d.getContentBounds(n))&&(e=t.container,t=t.startOffset,e.nodeType===Node.TEXT_NODE&&g.isSignificantWhitespace(e,t))){runtime.assert(" "===e.data[t],"upgradeWhitespaceToElement: textNode.data[offset] should be a literal space");var r=e.ownerDocument.createElementNS(odf.Namespaces.textns,"text:s"),o=e.parentNode,a=e;r.appendChild(e.ownerDocument.createTextNode(" ")),1===e.length?o.replaceChild(r,e):(e.deleteData(t,1),t>0&&(t<e.length&&e.splitText(t),a=e.nextSibling),o.insertBefore(r,a)),e=r,n.setPosition(e,e.childNodes.length),n.roundToPreviousStep()}--i}while(i>0&&n.nextStep())},this.downgradeWhitespaces=u,this.downgradeWhitespacesAtPosition=function(e){e=s(e),e=new core.StepIterator(h,e),u(e)},this.getTextNodeAtStep=function(e,t){var n,r=s(e),o=r.container(),a=0,l=null;if(o.nodeType===Node.TEXT_NODE?(n=o,a=r.unfilteredDomOffset(),0<n.length&&(a>0&&(n=n.splitText(a)),n.parentNode.insertBefore(i().createTextNode(""),n),n=n.previousSibling,a=0)):(n=i().createTextNode(""),a=0,o.insertBefore(n,r.rightNode())),t){if(y[t]&&m.getCursorPosition(t)===e){for(l=y[t].getNode();l.nextSibling&&"cursor"===l.nextSibling.localName;)l.parentNode.insertBefore(l.nextSibling,l);
0<n.length&&n.nextSibling!==l&&(n=i().createTextNode(""),a=0),l.parentNode.insertBefore(n,l)}}else for(;n.nextSibling&&"cursor"===n.nextSibling.localName;)n.parentNode.insertBefore(n.nextSibling,n);for(;n.previousSibling&&n.previousSibling.nodeType===Node.TEXT_NODE;)r=n.previousSibling,r.appendData(n.data),a=r.length,n=r,n.parentNode.removeChild(n.nextSibling);for(;n.nextSibling&&n.nextSibling.nodeType===Node.TEXT_NODE;)r=n.nextSibling,n.appendData(r.data),n.parentNode.removeChild(r);return{textNode:n,offset:a}},this.fixCursorPositions=function(){Object.keys(y).forEach(function(e){var t,n,i,s=y[e],a=r(s.getNode()),l=m.createRootFilter(a),u=!1;i=s.getSelectedRange(),t=c(i.startContainer,i.startOffset,a),n=o(i.startContainer,i.startOffset,[h,l],t),i.collapsed?a=n:(t=c(i.endContainer,i.endOffset,a),a=o(i.endContainer,i.endOffset,[h,l],t)),n.isStep()&&a.isStep()?n.container()!==a.container()||n.offset()!==a.offset()||i.collapsed&&s.getAnchorNode()===s.getNode()||(u=!0,i.setStart(n.container(),n.offset()),i.collapse(!0)):(u=!0,runtime.assert(n.roundToClosestStep(),"No walkable step found for cursor owned by "+e),i.setStart(n.container(),n.offset()),runtime.assert(a.roundToClosestStep(),"No walkable step found for cursor owned by "+e),i.setEnd(a.container(),a.offset())),u&&(s.setSelectedRange(i,s.hasForwardSelection()),m.emit(ops.Document.signalCursorMoved,s))})},this.getCursorPosition=function(e){return(e=y[e])?f.convertDomPointToSteps(e.getNode(),0):0},this.getCursorSelection=function(e){e=y[e];var t=0,n=0;return e&&(t=f.convertDomPointToSteps(e.getNode(),0),n=f.convertDomPointToSteps(e.getAnchorNode(),0)),{position:n,length:t-n}},this.getPositionFilter=function(){return h},this.getOdfCanvas=function(){return e},this.getCanvas=function(){return e},this.getRootNode=n,this.addMember=function(e){runtime.assert(void 0===b[e.getMemberId()],"This member already exists"),b[e.getMemberId()]=e},this.getMember=function(e){return b.hasOwnProperty(e)?b[e]:null},this.removeMember=function(e){delete b[e]},this.getCursor=function(e){return y[e]},this.hasCursor=function(e){return y.hasOwnProperty(e)},this.getMemberIds=function(){return Object.keys(b)},this.addCursor=function(e){runtime.assert(Boolean(e),"OdtDocument::addCursor without cursor");var t=e.getMemberId(),n=m.convertCursorToDomRange(0,0);runtime.assert("string"==typeof t,"OdtDocument::addCursor has cursor without memberid"),runtime.assert(!y[t],"OdtDocument::addCursor is adding a duplicate cursor with memberid "+t),e.setSelectedRange(n,!0),y[t]=e},this.removeCursor=function(e){var t=y[e];return t?(t.removeFromDocument(),delete y[e],m.emit(ops.Document.signalCursorRemoved,e),!0):!1},this.moveCursor=function(e,t,n,i){e=y[e],t=m.convertCursorToDomRange(t,n),e&&(e.setSelectedRange(t,n>=0),e.setSelectionType(i||ops.OdtCursor.RangeSelection))},this.getFormatting=function(){return e.getFormatting()},this.emit=function(e,t){w.emit(e,t)},this.subscribe=function(e,t){w.subscribe(e,t)},this.unsubscribe=function(e,t){w.unsubscribe(e,t)},this.createRootFilter=function(e){return new RootFilter(e,y,r)},this.close=function(e){e()},this.destroy=function(e){e()},function(){var e=n();h=new ops.TextPositionFilter,d=new odf.StepUtils,f=new ops.OdtStepsTranslator(e,t(e),h,500),w.subscribe(ops.OdtDocument.signalStepsInserted,f.handleStepsInserted),w.subscribe(ops.OdtDocument.signalStepsRemoved,f.handleStepsRemoved),w.subscribe(ops.OdtDocument.signalOperationEnd,l),w.subscribe(ops.OdtDocument.signalProcessingBatchEnd,core.Task.processTasks)}()},ops.OdtDocument.signalParagraphChanged="paragraph/changed",ops.OdtDocument.signalTableAdded="table/added",ops.OdtDocument.signalCommonStyleCreated="style/created",ops.OdtDocument.signalCommonStyleDeleted="style/deleted",ops.OdtDocument.signalParagraphStyleModified="paragraphstyle/modified",ops.OdtDocument.signalOperationStart="operation/start",ops.OdtDocument.signalOperationEnd="operation/end",ops.OdtDocument.signalProcessingBatchStart="router/batchstart",ops.OdtDocument.signalProcessingBatchEnd="router/batchend",ops.OdtDocument.signalUndoStackChanged="undo/changed",ops.OdtDocument.signalStepsInserted="steps/inserted",ops.OdtDocument.signalStepsRemoved="steps/removed",ops.OdtDocument.signalMetadataUpdated="metadata/updated",ops.OdtDocument.signalAnnotationAdded="annotation/added",ops.OpAddAnnotation=function(){function e(e,n,i){var r=e.getTextNodeAtStep(i,t);r&&(e=r.textNode,i=e.parentNode,r.offset!==e.length&&e.splitText(r.offset),i.insertBefore(n,e.nextSibling),0===e.length&&i.removeChild(e))}var t,n,i,r,o,s;this.init=function(e){t=e.memberid,n=parseInt(e.timestamp,10),i=parseInt(e.position,10),r=void 0!==e.length?parseInt(e.length,10)||0:void 0,o=e.name},this.isEdit=!0,this.group=void 0,this.execute=function(a){var l,u,c=a.getCursor(t);s=a.getDOMDocument();var d,h,f,p=new Date(n);return d=s.createElementNS(odf.Namespaces.officens,"office:annotation"),d.setAttributeNS(odf.Namespaces.officens,"office:name",o),l=s.createElementNS(odf.Namespaces.dcns,"dc:creator"),l.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",t),l.textContent=a.getMember(t).getProperties().fullName,u=s.createElementNS(odf.Namespaces.dcns,"dc:date"),u.appendChild(s.createTextNode(p.toISOString())),p=s.createElementNS(odf.Namespaces.textns,"text:list"),h=s.createElementNS(odf.Namespaces.textns,"text:list-item"),f=s.createElementNS(odf.Namespaces.textns,"text:p"),h.appendChild(f),p.appendChild(h),d.appendChild(l),d.appendChild(u),d.appendChild(p),void 0!==r&&(l=s.createElementNS(odf.Namespaces.officens,"office:annotation-end"),l.setAttributeNS(odf.Namespaces.officens,"office:name",o),d.annotationEndElement=l,e(a,l,i+r)),e(a,d,i),a.emit(ops.OdtDocument.signalStepsInserted,{position:i}),c&&(l=s.createRange(),u=d.getElementsByTagNameNS(odf.Namespaces.textns,"p")[0],l.selectNodeContents(u),c.setSelectedRange(l,!1),c.setSelectionType(ops.OdtCursor.RangeSelection),a.emit(ops.Document.signalCursorMoved,c)),a.getOdfCanvas().addAnnotation(d),a.fixCursorPositions(),a.emit(ops.OdtDocument.signalAnnotationAdded,{memberId:t,annotation:d}),!0},this.spec=function(){return{optype:"AddAnnotation",memberid:t,timestamp:n,position:i,length:r,name:o}}},ops.OpAddCursor=function(){var e,t;this.init=function(n){e=n.memberid,t=n.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(t){var n=t.getCursor(e);return n?!1:(n=new ops.OdtCursor(e,t),t.addCursor(n),t.emit(ops.Document.signalCursorAdded,n),!0)},this.spec=function(){return{optype:"AddCursor",memberid:e,timestamp:t}}},ops.OpAddMember=function(){var e,t,n;this.init=function(i){e=i.memberid,t=parseInt(i.timestamp,10),n=i.setProperties},this.isEdit=!1,this.group=void 0,this.execute=function(t){var i;return t.getMember(e)?!1:(i=new ops.Member(e,n),t.addMember(i),t.emit(ops.Document.signalMemberAdded,i),!0)},this.spec=function(){return{optype:"AddMember",memberid:e,timestamp:t,setProperties:n}}},ops.OpAddStyle=function(){var e,t,n,i,r,o,s=odf.Namespaces.stylens;this.init=function(s){e=s.memberid,t=s.timestamp,n=s.styleName,i=s.styleFamily,r="true"===s.isAutomaticStyle||!0===s.isAutomaticStyle,o=s.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(e){var t=e.getOdfCanvas().odfContainer(),a=e.getFormatting(),l=e.getDOMDocument().createElementNS(s,"style:style");return l?(o&&a.updateStyle(l,o),l.setAttributeNS(s,"style:family",i),l.setAttributeNS(s,"style:name",n),r?t.rootElement.automaticStyles.appendChild(l):t.rootElement.styles.appendChild(l),e.getOdfCanvas().refreshCSS(),r||e.emit(ops.OdtDocument.signalCommonStyleCreated,{name:n,family:i}),!0):!1},this.spec=function(){return{optype:"AddStyle",memberid:e,timestamp:t,styleName:n,styleFamily:i,isAutomaticStyle:r,setProperties:o}}},odf.ObjectNameGenerator=function(e,t){function n(e,t){var n={};this.generateName=function(){var i,r=t(),o=0;do i=e+o,o+=1;while(n[i]||r[i]);return n[i]=!0,i}}function i(){var t={};return[e.rootElement.automaticStyles,e.rootElement.styles].forEach(function(e){for(e=e.firstElementChild;e;)e.namespaceURI===r&&"style"===e.localName&&(t[e.getAttributeNS(r,"name")]=!0),e=e.nextElementSibling}),t}var r=odf.Namespaces.stylens,o=odf.Namespaces.drawns,s=odf.Namespaces.xlinkns,a=(new core.Utils).hashString(t),l=null,u=null,c=null,d={},h={};this.generateStyleName=function(){return null===l&&(l=new n("auto"+a+"_",function(){return i()})),l.generateName()},this.generateFrameName=function(){var t,i,r;if(null===u){for(i=e.rootElement.body.getElementsByTagNameNS(o,"frame"),t=0;t<i.length;t+=1)r=i.item(t),d[r.getAttributeNS(o,"name")]=!0;u=new n("fr"+a+"_",function(){return d})}return u.generateName()},this.generateImageName=function(){var t,i,r;if(null===c){for(r=e.rootElement.body.getElementsByTagNameNS(o,"image"),t=0;t<r.length;t+=1)i=r.item(t),i=i.getAttributeNS(s,"href"),i=i.substring(9,i.lastIndexOf(".")),h[i]=!0;c=new n("img"+a+"_",function(){return h})}return c.generateName()}},odf.TextStyleApplicator=function(e,t,n){function i(e){function n(e,t){return"object"==typeof e&&"object"==typeof t?Object.keys(e).every(function(i){return n(e[i],t[i])}):e===t}var i={};this.isStyleApplied=function(r){return r=t.getAppliedStylesForElement(r,i).styleProperties,n(e,r)}}function r(i){var r={};this.applyStyleToContainer=function(o){var s;s=o.getAttributeNS(a,"style-name");var u=o.ownerDocument;if(s=s||"",!r.hasOwnProperty(s)){var c,d=s;c=s?t.createDerivedStyleObject(s,"text",i):i,u=u.createElementNS(l,"style:style"),t.updateStyle(u,c),u.setAttributeNS(l,"style:name",e.generateStyleName()),u.setAttributeNS(l,"style:family","text"),u.setAttributeNS("urn:webodf:names:scope","scope","document-content"),n.appendChild(u),r[d]=u}s=r[s].getAttributeNS(l,"name"),o.setAttributeNS(a,"text:style-name",s)}}function o(e,t){var n,i,r,o=e.ownerDocument,l=e.parentNode,u=new core.LoopWatchDog(1e4);for(i=[],i.push(e),r=e.nextSibling;r&&s.rangeContainsNode(t,r);)u.check(),i.push(r),r=r.nextSibling;if("span"!==l.localName||l.namespaceURI!==a?(n=o.createElementNS(a,"text:span"),l.insertBefore(n,e),o=!1):(e.previousSibling&&!s.rangeContainsNode(t,l.firstChild)?(n=l.cloneNode(!1),l.parentNode.insertBefore(n,l.nextSibling)):n=l,o=!0),i.forEach(function(e){e.parentNode!==n&&n.appendChild(e)}),r&&o)for(i=n.cloneNode(!1),n.parentNode.insertBefore(i,n.nextSibling);r;)u.check(),o=r.nextSibling,i.appendChild(r),r=o;return n}var s=core.DomUtils,a=odf.Namespaces.textns,l=odf.Namespaces.stylens;this.applyStyle=function(e,t,n){var s,a,l,u,c={};runtime.assert(n&&n.hasOwnProperty("style:text-properties"),"applyStyle without any text properties"),c["style:text-properties"]=n["style:text-properties"],l=new r(c),u=new i(c),e.forEach(function(e){s=u.isStyleApplied(e),!1===s&&(a=o(e,t),l.applyStyleToContainer(a))})}},ops.OpApplyDirectStyling=function(){function e(e,n,i){var r=e.getOdfCanvas().odfContainer(),o=a.splitBoundaries(n),l=s.getTextNodes(n,!1);new odf.TextStyleApplicator(new odf.ObjectNameGenerator(r,t),e.getFormatting(),r.rootElement.automaticStyles).applyStyle(l,n,i),o.forEach(a.normalizeTextNodes)}var t,n,i,r,o,s=odf.OdfUtils,a=core.DomUtils;this.init=function(e){t=e.memberid,n=e.timestamp,i=parseInt(e.position,10),r=parseInt(e.length,10),o=e.setProperties},this.isEdit=!0,this.group=void 0,this.execute=function(a){var l=a.convertCursorToDomRange(i,r),u=s.getParagraphElements(l);return e(a,l,o),l.detach(),a.getOdfCanvas().refreshCSS(),a.fixCursorPositions(),u.forEach(function(e){a.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:e,memberId:t,timeStamp:n})}),a.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"ApplyDirectStyling",memberid:t,timestamp:n,position:i,length:r,setProperties:o}}},ops.OpApplyHyperlink=function(){function e(e){for(;e;){if(a.isHyperlink(e))return!0;e=e.parentNode}return!1}var t,n,i,r,o,s=core.DomUtils,a=odf.OdfUtils;this.init=function(e){t=e.memberid,n=e.timestamp,i=e.position,r=e.length,o=e.hyperlink},this.isEdit=!0,this.group=void 0,this.execute=function(l){var u=l.getDOMDocument(),c=l.convertCursorToDomRange(i,r),d=s.splitBoundaries(c),h=[],f=a.getTextNodes(c,!1);return 0===f.length?!1:(f.forEach(function(t){var n=a.getParagraphElement(t);runtime.assert(!1===e(t),"The given range should not contain any link.");var i=o,r=u.createElementNS(odf.Namespaces.textns,"text:a");r.setAttributeNS(odf.Namespaces.xlinkns,"xlink:type","simple"),r.setAttributeNS(odf.Namespaces.xlinkns,"xlink:href",i),t.parentNode.insertBefore(r,t),r.appendChild(t),-1===h.indexOf(n)&&h.push(n)}),d.forEach(s.normalizeTextNodes),c.detach(),l.fixCursorPositions(),l.getOdfCanvas().refreshSize(),l.getOdfCanvas().rerenderAnnotations(),h.forEach(function(e){l.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:e,memberId:t,timeStamp:n})}),!0)},this.spec=function(){return{optype:"ApplyHyperlink",memberid:t,timestamp:n,position:i,length:r,hyperlink:o}}},ops.OpInsertImage=function(){var e,t,n,i,r,o,s,a,l=odf.Namespaces.drawns,u=odf.Namespaces.svgns,c=odf.Namespaces.textns,d=odf.Namespaces.xlinkns,h=odf.OdfUtils;this.init=function(l){e=l.memberid,t=l.timestamp,n=l.position,i=l.filename,r=l.frameWidth,o=l.frameHeight,s=l.frameStyleName,a=l.frameName},this.isEdit=!0,this.group=void 0,this.execute=function(f){var p,m,g=f.getOdfCanvas(),v=f.getTextNodeAtStep(n,e);if(!v)return!1;p=v.textNode,m=h.getParagraphElement(p);var v=v.offset!==p.length?p.splitText(v.offset):p.nextSibling,y=f.getDOMDocument(),b=y.createElementNS(l,"draw:image"),y=y.createElementNS(l,"draw:frame");return b.setAttributeNS(d,"xlink:href",i),b.setAttributeNS(d,"xlink:type","simple"),b.setAttributeNS(d,"xlink:show","embed"),b.setAttributeNS(d,"xlink:actuate","onLoad"),y.setAttributeNS(l,"draw:style-name",s),y.setAttributeNS(l,"draw:name",a),y.setAttributeNS(c,"text:anchor-type","as-char"),y.setAttributeNS(u,"svg:width",r),y.setAttributeNS(u,"svg:height",o),y.appendChild(b),p.parentNode.insertBefore(y,v),f.emit(ops.OdtDocument.signalStepsInserted,{position:n}),0===p.length&&p.parentNode.removeChild(p),g.addCssForFrameWithImage(y),g.refreshCSS(),f.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:m,memberId:e,timeStamp:t}),g.rerenderAnnotations(),!0},this.spec=function(){return{optype:"InsertImage",memberid:e,timestamp:t,filename:i,position:n,frameWidth:r,frameHeight:o,frameStyleName:s,frameName:a}}},ops.OpInsertTable=function(){function e(e,t){var n;if(1===u.length)n=u[0];else if(3===u.length)switch(e){case 0:n=u[0];break;case i-1:n=u[2];break;default:n=u[1]}else n=u[e];if(1===n.length)return n[0];if(3===n.length)switch(t){case 0:return n[0];case r-1:return n[2];default:return n[1]}return n[t]}var t,n,i,r,o,s,a,l,u,c=odf.OdfUtils;this.init=function(e){t=e.memberid,n=e.timestamp,o=e.position,i=e.initialRows,r=e.initialColumns,s=e.tableName,a=e.tableStyleName,l=e.tableColumnStyleName,u=e.tableCellStyleMatrix},this.isEdit=!0,this.group=void 0,this.execute=function(u){var d=u.getTextNodeAtStep(o),h=u.getRootNode();if(d){var f,p,m,g,v=u.getDOMDocument(),y=v.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table"),b=v.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-column");for(a&&y.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",a),s&&y.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:name",s),b.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:number-columns-repeated",r),l&&b.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",l),y.appendChild(b),m=0;i>m;m+=1){for(b=v.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-row"),g=0;r>g;g+=1)f=v.createElementNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:table-cell"),(p=e(m,g))&&f.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:table:1.0","table:style-name",p),p=v.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:p"),f.appendChild(p),b.appendChild(f);y.appendChild(b)}return d=c.getParagraphElement(d.textNode),h.insertBefore(y,d.nextSibling),u.emit(ops.OdtDocument.signalStepsInserted,{position:o}),u.getOdfCanvas().refreshSize(),u.emit(ops.OdtDocument.signalTableAdded,{tableElement:y,memberId:t,timeStamp:n}),u.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertTable",memberid:t,timestamp:n,position:o,initialRows:i,initialColumns:r,tableName:s,tableStyleName:a,tableColumnStyleName:l,tableCellStyleMatrix:u}}},ops.OpInsertText=function(){function e(e){return"	"!==e&&s.isODFWhitespace(e)}var t,n,i,r,o,s=odf.OdfUtils;this.init=function(e){t=e.memberid,n=e.timestamp,i=e.position,o=e.text,r="true"===e.moveCursor||!0===e.moveCursor},this.isEdit=!0,this.group=void 0,this.execute=function(a){var l,u,c,d,h,f,p=null,m=a.getDOMDocument(),g=0,v=a.getCursor(t);if(a.upgradeWhitespacesAtPosition(i),l=a.getTextNodeAtStep(i)){for(u=l.textNode,p=u.nextSibling,c=u.parentNode,d=s.getParagraphElement(u),f=0;f<o.length;f+=1){if(!(h="	"===o[f])){h=o;var y=f;h=e(h[y])&&(0===y||y===h.length-1||e(h[y-1]))}h&&(0===g?(l.offset!==u.length&&(p=u.splitText(l.offset)),f>0&&u.appendData(o.substring(0,f))):f>g&&(g=o.substring(g,f),c.insertBefore(m.createTextNode(g),p)),g=f+1,"	"===o[f]?(h=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:tab"),h.appendChild(m.createTextNode("	"))):(" "!==o[f]&&runtime.log("WARN: InsertText operation contains non-tab, non-space whitespace character (character code "+o.charCodeAt(f)+")"),h=m.createElementNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:s"),h.appendChild(m.createTextNode(" "))),c.insertBefore(h,p))}return 0===g?u.insertData(l.offset,o):g<o.length&&(l=o.substring(g),c.insertBefore(m.createTextNode(l),p)),c=u.parentNode,p=u.nextSibling,c.removeChild(u),c.insertBefore(u,p),0===u.length&&u.parentNode.removeChild(u),a.emit(ops.OdtDocument.signalStepsInserted,{position:i}),v&&r&&(a.moveCursor(t,i+o.length,0),a.emit(ops.Document.signalCursorMoved,v)),a.downgradeWhitespacesAtPosition(i),a.downgradeWhitespacesAtPosition(i+o.length),a.getOdfCanvas().refreshSize(),a.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:d,memberId:t,timeStamp:n}),a.getOdfCanvas().rerenderAnnotations(),!0}return!1},this.spec=function(){return{optype:"InsertText",memberid:t,timestamp:n,position:i,text:o,moveCursor:r}}},odf.CollapsingRules=function(e){function t(e){return i.isODFNode(e)||"br"===e.localName&&i.isLineBreak(e.parentNode)||e.nodeType===Node.TEXT_NODE&&i.isODFNode(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}function n(o){var s;return o.nodeType===Node.TEXT_NODE?(s=o.parentNode,s.removeChild(o)):s=r.removeUnwantedNodes(o,t),(o=s)&&(o=s,o=!i.isParagraph(o)&&o!==e&&i.hasNoODFContent(o)),o?n(s):s}var i=odf.OdfUtils,r=core.DomUtils;this.mergeChildrenIntoParent=n},ops.OpMergeParagraph=function(){function e(e){return odf.OdfUtils.isInlineRoot(e)?NodeFilter.FILTER_SKIP:c.isGroupingElement(e)&&c.hasNoODFContent(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}function t(e){if(e.nodeType===Node.TEXT_NODE){if(0===e.length)return runtime.log("WARN: Empty text node found during merge operation"),!0;if(c.isODFWhitespace(e.data)&&!1===c.isSignificantWhitespace(e,0))return!0;e="#text"}else e=(e.prefix?e.prefix+":":"")+e.localName;return runtime.log("WARN: Unexpected text element found near paragraph boundary ["+e+"]"),!1}function n(e){e.collapsed||(d.splitBoundaries(e),e=c.getTextElements(e,!1,!0).filter(t),e.forEach(function(e){e.parentNode.removeChild(e)}))}function i(e,t,n){e=e.convertCursorStepToDomPoint(t);var i=c.getParagraphElement(e.node,e.offset);return runtime.assert(Boolean(i),"Paragraph not found at step "+t),n&&n.setPosition(e.node,e.offset),i}var r,o,s,a,l,u,c=odf.OdfUtils,d=core.DomUtils,h=odf.Namespaces.textns;this.init=function(e){r=e.memberid,o=e.timestamp,s=e.moveCursor,a=e.paragraphStyleName,l=parseInt(e.sourceStartPosition,10),u=parseInt(e.destinationStartPosition,10)},this.isEdit=!0,this.group=void 0,this.execute=function(t){var c,f,p=t.getCursor(r);c=t.getRootNode();var m,g=new odf.CollapsingRules(c),v=t.createStepIterator(c,0,[t.getPositionFilter()],c);runtime.assert(l>u,"Destination paragraph ("+u+") must be before source paragraph ("+l+")"),f=i(t,u),c=i(t,l,v),v.previousStep(),runtime.assert(d.containsNode(f,v.container()),"Destination paragraph must be adjacent to the source paragraph"),m=f.ownerDocument.createRange(),v.setPosition(f,f.childNodes.length),v.roundToPreviousStep(),m.setStart(v.container(),v.offset()),m.setEnd(f,f.childNodes.length),n(m),m=f.childNodes.length;var y=c.ownerDocument.createRange();for(v.setPosition(c,0),v.roundToNextStep(),y.setStart(c,0),y.setEnd(v.container(),v.offset()),n(y),y=c.firstChild;y;)"editinfo"===y.localName?c.removeChild(y):(f.appendChild(y),d.removeUnwantedNodes(y,e)),y=c.firstChild;return runtime.assert(0===c.childNodes.length,"Source paragraph should be empty before it is removed"),g.mergeChildrenIntoParent(c),t.emit(ops.OdtDocument.signalStepsRemoved,{position:l-1}),v.setPosition(f,m),v.roundToClosestStep(),v.previousStep()||v.roundToNextStep(),t.downgradeWhitespaces(v),a?f.setAttributeNS(h,"text:style-name",a):f.removeAttributeNS(h,"style-name"),p&&s&&(t.moveCursor(r,l-1,0),t.emit(ops.Document.signalCursorMoved,p)),t.fixCursorPositions(),t.getOdfCanvas().refreshSize(),t.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:f,memberId:r,timeStamp:o}),t.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"MergeParagraph",memberid:r,timestamp:o,moveCursor:s,paragraphStyleName:a,sourceStartPosition:l,destinationStartPosition:u}}},ops.OpMoveCursor=function(){var e,t,n,i,r;this.init=function(o){e=o.memberid,t=o.timestamp,n=o.position,i=o.length||0,r=o.selectionType||ops.OdtCursor.RangeSelection},this.isEdit=!1,this.group=void 0,this.execute=function(t){var o,s=t.getCursor(e);return s?(o=t.convertCursorToDomRange(n,i),s.setSelectedRange(o,i>=0),s.setSelectionType(r),t.emit(ops.Document.signalCursorMoved,s),!0):!1},this.spec=function(){return{optype:"MoveCursor",memberid:e,timestamp:t,position:n,length:i,selectionType:r}}},ops.OpRemoveAnnotation=function(){var e,t,n,i,r=core.DomUtils;this.init=function(r){e=r.memberid,t=r.timestamp,n=parseInt(r.position,10),i=parseInt(r.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(e){function t(e){i.parentNode.insertBefore(e,i)}for(var i,o=e.getIteratorAtPosition(n).container();o.namespaceURI!==odf.Namespaces.officens||"annotation"!==o.localName;)o=o.parentNode;return null===o?!1:(i=o,o=i.annotationEndElement,e.getOdfCanvas().forgetAnnotation(i),r.getElementsByTagNameNS(i,"urn:webodf:names:cursor","cursor").forEach(t),r.getElementsByTagNameNS(i,"urn:webodf:names:cursor","anchor").forEach(t),i.parentNode.removeChild(i),o&&o.parentNode.removeChild(o),e.emit(ops.OdtDocument.signalStepsRemoved,{position:n>0?n-1:n}),e.getOdfCanvas().rerenderAnnotations(),e.fixCursorPositions(),!0)},this.spec=function(){return{optype:"RemoveAnnotation",memberid:e,timestamp:t,position:n,length:i}}},ops.OpRemoveBlob=function(){var e,t,n;this.init=function(i){e=i.memberid,t=i.timestamp,n=i.filename},this.isEdit=!0,this.group=void 0,this.execute=function(e){return e.getOdfCanvas().odfContainer().removeBlob(n),!0},this.spec=function(){return{optype:"RemoveBlob",memberid:e,timestamp:t,filename:n}}},ops.OpRemoveCursor=function(){var e,t;this.init=function(n){e=n.memberid,t=n.timestamp},this.isEdit=!1,this.group=void 0,this.execute=function(t){return t.removeCursor(e)?!0:!1},this.spec=function(){return{optype:"RemoveCursor",memberid:e,timestamp:t}}},ops.OpRemoveHyperlink=function(){var e,t,n,i,r=core.DomUtils,o=odf.OdfUtils;this.init=function(r){e=r.memberid,t=r.timestamp,n=r.position,i=r.length},this.isEdit=!0,this.group=void 0,this.execute=function(s){var a=s.convertCursorToDomRange(n,i),l=o.getHyperlinkElements(a);return runtime.assert(1===l.length,"The given range should only contain a single link."),l=r.mergeIntoParent(l[0]),a.detach(),s.fixCursorPositions(),s.getOdfCanvas().refreshSize(),s.getOdfCanvas().rerenderAnnotations(),s.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:o.getParagraphElement(l),memberId:e,timeStamp:t}),!0},this.spec=function(){return{optype:"RemoveHyperlink",memberid:e,timestamp:t,position:n,length:i}}},ops.OpRemoveMember=function(){var e,t;this.init=function(n){e=n.memberid,t=parseInt(n.timestamp,10)},this.isEdit=!1,this.group=void 0,this.execute=function(t){return t.getMember(e)?(t.removeMember(e),t.emit(ops.Document.signalMemberRemoved,e),!0):!1},this.spec=function(){return{optype:"RemoveMember",memberid:e,timestamp:t}}},ops.OpRemoveStyle=function(){var e,t,n,i;this.init=function(r){e=r.memberid,t=r.timestamp,n=r.styleName,i=r.styleFamily},this.isEdit=!0,this.group=void 0,this.execute=function(e){var t=e.getFormatting().getStyleElement(n,i);return t?(t.parentNode.removeChild(t),e.getOdfCanvas().refreshCSS(),e.emit(ops.OdtDocument.signalCommonStyleDeleted,{name:n,family:i}),!0):!1},this.spec=function(){return{optype:"RemoveStyle",memberid:e,timestamp:t,styleName:n,styleFamily:i}}},ops.OpRemoveText=function(){var e,t,n,i,r=odf.OdfUtils,o=core.DomUtils;this.init=function(r){runtime.assert(0<=r.length,"OpRemoveText only supports positive lengths"),e=r.memberid,t=r.timestamp,n=parseInt(r.position,10),i=parseInt(r.length,10)},this.isEdit=!0,this.group=void 0,this.execute=function(s){var a,l,u,c=s.getCursor(e),d=new odf.CollapsingRules(s.getRootNode());return s.upgradeWhitespacesAtPosition(n),s.upgradeWhitespacesAtPosition(n+i),a=s.convertCursorToDomRange(n,i),o.splitBoundaries(a),l=r.getTextElements(a,!1,!0),u=r.getParagraphElement(a.startContainer,a.startOffset),runtime.assert(void 0!==u,"Attempting to remove text outside a paragraph element"),a.detach(),l.forEach(function(e){e.parentNode?(runtime.assert(o.containsNode(u,e),"RemoveText only supports removing elements within the same paragraph"),d.mergeChildrenIntoParent(e)):runtime.log("WARN: text element has already been removed from it's container")}),s.emit(ops.OdtDocument.signalStepsRemoved,{position:n}),s.downgradeWhitespacesAtPosition(n),s.fixCursorPositions(),s.getOdfCanvas().refreshSize(),s.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:u,memberId:e,timeStamp:t}),c&&(c.resetSelectionType(),s.emit(ops.Document.signalCursorMoved,c)),s.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"RemoveText",memberid:e,timestamp:t,position:n,length:i}}},ops.OpSetBlob=function(){var e,t,n,i,r;this.init=function(o){e=o.memberid,t=o.timestamp,n=o.filename,i=o.mimetype,r=o.content},this.isEdit=!0,this.group=void 0,this.execute=function(e){return e.getOdfCanvas().odfContainer().setBlob(n,i,r),!0},this.spec=function(){return{optype:"SetBlob",memberid:e,timestamp:t,filename:n,mimetype:i,content:r}}},ops.OpSetParagraphStyle=function(){function e(e,t,n){var i=[e.getPositionFilter()],r=n.container();return n=n.unfilteredDomOffset(),!1===e.createStepIterator(r,n,i,t).previousStep()}var t,n,i,r,o=odf.OdfUtils;this.init=function(e){t=e.memberid,n=e.timestamp,i=e.position,r=e.styleName},this.isEdit=!0,this.group=void 0,this.execute=function(s){var a,l;return a=s.getIteratorAtPosition(i),(l=o.getParagraphElement(a.container()))?(runtime.assert(e(s,l,a),"SetParagraphStyle position should be the first position in the paragraph"),r?l.setAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","text:style-name",r):l.removeAttributeNS("urn:oasis:names:tc:opendocument:xmlns:text:1.0","style-name"),s.getOdfCanvas().refreshSize(),s.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:l,timeStamp:n,memberId:t}),s.getOdfCanvas().rerenderAnnotations(),!0):!1},this.spec=function(){return{optype:"SetParagraphStyle",memberid:t,timestamp:n,position:i,styleName:r}}},ops.OpSplitParagraph=function(){var e,t,n,i,r,o,s=odf.OdfUtils,a=odf.Namespaces.textns;this.init=function(s){e=s.memberid,t=s.timestamp,i=s.position,n=s.sourceParagraphPosition,o=s.paragraphStyleName,r="true"===s.moveCursor||!0===s.moveCursor},this.isEdit=!0,this.group=void 0,this.execute=function(n){var l,u,c,d,h,f,p,m=n.getCursor(e);if(n.upgradeWhitespacesAtPosition(i),l=n.getTextNodeAtStep(i),!l)return!1;if(u=s.getParagraphElement(l.textNode),!u)return!1;for(c=s.isListItem(u.parentNode)?u.parentNode:u,0===l.offset?(p=l.textNode.previousSibling,f=null):(p=l.textNode,f=l.offset>=l.textNode.length?null:l.textNode.splitText(l.offset)),d=l.textNode;d!==c;){if(d=d.parentNode,h=d.cloneNode(!1),f&&h.appendChild(f),p)for(;p&&p.nextSibling;)h.appendChild(p.nextSibling);else for(;d.firstChild;)h.appendChild(d.firstChild);d.parentNode.insertBefore(h,d.nextSibling),p=d,f=h}return s.isListItem(f)&&(f=f.childNodes.item(0)),o?f.setAttributeNS(a,"text:style-name",o):f.removeAttributeNS(a,"style-name"),0===l.textNode.length&&l.textNode.parentNode.removeChild(l.textNode),n.emit(ops.OdtDocument.signalStepsInserted,{position:i}),m&&r&&(n.moveCursor(e,i+1,0),n.emit(ops.Document.signalCursorMoved,m)),n.fixCursorPositions(),n.getOdfCanvas().refreshSize(),n.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:u,memberId:e,timeStamp:t}),n.emit(ops.OdtDocument.signalParagraphChanged,{paragraphElement:f,memberId:e,timeStamp:t}),n.getOdfCanvas().rerenderAnnotations(),!0},this.spec=function(){return{optype:"SplitParagraph",memberid:e,timestamp:t,position:i,sourceParagraphPosition:n,paragraphStyleName:o,moveCursor:r}}},ops.OpUpdateMember=function(){function e(e){var n="//dc:creator[@editinfo:memberid='"+t+"']";for(e=xmldom.XPath.getODFElementsWithXPath(e.getRootNode(),n,function(e){return"editinfo"===e?"urn:webodf:names:editinfo":odf.Namespaces.lookupNamespaceURI(e)}),n=0;n<e.length;n+=1)e[n].textContent=i.fullName}var t,n,i,r;this.init=function(e){t=e.memberid,n=parseInt(e.timestamp,10),i=e.setProperties,r=e.removedProperties},this.isEdit=!1,this.group=void 0,this.execute=function(n){var o=n.getMember(t);return o?(r&&o.removeProperties(r),i&&(o.setProperties(i),i.fullName&&e(n)),n.emit(ops.Document.signalMemberUpdated,o),!0):!1},this.spec=function(){return{optype:"UpdateMember",memberid:t,timestamp:n,setProperties:i,removedProperties:r}}},ops.OpUpdateMetadata=function(){var e,t,n,i;this.init=function(r){e=r.memberid,t=parseInt(r.timestamp,10),n=r.setProperties,i=r.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(e){var t=e.getOdfCanvas().odfContainer(),r=null;return i&&(r=i.attributes.split(",")),t.setMetadata(n,r),e.emit(ops.OdtDocument.signalMetadataUpdated,{setProperties:null!==n?n:{},removedProperties:null!==r?r:[]}),!0},this.spec=function(){return{optype:"UpdateMetadata",memberid:e,timestamp:t,setProperties:n,removedProperties:i}}},ops.OpUpdateParagraphStyle=function(){function e(e,t){var n,i,r=t?t.split(","):[];for(n=0;n<r.length;n+=1)i=r[n].split(":"),e.removeAttributeNS(odf.Namespaces.lookupNamespaceURI(i[0]),i[1])}var t,n,i,r,o,s=odf.Namespaces.stylens;this.init=function(e){t=e.memberid,n=e.timestamp,i=e.styleName,r=e.setProperties,o=e.removedProperties},this.isEdit=!0,this.group=void 0,this.execute=function(t){var n,a,l,u=t.getFormatting();return(n=""!==i?u.getStyleElement(i,"paragraph"):u.getDefaultStyleElement("paragraph"))?(a=n.getElementsByTagNameNS(s,"paragraph-properties").item(0),l=n.getElementsByTagNameNS(s,"text-properties").item(0),r&&u.updateStyle(n,r),o&&(u=o["style:paragraph-properties"],a&&u&&(e(a,u.attributes),0===a.attributes.length&&n.removeChild(a)),u=o["style:text-properties"],l&&u&&(e(l,u.attributes),0===l.attributes.length&&n.removeChild(l)),e(n,o.attributes)),t.getOdfCanvas().refreshCSS(),t.emit(ops.OdtDocument.signalParagraphStyleModified,i),t.getOdfCanvas().rerenderAnnotations(),!0):!1},this.spec=function(){return{optype:"UpdateParagraphStyle",memberid:t,timestamp:n,styleName:i,setProperties:r,removedProperties:o}}},ops.OperationFactory=function(){function e(e){return function(t){return new e}}var t;this.register=function(e,n){t[e]=n},this.create=function(e){var n=null,i=t[e.optype];
return i&&(n=i(e),n.init(e)),n},t={AddMember:e(ops.OpAddMember),UpdateMember:e(ops.OpUpdateMember),RemoveMember:e(ops.OpRemoveMember),AddCursor:e(ops.OpAddCursor),ApplyDirectStyling:e(ops.OpApplyDirectStyling),SetBlob:e(ops.OpSetBlob),RemoveBlob:e(ops.OpRemoveBlob),InsertImage:e(ops.OpInsertImage),InsertTable:e(ops.OpInsertTable),InsertText:e(ops.OpInsertText),RemoveText:e(ops.OpRemoveText),MergeParagraph:e(ops.OpMergeParagraph),SplitParagraph:e(ops.OpSplitParagraph),SetParagraphStyle:e(ops.OpSetParagraphStyle),UpdateParagraphStyle:e(ops.OpUpdateParagraphStyle),AddStyle:e(ops.OpAddStyle),RemoveStyle:e(ops.OpRemoveStyle),MoveCursor:e(ops.OpMoveCursor),RemoveCursor:e(ops.OpRemoveCursor),AddAnnotation:e(ops.OpAddAnnotation),RemoveAnnotation:e(ops.OpRemoveAnnotation),UpdateMetadata:e(ops.OpUpdateMetadata),ApplyHyperlink:e(ops.OpApplyHyperlink),RemoveHyperlink:e(ops.OpRemoveHyperlink)}},ops.OperationRouter=function(){},ops.OperationRouter.prototype.setOperationFactory=function(e){},ops.OperationRouter.prototype.setPlaybackFunction=function(e){},ops.OperationRouter.prototype.push=function(e){},ops.OperationRouter.prototype.close=function(e){},ops.OperationRouter.prototype.subscribe=function(e,t){},ops.OperationRouter.prototype.unsubscribe=function(e,t){},ops.OperationRouter.prototype.hasLocalUnsyncedOps=function(){},ops.OperationRouter.prototype.hasSessionHostConnection=function(){},ops.OperationRouter.signalProcessingBatchStart="router/batchstart",ops.OperationRouter.signalProcessingBatchEnd="router/batchend",ops.TrivialOperationRouter=function(){var e,t,n=new core.EventNotifier([ops.OperationRouter.signalProcessingBatchStart,ops.OperationRouter.signalProcessingBatchEnd]),i=0;this.setOperationFactory=function(t){e=t},this.setPlaybackFunction=function(e){t=e},this.push=function(r){i+=1,n.emit(ops.OperationRouter.signalProcessingBatchStart,{}),r.forEach(function(n){n=n.spec(),n.timestamp=Date.now(),n=e.create(n),n.group="g"+i,t(n)}),n.emit(ops.OperationRouter.signalProcessingBatchEnd,{})},this.close=function(e){e()},this.subscribe=function(e,t){n.subscribe(e,t)},this.unsubscribe=function(e,t){n.unsubscribe(e,t)},this.hasLocalUnsyncedOps=function(){return!1},this.hasSessionHostConnection=function(){return!0}},ops.Session=function(e){function t(e){r.emit(ops.OdtDocument.signalProcessingBatchStart,e)}function n(e){r.emit(ops.OdtDocument.signalProcessingBatchEnd,e)}var i=new ops.OperationFactory,r=new ops.OdtDocument(e),o=null;this.setOperationFactory=function(e){i=e,o&&o.setOperationFactory(i)},this.setOperationRouter=function(e){o&&(o.unsubscribe(ops.OperationRouter.signalProcessingBatchStart,t),o.unsubscribe(ops.OperationRouter.signalProcessingBatchEnd,n)),o=e,o.subscribe(ops.OperationRouter.signalProcessingBatchStart,t),o.subscribe(ops.OperationRouter.signalProcessingBatchEnd,n),e.setPlaybackFunction(function(e){return r.emit(ops.OdtDocument.signalOperationStart,e),e.execute(r)?(r.emit(ops.OdtDocument.signalOperationEnd,e),!0):!1}),e.setOperationFactory(i)},this.getOperationFactory=function(){return i},this.getOdtDocument=function(){return r},this.enqueue=function(e){o.push(e)},this.close=function(e){o.close(function(t){t?e(t):r.close(e)})},this.destroy=function(e){r.destroy(e)},this.setOperationRouter(new ops.TrivialOperationRouter)},gui.AnnotationController=function(e,t,n){function i(){var e=a.getCursor(n),e=e&&e.getNode(),t=!1;e&&(t=!c.isWithinAnnotation(e,a.getRootNode())),t!==l&&(l=t,u.emit(gui.AnnotationController.annotatableChanged,l))}function r(e){e.getMemberId()===n&&i()}function o(e){e===n&&i()}function s(e){e.getMemberId()===n&&i()}var a=e.getOdtDocument(),l=!1,u=new core.EventNotifier([gui.AnnotationController.annotatableChanged]),c=odf.OdfUtils,d=core.StepDirection.NEXT;this.isAnnotatable=function(){return l},this.addAnnotation=function(){var t=new ops.OpAddAnnotation,i=a.getCursorSelection(n),r=i.length,i=i.position;l&&(0===r?r=void 0:(i=r>=0?i:i+r,r=Math.abs(r)),t.init({memberid:n,position:i,length:r,name:n+Date.now()}),e.enqueue([t]))},this.removeAnnotation=function(i){var r,o;r=a.getMember(n).getProperties().fullName,(!0!==t.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)||r===c.getAnnotationCreator(i))&&(r=a.convertDomPointToCursorStep(i,0,d),o=a.convertDomPointToCursorStep(i,i.childNodes.length),i=new ops.OpRemoveAnnotation,i.init({memberid:n,position:r,length:o-r}),o=new ops.OpMoveCursor,o.init({memberid:n,position:r>0?r-1:r,length:0}),e.enqueue([i,o]))},this.subscribe=function(e,t){u.subscribe(e,t)},this.unsubscribe=function(e,t){u.unsubscribe(e,t)},this.destroy=function(e){a.unsubscribe(ops.Document.signalCursorAdded,r),a.unsubscribe(ops.Document.signalCursorRemoved,o),a.unsubscribe(ops.Document.signalCursorMoved,s),e()},t.registerConstraint(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN),a.subscribe(ops.Document.signalCursorAdded,r),a.subscribe(ops.Document.signalCursorRemoved,o),a.subscribe(ops.Document.signalCursorMoved,s),i()},gui.AnnotationController.annotatableChanged="annotatable/changed",gui.Avatar=function(e,t){var n,i,r,o=this;this.setColor=function(e){i.style.borderColor=e},this.setImageUrl=function(e){o.isVisible()?i.src=e:r=e},this.isVisible=function(){return"block"===n.style.display},this.show=function(){r&&(i.src=r,r=void 0),n.style.display="block"},this.hide=function(){n.style.display="none"},this.markAsFocussed=function(e){e?n.classList.add("active"):n.classList.remove("active")},this.destroy=function(t){e.removeChild(n),t()},function(){var r=e.ownerDocument;n=r.createElement("div"),i=r.createElement("img"),n.appendChild(i),n.style.display=t?"block":"none",n.className="handle",e.appendChild(n)}()},gui.StepInfo=function(){},gui.StepInfo.VisualDirection={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1},gui.StepInfo.prototype.container=function(){},gui.StepInfo.prototype.offset=function(){},gui.VisualStepScanner=function(){},gui.VisualStepScanner.prototype.process=function(e,t,n){},gui.GuiStepUtils=function(){function e(e){e=n.getContentBounds(e);var r,o=null;return e&&(e.container.nodeType===Node.TEXT_NODE?(r=e.container.ownerDocument.createRange(),r.setStart(e.container,e.startOffset),r.setEnd(e.container,e.endOffset),(o=0<r.getClientRects().length?r.getBoundingClientRect():null)&&" "===e.container.data.substring(e.startOffset,e.endOffset)&&1>=o.width&&(o=null),r.detach()):(t.isCharacterElement(e.container)||t.isCharacterFrame(e.container))&&(o=i.getBoundingClientRect(e.container))),o}var t=odf.OdfUtils,n=new odf.StepUtils,i=core.DomUtils,r=core.StepDirection.NEXT,o=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT,s=gui.StepInfo.VisualDirection.RIGHT_TO_LEFT;this.getContentRect=e,this.moveToFilteredStep=function(t,n,i){function a(e,t){return t.process(m,c,d)&&(e=!0,!h&&t.token&&(h=t.token)),e}var l,u,c,d,h,f=n===r,p=t.snapshot();l=!1;var m;do l=e(t),m={token:t.snapshot(),container:t.container,offset:t.offset,direction:n,visualDirection:n===r?o:s},u=t.nextStep()?e(t):null,t.restore(m.token),f?(c=l,d=u):(c=u,d=l),l=i.reduce(a,!1);while(!l&&t.advanceStep(n));return l||i.forEach(function(e){!h&&e.token&&(h=e.token)}),t.restore(h||p),Boolean(h)}},gui.Caret=function(e,t,n,i){function r(){d.style.opacity="0"===d.style.opacity?"1":"0",y.trigger()}function o(){return m.selectNodeContents(p),m.getBoundingClientRect()}function s(e){return E[e]!==_[e]}function a(){Object.keys(_).forEach(function(e){E[e]=_[e]})}function l(){if(!1===_.isShown||e.getSelectionType()!==ops.OdtCursor.RangeSelection||!i&&!e.getSelectedRange().collapsed?(_.visibility="hidden",d.style.visibility="hidden",y.cancel()):(_.visibility="visible",d.style.visibility="visible",!1===_.isFocused?(d.style.opacity="1",y.cancel()):((x||s("visibility"))&&(d.style.opacity="1",y.cancel()),y.trigger())),A||S){var n;n=e.getNode();var r,l,u=w.getBoundingClientRect(b.getSizer()),p=!1,m=0;if(n.removeAttributeNS("urn:webodf:names:cursor","caret-sizer-active"),0<n.getClientRects().length)l=o(),m=l.left-w.getBoundingClientRect(n).left,p=!0;else if(g.setPosition(n,0),l=C.getContentRect(g),!l&&g.nextStep()&&(r=C.getContentRect(g))&&(l=r,p=!0),l||(n.setAttributeNS("urn:webodf:names:cursor","caret-sizer-active","true"),l=o(),p=!0),!l)for(runtime.log("WARN: No suitable client rectangle found for visual caret for "+e.getMemberId());n;){if(0<n.getClientRects().length){l=w.getBoundingClientRect(n),p=!0;break}n=n.parentNode}l=w.translateRect(l,u,b.getZoomLevel()),n={top:l.top,height:l.height,right:p?l.left:l.right,width:w.adaptRangeDifferenceToZoomLevel(m,b.getZoomLevel())},8>n.height&&(n={top:n.top-(8-n.height)/2,height:8,right:n.right}),c.style.height=n.height+"px",c.style.top=n.top+"px",c.style.left=n.right-n.width+"px",c.style.width=n.width?n.width+"px":"",f&&(n=runtime.getWindow().getComputedStyle(e.getNode(),null),n.font?f.style.font=n.font:(f.style.fontStyle=n.fontStyle,f.style.fontVariant=n.fontVariant,f.style.fontWeight=n.fontWeight,f.style.fontSize=n.fontSize,f.style.lineHeight=n.lineHeight,f.style.fontFamily=n.fontFamily))}_.isShown&&S&&t.scrollIntoView(d.getBoundingClientRect()),s("isFocused")&&h.markAsFocussed(_.isFocused),a(),A=S=x=!1}function u(e){c.parentNode.removeChild(c),p.parentNode.removeChild(p),e()}var c,d,h,f,p,m,g,v,y,b=e.getDocument().getCanvas(),w=core.DomUtils,C=new gui.GuiStepUtils,x=!1,S=!1,A=!1,_={isFocused:!1,isShown:!0,visibility:"hidden"},E={isFocused:!_.isFocused,isShown:!_.isShown,visibility:"hidden"};this.handleUpdate=function(){A=!0,v.trigger()},this.refreshCursorBlinking=function(){x=!0,v.trigger()},this.setFocus=function(){_.isFocused=!0,v.trigger()},this.removeFocus=function(){_.isFocused=!1,v.trigger()},this.show=function(){_.isShown=!0,v.trigger()},this.hide=function(){_.isShown=!1,v.trigger()},this.setAvatarImageUrl=function(e){h.setImageUrl(e)},this.setColor=function(e){d.style.borderColor=e,h.setColor(e)},this.getCursor=function(){return e},this.getFocusElement=function(){return d},this.toggleHandleVisibility=function(){h.isVisible()?h.hide():h.show()},this.showHandle=function(){h.show()},this.hideHandle=function(){h.hide()},this.setOverlayElement=function(e){f=e,c.appendChild(e),A=!0,v.trigger()},this.ensureVisible=function(){S=!0,v.trigger()},this.getBoundingClientRect=function(){return w.getBoundingClientRect(c)},this.destroy=function(e){core.Async.destroyAll([v.destroy,y.destroy,h.destroy,u],e)},function(){var t=e.getDocument(),i=[t.createRootFilter(e.getMemberId()),t.getPositionFilter()],o=t.getDOMDocument();m=o.createRange(),p=o.createElement("span"),p.className="webodf-caretSizer",p.textContent="|",e.getNode().appendChild(p),c=o.createElement("div"),c.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",e.getMemberId()),c.className="webodf-caretOverlay",d=o.createElement("div"),d.className="caret",c.appendChild(d),h=new gui.Avatar(c,n),b.getSizer().appendChild(c),g=t.createStepIterator(e.getNode(),0,i,t.getRootNode()),v=core.Task.createRedrawTask(l),y=core.Task.createTimeoutTask(r,500),v.triggerImmediate()}()},odf.TextSerializer=function(){function e(i){var r,o="",s=t.filter?t.filter.acceptNode(i):NodeFilter.FILTER_ACCEPT,a=i.nodeType;if((s===NodeFilter.FILTER_ACCEPT||s===NodeFilter.FILTER_SKIP)&&n.isTextContentContainingNode(i))for(r=i.firstChild;r;)o+=e(r),r=r.nextSibling;return s===NodeFilter.FILTER_ACCEPT&&(a===Node.ELEMENT_NODE&&n.isParagraph(i)?o+="\n":a===Node.TEXT_NODE&&i.textContent&&(o+=i.textContent)),o}var t=this,n=odf.OdfUtils;this.filter=null,this.writeToString=function(t){return t?(t=e(t),"\n"===t[t.length-1]&&(t=t.substr(0,t.length-1)),t):""}},gui.MimeDataExporter=function(){var e;this.exportRangeToDataTransfer=function(t,n){var i;i=n.startContainer.ownerDocument.createElement("span"),i.appendChild(n.cloneContents()),i=e.writeToString(i);try{t.setData("text/plain",i)}catch(r){t.setData("Text",i)}},e=new odf.TextSerializer,e.filter=new odf.OdfNodeFilter},gui.Clipboard=function(e){this.setDataFromRange=function(t,n){var i,r=t.clipboardData;return i=runtime.getWindow(),!r&&i&&(r=i.clipboardData),r?(i=!0,e.exportRangeToDataTransfer(r,n),t.preventDefault()):i=!1,i}},gui.SessionContext=function(e,t){var n=e.getOdtDocument(),i=odf.OdfUtils;this.isLocalCursorWithinOwnAnnotation=function(){var e,r=n.getCursor(t);return r?(e=r&&r.getNode(),r=n.getMember(t).getProperties().fullName,(e=i.getParentAnnotation(e,n.getRootNode()))&&i.getAnnotationCreator(e)===r?!0:!1):!1}},gui.StyleSummary=function(e){function t(t,n){var i,o=t+"|"+n;return r.hasOwnProperty(o)||(i=[],e.forEach(function(e){e=(e=e.styleProperties[t])&&e[n],-1===i.indexOf(e)&&i.push(e)}),r[o]=i),r[o]}function n(e,n,i){return function(){var r=t(e,n);return i.length>=r.length&&r.every(function(e){return-1!==i.indexOf(e)})}}function i(e,n){var i=t(e,n);return 1===i.length?i[0]:void 0}var r={};this.getPropertyValues=t,this.getCommonValue=i,this.isBold=n("style:text-properties","fo:font-weight",["bold"]),this.isItalic=n("style:text-properties","fo:font-style",["italic"]),this.hasUnderline=n("style:text-properties","style:text-underline-style",["solid"]),this.hasStrikeThrough=n("style:text-properties","style:text-line-through-style",["solid"]),this.fontSize=function(){var e=i("style:text-properties","fo:font-size");return e&&parseFloat(e)},this.fontName=function(){return i("style:text-properties","style:font-name")},this.isAlignedLeft=n("style:paragraph-properties","fo:text-align",["left","start"]),this.isAlignedCenter=n("style:paragraph-properties","fo:text-align",["center"]),this.isAlignedRight=n("style:paragraph-properties","fo:text-align",["right","end"]),this.isAlignedJustified=n("style:paragraph-properties","fo:text-align",["justify"]),this.text={isBold:this.isBold,isItalic:this.isItalic,hasUnderline:this.hasUnderline,hasStrikeThrough:this.hasStrikeThrough,fontSize:this.fontSize,fontName:this.fontName},this.paragraph={isAlignedLeft:this.isAlignedLeft,isAlignedCenter:this.isAlignedCenter,isAlignedRight:this.isAlignedRight,isAlignedJustified:this.isAlignedJustified}},gui.DirectFormattingController=function(e,t,n,i,r,o,s){function a(){return N.value().styleSummary}function l(){return N.value().enabledFeatures}function u(e){var t;return e.collapsed?(t=e.startContainer,t.hasChildNodes()&&e.startOffset<t.childNodes.length&&(t=t.childNodes.item(e.startOffset)),e=[t]):e=P.getTextElements(e,!0,!1),e}function c(){var e=M.getCursor(i),r=e&&e.getSelectedRange(),o=[],o=[],s=!0,a={directTextStyling:!0,directParagraphStyling:!0};return r&&(o=u(r),0===o.length&&(o=[r.startContainer,r.endContainer],s=!1),o=M.getFormatting().getAppliedStyles(o)),void 0!==o[0]&&z&&(o[0].styleProperties=R.mergeObjects(o[0].styleProperties,z)),!0===t.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(a.directTextStyling=a.directParagraphStyling=n.isLocalCursorWithinOwnAnnotation()),a.directTextStyling&&(a.directTextStyling=s&&void 0!==e&&e.getSelectionType()===ops.OdtCursor.RangeSelection),{enabledFeatures:a,appliedStyles:o,styleSummary:new gui.StyleSummary(o)}}function d(e,t){var n={};return Object.keys(e).forEach(function(i){var r=e[i](),o=t[i]();r!==o&&(n[i]=o)}),n}function h(){var e,t;t=O.styleSummary;var n=N.value(),i=n.styleSummary,r=O.enabledFeatures,o=n.enabledFeatures;e=d(t.text,i.text),t=d(t.paragraph,i.paragraph),r=!(o.directTextStyling===r.directTextStyling&&o.directParagraphStyling===r.directParagraphStyling),O=n,r&&I.emit(gui.DirectFormattingController.enabledChanged,o),0<Object.keys(e).length&&I.emit(gui.DirectFormattingController.textStylingChanged,e),0<Object.keys(t).length&&I.emit(gui.DirectFormattingController.paragraphStylingChanged,t)}function f(){N.reset(),h()}function p(e){("string"==typeof e?e:e.getMemberId())===i&&N.reset()}function m(){N.reset()}function g(e){var t=M.getCursor(i);e=e.paragraphElement,t&&P.getParagraphElement(t.getNode())===e&&N.reset()}function v(e,t){return t(!e()),!0}function y(t){if(l().directTextStyling){var n=M.getCursorSelection(i),r={"style:text-properties":t};0!==n.length?(t=new ops.OpApplyDirectStyling,t.init({memberid:i,position:n.position,length:n.length,setProperties:r}),e.enqueue([t])):(z=R.mergeObjects(z||{},r),N.reset())}}function b(e,t){var n={};n[e]=t,y(n)}function w(e){e=e.spec(),z&&e.memberid===i&&"SplitParagraph"!==e.optype&&(z=null,N.reset())}function C(e){b("fo:font-weight",e?"bold":"normal")}function x(e){b("fo:font-style",e?"italic":"normal")}function S(e){b("style:text-underline-style",e?"solid":"none")}function A(e){b("style:text-line-through-style",e?"solid":"none")}function _(t){if(l().directParagraphStyling){var n,o=M.getCursor(i).getSelectedRange(),o=P.getParagraphElements(o),s=M.getFormatting(),a=[],u={};o.forEach(function(e){var o,l=M.convertDomPointToCursorStep(e,0,H),c=e.getAttributeNS(odf.Namespaces.textns,"style-name");e=c?u.hasOwnProperty(c)?u[c]:void 0:n,e||(e=r.generateStyleName(),c?(u[c]=e,o=s.createDerivedStyleObject(c,"paragraph",{})):(n=e,o={}),o=t(o),c=new ops.OpAddStyle,c.init({memberid:i,styleName:e.toString(),styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:o}),a.push(c)),c=new ops.OpSetParagraphStyle,c.init({memberid:i,styleName:e.toString(),position:l}),a.push(c)}),e.enqueue(a)}}function E(e){_(function(t){return R.mergeObjects(t,e)})}function $(e){E({"style:paragraph-properties":{"fo:text-align":e}})}function k(e,t){var n,i=M.getFormatting().getDefaultTabStopDistance(),r=t["style:paragraph-properties"];return r&&(r=r["fo:margin-left"],n=P.parseLength(r)),R.mergeObjects(t,{"style:paragraph-properties":{"fo:margin-left":n&&n.unit===i.unit?n.value+e*i.value+n.unit:e*i.value+i.unit}})}function D(e,t){var n=u(e),n=0===n.length?[e.startContainer]:n,n=M.getFormatting().getAppliedStyles(n),i=0<n.length?n[0].styleProperties:void 0,r=M.getFormatting().getAppliedStylesForElement(t).styleProperties;return i&&"text"===i["style:family"]&&i["style:text-properties"]?r&&r["style:text-properties"]?(i=i["style:text-properties"],r=r["style:text-properties"],!Object.keys(i).every(function(e){return i[e]===r[e]})):!0:!1}function T(){}function F(){return!1}function L(){return!1}var O,N,B=this,M=e.getOdtDocument(),R=new core.Utils,P=odf.OdfUtils,I=new core.EventNotifier([gui.DirectFormattingController.enabledChanged,gui.DirectFormattingController.textStylingChanged,gui.DirectFormattingController.paragraphStylingChanged]),U=odf.Namespaces.textns,H=core.StepDirection.NEXT,z=null;this.enabledFeatures=l,this.formatTextSelection=y,this.createCursorStyleOp=function(e,t,n){var r=null,o=z;return n&&(o=(n=N.value().appliedStyles[0])&&n.styleProperties),o&&o["style:text-properties"]&&(r=new ops.OpApplyDirectStyling,r.init({memberid:i,position:e,length:t,setProperties:{"style:text-properties":o["style:text-properties"]}}),z=null,N.reset()),r},this.setBold=C,this.setItalic=x,this.setHasUnderline=S,this.setHasStrikethrough=A,this.setFontSize=function(e){b("fo:font-size",e+"pt")},this.setFontName=function(e){b("style:font-name",e)},this.getAppliedStyles=function(){return N.value().appliedStyles},this.toggleBold=v.bind(B,function(){return a().isBold()},C),this.toggleItalic=v.bind(B,function(){return a().isItalic()},x),this.toggleUnderline=v.bind(B,function(){return a().hasUnderline()},S),this.toggleStrikethrough=v.bind(B,function(){return a().hasStrikeThrough()},A),this.isBold=function(){return a().isBold()},this.isItalic=function(){return a().isItalic()},this.hasUnderline=function(){return a().hasUnderline()},this.hasStrikeThrough=function(){return a().hasStrikeThrough()},this.fontSize=function(){return a().fontSize()},this.fontName=function(){return a().fontName()},this.isAlignedLeft=function(){return a().isAlignedLeft()},this.isAlignedCenter=function(){return a().isAlignedCenter()},this.isAlignedRight=function(){return a().isAlignedRight()},this.isAlignedJustified=function(){return a().isAlignedJustified()},this.alignParagraphLeft=function(){return $("left"),!0},this.alignParagraphCenter=function(){return $("center"),!0},this.alignParagraphRight=function(){return $("right"),!0},this.alignParagraphJustified=function(){return $("justify"),!0},this.indent=function(){return _(k.bind(null,1)),!0},this.outdent=function(){return _(k.bind(null,-1)),!0},this.createParagraphStyleOps=function(e){if(!l().directParagraphStyling)return[];var t,n,o=M.getCursor(i),s=o.getSelectedRange(),a=[];o.hasForwardSelection()?(t=o.getAnchorNode(),n=o.getNode()):(t=o.getNode(),n=o.getAnchorNode()),o=P.getParagraphElement(n),runtime.assert(Boolean(o),"DirectFormattingController: Cursor outside paragraph");var u=o,c=[M.getPositionFilter(),M.createRootFilter(i)];return!1!==M.createStepIterator(s.endContainer,s.endOffset,c,u).nextStep()?a:(n!==t&&(o=P.getParagraphElement(t)),(z||D(s,o))&&(s=(s=N.value().appliedStyles[0])&&s.styleProperties)?((o=o.getAttributeNS(U,"style-name"))&&(s={"style:text-properties":s["style:text-properties"]},s=M.getFormatting().createDerivedStyleObject(o,"paragraph",s)),t=r.generateStyleName(),o=new ops.OpAddStyle,o.init({memberid:i,styleName:t,styleFamily:"paragraph",isAutomaticStyle:!0,setProperties:s}),a.push(o),o=new ops.OpSetParagraphStyle,o.init({memberid:i,styleName:t,position:e}),a.push(o),a):a)},this.subscribe=function(e,t){I.subscribe(e,t)},this.unsubscribe=function(e,t){I.unsubscribe(e,t)},this.destroy=function(e){M.unsubscribe(ops.Document.signalCursorAdded,p),M.unsubscribe(ops.Document.signalCursorRemoved,p),M.unsubscribe(ops.Document.signalCursorMoved,p),M.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,m),M.unsubscribe(ops.OdtDocument.signalParagraphChanged,g),M.unsubscribe(ops.OdtDocument.signalOperationEnd,w),M.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,h),t.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,f),e()},function(){M.subscribe(ops.Document.signalCursorAdded,p),M.subscribe(ops.Document.signalCursorRemoved,p),M.subscribe(ops.Document.signalCursorMoved,p),M.subscribe(ops.OdtDocument.signalParagraphStyleModified,m),M.subscribe(ops.OdtDocument.signalParagraphChanged,g),M.subscribe(ops.OdtDocument.signalOperationEnd,w),M.subscribe(ops.OdtDocument.signalProcessingBatchEnd,h),t.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,f),N=new core.LazyProperty(c),O=N.value(),o||(B.formatTextSelection=T,B.setBold=T,B.setItalic=T,B.setHasUnderline=T,B.setHasStrikethrough=T,B.setFontSize=T,B.setFontName=T,B.toggleBold=L,B.toggleItalic=L,B.toggleUnderline=L,B.toggleStrikethrough=L),s||(B.alignParagraphCenter=F,B.alignParagraphJustified=F,B.alignParagraphLeft=F,B.alignParagraphRight=F,B.createParagraphStyleOps=function(){return[]},B.indent=F,B.outdent=F)}()},gui.DirectFormattingController.enabledChanged="enabled/changed",gui.DirectFormattingController.textStylingChanged="textStyling/changed",gui.DirectFormattingController.paragraphStylingChanged="paragraphStyling/changed",gui.DirectFormattingController.SelectionInfo=function(){},gui.KeyboardHandler=function(){function e(e,n){switch(n||(n=t.None),e){case gui.KeyboardHandler.KeyCode.LeftMeta:case gui.KeyboardHandler.KeyCode.RightMeta:case gui.KeyboardHandler.KeyCode.MetaInMozilla:n|=t.Meta;break;case gui.KeyboardHandler.KeyCode.Ctrl:n|=t.Ctrl;break;case gui.KeyboardHandler.KeyCode.Alt:n|=t.Alt;break;case gui.KeyboardHandler.KeyCode.Shift:n|=t.Shift}return e+":"+n}var t=gui.KeyboardHandler.Modifier,n=null,i={};this.setDefault=function(e){n=e},this.bind=function(t,n,r,o){t=e(t,n),runtime.assert(o||!1===i.hasOwnProperty(t),"tried to overwrite the callback handler of key combo: "+t),i[t]=r},this.unbind=function(t,n){var r=e(t,n);delete i[r]},this.reset=function(){n=null,i={}},this.handleEvent=function(r){var o=r.keyCode,s=t.None;r.metaKey&&(s|=t.Meta),r.ctrlKey&&(s|=t.Ctrl),r.altKey&&(s|=t.Alt),r.shiftKey&&(s|=t.Shift),o=e(o,s),o=i[o],s=!1,o?s=o():null!==n&&(s=n(r)),s&&(r.preventDefault?r.preventDefault():r.returnValue=!1)}},gui.KeyboardHandler.Modifier={None:0,Meta:1,Ctrl:2,Alt:4,CtrlAlt:6,Shift:8,MetaShift:9,CtrlShift:10,AltShift:12},gui.KeyboardHandler.KeyCode={Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Ctrl:17,Alt:18,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Delete:46,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LeftMeta:91,RightMeta:93,MetaInMozilla:224},gui.HyperlinkClickHandler=function(e,t,n){function i(){var t=e();runtime.assert(Boolean(t.classList),"Document container has no classList element"),t.classList.remove("webodf-inactiveLinks")}function r(){var t=e();runtime.assert(Boolean(t.classList),"Document container has no classList element"),t.classList.add("webodf-inactiveLinks")}function o(){d.removeEventListener("focus",r,!1),f.forEach(function(e){t.unbind(e.keyCode,e.modifier),n.unbind(e.keyCode,e.modifier)}),f.length=0}function s(e){if(o(),e!==a.None){switch(d.addEventListener("focus",r,!1),e){case a.Ctrl:f.push({keyCode:l.Ctrl,modifier:a.None});break;case a.Meta:f.push({keyCode:l.LeftMeta,modifier:a.None}),f.push({keyCode:l.RightMeta,modifier:a.None}),f.push({keyCode:l.MetaInMozilla,modifier:a.None})}f.forEach(function(e){t.bind(e.keyCode,e.modifier,i),n.bind(e.keyCode,e.modifier,r)})}}var a=gui.KeyboardHandler.Modifier,l=gui.KeyboardHandler.KeyCode,u=xmldom.XPath,c=odf.OdfUtils,d=runtime.getWindow(),h=a.None,f=[];runtime.assert(null!==d,"Expected to be run in an environment which has a global window, like a browser."),this.handleClick=function(t){var n,i,r=t.target||t.srcElement;if(t.ctrlKey?n=a.Ctrl:t.metaKey&&(n=a.Meta),h===a.None||h===n){e:{for(;null!==r;){if(c.isHyperlink(r))break e;if(c.isParagraph(r))break;r=r.parentNode}r=null}r&&(r=c.getHyperlinkTarget(r),""!==r&&("#"===r[0]?(r=r.substring(1),n=e(),i=u.getODFElementsWithXPath(n,"//text:bookmark-start[@text:name='"+r+"']",odf.Namespaces.lookupNamespaceURI),0===i.length&&(i=u.getODFElementsWithXPath(n,"//text:bookmark[@text:name='"+r+"']",odf.Namespaces.lookupNamespaceURI)),0<i.length&&i[0].scrollIntoView(!0)):/^\s*(javascript|data):/.test(r)?runtime.log("WARN:","potentially malicious URL ignored"):d.open(r),t.preventDefault?t.preventDefault():t.returnValue=!1))}},this.setModifier=function(e){h!==e&&(runtime.assert(e===a.None||e===a.Ctrl||e===a.Meta,"Unsupported KeyboardHandler.Modifier value: "+e),h=e,h!==a.None?r():i(),s(h))},this.getModifier=function(){return h},this.destroy=function(e){r(),o(),e()}},gui.EventManager=function(e){function t(e){function t(e,t,n){var i,r=!1;i="on"+t,e.attachEvent&&(e.attachEvent(i,n),r=!0),!r&&e.addEventListener&&(e.addEventListener(t,n,!1),r=!0),r&&!C[t]||!e.hasOwnProperty(i)||(e[i]=n)}function n(e,t,n){var i="on"+t;e.detachEvent&&e.detachEvent(i,n),e.removeEventListener&&e.removeEventListener(t,n,!1),e[i]===n&&(e[i]=null)}function i(t){if(-1===o.indexOf(t)){if(o.push(t),r.filters.every(function(e){return e(t)}))try{s.emit(e,t)}catch(n){runtime.log("Error occurred while processing "+e+":\n"+n.message+"\n"+n.stack)}runtime.setTimeout(function(){o.splice(o.indexOf(t),1)},0)}}var r=this,o=[],s=new core.EventNotifier([e]);this.filters=[],this.subscribe=function(t){s.subscribe(e,t)},this.unsubscribe=function(t){s.unsubscribe(e,t)},this.destroy=function(){n(w,e,i),n(b,e,i),n(_,e,i)},x[e]&&t(w,e,i),t(b,e,i),t(_,e,i)}function n(e,t,n){function i(t){n(t,r,function(t){t.type=e,o.emit(e,t)})}var r={},o=new core.EventNotifier([e]);this.subscribe=function(t){o.subscribe(e,t)},this.unsubscribe=function(t){o.unsubscribe(e,t)},this.destroy=function(){t.forEach(function(e){E.unsubscribe(e,i)})},function(){t.forEach(function(e){E.subscribe(e,i)})}()}function i(e){runtime.clearTimeout(e),delete $[e]}function r(e,t){var n=runtime.setTimeout(function(){e(),i(n)},t);return $[n]=!0,n}function o(e,t,n){var o=e.touches.length,s=e.touches[0],a=t.timer;"touchmove"===e.type||"touchend"===e.type?a&&i(a):"touchstart"===e.type&&(1!==o?runtime.clearTimeout(a):a=r(function(){n({clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,target:e.target||e.srcElement||null,detail:1})},400)),t.timer=a}function s(e,t,n){var i=e.touches[0],r=e.target||e.srcElement||null,o=t.target;1!==e.touches.length||"touchend"===e.type?o=null:"touchstart"===e.type&&"webodf-draggable"===r.getAttribute("class")?o=r:"touchmove"===e.type&&o&&(e.preventDefault(),e.stopPropagation(),n({clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,target:o,detail:1})),t.target=o}function a(e,t,n){var i=e.target||e.srcElement||null,r=t.dragging;"drag"===e.type?r=!0:"touchend"===e.type&&r&&(r=!1,e=e.changedTouches[0],n({clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,target:i,detail:1})),t.dragging=r}function l(){_.classList.add("webodf-touchEnabled"),E.unsubscribe("touchstart",l)}function u(e){var t=e.scrollX,n=e.scrollY;this.restore=function(){e.scrollX===t&&e.scrollY===n||e.scrollTo(t,n)}}function c(e){var t=e.scrollTop,n=e.scrollLeft;this.restore=function(){(e.scrollTop!==t||e.scrollLeft!==n)&&(e.scrollTop=t,e.scrollLeft=n)}}function d(e,n){var i=A[e]||S[e]||null;return!i&&n&&(i=A[e]=new t(e)),i}function h(e,t){d(e,!0).subscribe(t)}function f(e,t){var n=d(e,!1);n&&n.unsubscribe(t)}function p(){return e.getDOMDocument().activeElement===b}function m(){p()&&b.blur(),b.setAttribute("disabled","true")}function g(){b.removeAttribute("disabled")}function v(e){for(var t=[];e;)(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)&&t.push(new c(e)),e=e.parentNode;return t.push(new u(w)),t}function y(){var e;p()||(e=v(b),g(),b.focus(),e.forEach(function(e){e.restore()}))}var b,w=runtime.getWindow(),C={beforecut:!0,beforepaste:!0,longpress:!0,drag:!0,dragstop:!0},x={mousedown:!0,mouseup:!0,focus:!0},S={},A={},_=e.getCanvas().getElement(),E=this,$={};this.addFilter=function(e,t){d(e,!0).filters.push(t)},this.removeFilter=function(e,t){var n=d(e,!0),i=n.filters.indexOf(t);-1!==i&&n.filters.splice(i,1)},this.subscribe=h,this.unsubscribe=f,this.hasFocus=p,this.focus=y,this.getEventTrap=function(){return b},this.setEditing=function(e){var t=p();t&&b.blur(),e?b.removeAttribute("readOnly"):b.setAttribute("readOnly","true"),t&&y()},this.destroy=function(e){f("touchstart",l),Object.keys($).forEach(function(e){i(parseInt(e,10))}),$.length=0,Object.keys(S).forEach(function(e){S[e].destroy()}),S={},f("mousedown",m),f("mouseup",g),f("contextmenu",g),Object.keys(A).forEach(function(e){A[e].destroy()}),A={},b.parentNode.removeChild(b),e()},function(){var t=e.getOdfCanvas().getSizer(),i=t.ownerDocument;runtime.assert(Boolean(w),"EventManager requires a window object to operate correctly"),b=i.createElement("textarea"),b.id="eventTrap",b.setAttribute("tabindex","-1"),b.setAttribute("readOnly","true"),b.setAttribute("rows","1"),t.appendChild(b),h("mousedown",m),h("mouseup",g),h("contextmenu",g),S.longpress=new n("longpress",["touchstart","touchmove","touchend"],o),S.drag=new n("drag",["touchstart","touchmove","touchend"],s),S.dragstop=new n("dragstop",["drag","touchend"],a),h("touchstart",l)}()},gui.IOSSafariSupport=function(e){function t(){n.innerHeight!==n.outerHeight&&(i.style.display="none",runtime.requestAnimationFrame(function(){i.style.display="block"}))}var n=runtime.getWindow(),i=e.getEventTrap();this.destroy=function(n){e.unsubscribe("focus",t),i.removeAttribute("autocapitalize"),i.style.WebkitTransform="",n()},e.subscribe("focus",t),i.setAttribute("autocapitalize","off"),i.style.WebkitTransform="translateX(-10000px)"},gui.HyperlinkController=function(e,t,n,i){function r(){var e=!0;!0===t.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(e=n.isLocalCursorWithinOwnAnnotation()),e!==u&&(u=e,l.emit(gui.HyperlinkController.enabledChanged,u))}function o(e){e.getMemberId()===i&&r()}var s=odf.OdfUtils,a=e.getOdtDocument(),l=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),u=!1;this.isEnabled=function(){return u},this.subscribe=function(e,t){l.subscribe(e,t)},this.unsubscribe=function(e,t){l.unsubscribe(e,t)},this.addHyperlink=function(t,n){if(u){var r=a.getCursorSelection(i),o=new ops.OpApplyHyperlink,s=[];(0===r.length||n)&&(n=n||t,o=new ops.OpInsertText,o.init({memberid:i,position:r.position,text:n}),r.length=n.length,s.push(o)),o=new ops.OpApplyHyperlink,o.init({memberid:i,position:r.position,length:r.length,hyperlink:t}),s.push(o),e.enqueue(s);
}},this.removeHyperlinks=function(){if(u){var t,n,r=a.createPositionIterator(a.getRootNode()),o=a.getCursor(i).getSelectedRange(),l=s.getHyperlinkElements(o),c=o.collapsed&&1===l.length,d=a.getDOMDocument().createRange(),h=[];0!==l.length&&(l.forEach(function(e){d.selectNodeContents(e),t=a.convertDomToCursorRange({anchorNode:d.startContainer,anchorOffset:d.startOffset,focusNode:d.endContainer,focusOffset:d.endOffset}),n=new ops.OpRemoveHyperlink,n.init({memberid:i,position:t.position,length:t.length}),h.push(n)}),c||(c=l[0],-1===o.comparePoint(c,0)&&(d.setStart(c,0),d.setEnd(o.startContainer,o.startOffset),t=a.convertDomToCursorRange({anchorNode:d.startContainer,anchorOffset:d.startOffset,focusNode:d.endContainer,focusOffset:d.endOffset}),0<t.length&&(n=new ops.OpApplyHyperlink,n.init({memberid:i,position:t.position,length:t.length,hyperlink:s.getHyperlinkTarget(c)}),h.push(n))),l=l[l.length-1],r.moveToEndOfNode(l),r=r.unfilteredDomOffset(),1===o.comparePoint(l,r)&&(d.setStart(o.endContainer,o.endOffset),d.setEnd(l,r),t=a.convertDomToCursorRange({anchorNode:d.startContainer,anchorOffset:d.startOffset,focusNode:d.endContainer,focusOffset:d.endOffset}),0<t.length&&(n=new ops.OpApplyHyperlink,n.init({memberid:i,position:t.position,length:t.length,hyperlink:s.getHyperlinkTarget(l)}),h.push(n)))),e.enqueue(h),d.detach())}},this.destroy=function(e){a.unsubscribe(ops.Document.signalCursorMoved,o),t.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,r),e()},a.subscribe(ops.Document.signalCursorMoved,o),t.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,r),r()},gui.HyperlinkController.enabledChanged="enabled/changed",gui.ImageController=function(e,t,n,i,r){function o(){var e=!0;!0===t.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)&&(e=n.isLocalCursorWithinOwnAnnotation()),e!==f&&(f=e,h.emit(gui.ImageController.enabledChanged,f))}function s(e){e.getMemberId()===i&&o()}var a={"image/gif":".gif","image/jpeg":".jpg","image/png":".png"},l=odf.Namespaces.textns,u=e.getOdtDocument(),c=odf.OdfUtils,d=u.getFormatting(),h=new core.EventNotifier([gui.HyperlinkController.enabledChanged]),f=!1;this.isEnabled=function(){return f},this.subscribe=function(e,t){h.subscribe(e,t)},this.unsubscribe=function(e,t){h.unsubscribe(e,t)},this.insertImage=function(t,n,o,s){if(f){var h=new core.CSSUnits;if(runtime.assert(o>0&&s>0,"Both width and height of the image should be greater than 0px."),s={width:o,height:s},o=c.getParagraphElement(u.getCursor(i).getNode()).getAttributeNS(l,"style-name")){o=d.getContentSize(o,"paragraph");var p=1,m=1;s.width>o.width&&(p=o.width/s.width),s.height>o.height&&(m=o.height/s.height),o=Math.min(p,m),s={width:s.width*o,height:s.height*o}}o=h.convert(s.width,"px","cm")+"cm",h=h.convert(s.height,"px","cm")+"cm",m=u.getOdfCanvas().odfContainer().rootElement.styles,s=t.toLowerCase();var g,p=a.hasOwnProperty(s)?a[s]:null;s=[],runtime.assert(null!==p,"Image type is not supported: "+t),p="Pictures/"+r.generateImageName()+p,g=new ops.OpSetBlob,g.init({memberid:i,filename:p,mimetype:t,content:n}),s.push(g),d.getStyleElement("Graphics","graphic",[m])||(t=new ops.OpAddStyle,t.init({memberid:i,styleName:"Graphics",styleFamily:"graphic",isAutomaticStyle:!1,setProperties:{"style:graphic-properties":{"text:anchor-type":"paragraph","svg:x":"0cm","svg:y":"0cm","style:wrap":"dynamic","style:number-wrapped-paragraphs":"no-limit","style:wrap-contour":"false","style:vertical-pos":"top","style:vertical-rel":"paragraph","style:horizontal-pos":"center","style:horizontal-rel":"paragraph"}}}),s.push(t)),t=r.generateStyleName(),n=new ops.OpAddStyle,n.init({memberid:i,styleName:t,styleFamily:"graphic",isAutomaticStyle:!0,setProperties:{"style:parent-style-name":"Graphics","style:graphic-properties":{"style:vertical-pos":"top","style:vertical-rel":"baseline","style:horizontal-pos":"center","style:horizontal-rel":"paragraph","fo:background-color":"transparent","style:background-transparency":"100%","style:shadow":"none","style:mirror":"none","fo:clip":"rect(0cm, 0cm, 0cm, 0cm)","draw:luminance":"0%","draw:contrast":"0%","draw:red":"0%","draw:green":"0%","draw:blue":"0%","draw:gamma":"100%","draw:color-inversion":"false","draw:image-opacity":"100%","draw:color-mode":"standard"}}}),s.push(n),g=new ops.OpInsertImage,g.init({memberid:i,position:u.getCursorPosition(i),filename:p,frameWidth:o,frameHeight:h,frameStyleName:t,frameName:r.generateFrameName()}),s.push(g),e.enqueue(s)}},this.destroy=function(e){u.unsubscribe(ops.Document.signalCursorMoved,s),t.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,o),e()},u.subscribe(ops.Document.signalCursorMoved,s),t.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,o),o()},gui.ImageController.enabledChanged="enabled/changed",gui.ImageSelector=function(e){function t(){var t=e.getSizer(),n=r.createElement("div");return n.id="imageSelector",n.style.borderWidth="1px",t.appendChild(n),i.forEach(function(e){var t=r.createElement("div");t.className=e,n.appendChild(t)}),n}var n=odf.Namespaces.svgns,i="topLeft topRight bottomRight bottomLeft topMiddle rightMiddle bottomMiddle leftMiddle".split(" "),r=e.getElement().ownerDocument,o=!1;this.select=function(i){var s,a,l=r.getElementById("imageSelector");l||(l=t()),o=!0,s=l.parentNode,a=i.getBoundingClientRect();var u=s.getBoundingClientRect(),c=e.getZoomLevel();s=(a.left-u.left)/c-1,a=(a.top-u.top)/c-1,l.style.display="block",l.style.left=s+"px",l.style.top=a+"px",l.style.width=i.getAttributeNS(n,"width"),l.style.height=i.getAttributeNS(n,"height")},this.clearSelection=function(){var e;o&&(e=r.getElementById("imageSelector"))&&(e.style.display="none"),o=!1},this.isSelectorElement=function(e){var t=r.getElementById("imageSelector");return t?e===t||e.parentNode===t:!1}},function(){function e(e){function t(e){return o=e.which&&String.fromCharCode(e.which)===r,r=void 0,!1===o}function n(){o=!1}function i(e){r=e.data,o=!1}var r,o=!1;this.destroy=function(r){e.unsubscribe("textInput",n),e.unsubscribe("compositionend",i),e.removeFilter("keypress",t),r()},e.subscribe("textInput",n),e.subscribe("compositionend",i),e.addFilter("keypress",t)}gui.InputMethodEditor=function(t,n){function i(e){g&&(e?g.getNode().setAttributeNS("urn:webodf:names:cursor","composing","true"):(g.getNode().removeAttributeNS("urn:webodf:names:cursor","composing"),d.textContent=""))}function r(){b&&(b=!1,i(!1),C.emit(gui.InputMethodEditor.signalCompositionEnd,{data:w}),w="")}function o(){S||(S=!0,r(),g&&g.getSelectedRange().collapsed?v.value="":v.value=p.writeToString(g.getSelectedRange().cloneContents()),v.setSelectionRange(0,v.value.length),S=!1)}function s(){n.hasFocus()&&h.trigger()}function a(){f=void 0,h.cancel(),i(!0),b||C.emit(gui.InputMethodEditor.signalCompositionStart,{data:""})}function l(e){e=f=e.data,b=!0,w+=e,h.trigger()}function u(e){e.data!==f&&(e=e.data,b=!0,w+=e,h.trigger()),f=void 0}function c(){d.textContent=v.value}var d,h,f,p,m,g=null,v=n.getEventTrap(),y=v.ownerDocument,b=!1,w="",C=new core.EventNotifier([gui.InputMethodEditor.signalCompositionStart,gui.InputMethodEditor.signalCompositionEnd]),x=[],S=!1;this.subscribe=C.subscribe,this.unsubscribe=C.unsubscribe,this.registerCursor=function(e){e.getMemberId()===t&&(g=e,g.getNode().appendChild(d),e.subscribe(ops.OdtCursor.signalCursorUpdated,s),n.subscribe("input",c),n.subscribe("compositionupdate",c))},this.removeCursor=function(e){g&&e===t&&(g.getNode().removeChild(d),g.unsubscribe(ops.OdtCursor.signalCursorUpdated,s),n.unsubscribe("input",c),n.unsubscribe("compositionupdate",c),g=null)},this.destroy=function(e){n.unsubscribe("compositionstart",a),n.unsubscribe("compositionend",l),n.unsubscribe("textInput",u),n.unsubscribe("keypress",r),n.unsubscribe("focus",o),core.Async.destroyAll(m,e)},function(){p=new odf.TextSerializer,p.filter=new odf.OdfNodeFilter,n.subscribe("compositionstart",a),n.subscribe("compositionend",l),n.subscribe("textInput",u),n.subscribe("keypress",r),n.subscribe("focus",o),x.push(new e(n)),m=x.map(function(e){return e.destroy}),d=y.createElement("span"),d.setAttribute("id","composer"),h=core.Task.createTimeoutTask(o,1),m.push(h.destroy)}()},gui.InputMethodEditor.signalCompositionStart="input/compositionstart",gui.InputMethodEditor.signalCompositionEnd="input/compositionend"}(),gui.MetadataController=function(e,t){function n(e){o.emit(gui.MetadataController.signalMetadataChanged,e)}function i(e){var t=-1===s.indexOf(e);return t||runtime.log("Setting "+e+" is restricted."),t}var r=e.getOdtDocument(),o=new core.EventNotifier([gui.MetadataController.signalMetadataChanged]),s=["dc:creator","dc:date","meta:editing-cycles","meta:editing-duration","meta:document-statistic"];this.setMetadata=function(n,r){var o,s={},a="";n&&Object.keys(n).filter(i).forEach(function(e){s[e]=n[e]}),r&&(a=r.filter(i).join(",")),(0<a.length||0<Object.keys(s).length)&&(o=new ops.OpUpdateMetadata,o.init({memberid:t,setProperties:s,removedProperties:0<a.length?{attributes:a}:null}),e.enqueue([o]))},this.getMetadata=function(e){var t;return runtime.assert("string"==typeof e,"Property must be a string"),t=e.split(":"),runtime.assert(2===t.length,"Property must be a namespace-prefixed string"),e=odf.Namespaces.lookupNamespaceURI(t[0]),runtime.assert(Boolean(e),"Prefix must be for an ODF namespace."),r.getOdfCanvas().odfContainer().getMetadata(e,t[1])},this.subscribe=function(e,t){o.subscribe(e,t)},this.unsubscribe=function(e,t){o.unsubscribe(e,t)},this.destroy=function(e){r.unsubscribe(ops.OdtDocument.signalMetadataUpdated,n),e()},r.subscribe(ops.OdtDocument.signalMetadataUpdated,n)},gui.MetadataController.signalMetadataChanged="metadata/changed",gui.PasteController=function(e,t,n,i){function r(){a=!0===t.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)?n.isLocalCursorWithinOwnAnnotation():!0}function o(e){e.getMemberId()===i&&r()}var s=e.getOdtDocument(),a=!1,l=odf.Namespaces.textns,u=core.StepDirection.NEXT,c=odf.OdfUtils;this.isEnabled=function(){return a},this.paste=function(t){if(a){var n=s.getCursorPosition(i),r=s.getCursor(i).getNode(),r=c.getParagraphElement(r),o=r.getAttributeNS(l,"style-name")||"",d=n,h=[],f=s.convertDomPointToCursorStep(r,0,u);t.replace(/\r/g,"").split("\n").forEach(function(e){var t=new ops.OpInsertText,n=new ops.OpSplitParagraph;t.init({memberid:i,position:d,text:e,moveCursor:!0}),h.push(t),d+=e.length,n.init({memberid:i,position:d,paragraphStyleName:o,sourceParagraphPosition:f,moveCursor:!0}),h.push(n),f=d+=1}),h.pop(),e.enqueue(h)}},this.destroy=function(e){s.unsubscribe(ops.Document.signalCursorMoved,o),t.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,r),e()},s.subscribe(ops.Document.signalCursorMoved,o),t.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,r),r()},gui.ClosestXOffsetScanner=function(e){function t(t){return null!==t&&void 0!==i?Math.abs(t-e)>i:!1}function n(n){null!==n&&!1===t(n)&&(i=Math.abs(n-e))}var i,r=this,o=gui.StepInfo.VisualDirection.LEFT_TO_RIGHT;this.token=void 0,this.process=function(e,i,s){var a,l;return e.visualDirection===o?(a=i&&i.right,l=s&&s.left):(a=i&&i.left,l=s&&s.right),t(a)||t(l)?!0:((i||s)&&(n(a),n(l),r.token=e.token),!1)}},gui.LineBoundaryScanner=function(){var e=this,t=null;this.token=void 0,this.process=function(n,i,r){var o;if(o=r)if(t){var s=t;o=Math.min(s.bottom-s.top,r.bottom-r.top);var a=Math.max(s.top,r.top),s=Math.min(s.bottom,r.bottom)-a;o=.4>=(o>0?s/o:0)}else o=!1;return!i||r&&!o||(e.token=n.token),o?!0:(t=(n=t)&&i?{left:Math.min(n.left,i.left),right:Math.max(n.right,i.right),top:Math.min(n.top,i.top),bottom:Math.min(n.bottom,i.bottom)}:n||i,!1)}},gui.ParagraphBoundaryScanner=function(){var e,t=this,n=!1,i=odf.OdfUtils;this.token=void 0,this.process=function(r){var o=i.getParagraphElement(r.container());return n||(e=o,n=!0),e!==o?!0:(t.token=r.token,!1)}},odf.WordBoundaryFilter=function(e,t){function n(t,n,i){for(var r,o=null,s=e.getRootNode();t!==s&&null!==t&&null===o;)r=0>n?t.previousSibling:t.nextSibling,i(r)===NodeFilter.FILTER_ACCEPT&&(o=r),t=t.parentNode;return o}function i(e,t){var n;return null===e?f.NO_NEIGHBOUR:s.isCharacterElement(e)?f.SPACE_CHAR:e.nodeType===r||s.isTextSpan(e)||s.isHyperlink(e)?(n=e.textContent.charAt(t()),l.test(n)?f.SPACE_CHAR:a.test(n)?f.PUNCTUATION_CHAR:f.WORD_CHAR):f.OTHER}var r=Node.TEXT_NODE,o=Node.ELEMENT_NODE,s=odf.OdfUtils,a=/[!-#%-*,-\/:-;?-@\[-\]_{}\u00a1\u00ab\u00b7\u00bb\u00bf;\u00b7\u055a-\u055f\u0589-\u058a\u05be\u05c0\u05c3\u05c6\u05f3-\u05f4\u0609-\u060a\u060c-\u060d\u061b\u061e-\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0964-\u0965\u0970\u0df4\u0e4f\u0e5a-\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u104a-\u104f\u10fb\u1361-\u1368\u166d-\u166e\u169b-\u169c\u16eb-\u16ed\u1735-\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944-\u1945\u19de-\u19df\u1a1e-\u1a1f\u1b5a-\u1b60\u1c3b-\u1c3f\u1c7e-\u1c7f\u2000-\u206e\u207d-\u207e\u208d-\u208e\u3008-\u3009\u2768-\u2775\u27c5-\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc-\u29fd\u2cf9-\u2cfc\u2cfe-\u2cff\u2e00-\u2e7e\u3000-\u303f\u30a0\u30fb\ua60d-\ua60f\ua673\ua67e\ua874-\ua877\ua8ce-\ua8cf\ua92e-\ua92f\ua95f\uaa5c-\uaa5f\ufd3e-\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a-\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a-\uff1b\uff1f-\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]|\ud800[\udd00-\udd01\udf9f\udfd0]|\ud802[\udd1f\udd3f\ude50-\ude58]|\ud809[\udc00-\udc7e]/,l=/\s/,u=core.PositionFilter.FilterResult.FILTER_ACCEPT,c=core.PositionFilter.FilterResult.FILTER_REJECT,d=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,h=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,f={NO_NEIGHBOUR:0,SPACE_CHAR:1,PUNCTUATION_CHAR:2,WORD_CHAR:3,OTHER:4};this.acceptPosition=function(e){var r=e.container(),s=e.leftNode(),a=e.rightNode(),l=e.unfilteredDomOffset,p=function(){return e.unfilteredDomOffset()-1};return r.nodeType===o&&(null===a&&(a=n(r,1,e.getNodeFilter())),null===s&&(s=n(r,-1,e.getNodeFilter()))),r!==a&&(l=function(){return 0}),r!==s&&null!==s&&(p=function(){return s.textContent.length-1}),r=i(s,p),a=i(a,l),r===f.WORD_CHAR&&a===f.WORD_CHAR||r===f.PUNCTUATION_CHAR&&a===f.PUNCTUATION_CHAR||t===d&&r!==f.NO_NEIGHBOUR&&a===f.SPACE_CHAR||t===h&&r===f.SPACE_CHAR&&a!==f.NO_NEIGHBOUR?c:u}},odf.WordBoundaryFilter.IncludeWhitespace={None:0,TRAILING:1,LEADING:2},gui.SelectionController=function(e,t){function n(e){var n=e.spec();(e.isEdit||n.memberid===t)&&(g=void 0,v.cancel())}function i(){var e=y.getCursor(t).getNode();return y.createStepIterator(e,0,[C,S],y.getRootElement(e))}function r(e,t,n){n=new odf.WordBoundaryFilter(y,n);var i=y.getRootElement(e)||y.getRootNode(),r=y.createRootFilter(i);return y.createStepIterator(e,t,[C,r,n],i)}function o(e,t){return t?{anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset}:{anchorNode:e.endContainer,anchorOffset:e.endOffset,focusNode:e.startContainer,focusOffset:e.startOffset}}function s(e,n,i){var r=new ops.OpMoveCursor;return r.init({memberid:t,position:e,length:n||0,selectionType:i}),r}function a(n,i,r){var a;a=y.getCursor(t),a=o(a.getSelectedRange(),a.hasForwardSelection()),a.focusNode=n,a.focusOffset=i,r||(a.anchorNode=a.focusNode,a.anchorOffset=a.focusOffset),n=y.convertDomToCursorRange(a),e.enqueue([s(n.position,n.length)])}function l(e){var t;t=r(e.startContainer,e.startOffset,_),t.roundToPreviousStep()&&e.setStart(t.container(),t.offset()),t=r(e.endContainer,e.endOffset,E),t.roundToNextStep()&&e.setEnd(t.container(),t.offset())}function u(e){var t=w.getParagraphElements(e),n=t[0],t=t[t.length-1];n&&e.setStart(n,0),t&&(w.isParagraph(e.endContainer)&&0===e.endOffset?e.setEndBefore(t):e.setEnd(t,t.childNodes.length))}function c(e,t,n,i){var r,o;i?(r=n.startContainer,o=n.startOffset):(r=n.endContainer,o=n.endOffset),b.containsNode(e,r)||(o=0>b.comparePoints(e,0,r,o)?0:e.childNodes.length,r=e),e=y.createStepIterator(r,o,t,w.getParagraphElement(r)||e),e.roundToClosestStep()||runtime.assert(!1,"No step found in requested range"),i?n.setStart(e.container(),e.offset()):n.setEnd(e.container(),e.offset())}function d(e,t){var n=i();n.advanceStep(e)&&a(n.container(),n.offset(),t)}function h(e,t){var n,r=g,o=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];void 0===r&&A&&(r=A()),isNaN(r)||(n=i(),x.moveToFilteredStep(n,e,o)&&n.advanceStep(e)&&(o=[new gui.ClosestXOffsetScanner(r),new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner],x.moveToFilteredStep(n,e,o)&&(a(n.container(),n.offset(),t),g=r,v.restart())))}function f(e,t){var n=i(),r=[new gui.LineBoundaryScanner,new gui.ParagraphBoundaryScanner];x.moveToFilteredStep(n,e,r)&&a(n.container(),n.offset(),t)}function p(e,n){var i=y.getCursor(t),i=o(i.getSelectedRange(),i.hasForwardSelection()),i=r(i.focusNode,i.focusOffset,_);i.advanceStep(e)&&a(i.container(),i.offset(),n)}function m(e,n,i){var r=!1,s=y.getCursor(t),s=o(s.getSelectedRange(),s.hasForwardSelection()),r=y.getRootElement(s.focusNode);runtime.assert(Boolean(r),"SelectionController: Cursor outside root"),s=y.createStepIterator(s.focusNode,s.focusOffset,[C,S],r),s.roundToClosestStep(),s.advanceStep(e)&&(i=i(s.container()))&&(e===$?(s.setPosition(i,0),r=s.roundToNextStep()):(s.setPosition(i,i.childNodes.length),r=s.roundToPreviousStep()),r&&a(s.container(),s.offset(),n))}var g,v,y=e.getOdtDocument(),b=core.DomUtils,w=odf.OdfUtils,C=y.getPositionFilter(),x=new gui.GuiStepUtils,S=y.createRootFilter(t),A=null,_=odf.WordBoundaryFilter.IncludeWhitespace.TRAILING,E=odf.WordBoundaryFilter.IncludeWhitespace.LEADING,$=core.StepDirection.PREVIOUS,k=core.StepDirection.NEXT;this.selectionToRange=function(e){var t=0<=b.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),n=e.focusNode.ownerDocument.createRange();return t?(n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset)):(n.setStart(e.focusNode,e.focusOffset),n.setEnd(e.anchorNode,e.anchorOffset)),{range:n,hasForwardSelection:t}},this.rangeToSelection=o,this.selectImage=function(t){var n,i=y.getRootElement(t),r=y.createRootFilter(i),i=y.createStepIterator(t,0,[r,y.getPositionFilter()],i);i.roundToPreviousStep()||runtime.assert(!1,"No walkable position before frame"),r=i.container(),n=i.offset(),i.setPosition(t,t.childNodes.length),i.roundToNextStep()||runtime.assert(!1,"No walkable position after frame"),t=y.convertDomToCursorRange({anchorNode:r,anchorOffset:n,focusNode:i.container(),focusOffset:i.offset()}),t=s(t.position,t.length,ops.OdtCursor.RegionSelection),e.enqueue([t])},this.expandToWordBoundaries=l,this.expandToParagraphBoundaries=u,this.selectRange=function(n,i,r){var a,d=y.getOdfCanvas().getElement(),h=[C];a=b.containsNode(d,n.startContainer),d=b.containsNode(d,n.endContainer),(a||d)&&(a&&d&&(2===r?l(n):r>=3&&u(n)),(r=i?y.getRootElement(n.startContainer):y.getRootElement(n.endContainer))||(r=y.getRootNode()),h.push(y.createRootFilter(r)),c(r,h,n,!0),c(r,h,n,!1),n=o(n,i),i=y.convertDomToCursorRange(n),n=y.getCursorSelection(t),(i.position!==n.position||i.length!==n.length)&&(n=s(i.position,i.length,ops.OdtCursor.RangeSelection),e.enqueue([n])))},this.moveCursorToLeft=function(){return d($,!1),!0},this.moveCursorToRight=function(){return d(k,!1),!0},this.extendSelectionToLeft=function(){return d($,!0),!0},this.extendSelectionToRight=function(){return d(k,!0),!0},this.setCaretXPositionLocator=function(e){A=e},this.moveCursorUp=function(){return h($,!1),!0},this.moveCursorDown=function(){return h(k,!1),!0},this.extendSelectionUp=function(){return h($,!0),!0},this.extendSelectionDown=function(){return h(k,!0),!0},this.moveCursorBeforeWord=function(){return p($,!1),!0},this.moveCursorPastWord=function(){return p(k,!1),!0},this.extendSelectionBeforeWord=function(){return p($,!0),!0},this.extendSelectionPastWord=function(){return p(k,!0),!0},this.moveCursorToLineStart=function(){return f($,!1),!0},this.moveCursorToLineEnd=function(){return f(k,!1),!0},this.extendSelectionToLineStart=function(){return f($,!0),!0},this.extendSelectionToLineEnd=function(){return f(k,!0),!0},this.extendSelectionToParagraphStart=function(){return m($,!0,w.getParagraphElement),!0},this.extendSelectionToParagraphEnd=function(){return m(k,!0,w.getParagraphElement),!0},this.moveCursorToParagraphStart=function(){return m($,!1,w.getParagraphElement),!0},this.moveCursorToParagraphEnd=function(){return m(k,!1,w.getParagraphElement),!0},this.moveCursorToDocumentStart=function(){return m($,!1,y.getRootElement),!0},this.moveCursorToDocumentEnd=function(){return m(k,!1,y.getRootElement),!0},this.extendSelectionToDocumentStart=function(){return m($,!0,y.getRootElement),!0},this.extendSelectionToDocumentEnd=function(){return m(k,!0,y.getRootElement),!0},this.extendSelectionToEntireDocument=function(){var n,i,r,o=y.getCursor(t),o=y.getRootElement(o.getNode());return runtime.assert(Boolean(o),"SelectionController: Cursor outside root"),r=y.createStepIterator(o,0,[C,S],o),r.roundToClosestStep(),n=r.container(),i=r.offset(),r.setPosition(o,o.childNodes.length),r.roundToClosestStep(),o=y.convertDomToCursorRange({anchorNode:n,anchorOffset:i,focusNode:r.container(),focusOffset:r.offset()}),e.enqueue([s(o.position,o.length)]),!0},this.destroy=function(e){y.unsubscribe(ops.OdtDocument.signalOperationStart,n),core.Async.destroyAll([v.destroy],e)},function(){v=core.Task.createTimeoutTask(function(){g=void 0},2e3),y.subscribe(ops.OdtDocument.signalOperationStart,n)}()},gui.TextController=function(e,t,n,i,r,o){function s(){m=!0===t.getState(gui.CommonConstraints.EDIT.REVIEW_MODE)?n.isLocalCursorWithinOwnAnnotation():!0}function a(e){e.getMemberId()===i&&s()}function l(e,t,n){var i=[h.getPositionFilter()];return n&&i.push(h.createRootFilter(e.startContainer)),n=h.createStepIterator(e.startContainer,e.startOffset,i,t),n.roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range start"),t=h.convertDomPointToCursorStep(n.container(),n.offset()),e.collapsed?e=t:(n.setPosition(e.endContainer,e.endOffset),n.roundToClosestStep()||runtime.assert(!1,"No walkable step found in paragraph element at range end"),e=h.convertDomPointToCursorStep(n.container(),n.offset())),{position:t,length:e-t}}function u(e){var t,n,r,o=f.getParagraphElements(e),s=e.cloneRange(),a=[];return t=o[0],1<o.length&&(f.hasNoODFContent(t)&&(t=o[o.length-1]),n=t.getAttributeNS(odf.Namespaces.textns,"style-name")||""),o.forEach(function(t,o){var u,c;s.setStart(t,0),s.collapse(!0),u=l(s,t,!1).position,o>0&&(c=new ops.OpMergeParagraph,c.init({memberid:i,paragraphStyleName:n,destinationStartPosition:r,sourceStartPosition:u,moveCursor:1===o}),a.unshift(c)),r=u,s.selectNodeContents(t),(u=p.rangeIntersection(s,e))&&(u=l(u,t,!0),0<u.length&&(c=new ops.OpRemoveText,c.init({memberid:i,position:u.position,length:u.length}),a.unshift(c)))}),a}function c(e){return 0>e.length&&(e.position+=e.length,e.length=-e.length),e}function d(t){if(!m)return!1;var n,r,o=h.getCursor(i).getSelectedRange().cloneRange(),s=c(h.getCursorSelection(i));if(0===s.length){s=void 0,n=h.getCursor(i).getNode(),r=h.getRootElement(n);var a=[h.getPositionFilter(),h.createRootFilter(r)];r=h.createStepIterator(n,0,a,r),r.roundToClosestStep()&&(t?r.nextStep():r.previousStep())&&(s=c(h.convertDomToCursorRange({anchorNode:n,anchorOffset:0,focusNode:r.container(),focusOffset:r.offset()})),t?(o.setStart(n,0),o.setEnd(r.container(),r.offset())):(o.setStart(r.container(),r.offset()),o.setEnd(n,0)))}return s&&e.enqueue(u(o)),void 0!==s}var h=e.getOdtDocument(),f=odf.OdfUtils,p=core.DomUtils,m=!1,g=odf.Namespaces.textns,v=core.StepDirection.NEXT;this.isEnabled=function(){return m},this.enqueueParagraphSplittingOps=function(){if(!m)return!1;var t=h.getCursor(i),n=t.getSelectedRange(),r=c(h.getCursorSelection(i)),s=[],t=f.getParagraphElement(t.getNode()),a=t.getAttributeNS(g,"style-name")||"";return 0<r.length&&(s=s.concat(u(n))),n=new ops.OpSplitParagraph,n.init({memberid:i,position:r.position,paragraphStyleName:a,sourceParagraphPosition:h.convertDomPointToCursorStep(t,0,v),moveCursor:!0}),s.push(n),o&&(r=o(r.position+1),s=s.concat(r)),e.enqueue(s),!0},this.removeTextByBackspaceKey=function(){return d(!1)},this.removeTextByDeleteKey=function(){return d(!0)},this.removeCurrentSelection=function(){if(!m)return!1;var t=h.getCursor(i).getSelectedRange();return e.enqueue(u(t)),!0},this.insertText=function(t){if(m){var n=h.getCursor(i).getSelectedRange(),o=c(h.getCursorSelection(i)),s=[],a=!1;0<o.length&&(s=s.concat(u(n)),a=!0),n=new ops.OpInsertText,n.init({memberid:i,position:o.position,text:t,moveCursor:!0}),s.push(n),r&&(t=r(o.position,t.length,a))&&s.push(t),e.enqueue(s)}},this.destroy=function(e){h.unsubscribe(ops.Document.signalCursorMoved,a),t.unsubscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,s),e()},h.subscribe(ops.Document.signalCursorMoved,a),t.subscribe(gui.CommonConstraints.EDIT.REVIEW_MODE,s),s()},gui.UndoManager=function(){},gui.UndoManager.prototype.subscribe=function(e,t){},gui.UndoManager.prototype.unsubscribe=function(e,t){},gui.UndoManager.prototype.setDocument=function(e){},gui.UndoManager.prototype.setInitialState=function(){},gui.UndoManager.prototype.initialize=function(){},gui.UndoManager.prototype.purgeInitialState=function(){},gui.UndoManager.prototype.setPlaybackFunction=function(e){},gui.UndoManager.prototype.hasUndoStates=function(){},gui.UndoManager.prototype.hasRedoStates=function(){},gui.UndoManager.prototype.moveForward=function(e){},gui.UndoManager.prototype.moveBackward=function(e){},gui.UndoManager.prototype.onOperationExecuted=function(e){},gui.UndoManager.prototype.isDocumentModified=function(){},gui.UndoManager.prototype.setDocumentModified=function(e){},gui.UndoManager.signalUndoStackChanged="undoStackChanged",gui.UndoManager.signalUndoStateCreated="undoStateCreated",gui.UndoManager.signalUndoStateModified="undoStateModified",gui.UndoManager.signalDocumentModifiedChanged="documentModifiedChanged",gui.SessionControllerOptions=function(){this.annotationsEnabled=this.directParagraphStylingEnabled=this.directTextStylingEnabled=!1},function(){var e=core.PositionFilter.FilterResult.FILTER_ACCEPT;gui.SessionController=function(t,n,i,r){function o(e,t){var n=M.getDOMDocument(),i=null;return n.caretRangeFromPoint?(n=n.caretRangeFromPoint(e,t),i={container:n.startContainer,offset:n.startOffset}):n.caretPositionFromPoint&&(n=n.caretPositionFromPoint(e,t))&&n.offsetNode&&(i={container:n.offsetNode,offset:n.offset}),i}function s(e){var t=M.getCursor(n).getSelectedRange();t.collapsed?e.preventDefault():z.setDataFromRange(e,t)?te.removeCurrentSelection():runtime.log("Cut operation failed")}function a(){return!1!==M.getCursor(n).getSelectedRange().collapsed}function l(e){var t=M.getCursor(n).getSelectedRange();t.collapsed?e.preventDefault():z.setDataFromRange(e,t)||runtime.log("Copy operation failed")}function u(e){var t;B.clipboardData&&B.clipboardData.getData?t=B.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),t&&(te.removeCurrentSelection(),oe.paste(t)),e.preventDefault?e.preventDefault():e.returnValue=!1}function c(){return!1}function d(e){Z&&Z.onOperationExecuted(e)}function h(e){M.emit(ops.OdtDocument.signalUndoStackChanged,e)}function f(){var e;return Z?(e=X.hasFocus(),Z.moveBackward(1),e&&X.focus(),!0):!1}function p(){var e;return Z?(e=X.hasFocus(),Z.moveForward(1),e&&X.focus(),!0):!1}function m(t){var r=M.getCursor(n).getSelectedRange(),s=(t.target||t.srcElement||null).getAttribute("end");r&&s&&(t=o(t.clientX,t.clientY))&&(re.setUnfilteredPosition(t.container,t.offset),Y.acceptPosition(re)===e&&(r=r.cloneRange(),"left"===s?r.setStart(re.container(),re.unfilteredDomOffset()):r.setEnd(re.container(),re.unfilteredDomOffset()),i.setSelectedRange(r,"right"===s),M.emit(ops.Document.signalCursorMoved,i)))}function g(){ce.selectRange(i.getSelectedRange(),i.hasForwardSelection(),1)}function v(){var t=B.getSelection(),n=0<t.rangeCount&&ce.selectionToRange(t);q&&n&&(G=!0,ie.clearSelection(),re.setUnfilteredPosition(t.focusNode,t.focusOffset),Y.acceptPosition(re)===e&&(2===ae?ce.expandToWordBoundaries(n.range):ae>=3&&ce.expandToParagraphBoundaries(n.range),i.setSelectedRange(n.range,n.hasForwardSelection),M.emit(ops.Document.signalCursorMoved,i)))}function y(e){var t=e.target||e.srcElement||null,i=M.getCursor(n);(q=null!==t&&I.containsNode(M.getOdfCanvas().getElement(),t))&&(G=!1,t=M.getRootElement(t)||M.getRootNode(),Y=M.createRootFilter(t),ae=0===e.button?e.detail:0,i&&e.shiftKey?B.getSelection().collapse(i.getAnchorNode(),0):(e=B.getSelection(),t=i.getSelectedRange(),e.extend?i.hasForwardSelection()?(e.collapse(t.startContainer,t.startOffset),e.extend(t.endContainer,t.endOffset)):(e.collapse(t.endContainer,t.endOffset),e.extend(t.startContainer,t.startOffset)):(e.removeAllRanges(),e.addRange(t.cloneRange()))),ae>1&&v())}function b(e){var t=M.getRootElement(e),n=M.createRootFilter(t),t=M.createStepIterator(e,0,[n,M.getPositionFilter()],t);return t.setPosition(e,e.childNodes.length),t.roundToNextStep()?{container:t.container(),offset:t.offset()}:null}function w(e){var t;t=(t=B.getSelection())?{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}:null;var n,i,r=B.getSelection().isCollapsed;t.anchorNode||t.focusNode||!(n=o(e.clientX,e.clientY))||(t.anchorNode=n.container,t.anchorOffset=n.offset,t.focusNode=t.anchorNode,t.focusOffset=t.anchorOffset),U.isImage(t.focusNode)&&0===t.focusOffset&&U.isCharacterFrame(t.focusNode.parentNode)?(i=t.focusNode.parentNode,n=i.getBoundingClientRect(),e.clientX>n.left&&(n=b(i))&&(t.focusNode=n.container,t.focusOffset=n.offset,r&&(t.anchorNode=t.focusNode,t.anchorOffset=t.focusOffset))):U.isImage(t.focusNode.firstChild)&&1===t.focusOffset&&U.isCharacterFrame(t.focusNode)&&(n=b(t.focusNode))&&(t.anchorNode=t.focusNode=n.container,t.anchorOffset=t.focusOffset=n.offset),t.anchorNode&&t.focusNode&&(t=ce.selectionToRange(t),ce.selectRange(t.range,t.hasForwardSelection,0===e.button?e.detail:0)),X.focus()}function C(e){var t;(t=o(e.clientX,e.clientY))&&(e=t.container,t=t.offset,e={anchorNode:e,anchorOffset:t,focusNode:e,focusOffset:t},e=ce.selectionToRange(e),ce.selectRange(e.range,e.hasForwardSelection,2),X.focus())}function x(e){var t,n,r,o=e.target||e.srcElement||null;L.processRequests(),q&&(U.isImage(o)&&U.isCharacterFrame(o.parentNode)&&B.getSelection().isCollapsed?(ce.selectImage(o.parentNode),X.focus()):ie.isSelectorElement(o)?X.focus():G?(o=i.getSelectedRange(),n=o.collapsed,U.isImage(o.endContainer)&&0===o.endOffset&&U.isCharacterFrame(o.endContainer.parentNode)&&(r=o.endContainer.parentNode,r=b(r))&&(o.setEnd(r.container,r.offset),n&&o.collapse(!1)),ce.selectRange(o,i.hasForwardSelection(),0===e.button?e.detail:0),X.focus()):me?w(e):(t=I.cloneEvent(e),F=runtime.setTimeout(function(){w(t)},0)),ae=0,G=q=!1)}function S(e){var t=M.getCursor(n).getSelectedRange();t.collapsed||H.exportRangeToDataTransfer(e.dataTransfer,t)}function A(){q&&X.focus(),ae=0,G=q=!1}function _(e){x(e)}function E(e){var t=e.target||e.srcElement||null,n=null;"annotationRemoveButton"===t.className?(runtime.assert(J,"Remove buttons are displayed on annotations while annotation editing is disabled in the controller."),n=t.parentNode.getElementsByTagNameNS(odf.Namespaces.officens,"annotation").item(0),Q.removeAnnotation(n),X.focus()):"webodf-draggable"!==t.getAttribute("class")&&x(e)}function $(e){(e=e.data)&&(-1===e.indexOf("\n")?te.insertText(e):oe.paste(e))}function k(e){return function(){return e(),!0}}function D(e){return function(t){return M.getCursor(n).getSelectionType()===ops.OdtCursor.RangeSelection?e(t):!0}}function T(e){X.unsubscribe("keydown",j.handleEvent),X.unsubscribe("keypress",W.handleEvent),X.unsubscribe("keyup",V.handleEvent),X.unsubscribe("copy",l),X.unsubscribe("mousedown",y),X.unsubscribe("mousemove",L.trigger),X.unsubscribe("mouseup",E),X.unsubscribe("contextmenu",_),X.unsubscribe("dragstart",S),X.unsubscribe("dragend",A),X.unsubscribe("click",le.handleClick),X.unsubscribe("longpress",C),X.unsubscribe("drag",m),X.unsubscribe("dragstop",g),M.unsubscribe(ops.OdtDocument.signalOperationEnd,O.trigger),
M.unsubscribe(ops.Document.signalCursorAdded,se.registerCursor),M.unsubscribe(ops.Document.signalCursorRemoved,se.removeCursor),M.unsubscribe(ops.OdtDocument.signalOperationEnd,d),e()}var F,L,O,N,B=runtime.getWindow(),M=t.getOdtDocument(),R=new gui.SessionConstraints,P=new gui.SessionContext(t,n),I=core.DomUtils,U=odf.OdfUtils,H=new gui.MimeDataExporter,z=new gui.Clipboard(H),j=new gui.KeyboardHandler,W=new gui.KeyboardHandler,V=new gui.KeyboardHandler,q=!1,K=new odf.ObjectNameGenerator(M.getOdfCanvas().odfContainer(),n),G=!1,Y=null,Z=null,X=new gui.EventManager(M),J=r.annotationsEnabled,Q=new gui.AnnotationController(t,R,n),ee=new gui.DirectFormattingController(t,R,P,n,K,r.directTextStylingEnabled,r.directParagraphStylingEnabled),te=new gui.TextController(t,R,P,n,ee.createCursorStyleOp,ee.createParagraphStyleOps),ne=new gui.ImageController(t,R,P,n,K),ie=new gui.ImageSelector(M.getOdfCanvas()),re=M.createPositionIterator(M.getRootNode()),oe=new gui.PasteController(t,R,P,n),se=new gui.InputMethodEditor(n,X),ae=0,le=new gui.HyperlinkClickHandler(M.getOdfCanvas().getElement,j,V),ue=new gui.HyperlinkController(t,R,P,n),ce=new gui.SelectionController(t,n),de=new gui.MetadataController(t,n),he=gui.KeyboardHandler.Modifier,fe=gui.KeyboardHandler.KeyCode,pe=-1!==B.navigator.appVersion.toLowerCase().indexOf("mac"),me=-1!==["iPad","iPod","iPhone"].indexOf(B.navigator.platform);runtime.assert(null!==B,"Expected to be run in an environment which has a global window, like a browser."),this.undo=f,this.redo=p,this.insertLocalCursor=function(){runtime.assert(void 0===t.getOdtDocument().getCursor(n),"Inserting local cursor a second time.");var e=new ops.OpAddCursor;e.init({memberid:n}),t.enqueue([e]),X.focus()},this.removeLocalCursor=function(){runtime.assert(void 0!==t.getOdtDocument().getCursor(n),"Removing local cursor without inserting before.");var e=new ops.OpRemoveCursor;e.init({memberid:n}),t.enqueue([e])},this.startEditing=function(){se.subscribe(gui.InputMethodEditor.signalCompositionStart,te.removeCurrentSelection),se.subscribe(gui.InputMethodEditor.signalCompositionEnd,$),X.subscribe("beforecut",a),X.subscribe("cut",s),X.subscribe("beforepaste",c),X.subscribe("paste",u),Z&&Z.initialize(),X.setEditing(!0),le.setModifier(pe?he.Meta:he.Ctrl),j.bind(fe.Backspace,he.None,k(te.removeTextByBackspaceKey),!0),j.bind(fe.Delete,he.None,te.removeTextByDeleteKey),j.bind(fe.Tab,he.None,D(function(){return te.insertText("	"),!0})),pe?(j.bind(fe.Clear,he.None,te.removeCurrentSelection),j.bind(fe.B,he.Meta,D(ee.toggleBold)),j.bind(fe.I,he.Meta,D(ee.toggleItalic)),j.bind(fe.U,he.Meta,D(ee.toggleUnderline)),j.bind(fe.L,he.MetaShift,D(ee.alignParagraphLeft)),j.bind(fe.E,he.MetaShift,D(ee.alignParagraphCenter)),j.bind(fe.R,he.MetaShift,D(ee.alignParagraphRight)),j.bind(fe.J,he.MetaShift,D(ee.alignParagraphJustified)),J&&j.bind(fe.C,he.MetaShift,Q.addAnnotation),j.bind(fe.Z,he.Meta,f),j.bind(fe.Z,he.MetaShift,p)):(j.bind(fe.B,he.Ctrl,D(ee.toggleBold)),j.bind(fe.I,he.Ctrl,D(ee.toggleItalic)),j.bind(fe.U,he.Ctrl,D(ee.toggleUnderline)),j.bind(fe.L,he.CtrlShift,D(ee.alignParagraphLeft)),j.bind(fe.E,he.CtrlShift,D(ee.alignParagraphCenter)),j.bind(fe.R,he.CtrlShift,D(ee.alignParagraphRight)),j.bind(fe.J,he.CtrlShift,D(ee.alignParagraphJustified)),J&&j.bind(fe.C,he.CtrlAlt,Q.addAnnotation),j.bind(fe.Z,he.Ctrl,f),j.bind(fe.Z,he.CtrlShift,p)),W.setDefault(D(function(e){var t;return t=null===e.which||void 0===e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):null,!t||e.altKey||e.ctrlKey||e.metaKey?!1:(te.insertText(t),!0)})),W.bind(fe.Enter,he.None,D(te.enqueueParagraphSplittingOps))},this.endEditing=function(){se.unsubscribe(gui.InputMethodEditor.signalCompositionStart,te.removeCurrentSelection),se.unsubscribe(gui.InputMethodEditor.signalCompositionEnd,$),X.unsubscribe("cut",s),X.unsubscribe("beforecut",a),X.unsubscribe("paste",u),X.unsubscribe("beforepaste",c),X.setEditing(!1),le.setModifier(he.None),j.bind(fe.Backspace,he.None,function(){return!0},!0),j.unbind(fe.Delete,he.None),j.unbind(fe.Tab,he.None),pe?(j.unbind(fe.Clear,he.None),j.unbind(fe.B,he.Meta),j.unbind(fe.I,he.Meta),j.unbind(fe.U,he.Meta),j.unbind(fe.L,he.MetaShift),j.unbind(fe.E,he.MetaShift),j.unbind(fe.R,he.MetaShift),j.unbind(fe.J,he.MetaShift),J&&j.unbind(fe.C,he.MetaShift),j.unbind(fe.Z,he.Meta),j.unbind(fe.Z,he.MetaShift)):(j.unbind(fe.B,he.Ctrl),j.unbind(fe.I,he.Ctrl),j.unbind(fe.U,he.Ctrl),j.unbind(fe.L,he.CtrlShift),j.unbind(fe.E,he.CtrlShift),j.unbind(fe.R,he.CtrlShift),j.unbind(fe.J,he.CtrlShift),J&&j.unbind(fe.C,he.CtrlAlt),j.unbind(fe.Z,he.Ctrl),j.unbind(fe.Z,he.CtrlShift)),W.setDefault(null),W.unbind(fe.Enter,he.None)},this.getInputMemberId=function(){return n},this.getSession=function(){return t},this.getSessionConstraints=function(){return R},this.setUndoManager=function(e){Z&&Z.unsubscribe(gui.UndoManager.signalUndoStackChanged,h),(Z=e)&&(Z.setDocument(M),Z.setPlaybackFunction(t.enqueue),Z.subscribe(gui.UndoManager.signalUndoStackChanged,h))},this.getUndoManager=function(){return Z},this.getMetadataController=function(){return de},this.getAnnotationController=function(){return Q},this.getDirectFormattingController=function(){return ee},this.getHyperlinkClickHandler=function(){return le},this.getHyperlinkController=function(){return ue},this.getImageController=function(){return ne},this.getSelectionController=function(){return ce},this.getTextController=function(){return te},this.getEventManager=function(){return X},this.getKeyboardHandlers=function(){return{keydown:j,keypress:W}},this.destroy=function(e){var t=[L.destroy,O.destroy,ee.destroy,se.destroy,X.destroy,le.destroy,ue.destroy,de.destroy,ce.destroy,te.destroy,T];N&&t.unshift(N.destroy),runtime.clearTimeout(F),core.Async.destroyAll(t,e)},L=core.Task.createRedrawTask(v),O=core.Task.createRedrawTask(function(){var e=M.getCursor(n);return e&&e.getSelectionType()===ops.OdtCursor.RegionSelection&&(e=U.getImageElements(e.getSelectedRange())[0])?void ie.select(e.parentNode):void ie.clearSelection()}),j.bind(fe.Left,he.None,D(ce.moveCursorToLeft)),j.bind(fe.Right,he.None,D(ce.moveCursorToRight)),j.bind(fe.Up,he.None,D(ce.moveCursorUp)),j.bind(fe.Down,he.None,D(ce.moveCursorDown)),j.bind(fe.Left,he.Shift,D(ce.extendSelectionToLeft)),j.bind(fe.Right,he.Shift,D(ce.extendSelectionToRight)),j.bind(fe.Up,he.Shift,D(ce.extendSelectionUp)),j.bind(fe.Down,he.Shift,D(ce.extendSelectionDown)),j.bind(fe.Home,he.None,D(ce.moveCursorToLineStart)),j.bind(fe.End,he.None,D(ce.moveCursorToLineEnd)),j.bind(fe.Home,he.Ctrl,D(ce.moveCursorToDocumentStart)),j.bind(fe.End,he.Ctrl,D(ce.moveCursorToDocumentEnd)),j.bind(fe.Home,he.Shift,D(ce.extendSelectionToLineStart)),j.bind(fe.End,he.Shift,D(ce.extendSelectionToLineEnd)),j.bind(fe.Up,he.CtrlShift,D(ce.extendSelectionToParagraphStart)),j.bind(fe.Down,he.CtrlShift,D(ce.extendSelectionToParagraphEnd)),j.bind(fe.Home,he.CtrlShift,D(ce.extendSelectionToDocumentStart)),j.bind(fe.End,he.CtrlShift,D(ce.extendSelectionToDocumentEnd)),pe?(j.bind(fe.Left,he.Alt,D(ce.moveCursorBeforeWord)),j.bind(fe.Right,he.Alt,D(ce.moveCursorPastWord)),j.bind(fe.Left,he.Meta,D(ce.moveCursorToLineStart)),j.bind(fe.Right,he.Meta,D(ce.moveCursorToLineEnd)),j.bind(fe.Home,he.Meta,D(ce.moveCursorToDocumentStart)),j.bind(fe.End,he.Meta,D(ce.moveCursorToDocumentEnd)),j.bind(fe.Left,he.AltShift,D(ce.extendSelectionBeforeWord)),j.bind(fe.Right,he.AltShift,D(ce.extendSelectionPastWord)),j.bind(fe.Left,he.MetaShift,D(ce.extendSelectionToLineStart)),j.bind(fe.Right,he.MetaShift,D(ce.extendSelectionToLineEnd)),j.bind(fe.Up,he.AltShift,D(ce.extendSelectionToParagraphStart)),j.bind(fe.Down,he.AltShift,D(ce.extendSelectionToParagraphEnd)),j.bind(fe.Up,he.MetaShift,D(ce.extendSelectionToDocumentStart)),j.bind(fe.Down,he.MetaShift,D(ce.extendSelectionToDocumentEnd)),j.bind(fe.A,he.Meta,D(ce.extendSelectionToEntireDocument))):(j.bind(fe.Left,he.Ctrl,D(ce.moveCursorBeforeWord)),j.bind(fe.Right,he.Ctrl,D(ce.moveCursorPastWord)),j.bind(fe.Left,he.CtrlShift,D(ce.extendSelectionBeforeWord)),j.bind(fe.Right,he.CtrlShift,D(ce.extendSelectionPastWord)),j.bind(fe.A,he.Ctrl,D(ce.extendSelectionToEntireDocument))),me&&(N=new gui.IOSSafariSupport(X)),X.subscribe("keydown",j.handleEvent),X.subscribe("keypress",W.handleEvent),X.subscribe("keyup",V.handleEvent),X.subscribe("copy",l),X.subscribe("mousedown",y),X.subscribe("mousemove",L.trigger),X.subscribe("mouseup",E),X.subscribe("contextmenu",_),X.subscribe("dragstart",S),X.subscribe("dragend",A),X.subscribe("click",le.handleClick),X.subscribe("longpress",C),X.subscribe("drag",m),X.subscribe("dragstop",g),M.subscribe(ops.OdtDocument.signalOperationEnd,O.trigger),M.subscribe(ops.Document.signalCursorAdded,se.registerCursor),M.subscribe(ops.Document.signalCursorRemoved,se.removeCursor),M.subscribe(ops.OdtDocument.signalOperationEnd,d)}}(),gui.CaretManager=function(e,t){function n(e){return o.hasOwnProperty(e)?o[e]:null}function i(){return Object.keys(o).map(function(e){return o[e]})}function r(t){var n=o[t];n&&(delete o[t],t===e.getInputMemberId()?(a.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,n.ensureVisible),a.unsubscribe(ops.Document.signalCursorMoved,n.refreshCursorBlinking),l.unsubscribe("compositionupdate",n.handleUpdate),l.unsubscribe("compositionend",n.handleUpdate),l.unsubscribe("focus",n.setFocus),l.unsubscribe("blur",n.removeFocus),s.removeEventListener("focus",n.show,!1),s.removeEventListener("blur",n.hide,!1)):a.unsubscribe(ops.OdtDocument.signalProcessingBatchEnd,n.handleUpdate),n.destroy(function(){}))}var o={},s=runtime.getWindow(),a=e.getSession().getOdtDocument(),l=e.getEventManager();this.registerCursor=function(n,i,r){var u=n.getMemberId();return n=new gui.Caret(n,t,i,r),o[u]=n,u===e.getInputMemberId()?(runtime.log("Starting to track input on new cursor of "+u),a.subscribe(ops.OdtDocument.signalProcessingBatchEnd,n.ensureVisible),a.subscribe(ops.Document.signalCursorMoved,n.refreshCursorBlinking),l.subscribe("compositionupdate",n.handleUpdate),l.subscribe("compositionend",n.handleUpdate),l.subscribe("focus",n.setFocus),l.subscribe("blur",n.removeFocus),s.addEventListener("focus",n.show,!1),s.addEventListener("blur",n.hide,!1),n.setOverlayElement(l.getEventTrap())):a.subscribe(ops.OdtDocument.signalProcessingBatchEnd,n.handleUpdate),n},this.getCaret=n,this.getCarets=i,this.destroy=function(t){var n=i().map(function(e){return e.destroy});e.getSelectionController().setCaretXPositionLocator(null),a.unsubscribe(ops.Document.signalCursorRemoved,r),o={},core.Async.destroyAll(n,t)},e.getSelectionController().setCaretXPositionLocator(function(){var t,i=n(e.getInputMemberId());return i&&(t=i.getBoundingClientRect()),t?t.right:void 0}),a.subscribe(ops.Document.signalCursorRemoved,r)},gui.EditInfoHandle=function(e){var t,n=[],i=e.ownerDocument,r=i.documentElement.namespaceURI;this.setEdits=function(e){n=e;var o,s,a,l;for(core.DomUtils.removeAllChildNodes(t),e=0;e<n.length;e+=1)o=i.createElementNS(r,"div"),o.className="editInfo",s=i.createElementNS(r,"span"),s.className="editInfoColor",s.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",n[e].memberid),a=i.createElementNS(r,"span"),a.className="editInfoAuthor",a.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",n[e].memberid),l=i.createElementNS(r,"span"),l.className="editInfoTime",l.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",n[e].memberid),l.appendChild(i.createTextNode(n[e].time.toString())),o.appendChild(s),o.appendChild(a),o.appendChild(l),t.appendChild(o)},this.show=function(){t.style.display="block"},this.hide=function(){t.style.display="none"},this.destroy=function(n){e.removeChild(t),n()},t=i.createElementNS(r,"div"),t.setAttribute("class","editInfoHandle"),t.style.display="none",e.appendChild(t)},ops.EditInfo=function(e,t){function n(){var e,t=[];for(e in r)r.hasOwnProperty(e)&&t.push({memberid:e,time:r[e].time});return t.sort(function(e,t){return e.time-t.time}),t}var i,r={};this.getNode=function(){return i},this.getOdtDocument=function(){return t},this.getEdits=function(){return r},this.getSortedEdits=function(){return n()},this.addEdit=function(e,t){r[e]={time:t}},this.clearEdits=function(){r={}},this.destroy=function(t){e.parentNode&&e.removeChild(i),t()},i=t.getDOMDocument().createElementNS("urn:webodf:names:editinfo","editinfo"),e.insertBefore(i,e.firstChild)},gui.EditInfoMarker=function(e,t){function n(e,t){return runtime.setTimeout(function(){o.style.opacity=e},t)}var i,r,o,s,a,l,u=this;this.addEdit=function(t,i){var u=Date.now()-i;e.addEdit(t,i),r.setEdits(e.getSortedEdits()),o.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",t),runtime.clearTimeout(a),runtime.clearTimeout(l),1e4>u?(s=n(1,0),a=n(.5,1e4-u),l=n(.2,2e4-u)):u>=1e4&&2e4>u?(s=n(.5,0),l=n(.2,2e4-u)):s=n(.2,0)},this.getEdits=function(){return e.getEdits()},this.clearEdits=function(){e.clearEdits(),r.setEdits([]),o.hasAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")&&o.removeAttributeNS("urn:webodf:names:editinfo","editinfo:memberid")},this.getEditInfo=function(){return e},this.show=function(){o.style.display="block"},this.hide=function(){u.hideHandle(),o.style.display="none"},this.showHandle=function(){r.show()},this.hideHandle=function(){r.hide()},this.destroy=function(t){runtime.clearTimeout(s),runtime.clearTimeout(a),runtime.clearTimeout(l),i.removeChild(o),r.destroy(function(n){n?t(n):e.destroy(t)})},function(){var n=e.getOdtDocument().getDOMDocument();o=n.createElementNS(n.documentElement.namespaceURI,"div"),o.setAttribute("class","editInfoMarker"),o.onmouseover=function(){u.showHandle()},o.onmouseout=function(){u.hideHandle()},i=e.getNode(),i.appendChild(o),r=new gui.EditInfoHandle(i),t||u.hide()}()},gui.HyperlinkTooltipView=function(e,t){var n,i,r,o=core.DomUtils,s=odf.OdfUtils,a=runtime.getWindow();runtime.assert(null!==a,"Expected to be run in an environment which has a global window, like a browser."),this.showTooltip=function(l){var u,c=l.target||l.srcElement,d=e.getSizer(),h=e.getZoomLevel();e:{for(;c;){if(s.isHyperlink(c))break e;if(s.isParagraph(c)||s.isInlineRoot(c))break;c=c.parentNode}c=null}if(c){o.containsNode(d,r)||d.appendChild(r),u=i;var f;switch(t()){case gui.KeyboardHandler.Modifier.Ctrl:f=runtime.tr("Ctrl-click to follow link");break;case gui.KeyboardHandler.Modifier.Meta:f=runtime.tr("⌘-click to follow link");break;default:f=""}u.textContent=f,n.textContent=s.getHyperlinkTarget(c),r.style.display="block",u=a.innerWidth-r.offsetWidth-15,c=l.clientX>u?u:l.clientX+15,u=a.innerHeight-r.offsetHeight-10,l=l.clientY>u?u:l.clientY+10,d=d.getBoundingClientRect(),c=(c-d.left)/h,l=(l-d.top)/h,r.style.left=c+"px",r.style.top=l+"px"}},this.hideTooltip=function(){r.style.display="none"},this.destroy=function(e){r.parentNode&&r.parentNode.removeChild(r),e()},function(){var t=e.getElement().ownerDocument;n=t.createElement("span"),i=t.createElement("span"),n.className="webodf-hyperlinkTooltipLink",i.className="webodf-hyperlinkTooltipText",r=t.createElement("div"),r.className="webodf-hyperlinkTooltip",r.appendChild(n),r.appendChild(i),e.getElement().appendChild(r)}()},gui.OdfFieldView=function(e){function t(){var e=odf.OdfSchema.getFields().map(function(e){return e.replace(":","|")}),t=e.join(",\n")+"\n{ background-color: #D0D0D0; }\n",e=e.map(function(e){return e+":empty::after"}).join(",\n")+"\n{ content:' '; white-space: pre; }\n";return t+"\n"+e}var n,i=e.getElement().ownerDocument;this.showFieldHighlight=function(){n.appendChild(i.createTextNode(t()))},this.hideFieldHighlight=function(){for(var e=n.sheet,t=e.cssRules;t.length;)e.deleteRule(t.length-1)},this.destroy=function(e){n.parentNode&&n.parentNode.removeChild(n),e()},n=function(){var e=i.getElementsByTagName("head").item(0),t=i.createElement("style"),n="";return t.type="text/css",t.media="screen, print, handheld, projection",odf.Namespaces.forEachPrefix(function(e,t){n+="@namespace "+e+" url("+t+");\n"}),t.appendChild(i.createTextNode(n)),e.appendChild(t),t}()},gui.ShadowCursor=function(e){var t=e.getDOMDocument().createRange(),n=!0;this.removeFromDocument=function(){},this.getMemberId=function(){return gui.ShadowCursor.ShadowCursorMemberId},this.getSelectedRange=function(){return t},this.setSelectedRange=function(e,i){t=e,n=!1!==i},this.hasForwardSelection=function(){return n},this.getDocument=function(){return e},this.getSelectionType=function(){return ops.OdtCursor.RangeSelection},t.setStart(e.getRootNode(),0)},gui.ShadowCursor.ShadowCursorMemberId="",gui.SelectionView=function(e){},gui.SelectionView.prototype.rerender=function(){},gui.SelectionView.prototype.show=function(){},gui.SelectionView.prototype.hide=function(){},gui.SelectionView.prototype.destroy=function(e){},gui.SelectionViewManager=function(e){function t(){return Object.keys(n).map(function(e){return n[e]})}var n={};this.getSelectionView=function(e){return n.hasOwnProperty(e)?n[e]:null},this.getSelectionViews=t,this.removeSelectionView=function(e){n.hasOwnProperty(e)&&(n[e].destroy(function(){}),delete n[e])},this.hideSelectionView=function(e){n.hasOwnProperty(e)&&n[e].hide()},this.showSelectionView=function(e){n.hasOwnProperty(e)&&n[e].show()},this.rerenderSelectionViews=function(){Object.keys(n).forEach(function(e){n[e].rerender()})},this.registerCursor=function(t,i){var r=t.getMemberId(),o=new e(t);return i?o.show():o.hide(),n[r]=o},this.destroy=function(e){function n(t,r){r?e(r):t<i.length?i[t].destroy(function(e){n(t+1,e)}):e()}var i=t();n(0,void 0)}},gui.SessionViewOptions=function(){this.caretBlinksOnRangeSelect=this.caretAvatarsInitiallyVisible=this.editInfoMarkersInitiallyVisible=!0},function(){function e(e,t){return void 0!==e?Boolean(e):t}gui.SessionView=function(t,n,i,r,o,s){function a(e){e.memberId===n&&x.getViewport().scrollIntoView(e.annotation.getBoundingClientRect())}function l(){var e=document.getElementsByTagName("head").item(0),t=document.createElement("style");return t.type="text/css",t.media="screen, print, handheld, projection",e.appendChild(t),t}function u(e,t,i){function r(t,n,i){n=t+'[editinfo|memberid="'+e+'"]'+i+n;e:{var r=b.firstChild;for(t=t+'[editinfo|memberid="'+e+'"]'+i+"{";r;){if(r.nodeType===Node.TEXT_NODE&&0===r.data.indexOf(t)){t=r;break e}r=r.nextSibling}t=null}t?t.data=n:b.appendChild(document.createTextNode(n))}r("div.editInfoMarker","{ background-color: "+i+"; }",""),r("span.editInfoColor","{ background-color: "+i+"; }",""),r("span.editInfoAuthor",'{ content: "'+t+'"; }',":before"),r("dc|creator","{ background-color: "+i+"; }",""),r(".webodf-selectionOverlay","{ fill: "+i+"; stroke: "+i+";}",""),e===n&&(r(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"),e=gui.ShadowCursor.ShadowCursorMemberId,r(".webodf-selectionOverlay","{ fill: "+i+"; stroke: "+i+";}",""),r(".webodf-touchEnabled .webodf-selectionOverlay","{ display: block; }"," > .webodf-draggable"))}function c(e){var t,n;for(n in A)A.hasOwnProperty(n)&&(t=A[n],e?t.show():t.hide())}function d(e){o.getCarets().forEach(function(t){e?t.showHandle():t.hideHandle()})}function h(e){var t=e.getMemberId();e=e.getProperties(),u(t,e.fullName,e.color)}function f(e){var t=e.getMemberId(),n=i.getOdtDocument().getMember(t).getProperties();o.registerCursor(e,E,$),s.registerCursor(e,!0),(e=o.getCaret(t))&&(e.setAvatarImageUrl(n.imageUrl),e.setColor(n.color)),runtime.log("+++ View here +++ eagerly created an Caret for '"+t+"'! +++")}function p(e){e=e.getMemberId();var t=s.getSelectionView(n),i=s.getSelectionView(gui.ShadowCursor.ShadowCursorMemberId),r=o.getCaret(n);e===n?(i.hide(),t&&t.show(),r&&r.show()):e===gui.ShadowCursor.ShadowCursorMemberId&&(i.show(),t&&t.hide(),r&&r.hide())}function m(e){s.removeSelectionView(e)}function g(e){var t=e.paragraphElement,n=e.memberId;e=e.timeStamp;var r,o="",s=t.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0);s?(o=s.getAttributeNS("urn:webodf:names:editinfo","id"),r=A[o]):(o=Math.random().toString(),r=new ops.EditInfo(t,i.getOdtDocument()),r=new gui.EditInfoMarker(r,_),s=t.getElementsByTagNameNS("urn:webodf:names:editinfo","editinfo").item(0),s.setAttributeNS("urn:webodf:names:editinfo","id",o),A[o]=r),r.addEdit(n,new Date(e)),S.trigger()}function v(){var e;w.hasChildNodes()&&core.DomUtils.removeAllChildNodes(w),!0===r.getState(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN)&&(e=i.getOdtDocument().getMember(n))&&(e=e.getProperties().fullName,w.appendChild(document.createTextNode(".annotationWrapper:not([creator = '"+e+"']) .annotationRemoveButton { display: none; }")))}function y(e){var t=Object.keys(A).map(function(e){return A[e]});C.unsubscribe(ops.Document.signalMemberAdded,h),C.unsubscribe(ops.Document.signalMemberUpdated,h),C.unsubscribe(ops.Document.signalCursorAdded,f),C.unsubscribe(ops.Document.signalCursorRemoved,m),C.unsubscribe(ops.OdtDocument.signalParagraphChanged,g),C.unsubscribe(ops.Document.signalCursorMoved,p),C.unsubscribe(ops.OdtDocument.signalParagraphChanged,s.rerenderSelectionViews),C.unsubscribe(ops.OdtDocument.signalTableAdded,s.rerenderSelectionViews),C.unsubscribe(ops.OdtDocument.signalParagraphStyleModified,s.rerenderSelectionViews),r.unsubscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,v),C.unsubscribe(ops.Document.signalMemberAdded,v),C.unsubscribe(ops.Document.signalMemberUpdated,v),b.parentNode.removeChild(b),w.parentNode.removeChild(w),function n(i,r){r?e(r):i<t.length?t[i].destroy(function(e){n(i+1,e)}):e()}(0,void 0)}var b,w,C,x,S,A={},_=e(t.editInfoMarkersInitiallyVisible,!0),E=e(t.caretAvatarsInitiallyVisible,!0),$=e(t.caretBlinksOnRangeSelect,!0);this.showEditInfoMarkers=function(){_||(_=!0,c(_))},this.hideEditInfoMarkers=function(){_&&(_=!1,c(_))},this.showCaretAvatars=function(){E||(E=!0,d(E))},this.hideCaretAvatars=function(){E&&(E=!1,d(E))},this.getSession=function(){return i},this.getCaret=function(e){return o.getCaret(e)},this.destroy=function(e){var t=[S.destroy,y];C.unsubscribe(ops.OdtDocument.signalAnnotationAdded,a),core.Async.destroyAll(t,e)},C=i.getOdtDocument(),x=C.getOdfCanvas(),C.subscribe(ops.OdtDocument.signalAnnotationAdded,a),C.subscribe(ops.Document.signalMemberAdded,h),C.subscribe(ops.Document.signalMemberUpdated,h),C.subscribe(ops.Document.signalCursorAdded,f),C.subscribe(ops.Document.signalCursorRemoved,m),C.subscribe(ops.OdtDocument.signalParagraphChanged,g),C.subscribe(ops.Document.signalCursorMoved,p),C.subscribe(ops.OdtDocument.signalParagraphChanged,s.rerenderSelectionViews),C.subscribe(ops.OdtDocument.signalTableAdded,s.rerenderSelectionViews),C.subscribe(ops.OdtDocument.signalParagraphStyleModified,s.rerenderSelectionViews),r.subscribe(gui.CommonConstraints.EDIT.ANNOTATIONS.ONLY_DELETE_OWN,v),C.subscribe(ops.Document.signalMemberAdded,v),C.subscribe(ops.Document.signalMemberUpdated,v),b=l(),b.appendChild(document.createTextNode("@namespace editinfo url(urn:webodf:names:editinfo);")),b.appendChild(document.createTextNode("@namespace dc url(http://purl.org/dc/elements/1.1/);")),w=l(),v(),S=core.Task.createRedrawTask(function(){var e=x.getAnnotationViewManager();e&&(e.rehighlightAnnotations(),C.fixCursorPositions())})}}(),gui.SvgSelectionView=function(e){function t(){var e=m.getRootNode();h!==e&&(h=e,f=m.getCanvas().getSizer(),f.appendChild(v),v.setAttribute("class","webodf-selectionOverlay"),b.setAttribute("class","webodf-draggable"),w.setAttribute("class","webodf-draggable"),b.setAttribute("end","left"),w.setAttribute("end","right"),b.setAttribute("r",8),w.setAttribute("r",8),v.appendChild(y),v.appendChild(b),v.appendChild(w))}function n(e){return e=e.getBoundingClientRect(),Boolean(e&&0!==e.height)}function i(e){var t=C.getTextElements(e,!0,!1),i=e.cloneRange(),r=e.cloneRange();if(e=e.cloneRange(),!t.length)return null;var o;e:{o=0;var s=t[o],a=i.startContainer===s?i.startOffset:0,l=a;for(i.setStart(s,a),i.setEnd(s,l);!n(i);){if(s.nodeType===Node.ELEMENT_NODE&&l<s.childNodes.length)l=s.childNodes.length;else if(s.nodeType===Node.TEXT_NODE&&l<s.length)l+=1;else{if(!t[o]){o=!1;break e}s=t[o],o+=1,a=l=0}i.setStart(s,a),i.setEnd(s,l)}o=!0}if(!o)return null;e:{for(o=t.length-1,s=t[o],l=a=r.endContainer===s?r.endOffset:s.nodeType===Node.TEXT_NODE?s.length:s.childNodes.length,r.setStart(s,a),r.setEnd(s,l);!n(r);){if(s.nodeType===Node.ELEMENT_NODE&&a>0)a=0;else if(s.nodeType===Node.TEXT_NODE&&a>0)--a;else{if(!t[o]){t=!1;break e}s=t[o],--o,a=l=s.length||s.childNodes.length}r.setStart(s,a),r.setEnd(s,l)}t=!0}return t?(e.setStart(i.startContainer,i.startOffset),e.setEnd(r.endContainer,r.endOffset),{firstRange:i,lastRange:r,fillerRange:e}):null}function r(e,t){var n={};return n.top=Math.min(e.top,t.top),n.left=Math.min(e.left,t.left),n.right=Math.max(e.right,t.right),n.bottom=Math.max(e.bottom,t.bottom),n.width=n.right-n.left,n.height=n.bottom-n.top,n}function o(e,t){return t&&0<t.width&&0<t.height&&(e=e?r(e,t):t),e}function s(e){function t(e){return _.setUnfilteredPosition(e,0),y.acceptNode(e)===E&&a.acceptPosition(_)===E?E:$}function n(e){var n=null;return t(e)===E&&(n=x.getBoundingClientRect(e)),n}var i,r,s,a,l,u=e.commonAncestorContainer,c=e.startContainer,d=e.endContainer,h=e.startOffset,f=e.endOffset,p=null,v=g.createRange(),y=new odf.OdfNodeFilter;if(c===u||d===u)return v=e.cloneRange(),p=v.getBoundingClientRect(),v.detach(),p;for(e=c;e.parentNode!==u;)e=e.parentNode;for(r=d;r.parentNode!==u;)r=r.parentNode;for(a=m.createRootFilter(c),u=e.nextSibling;u&&u!==r;)s=n(u),p=o(p,s),u=u.nextSibling;if(C.isParagraph(e))p=o(p,x.getBoundingClientRect(e));else if(e.nodeType===Node.TEXT_NODE)u=e,v.setStart(u,h),v.setEnd(u,u===r?f:u.length),s=v.getBoundingClientRect(),p=o(p,s);else for(l=g.createTreeWalker(e,NodeFilter.SHOW_TEXT,t,!1),u=l.currentNode=c;u&&u!==d;)v.setStart(u,h),v.setEnd(u,u.length),s=v.getBoundingClientRect(),p=o(p,s),i=u,h=0,u=l.nextNode();if(i||(i=c),C.isParagraph(r))p=o(p,x.getBoundingClientRect(r));else if(r.nodeType===Node.TEXT_NODE)u=r,v.setStart(u,u===e?h:0),v.setEnd(u,f),s=v.getBoundingClientRect(),p=o(p,s);else for(l=g.createTreeWalker(r,NodeFilter.SHOW_TEXT,t,!1),u=l.currentNode=d;u&&u!==i;)v.setStart(u,0),v.setEnd(u,f),s=v.getBoundingClientRect(),p=o(p,s),(u=l.previousNode())&&(f=u.length);return p}function a(e,t){var n=e.getBoundingClientRect(),i={width:0};return i.top=n.top,i.bottom=n.bottom,i.height=n.height,i.left=i.right=t?n.right:n.left,i}function l(){var n,o=e.getSelectedRange();if(n=A&&e.getSelectionType()===ops.OdtCursor.RangeSelection&&!o.collapsed){t();var l,u,c,d,h,p,m=x.getBoundingClientRect(f),g=S.getZoomLevel(),o=i(o);if(o){n=o.firstRange,l=o.lastRange,u=o.fillerRange,c=x.translateRect(a(n,!1),m,g),h=x.translateRect(a(l,!0),m,g),d=(d=s(u))?x.translateRect(d,m,g):r(c,h),p=d.left,d=c.left+Math.max(0,d.width-(c.left-d.left)),m=Math.min(c.top,h.top),g=h.top+h.height,p=[{x:c.left,y:m+c.height},{x:c.left,y:m},{x:d,y:m},{x:d,y:g-h.height},{x:h.right,y:g-h.height},{x:h.right,y:g},{x:p,y:g},{x:p,y:m+c.height},{x:c.left,y:m+c.height}],d="";var C;for(C=0;C<p.length;C+=1)d+=p[C].x+","+p[C].y+" ";y.setAttribute("points",d),b.setAttribute("cx",c.left),b.setAttribute("cy",m+c.height/2),w.setAttribute("cx",h.right),w.setAttribute("cy",g-h.height/2),n.detach(),l.detach(),u.detach()}n=Boolean(o)}v.style.display=n?"block":"none"}function u(t){A&&t===e&&p.trigger()}function c(e){e=8/e,b.setAttribute("r",e),w.setAttribute("r",e)}function d(t){f.removeChild(v),f.classList.remove("webodf-virtualSelections"),e.getDocument().unsubscribe(ops.Document.signalCursorMoved,u),S.unsubscribe(gui.ZoomHelper.signalZoomChanged,c),t()}var h,f,p,m=e.getDocument(),g=m.getDOMDocument(),v=g.createElementNS("http://www.w3.org/2000/svg","svg"),y=g.createElementNS("http://www.w3.org/2000/svg","polygon"),b=g.createElementNS("http://www.w3.org/2000/svg","circle"),w=g.createElementNS("http://www.w3.org/2000/svg","circle"),C=odf.OdfUtils,x=core.DomUtils,S=m.getCanvas().getZoomHelper(),A=!0,_=e.getDocument().createPositionIterator(m.getRootNode()),E=NodeFilter.FILTER_ACCEPT,$=NodeFilter.FILTER_REJECT;this.rerender=function(){A&&p.trigger()},this.show=function(){A=!0,p.trigger()},this.hide=function(){A=!1,p.trigger()},this.destroy=function(e){core.Async.destroyAll([p.destroy,d],e)},function(){var n=e.getMemberId();p=core.Task.createRedrawTask(l),t(),v.setAttributeNS("urn:webodf:names:editinfo","editinfo:memberid",n),f.classList.add("webodf-virtualSelections"),e.getDocument().subscribe(ops.Document.signalCursorMoved,u),S.subscribe(gui.ZoomHelper.signalZoomChanged,c),c(S.getZoomLevel())}()},gui.UndoStateRules=function(){function e(e,t){var n=e.length;this.previous=function(){for(--n;n>=0;--n)if(t(e[n]))return e[n];return null}}function t(e){e=e.spec();var t;return e.hasOwnProperty("position")&&(t=e.position),t}function n(e){return e.isEdit}function i(e,n,i){return i?(e=t(e),n=t(n),i=t(i),e-n===n-i):(i=t(e)-t(n),0===i||1===Math.abs(i))}this.isEditOperation=n,this.isPartOfOperationSet=function(t,r){var o,s=void 0!==t.group;if(!t.isEdit||0===r.length)return!0;if(o=r[r.length-1],s&&t.group===o.group)return!0;e:switch(t.spec().optype){case"RemoveText":case"InsertText":o=!0;break e;default:o=!1}if(o&&r.some(n)){if(s){var a;s=t.spec().optype,o=new e(r,n);var l,u,c=o.previous(),d=null;for(runtime.assert(Boolean(c),"No edit operations found in state"),u=c.group,runtime.assert(void 0!==u,"Operation has no group"),l=1;c&&c.group===u;){if(s===c.spec().optype){a=c;break}c=o.previous()}if(a){for(c=o.previous();c;){if(c.group!==u){if(2===l)break;u=c.group,l+=1}if(s===c.spec().optype){d=c;break}c=o.previous()}a=i(t,a,d)}else a=!1;return a}return a=t.spec().optype,s=new e(r,n),o=s.previous(),runtime.assert(Boolean(o),"No edit operations found in state"),a=a===o.spec().optype?i(t,o,s.previous()):!1}return!1}},function(){function e(e,t){this.mainId=void 0!==e?e:-1,this.subId=void 0!==t?t:-1}function t(t,i,r){function o(e,n){return e+(t.isEditOperation(n)?1:0)}var s,a,l;this.addOperation=function(e){t.isEditOperation(e)&&(l+=1),a.push(e)},this.isNextStateId=function(e){return e.mainId===s&&e.subId===l},this.getNextStateId=function(){return new e(s,l)},this.getOperations=function(){return a},s=n+=1,a=i||[],l=i&&r?i.reduce(o,0):0}var n=0;gui.TrivialUndoManager=function(n){function i(){return!0!==v.isNextStateId(g)}function r(e){e=e.getOperations(),0<e.length&&(A=!0,p(e),A=!1)}function o(){x.emit(gui.UndoManager.signalUndoStackChanged,{undoAvailable:y.hasUndoStates(),redoAvailable:y.hasRedoStates()})}function s(e){var t=i();e!==t&&x.emit(gui.UndoManager.signalDocumentModifiedChanged,t)}function a(){v!==f&&v!==w[w.length-1]&&w.push(v)}function l(e){var t=e.previousSibling||e.nextSibling;e.parentNode.removeChild(e),b.normalizeTextNodes(t)}function u(e){return Object.keys(e).map(function(t){return e[t]})}function c(e){function n(e){var t=e.spec();if(a[t.memberid])switch(t.optype){case"AddCursor":o[t.memberid]||(o[t.memberid]=e,delete a[t.memberid],--i);break;case"MoveCursor":s[t.memberid]||(s[t.memberid]=e)}}var i,r,o={},s={},a={};for(r=e.pop(),m.getMemberIds().forEach(function(e){a[e]=!0}),i=Object.keys(a).length;r&&i>0;)r=r.getOperations(),r.reverse(),r.forEach(n),r=e.pop();return new t(S,u(o).concat(u(s)))}function d(){var e=i(),t=h=m.cloneDocumentElement();b.getElementsByTagNameNS(t,"urn:webodf:names:cursor","cursor").forEach(l),b.getElementsByTagNameNS(t,"urn:webodf:names:cursor","anchor").forEach(l),a(),v=f=c([f].concat(w)),w.length=0,C.length=0,e||(g=v.getNextStateId()),o(),s(e)}var h,f,p,m,g,v,y=this,b=core.DomUtils,w=[],C=[],x=new core.EventNotifier([gui.UndoManager.signalUndoStackChanged,gui.UndoManager.signalUndoStateCreated,gui.UndoManager.signalUndoStateModified,gui.UndoManager.signalDocumentModifiedChanged,gui.TrivialUndoManager.signalDocumentRootReplaced]),S=n||new gui.UndoStateRules,A=!1;this.subscribe=function(e,t){x.subscribe(e,t)},this.unsubscribe=function(e,t){x.unsubscribe(e,t)},this.isDocumentModified=i,this.setDocumentModified=function(t){i()!==t&&(g=t?new e:v.getNextStateId(),x.emit(gui.UndoManager.signalDocumentModifiedChanged,t))},this.hasUndoStates=function(){
return 0<w.length},this.hasRedoStates=function(){return 0<C.length},this.setDocument=function(e){m=e},this.purgeInitialState=function(){var e=i();w.length=0,C.length=0,v=f=new t(S),g=v.getNextStateId(),h=null,o(),s(e)},this.setInitialState=d,this.initialize=function(){h||d()},this.setPlaybackFunction=function(e){p=e},this.onOperationExecuted=function(e){if(!A){var n=i();S.isEditOperation(e)&&(v===f||0<C.length)||!S.isPartOfOperationSet(e,v.getOperations())?(C.length=0,a(),v=new t(S,[e],!0),w.push(v),x.emit(gui.UndoManager.signalUndoStateCreated,{operations:v.getOperations()}),o()):(v.addOperation(e),x.emit(gui.UndoManager.signalUndoStateModified,{operations:v.getOperations()})),s(n)}},this.moveForward=function(e){for(var t,n=0,a=i();e&&C.length;)t=C.pop(),w.push(t),r(t),--e,n+=1;return n&&(v=w[w.length-1],o(),s(a)),n},this.moveBackward=function(e){for(var t=0,n=i();e&&w.length;)C.push(w.pop()),--e,t+=1;return t&&(m.getMemberIds().forEach(function(e){m.hasCursor(e)&&m.removeCursor(e)}),m.setDocumentElement(h.cloneNode(!0)),x.emit(gui.TrivialUndoManager.signalDocumentRootReplaced,{}),r(f),w.forEach(r),v=w[w.length-1]||f,o(),s(n)),t},v=f=new t(S),g=v.getNextStateId()},gui.TrivialUndoManager.signalDocumentRootReplaced="documentRootReplaced"}(),odf.GraphicProperties=function(e,t,n){var i=this,r=odf.Namespaces.stylens,o=odf.Namespaces.svgns;this.verticalPos=function(){return i.data.value("verticalPos")},this.verticalRel=function(){return i.data.value("verticalRel")},this.horizontalPos=function(){return i.data.value("horizontalPos")},this.horizontalRel=function(){return i.data.value("horizontalRel")},this.strokeWidth=function(){return i.data.value("strokeWidth")},i.data=new odf.LazyStyleProperties(void 0===n?void 0:n.data,{verticalPos:function(){var t=e.getAttributeNS(r,"vertical-pos");return""===t?void 0:t},verticalRel:function(){var t=e.getAttributeNS(r,"vertical-rel");return""===t?void 0:t},horizontalPos:function(){var t=e.getAttributeNS(r,"horizontal-pos");return""===t?void 0:t},horizontalRel:function(){var t=e.getAttributeNS(r,"horizontal-rel");return""===t?void 0:t},strokeWidth:function(){var n=e.getAttributeNS(o,"stroke-width");return t.parseLength(n)}})},odf.ComputedGraphicProperties=function(){var e;this.setGraphicProperties=function(t){e=t},this.verticalPos=function(){return e&&e.verticalPos()||"from-top"},this.verticalRel=function(){return e&&e.verticalRel()||"page"},this.horizontalPos=function(){return e&&e.horizontalPos()||"from-left"},this.horizontalRel=function(){return e&&e.horizontalRel()||"page"}},odf.PageLayoutProperties=function(e,t,n){var i=this,r=odf.Namespaces.fons;this.pageHeight=function(){return i.data.value("pageHeight")||1123},this.pageWidth=function(){return i.data.value("pageWidth")||794},i.data=new odf.LazyStyleProperties(void 0===n?void 0:n.data,{pageHeight:function(){var n;return e&&(n=e.getAttributeNS(r,"page-height"),n=t.parseLength(n)),n},pageWidth:function(){var n;return e&&(n=e.getAttributeNS(r,"page-width"),n=t.parseLength(n)),n}})},odf.PageLayout=function(e,t,n){var i=null;e&&(i=t.getPropertiesElement("page-layout-properties",e)),this.pageLayout=new odf.PageLayoutProperties(i,t,n&&n.pageLayout)},odf.PageLayoutCache=function(){},odf.PageLayoutCache.prototype.getPageLayout=function(e){},odf.PageLayoutCache.prototype.getDefaultPageLayout=function(){},odf.ParagraphProperties=function(e,t,n){var i=this,r=odf.Namespaces.fons;this.marginTop=function(){return i.data.value("marginTop")},i.data=new odf.LazyStyleProperties(void 0===n?void 0:n.data,{marginTop:function(){var i=e.getAttributeNS(r,"margin-top");return t.parsePositiveLengthOrPercent(i,"marginTop",n&&n.data)}})},odf.ComputedParagraphProperties=function(){var e={},t=[];this.setStyleChain=function(n){t=n,e={}},this.marginTop=function(){var n,i;if(e.hasOwnProperty("marginTop"))n=e.marginTop;else{for(i=0;void 0===n&&i<t.length;i+=1)n=t[i].marginTop();e.marginTop=n}return n||0}},odf.TextProperties=function(e,t,n){var i=this,r=odf.Namespaces.fons;this.fontSize=function(){return i.data.value("fontSize")},i.data=new odf.LazyStyleProperties(void 0===n?void 0:n.data,{fontSize:function(){var i=e.getAttributeNS(r,"font-size");return t.parsePositiveLengthOrPercent(i,"fontSize",n&&n.data)}})},odf.ComputedTextProperties=function(){var e={},t=[];this.setStyleChain=function(n){t=n,e={}},this.fontSize=function(){var n,i;if(e.hasOwnProperty("fontSize"))n=e.fontSize;else{for(i=0;void 0===n&&i<t.length;i+=1)n=t[i].fontSize();e.fontSize=n}return n||12}},odf.MasterPage=function(e,t){var n;e?(n=e.getAttributeNS(odf.Namespaces.stylens,"page-layout-name"),this.pageLayout=t.getPageLayout(n)):this.pageLayout=t.getDefaultPageLayout()},odf.MasterPageCache=function(){},odf.MasterPageCache.prototype.getMasterPage=function(e){},odf.StylePileEntry=function(e,t,n,i){this.masterPage=function(){var t=e.getAttributeNS(odf.Namespaces.stylens,"master-page-name"),i=null;return t&&(i=n.getMasterPage(t)),i},function(n){var r=e.getAttributeNS(odf.Namespaces.stylens,"family"),o=null;("graphic"===r||"chart"===r)&&(n.graphic=void 0===i?void 0:i.graphic,o=t.getPropertiesElement("graphic-properties",e,o),null!==o&&(n.graphic=new odf.GraphicProperties(o,t,n.graphic))),("paragraph"===r||"table-cell"===r||"graphic"===r||"presentation"===r||"chart"===r)&&(n.paragraph=void 0===i?void 0:i.paragraph,o=t.getPropertiesElement("paragraph-properties",e,o),null!==o&&(n.paragraph=new odf.ParagraphProperties(o,t,n.paragraph))),("text"===r||"paragraph"===r||"table-cell"===r||"graphic"===r||"presentation"===r||"chart"===r)&&(n.text=void 0===i?void 0:i.text,o=t.getPropertiesElement("text-properties",e,o),null!==o&&(n.text=new odf.TextProperties(o,t,n.text)))}(this)},odf.StylePile=function(e,t){function n(n,i){var s,a;return n.hasAttributeNS(o,"parent-style-name")&&(a=n.getAttributeNS(o,"parent-style-name"),-1===i.indexOf(a)&&(s=r(a,i))),new odf.StylePileEntry(n,e,t,s)}var i,r,o=odf.Namespaces.stylens,s={},a={},l={},u={};r=function(e,t){var i,r=l[e];return!r&&(i=s[e])&&(t.push(e),r=n(i,t),l[e]=r),r},this.getStyle=function(e){var t,i=u[e]||l[e],r=[];return i||(t=a[e],t||(t=s[e])&&r.push(e),t&&(i=n(t,r))),i},this.addCommonStyle=function(e){var t;e.hasAttributeNS(o,"name")&&(t=e.getAttributeNS(o,"name"),s.hasOwnProperty(t)||(s[t]=e))},this.addAutomaticStyle=function(e){var t;e.hasAttributeNS(o,"name")&&(t=e.getAttributeNS(o,"name"),a.hasOwnProperty(t)||(a[t]=e))},this.setDefaultStyle=function(e){void 0===i&&(i=n(e,[]))},this.getDefaultStyle=function(){return i}},odf.ComputedGraphicStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties,this.graphic=new odf.ComputedGraphicProperties},odf.ComputedParagraphStyle=function(){this.text=new odf.ComputedTextProperties,this.paragraph=new odf.ComputedParagraphProperties},odf.ComputedTextStyle=function(){this.text=new odf.ComputedTextProperties},odf.StyleCache=function(e){function t(e,t,n,i){t=n.getAttributeNS(t,"class-names");var r;if(t)for(t=t.split(" "),r=0;r<t.length;r+=1)(n=t[r])&&(i.push(e),i.push(n))}function n(e,n){var i=x.getStyleName("paragraph",e);return void 0!==i&&(n.push("paragraph"),n.push(i)),e.namespaceURI!==w||"h"!==e.localName&&"p"!==e.localName||t("paragraph",w,e,n),n}function i(e,t,n){var i,r,o,a,l=[];for(i=0;i<e.length;i+=2)o=e[i],a=e[i+1],o=s[o],a=o.getStyle(a),void 0!==a&&(a=a[t],void 0!==a&&a!==r&&(l.push(a),r=a));return o=s[n],(a=o.getDefaultStyle())&&(a=a[t],void 0!==a&&a!==r&&l.push(a)),l}function r(i,o){var s=x.getStyleName("text",i),a=i.parentNode;return void 0!==s&&(o.push("text"),o.push(s)),"span"===i.localName&&i.namespaceURI===w&&t("text",w,i,o),a&&a!==e?(a.namespaceURI!==w||"p"!==a.localName&&"h"!==a.localName?r(a,o):n(a,o),o):o}function o(e){return e=e.getAttributeNS(C,"family"),s[e]}var s,a,l,u,c,d,h,f,p,m,g,v,y,b=this,w=odf.Namespaces.textns,C=odf.Namespaces.stylens,x=new odf.StyleInfo,S=new odf.StyleParseUtils;this.getComputedGraphicStyle=function(e){var t=[];e=x.getStyleName("graphic",e),void 0!==e&&(t.push("graphic"),t.push(e)),e=t.join("/");var n=u[e];return runtime.assert(0===t.length%2,"Invalid style chain."),void 0===n&&(n=new odf.ComputedGraphicStyle,n.graphic.setGraphicProperties(i(t,"graphic","graphic")[0]),n.text.setStyleChain(i(t,"text","graphic")),n.paragraph.setStyleChain(i(t,"paragraph","graphic")),u[e]=n),n},this.getComputedParagraphStyle=function(e){e=n(e,[]);var t=e.join("/"),r=l[t];return runtime.assert(0===e.length%2,"Invalid style chain."),void 0===r&&(r=new odf.ComputedParagraphStyle,r.text.setStyleChain(i(e,"text","paragraph")),r.paragraph.setStyleChain(i(e,"paragraph","paragraph")),l[t]=r),r},this.getComputedTextStyle=function(e){e=r(e,[]);var t=e.join("/"),n=a[t];return runtime.assert(0===e.length%2,"Invalid style chain."),void 0===n&&(n=new odf.ComputedTextStyle,n.text.setStyleChain(i(e,"text","text")),a[t]=n),n},this.getPageLayout=function(e){var t=y[e];return t||((t=v[e])?(t=new odf.PageLayout(t,S,g),y[e]=t):t=g),t},this.getDefaultPageLayout=function(){return g},this.getMasterPage=function(e){var t=p[e];return void 0===t&&((t=f[e])?(t=new odf.MasterPage(t,b),p[e]=t):t=null),t},this.getDefaultMasterPage=function(){return m},this.update=function(){var t,n,i=null,r=null;for(a={},l={},u={},f={},p={},y={},v={},c=new odf.StylePile(S,b),d=new odf.StylePile(S,b),h=new odf.StylePile(S,b),s={text:c,paragraph:d,graphic:h},t=e.styles.firstElementChild;t;)t.namespaceURI===C&&((n=o(t))?"style"===t.localName?n.addCommonStyle(t):"default-style"===t.localName&&n.setDefaultStyle(t):"default-page-layout"===t.localName&&(i=t)),t=t.nextElementSibling;for(g=new odf.PageLayout(i,S),t=e.automaticStyles.firstElementChild;t;)t.namespaceURI===C&&((n=o(t))&&"style"===t.localName?n.addAutomaticStyle(t):"page-layout"===t.localName&&(v[t.getAttributeNS(C,"name")]=t)),t=t.nextElementSibling;for(t=e.masterStyles.firstElementChild;t;)t.namespaceURI===C&&"master-page"===t.localName&&(r=r||t,n=t,i=n.getAttributeNS(C,"name"),0<i.length&&!f.hasOwnProperty(i)&&(f[i]=n)),t=t.nextElementSibling;m=new odf.MasterPage(r,b)}},ops.OperationTransformMatrix=function(){function e(e){e.position+=e.length,e.length*=-1}function t(t){var n=0>t.length;return n&&e(t),n}function n(e,t){function n(n){e[n]===t&&i.push(n)}var i=[];return e&&["style:parent-style-name","style:next-style-name"].forEach(n),i}function i(e,t){function n(n){e[n]===t&&delete e[n]}e&&["style:parent-style-name","style:next-style-name"].forEach(n)}function r(e){var t={};return Object.keys(e).forEach(function(n){t[n]="object"==typeof e[n]?r(e[n]):e[n]}),t}function o(e,t,n,i){var r,o,s=!1,a=!1,l=[];if(i&&i.attributes&&(l=i.attributes.split(",")),e&&(n||0<l.length)&&Object.keys(e).forEach(function(t){var i,r=e[t];"object"!=typeof r&&(n&&(i=n[t]),void 0!==i?(delete e[t],a=!0,i===r&&(delete n[t],s=!0)):-1!==l.indexOf(t)&&(delete e[t],a=!0))}),t&&t.attributes&&(n||0<l.length)){for(o=t.attributes.split(","),i=0;i<o.length;i+=1)r=o[i],(n&&void 0!==n[r]||l&&-1!==l.indexOf(r))&&(o.splice(i,1),--i,a=!0);0<o.length?t.attributes=o.join(","):delete t.attributes}return{majorChanged:s,minorChanged:a}}function s(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}function a(e){for(var t in e)if(e.hasOwnProperty(t)&&("attributes"!==t||0<e.attributes.length))return!0;return!1}function l(e,t,n,i,r){var l,u=e?e[r]:null,c=t?t[r]:null,d=n?n[r]:null,h=i?i[r]:null;return l=o(u,c,d,h),u&&!s(u)&&delete e[r],c&&!a(c)&&delete t[r],d&&!s(d)&&delete n[r],h&&!a(h)&&delete i[r],l}function u(e,t){return{opSpecsA:[e],opSpecsB:[t]}}var c;c={AddAnnotation:{AddAnnotation:function(e,t,n){var i;return e.position<t.position?(i=e,n=t):t.position<e.position?(i=t,n=e):(i=n?e:t,n=n?t:e),n.position<i.position+i.length&&(i.length+=2),n.position+=2,{opSpecsA:[e],opSpecsB:[t]}},AddCursor:u,AddMember:u,AddStyle:u,ApplyDirectStyling:function(e,t){return e.position<=t.position?t.position+=2:e.position<=t.position+t.length&&(t.length+=2),{opSpecsA:[e],opSpecsB:[t]}},InsertText:function(e,t){return t.position<=e.position?e.position+=t.text.length:(void 0!==e.length&&t.position<=e.position+e.length&&(e.length+=t.text.length),t.position+=2),{opSpecsA:[e],opSpecsB:[t]}},MergeParagraph:function(e,t){return t.sourceStartPosition<=e.position?--e.position:(void 0!==e.length&&t.sourceStartPosition<=e.position+e.length&&--e.length,t.sourceStartPosition+=2,e.position<t.destinationStartPosition&&(t.destinationStartPosition+=2)),{opSpecsA:[e],opSpecsB:[t]}},MoveCursor:function(n,i){var r=t(i);return n.position<i.position?i.position+=2:n.position<i.position+i.length&&(i.length+=2),r&&e(i),{opSpecsA:[n],opSpecsB:[i]}},RemoveAnnotation:function(e,t){return e.position<t.position?(t.position<e.position+e.length&&(e.length-=t.length+2),t.position+=2):e.position-=t.length+2,{opSpecsA:[e],opSpecsB:[t]}},RemoveCursor:u,RemoveMember:u,RemoveStyle:u,RemoveText:function(e,t){var n,i=t.position,r=t.position+t.length,o=[e],s=[t];return e.position<=t.position?t.position+=2:e.position<r&&(t.length=e.position-t.position,n={optype:"RemoveText",memberid:t.memberid,timestamp:t.timestamp,position:e.position+2,length:r-e.position},s.unshift(n)),t.position+t.length<=e.position?(e.position-=t.length,void 0!==e.length&&n&&(e.length=n.length>=e.length?0:e.length-n.length)):void 0!==e.length&&(n=e.position+e.length,n>=r?e.length-=t.length:n>i&&(e.length=i-e.position)),{opSpecsA:o,opSpecsB:s}},SetParagraphStyle:function(e,t){return e.position<t.position&&(t.position+=2),{opSpecsA:[e],opSpecsB:[t]}},SplitParagraph:function(e,t){return e.position<t.sourceParagraphPosition&&(t.sourceParagraphPosition+=2),t.position<=e.position?e.position+=1:(void 0!==e.length&&t.position<=e.position+e.length&&(e.length+=1),t.position+=2),{opSpecsA:[e],opSpecsB:[t]}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},AddCursor:{AddCursor:u,AddMember:u,AddStyle:u,ApplyDirectStyling:u,InsertText:u,MergeParagraph:u,MoveCursor:u,RemoveAnnotation:u,RemoveCursor:u,RemoveMember:u,RemoveStyle:u,RemoveText:u,SetParagraphStyle:u,SplitParagraph:u,UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},AddMember:{AddStyle:u,ApplyDirectStyling:u,InsertText:u,MergeParagraph:u,MoveCursor:u,RemoveAnnotation:u,RemoveCursor:u,RemoveStyle:u,RemoveText:u,SetParagraphStyle:u,SplitParagraph:u,UpdateMetadata:u,UpdateParagraphStyle:u},AddStyle:{AddStyle:u,ApplyDirectStyling:u,InsertText:u,MergeParagraph:u,MoveCursor:u,RemoveAnnotation:u,RemoveCursor:u,RemoveMember:u,RemoveStyle:function(e,t){var r,o=[e],s=[t];return e.styleFamily===t.styleFamily&&(r=n(e.setProperties,t.styleName),0<r.length&&(r={optype:"UpdateParagraphStyle",memberid:t.memberid,timestamp:t.timestamp,styleName:e.styleName,removedProperties:{attributes:r.join(",")}},s.unshift(r)),i(e.setProperties,t.styleName)),{opSpecsA:o,opSpecsB:s}},RemoveText:u,SetParagraphStyle:u,SplitParagraph:u,UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},ApplyDirectStyling:{ApplyDirectStyling:function(e,t,n){var i,o,a,u,c,d,h,f;return u=[e],a=[t],e.position+e.length<=t.position||e.position>=t.position+t.length||(i=n?e:t,o=n?t:e,(e.position!==t.position||e.length!==t.length)&&(d=r(i),h=r(o)),t=l(o.setProperties,null,i.setProperties,null,"style:text-properties"),(t.majorChanged||t.minorChanged)&&(a=[],e=[],u=i.position+i.length,c=o.position+o.length,o.position<i.position?t.minorChanged&&(f=r(h),f.length=i.position-o.position,e.push(f),o.position=i.position,o.length=c-o.position):i.position<o.position&&t.majorChanged&&(f=r(d),f.length=o.position-i.position,a.push(f),i.position=o.position,i.length=u-i.position),c>u?t.minorChanged&&(d=h,d.position=u,d.length=c-u,e.push(d),o.length=u-o.position):u>c&&t.majorChanged&&(d.position=c,d.length=u-c,a.push(d),i.length=c-i.position),i.setProperties&&s(i.setProperties)&&a.push(i),o.setProperties&&s(o.setProperties)&&e.push(o),n?(u=a,a=e):u=e)),{opSpecsA:u,opSpecsB:a}},InsertText:function(e,t){return t.position<=e.position?e.position+=t.text.length:t.position<=e.position+e.length&&(e.length+=t.text.length),{opSpecsA:[e],opSpecsB:[t]}},MergeParagraph:function(e,t){var n=e.position,i=e.position+e.length;return n>=t.sourceStartPosition&&--n,i>=t.sourceStartPosition&&--i,e.position=n,e.length=i-n,{opSpecsA:[e],opSpecsB:[t]}},MoveCursor:u,RemoveAnnotation:function(e,t){var n=e.position,i=e.position+e.length,r=t.position+t.length,o=[e],s=[t];return t.position<=n&&r>=i?o=[]:(n>r&&(n-=t.length+2),i>r&&(i-=t.length+2),e.position=n,e.length=i-n),{opSpecsA:o,opSpecsB:s}},RemoveCursor:u,RemoveMember:u,RemoveStyle:u,RemoveText:function(e,t){var n=e.position+e.length,i=t.position+t.length,r=[e],o=[t];return i<=e.position?e.position-=t.length:t.position<n&&(e.position<t.position?e.length=n>i?e.length-t.length:t.position-e.position:(e.position=t.position,n>i?e.length=n-i:r=[])),{opSpecsA:r,opSpecsB:o}},SetParagraphStyle:u,SplitParagraph:function(e,t){return t.position<e.position?e.position+=1:t.position<e.position+e.length&&(e.length+=1),{opSpecsA:[e],opSpecsB:[t]}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},InsertText:{InsertText:function(e,t,n){return e.position<t.position?t.position+=e.text.length:e.position>t.position?e.position+=t.text.length:n?t.position+=e.text.length:e.position+=t.text.length,{opSpecsA:[e],opSpecsB:[t]}},MergeParagraph:function(e,t){return e.position>=t.sourceStartPosition?--e.position:(e.position<t.sourceStartPosition&&(t.sourceStartPosition+=e.text.length),e.position<t.destinationStartPosition&&(t.destinationStartPosition+=e.text.length)),{opSpecsA:[e],opSpecsB:[t]}},MoveCursor:function(n,i){var r=t(i);return n.position<i.position?i.position+=n.text.length:n.position<i.position+i.length&&(i.length+=n.text.length),r&&e(i),{opSpecsA:[n],opSpecsB:[i]}},RemoveAnnotation:function(e,t){var n=e.position,i=t.position+t.length,r=[e],o=[t];return t.position<=n&&i>=n?(r=[],t.length+=e.text.length):i<e.position?e.position-=t.length+2:t.position+=e.text.length,{opSpecsA:r,opSpecsB:o}},RemoveCursor:u,RemoveMember:u,RemoveStyle:u,RemoveText:function(e,t){var n;n=t.position+t.length;var i=[e],r=[t];return n<=e.position?e.position-=t.length:e.position<=t.position?t.position+=e.text.length:(t.length=e.position-t.position,n={optype:"RemoveText",memberid:t.memberid,timestamp:t.timestamp,position:e.position+e.text.length,length:n-e.position},r.unshift(n),e.position=t.position),{opSpecsA:i,opSpecsB:r}},SetParagraphStyle:function(e,t){return t.position>e.position&&(t.position+=e.text.length),{opSpecsA:[e],opSpecsB:[t]}},SplitParagraph:function(e,t){return e.position<t.sourceParagraphPosition&&(t.sourceParagraphPosition+=e.text.length),e.position<=t.position?t.position+=e.text.length:e.position+=1,{opSpecsA:[e],opSpecsB:[t]}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},MergeParagraph:{MergeParagraph:function(e,t,n){var i,r=[e],o=[t];return e.destinationStartPosition===t.destinationStartPosition?(r=[],o=[],e.moveCursor&&(i={optype:"MoveCursor",memberid:e.memberid,timestamp:e.timestamp,position:e.sourceStartPosition-1},r.push(i)),t.moveCursor&&(i={optype:"MoveCursor",memberid:t.memberid,timestamp:t.timestamp,position:t.sourceStartPosition-1},o.push(i)),e=n?e:t,e={optype:"SetParagraphStyle",memberid:e.memberid,timestamp:e.timestamp,position:e.destinationStartPosition,styleName:e.paragraphStyleName},n?r.push(e):o.push(e)):t.sourceStartPosition===e.destinationStartPosition?(e.destinationStartPosition=t.destinationStartPosition,--e.sourceStartPosition,e.paragraphStyleName=t.paragraphStyleName):e.sourceStartPosition===t.destinationStartPosition?(t.destinationStartPosition=e.destinationStartPosition,--t.sourceStartPosition,t.paragraphStyleName=e.paragraphStyleName):e.destinationStartPosition<t.destinationStartPosition?(--t.destinationStartPosition,--t.sourceStartPosition):(--e.destinationStartPosition,--e.sourceStartPosition),{opSpecsA:r,opSpecsB:o}},MoveCursor:function(e,t){var n=t.position,i=t.position+t.length,r=Math.min(n,i),n=Math.max(n,i);return r>=e.sourceStartPosition&&--r,n>=e.sourceStartPosition&&--n,0<=t.length?(t.position=r,t.length=n-r):(t.position=n,t.length=r-n),{opSpecsA:[e],opSpecsB:[t]}},RemoveAnnotation:function(e,t){var n=t.position+t.length,i=[e],r=[t];return t.position<=e.destinationStartPosition&&e.sourceStartPosition<=n?(i=[],--t.length):e.sourceStartPosition<t.position?--t.position:(n<e.destinationStartPosition&&(e.destinationStartPosition-=t.length+2),n<e.sourceStartPosition&&(e.sourceStartPosition-=t.length+2)),{opSpecsA:i,opSpecsB:r}},RemoveCursor:u,RemoveMember:u,RemoveStyle:u,RemoveText:function(e,t){return t.position>=e.sourceStartPosition?--t.position:(t.position<e.destinationStartPosition&&(e.destinationStartPosition-=t.length),t.position<e.sourceStartPosition&&(e.sourceStartPosition-=t.length)),{opSpecsA:[e],opSpecsB:[t]}},SetParagraphStyle:function(e,t){var n=[e],i=[t];return t.position>e.sourceStartPosition?--t.position:(t.position===e.destinationStartPosition||t.position===e.sourceStartPosition)&&(t.position=e.destinationStartPosition,e.paragraphStyleName=t.styleName),{opSpecsA:n,opSpecsB:i}},SplitParagraph:function(e,t){var n,i=[e],r=[t];return t.position<e.destinationStartPosition?(e.destinationStartPosition+=1,e.sourceStartPosition+=1):t.position>=e.destinationStartPosition&&t.position<e.sourceStartPosition?(t.paragraphStyleName=e.paragraphStyleName,n={optype:"SetParagraphStyle",memberid:e.memberid,timestamp:e.timestamp,position:e.destinationStartPosition,styleName:e.paragraphStyleName},i.push(n),t.position===e.sourceStartPosition-1&&e.moveCursor&&(n={optype:"MoveCursor",memberid:e.memberid,timestamp:e.timestamp,position:t.position,length:0},i.push(n)),e.destinationStartPosition=t.position+1,e.sourceStartPosition+=1):t.position>=e.sourceStartPosition&&(--t.position,--t.sourceParagraphPosition),{opSpecsA:i,opSpecsB:r}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},MoveCursor:{MoveCursor:u,RemoveAnnotation:function(n,i){var r=t(n),o=n.position+n.length,s=i.position+i.length;return i.position<=n.position&&s>=o?(n.position=i.position-1,n.length=0):(s<n.position?n.position-=i.length+2:o>s&&(n.length-=i.length+2),r&&e(n)),{opSpecsA:[n],opSpecsB:[i]}},RemoveCursor:function(e,t){return{opSpecsA:e.memberid===t.memberid?[]:[e],opSpecsB:[t]}},RemoveMember:u,RemoveStyle:u,RemoveText:function(n,i){var r=t(n),o=n.position+n.length,s=i.position+i.length;return s<=n.position?n.position-=i.length:i.position<o&&(n.position<i.position?n.length=o>s?n.length-i.length:i.position-n.position:(n.position=i.position,n.length=o>s?o-s:0)),r&&e(n),{opSpecsA:[n],opSpecsB:[i]}},SetParagraphStyle:u,SplitParagraph:function(n,i){var r=t(n);return i.position<n.position?n.position+=1:i.position<n.position+n.length&&(n.length+=1),r&&e(n),{opSpecsA:[n],opSpecsB:[i]}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},RemoveAnnotation:{RemoveAnnotation:function(e,t){var n=[e],i=[t];return e.position===t.position&&e.length===t.length?(n=[],i=[]):e.position<t.position?t.position-=e.length+2:e.position-=t.length+2,{opSpecsA:n,opSpecsB:i}},RemoveCursor:u,RemoveMember:u,RemoveStyle:u,RemoveText:function(e,t){var n=e.position+e.length,i=t.position+t.length,r=[e],o=[t];return e.position<=t.position&&n>=i?(o=[],e.length-=t.length):i<e.position?e.position-=t.length:t.position<e.position?(e.position=t.position+1,t.length-=e.length+2):t.position-=e.length+2,{opSpecsA:r,opSpecsB:o}},SetParagraphStyle:function(e,t){var n=t.position,i=e.position+e.length,r=[e],o=[t];return e.position<=n&&i>=n?o=[]:n>i&&(t.position-=e.length+2),{opSpecsA:r,opSpecsB:o}},SplitParagraph:function(e,t){var n=t.position,i=e.position+e.length,r=[e],o=[t];return e.position<=n&&i>=n?(o=[],e.length+=1):(i<t.sourceParagraphPosition&&(t.sourceParagraphPosition-=e.length+2),n>i?t.position-=e.length+2:e.position+=1),{opSpecsA:r,opSpecsB:o}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},RemoveCursor:{RemoveCursor:function(e,t){var n=e.memberid===t.memberid;return{opSpecsA:n?[]:[e],opSpecsB:n?[]:[t]}},RemoveMember:u,RemoveStyle:u,RemoveText:u,SetParagraphStyle:u,SplitParagraph:u,UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},RemoveMember:{RemoveStyle:u,RemoveText:u,SetParagraphStyle:u,SplitParagraph:u,UpdateMetadata:u,UpdateParagraphStyle:u},RemoveStyle:{RemoveStyle:function(e,t){var n=e.styleName===t.styleName&&e.styleFamily===t.styleFamily;return{opSpecsA:n?[]:[e],opSpecsB:n?[]:[t]}},RemoveText:u,SetParagraphStyle:function(e,t){var n,i=[e],r=[t];return"paragraph"===e.styleFamily&&e.styleName===t.styleName&&(n={optype:"SetParagraphStyle",memberid:e.memberid,timestamp:e.timestamp,position:t.position,styleName:""},i.unshift(n),t.styleName=""),{opSpecsA:i,opSpecsB:r}},SplitParagraph:u,UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:function(e,t){var r,o=[e],s=[t];return"paragraph"===e.styleFamily&&(r=n(t.setProperties,e.styleName),0<r.length&&(r={optype:"UpdateParagraphStyle",memberid:e.memberid,timestamp:e.timestamp,styleName:t.styleName,removedProperties:{attributes:r.join(",")}},o.unshift(r)),e.styleName===t.styleName?s=[]:i(t.setProperties,e.styleName)),{opSpecsA:o,opSpecsB:s}}},RemoveText:{RemoveText:function(e,t){var n=e.position+e.length,i=t.position+t.length,r=[e],o=[t];return i<=e.position?e.position-=t.length:n<=t.position?t.position-=e.length:t.position<n&&(e.position<t.position?(e.length=n>i?e.length-t.length:t.position-e.position,i>n?(t.position=e.position,t.length=i-n):o=[]):(i>n?t.length-=e.length:t.position<e.position?t.length=e.position-t.position:o=[],n>i?(e.position=t.position,e.length=n-i):r=[])),{opSpecsA:r,opSpecsB:o}},SetParagraphStyle:function(e,t){return e.position<t.position&&(t.position-=e.length),{opSpecsA:[e],opSpecsB:[t]}},SplitParagraph:function(e,t){var n=e.position+e.length,i=[e],r=[t];return t.position<=e.position?e.position+=1:t.position<n&&(e.length=t.position-e.position,n={optype:"RemoveText",memberid:e.memberid,timestamp:e.timestamp,position:t.position+1,length:n-t.position},i.unshift(n)),e.position+e.length<=t.position?t.position-=e.length:e.position<t.position&&(t.position=e.position),e.position+e.length<t.sourceParagraphPosition&&(t.sourceParagraphPosition-=e.length),{opSpecsA:i,opSpecsB:r}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},SetParagraphStyle:{SetParagraphStyle:function(e,t,n){return e.position===t.position&&(n?t.styleName=e.styleName:e.styleName=t.styleName),{opSpecsA:[e],opSpecsB:[t]}},SplitParagraph:function(e,t){var n,i=[e],o=[t];return e.position>t.position?e.position+=1:e.position===t.sourceParagraphPosition&&(t.paragraphStyleName=e.styleName,n=r(e),n.position=t.position+1,i.push(n)),{opSpecsA:i,opSpecsB:o}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},SplitParagraph:{SplitParagraph:function(e,t,n){var i,r;return e.position<t.position?i=!0:t.position<e.position?r=!0:e.position===t.position&&(n?i=!0:r=!0),i?(t.position+=1,t.sourceParagraphPosition=e.position<t.sourceParagraphPosition?t.sourceParagraphPosition+1:e.position+1):r&&(e.position+=1,e.sourceParagraphPosition=t.position<t.sourceParagraphPosition?e.sourceParagraphPosition+1:t.position+1),{opSpecsA:[e],opSpecsB:[t]}},UpdateMember:u,UpdateMetadata:u,UpdateParagraphStyle:u},UpdateMember:{UpdateMetadata:u,UpdateParagraphStyle:u},UpdateMetadata:{UpdateMetadata:function(e,t,n){var i,r=[e],l=[t];return i=n?e:t,e=n?t:e,o(e.setProperties||null,e.removedProperties||null,i.setProperties||null,i.removedProperties||null),i.setProperties&&s(i.setProperties)||i.removedProperties&&a(i.removedProperties)||(n?r=[]:l=[]),e.setProperties&&s(e.setProperties)||e.removedProperties&&a(e.removedProperties)||(n?l=[]:r=[]),{opSpecsA:r,opSpecsB:l}},UpdateParagraphStyle:u},UpdateParagraphStyle:{UpdateParagraphStyle:function(e,t,n){var i,r=[e],u=[t];return e.styleName===t.styleName&&(i=n?e:t,e=n?t:e,l(e.setProperties,e.removedProperties,i.setProperties,i.removedProperties,"style:paragraph-properties"),l(e.setProperties,e.removedProperties,i.setProperties,i.removedProperties,"style:text-properties"),o(e.setProperties||null,e.removedProperties||null,i.setProperties||null,i.removedProperties||null),i.setProperties&&s(i.setProperties)||i.removedProperties&&a(i.removedProperties)||(n?r=[]:u=[]),e.setProperties&&s(e.setProperties)||e.removedProperties&&a(e.removedProperties)||(n?u=[]:r=[])),{opSpecsA:r,opSpecsB:u}}}},this.passUnchanged=u,this.extendTransformations=function(e){Object.keys(e).forEach(function(t){var n,i=e[t],r=c.hasOwnProperty(t);runtime.log((r?"Extending":"Adding")+" map for optypeA: "+t),r||(c[t]={}),n=c[t],Object.keys(i).forEach(function(e){var r=n.hasOwnProperty(e);runtime.assert(e>=t,"Wrong order:"+t+", "+e),runtime.log("  "+(r?"Overwriting":"Adding")+" entry for optypeB: "+e),n[e]=i[e]})})},this.transformOpspecVsOpspec=function(e,t){var n,i=e.optype<=t.optype;return runtime.log("Crosstransforming:"),runtime.log(runtime.toJson(e)),runtime.log(runtime.toJson(t)),i||(n=e,e=t,t=n),(n=(n=c[e.optype])&&n[t.optype])?(n=n(e,t,!i),i||null===n||(n={opSpecsA:n.opSpecsB,opSpecsB:n.opSpecsA})):n=null,runtime.log("result:"),n?(runtime.log(runtime.toJson(n.opSpecsA)),runtime.log(runtime.toJson(n.opSpecsB))):runtime.log("null"),n}},ops.OperationTransformer=function(){function e(n,i){for(var r,o,s=[],a=[];0<n.length&&i;){if(r=n.shift(),r=t.transformOpspecVsOpspec(r,i),!r)return null;if(s=s.concat(r.opSpecsA),0===r.opSpecsB.length){s=s.concat(n),i=null;break}for(;1<r.opSpecsB.length;){if(o=e(n,r.opSpecsB.shift()),!o)return null;a=a.concat(o.opSpecsB),n=o.opSpecsA}i=r.opSpecsB.pop()}return i&&a.push(i),{opSpecsA:s,opSpecsB:a}}var t=new ops.OperationTransformMatrix;this.getOperationTransformMatrix=function(){return t},this.transform=function(t,n){for(var i,r=[];0<n.length;){if(i=e(t,n.shift()),!i)return null;t=i.opSpecsA,r=r.concat(i.opSpecsB)}return{opSpecsA:t,opSpecsB:r}}};var webodf_css='@namespace draw url(urn:oasis:names:tc:opendocument:xmlns:drawing:1.0);@namespace fo url(urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0);@namespace office url(urn:oasis:names:tc:opendocument:xmlns:office:1.0);@namespace presentation url(urn:oasis:names:tc:opendocument:xmlns:presentation:1.0);@namespace style url(urn:oasis:names:tc:opendocument:xmlns:style:1.0);@namespace svg url(urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0);@namespace table url(urn:oasis:names:tc:opendocument:xmlns:table:1.0);@namespace text url(urn:oasis:names:tc:opendocument:xmlns:text:1.0);@namespace webodfhelper url(urn:webodf:names:helper);@namespace cursor url(urn:webodf:names:cursor);@namespace editinfo url(urn:webodf:names:editinfo);@namespace annotation url(urn:webodf:names:annotation);@namespace dc url(http://purl.org/dc/elements/1.1/);@namespace svgns url(http://www.w3.org/2000/svg);office|document > *, office|document-content > * {display: none;}office|body, office|document {display: inline-block;position: relative;}text|p, text|h {display: block;padding: 0;margin: 0;line-height: normal;position: relative;}text|p::after, text|h::after {content: "\\200B";white-space: pre;}*[webodfhelper|containsparagraphanchor] {position: relative;}text|s {white-space: pre;}text|tab {display: inline;white-space: pre;}text|tracked-changes {display: none;}office|binary-data {display: none;}office|text {display: block;text-align: left;overflow: visible;word-wrap: break-word;}office|text::selection {background: transparent;}.webodf-virtualSelections *::selection {background: transparent;}.webodf-virtualSelections *::-moz-selection {background: transparent;}office|text * draw|text-box {display: block;border: 1px solid #d3d3d3;}office|text draw|frame {z-index: 1;}office|spreadsheet {display: block;border-collapse: collapse;empty-cells: show;font-family: sans-serif;font-size: 10pt;text-align: left;page-break-inside: avoid;overflow: hidden;}office|presentation {display: inline-block;text-align: left;}#shadowContent {display: inline-block;text-align: left;}draw|page {display: block;position: relative;overflow: hidden;}presentation|notes, presentation|footer-decl, presentation|date-time-decl {display: none;}@media print {draw|page {border: 1pt solid black;page-break-inside: avoid;}presentation|notes {}}office|spreadsheet text|p {border: 0px;padding: 1px;margin: 0px;}office|spreadsheet table|table {margin: 3px;}office|spreadsheet table|table:after {}office|spreadsheet table|table-row {counter-increment: row;}office|spreadsheet table|table-row:before {width: 3em;background: #cccccc;border: 1px solid black;text-align: center;content: counter(row);display: table-cell;}office|spreadsheet table|table-cell {border: 1px solid #cccccc;}table|table {display: table;}draw|frame table|table {width: 100%;height: 100%;background: white;}table|table-header-rows {display: table-header-group;}table|table-row {display: table-row;}table|table-column {display: table-column;}table|table-cell {width: 0.889in;display: table-cell;word-break: break-all;}draw|frame {display: block;}draw|image {display: block;width: 100%;height: 100%;top: 0px;left: 0px;background-repeat: no-repeat;background-size: 100% 100%;-moz-background-size: 100% 100%;}draw|frame > draw|image:nth-of-type(n+2) {display: none;}text|list:before {display: none;content:"";}text|list {display: block;}text|list-item {display: block;}text|number {display:none;}text|a {color: blue;text-decoration: underline;cursor: pointer;}.webodf-inactiveLinks text|a {cursor: text;}text|note-citation {vertical-align: super;font-size: smaller;}text|note-body {display: none;}text|note:hover text|note-citation {background: #dddddd;}text|note:hover text|note-body {display: block;left:1em;max-width: 80%;position: absolute;background: #ffffaa;}text|bibliography-source {display: none;}svg|title, svg|desc {display: none;}video {width: 100%;height: 100%}cursor|anchor {display: none;}cursor|cursor {display: none;}.webodf-caretOverlay {position: absolute;top: 5%;height: 1em;z-index: 10;padding-left: 1px;pointer-events: none;}.webodf-caretOverlay .caret {position: absolute;border-left: 2px solid black;top: 0;bottom: 0;right: 0;}.webodf-caretOverlay .handle {position: absolute;margin-top: 5px;padding-top: 3px;margin-left: auto;margin-right: auto;width: 64px;height: 68px;border-radius: 5px;opacity: 0.3;text-align: center;background-color: black;box-shadow: 0px 0px 5px rgb(90, 90, 90);border: 1px solid black;top: -85px;right: -32px;}.webodf-caretOverlay .handle > img {box-shadow: 0px 0px 5px rgb(90, 90, 90) inset;background-color: rgb(200, 200, 200);border-radius: 5px;border: 2px solid;height: 60px;width: 60px;display: block;margin: auto;}.webodf-caretOverlay .handle.active {opacity: 0.8;}.webodf-caretOverlay .handle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 43%;}.webodf-caretSizer {display: inline-block;width: 0;visibility: hidden;}#eventTrap {display: block;position: absolute;bottom: 0;left: 0;outline: none;opacity: 0;color: rgba(255, 255, 255, 0);pointer-events: none;white-space: pre;overflow: hidden;}cursor|cursor > #composer {text-decoration: underline;}cursor|cursor[cursor|caret-sizer-active="true"],cursor|cursor[cursor|composing="true"] {display: inline;}editinfo|editinfo {display: inline-block;}.editInfoMarker {position: absolute;width: 10px;height: 100%;left: -20px;opacity: 0.8;top: 0;border-radius: 5px;background-color: transparent;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);}.editInfoMarker:hover {box-shadow: 0px 0px 8px rgba(0, 0, 0, 1);}.editInfoHandle {position: absolute;background-color: black;padding: 5px;border-radius: 5px;opacity: 0.8;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);bottom: 100%;margin-bottom: 10px;z-index: 3;left: -25px;}.editInfoHandle:after {content: " ";position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: black transparent transparent transparent;top: 100%;left: 5px;}.editInfo {font-family: sans-serif;font-weight: normal;font-style: normal;text-decoration: none;color: white;width: 100%;height: 12pt;}.editInfoColor {float: left;width: 10pt;height: 10pt;border: 1px solid white;}.editInfoAuthor {float: left;margin-left: 5pt;font-size: 10pt;text-align: left;height: 12pt;line-height: 12pt;}.editInfoTime {float: right;margin-left: 30pt;font-size: 8pt;font-style: italic;color: yellow;height: 12pt;line-height: 12pt;}.annotationWrapper {display: inline;position: relative;}.annotationRemoveButton:before {content: "×";color: white;padding: 5px;line-height: 1em;}.annotationRemoveButton {width: 20px;height: 20px;border-radius: 10px;background-color: black;box-shadow: 0px 0px 5px rgba(50, 50, 50, 0.75);position: absolute;top: -10px;left: -10px;z-index: 3;text-align: center;font-family: sans-serif;font-style: normal;font-weight: normal;text-decoration: none;font-size: 15px;}.annotationRemoveButton:hover {cursor: pointer;box-shadow: 0px 0px 5px rgba(0, 0, 0, 1);}.annotationNote {width: 4cm;position: absolute;display: inline;z-index: 10;top: 0;}.annotationNote > office|annotation {display: block;text-align: left;}.annotationConnector {position: absolute;display: inline;top: 0;z-index: 2;border-top: 1px dashed brown;}.annotationConnector.angular {-moz-transform-origin: left top;-webkit-transform-origin: left top;-ms-transform-origin: left top;transform-origin: left top;}.annotationConnector.horizontal {left: 0;}.annotationConnector.horizontal:before {content: "";display: inline;position: absolute;width: 0px;height: 0px;border-style: solid;border-width: 8.7px 5px 0 5px;border-color: brown transparent transparent transparent;top: -1px;left: -5px;}office|annotation {width: 100%;height: 100%;display: none;background: rgb(198, 238, 184);background: -moz-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -webkit-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -o-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: -ms-linear-gradient(90deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);background: linear-gradient(180deg, rgb(198, 238, 184) 30%, rgb(180, 196, 159) 100%);box-shadow: 0 3px 4px -3px #ccc;}office|annotation > dc|creator {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;color: white;background-color: brown;padding: 4px;}office|annotation > dc|date {display: block;font-size: 10pt;font-weight: normal;font-style: normal;font-family: sans-serif;border: 4px solid transparent;color: black;}office|annotation > text|list {display: block;padding: 5px;}office|annotation text|p {font-size: 10pt;color: black;font-weight: normal;font-style: normal;text-decoration: none;font-family: sans-serif;}#annotationsPane {background-color: #EAEAEA;width: 4cm;height: 100%;display: none;position: absolute;outline: 1px solid #ccc;}.webodf-annotationHighlight {background-color: yellow;position: relative;}.webodf-selectionOverlay {position: absolute;pointer-events: none;top: 0;left: 0;top: 0;left: 0;width: 100%;height: 100%;z-index: 15;}.webodf-selectionOverlay > polygon {fill-opacity: 0.3;stroke-opacity: 0.8;stroke-width: 1;fill-rule: evenodd;}.webodf-selectionOverlay > .webodf-draggable {fill-opacity: 0.8;stroke-opacity: 0;stroke-width: 8;pointer-events: all;display: none;-moz-transform-origin: center center;-webkit-transform-origin: center center;-ms-transform-origin: center center;transform-origin: center center;}#imageSelector {display: none;position: absolute;border-style: solid;border-color: black;}#imageSelector > div {width: 5px;height: 5px;display: block;position: absolute;border: 1px solid black;background-color: #ffffff;}#imageSelector > .topLeft {top: -4px;left: -4px;}#imageSelector > .topRight {top: -4px;right: -4px;}#imageSelector > .bottomRight {right: -4px;bottom: -4px;}#imageSelector > .bottomLeft {bottom: -4px;left: -4px;}#imageSelector > .topMiddle {top: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .rightMiddle {top: 50%;right: -4px;margin-top: -2.5px;}#imageSelector > .bottomMiddle {bottom: -4px;left: 50%;margin-left: -2.5px;}#imageSelector > .leftMiddle {top: 50%;left: -4px;margin-top: -2.5px;}div.webodf-customScrollbars::-webkit-scrollbar{width: 8px;height: 8px;background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-track{background-color: transparent;}div.webodf-customScrollbars::-webkit-scrollbar-thumb{background-color: #444;border-radius: 4px;}.webodf-hyperlinkTooltip {display: none;color: white;background-color: black;border-radius: 5px;box-shadow: 2px 2px 5px gray;padding: 3px;position: absolute;max-width: 210px;text-align: left;word-break: break-all;z-index: 16;}.webodf-hyperlinkTooltipText {display: block;font-weight: bold;}';
if(!function(e){var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n=t.externs||(t.externs={});n.JSZip=e()}(function(){return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e,t){for(var n,r,o,s,a,l,u,c="",d=0;d<e.length;)n=e.charCodeAt(d++),r=e.charCodeAt(d++),o=e.charCodeAt(d++),s=n>>2,a=(3&n)<<4|r>>4,l=(15&r)<<2|o>>6,u=63&o,isNaN(r)?l=u=64:isNaN(o)&&(u=64),c=c+i.charAt(s)+i.charAt(a)+i.charAt(l)+i.charAt(u);return c},n.decode=function(e,t){var n,r,o,s,a,l,u,c="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)s=i.indexOf(e.charAt(d++)),a=i.indexOf(e.charAt(d++)),l=i.indexOf(e.charAt(d++)),u=i.indexOf(e.charAt(d++)),n=s<<2|a>>4,r=(15&a)<<4|l>>2,o=(3&l)<<6|u,c+=String.fromCharCode(n),64!=l&&(c+=String.fromCharCode(r)),64!=u&&(c+=String.fromCharCode(o));return c}},{}],2:[function(e,t,n){function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=i},{}],3:[function(e,t,n){n.STORE={magic:"\x00\x00",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},n.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t,n){var i=e("./utils"),r=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if("undefined"==typeof e||!e.length)return 0;var n="string"!==i.getTypeOf(e);"undefined"==typeof t&&(t=0);var o=0,s=0,a=0;t=-1^t;for(var l=0,u=e.length;u>l;l++)a=n?e[l]:e.charCodeAt(l),s=255&(t^a),o=r[s],t=t>>>8^o;return-1^t}},{"./utils":21}],5:[function(e,t,n){function i(e){this.data=null,this.length=0,this.index=0}var r=e("./utils");i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=i},{"./utils":21}],6:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!1,n.date=null,n.compression=null,n.comment=null},{}],7:[function(e,t,n){var i=e("./utils");n.string2binary=function(e){return i.string2binary(e)},n.string2Uint8Array=function(e){return i.transformTo("uint8array",e)},n.uint8Array2String=function(e){return i.transformTo("string",e)},n.string2Blob=function(e){var t=i.transformTo("arraybuffer",e);return i.arrayBuffer2Blob(t)},n.arrayBuffer2Blob=function(e){return i.arrayBuffer2Blob(e)},n.transformTo=function(e,t){return i.transformTo(e,t)},n.getTypeOf=function(e){return i.getTypeOf(e)},n.checkSupport=function(e){return i.checkSupport(e)},n.MAX_VALUE_16BITS=i.MAX_VALUE_16BITS,n.MAX_VALUE_32BITS=i.MAX_VALUE_32BITS,n.pretty=function(e){return i.pretty(e)},n.findCompression=function(e){return i.findCompression(e)},n.isRegExp=function(e){return i.isRegExp(e)}},{"./utils":21}],8:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako");n.uncompressInputType=i?"uint8array":"array",n.compressInputType=i?"uint8array":"array",n.magic="\b\x00",n.compress=function(e){return r.deflateRaw(e)},n.uncompress=function(e){return r.inflateRaw(e)}},{pako:24}],9:[function(e,t,n){function i(e,t){return this instanceof i?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new i(e,t)}var r=e("./base64");i.prototype=e("./object"),i.prototype.load=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.utils=e("./deprecatedPublicUtils"),i.base64={encode:function(e){return r.encode(e)},decode:function(e){return r.decode(e)}},i.compressions=e("./compressions"),t.exports=i},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t,n){var i=e("./base64"),r=e("./zipEntries");t.exports=function(e,t){var n,o,s,a;for(t=t||{},t.base64&&(e=i.decode(e)),o=new r(e,t),n=o.files,s=0;s<n.length;s++)a=n[s],this.file(a.fileName,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileComment.length?a.fileComment:null,createFolders:t.createFolders});return o.zipComment.length&&(this.comment=o.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t,n){(function(e){t.exports=function(t,n){return new e(t,n)},t.exports.test=function(t){return e.isBuffer(t)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(e,t,n){function i(e){this.data=e,this.length=this.data.length,this.index=0}var r=e("./uint8ArrayReader");i.prototype=new r,i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=i},{"./uint8ArrayReader":18}],13:[function(e,t,n){var i=e("./support"),r=e("./utils"),o=e("./crc32"),s=e("./signature"),a=e("./defaults"),l=e("./base64"),u=e("./compressions"),c=e("./compressedObject"),d=e("./nodeBuffer"),h=e("./utf8"),f=e("./stringWriter"),p=e("./uint8ArrayWriter"),m=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===r.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},g=function(e){var t=m(e),n=r.getTypeOf(t);return"string"===n?!e.options.binary&&i.nodebuffer?d(t,"utf-8"):e.asBinary():t},v=function(e){var t=m(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=l.decode(t)),t=e&&this.options.binary?$.utf8decode(t):r.transformTo("string",t),e||this.options.binary||(t=r.transformTo("string",$.utf8encode(t))),t)},y=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this._data=t,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};y.prototype={asText:function(){return v.call(this,!0)},asBinary:function(){return v.call(this,!1)},asNodeBuffer:function(){var e=g(this);return r.transformTo("nodebuffer",e)},asUint8Array:function(){var e=g(this);return r.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(e,t){var n,i="";for(n=0;t>n;n++)i+=String.fromCharCode(255&e),e>>>=8;return i},w=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&"undefined"==typeof n[t]&&(n[t]=arguments[e][t]);return n},C=function(e){return e=e||{},e.base64!==!0||null!==e.binary&&void 0!==e.binary||(e.binary=!0),e=w(e,a),e.date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e},x=function(e,t,n){var i,o=r.getTypeOf(t);if(n=C(n),n.createFolders&&(i=S(e))&&A.call(this,i,!0),n.dir||null===t||"undefined"==typeof t)n.base64=!1,n.binary=!1,t=null;else if("string"===o)n.binary&&!n.base64&&n.optimizedBinaryString!==!0&&(t=r.string2binary(t));else{if(n.base64=!1,n.binary=!0,!(o||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=r.transformTo("uint8array",t))}var s=new y(e,t,n);return this.files[e]=s,s},S=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},A=function(e,t){return"/"!=e.slice(-1)&&(e+="/"),t="undefined"!=typeof t?t:!1,this.files[e]||x.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},_=function(e,t){var n,i=new c;return e._data instanceof c?(i.uncompressedSize=e._data.uncompressedSize,i.crc32=e._data.crc32,0===i.uncompressedSize||e.dir?(t=u.STORE,i.compressedContent="",i.crc32=0):e._data.compressionMethod===t.magic?i.compressedContent=e._data.getCompressedContent():(n=e._data.getContent(),i.compressedContent=t.compress(r.transformTo(t.compressInputType,n)))):(n=g(e),(!n||0===n.length||e.dir)&&(t=u.STORE,n=""),i.uncompressedSize=n.length,i.crc32=o(n),i.compressedContent=t.compress(r.transformTo(t.compressInputType,n))),i.compressedSize=i.compressedContent.length,i.compressionMethod=t.magic,i},E=function(e,t,n,i){var a,l,u,c,d=(n.compressedContent,r.transformTo("string",h.utf8encode(t.name))),f=t.comment||"",p=r.transformTo("string",h.utf8encode(f)),m=d.length!==t.name.length,g=p.length!==f.length,v=t.options,y="",w="",C="";u=t._initialMetadata.dir!==t.dir?t.dir:v.dir,c=t._initialMetadata.date!==t.date?t.date:v.date,a=c.getHours(),a<<=6,a|=c.getMinutes(),a<<=5,a|=c.getSeconds()/2,l=c.getFullYear()-1980,l<<=4,l|=c.getMonth()+1,l<<=5,l|=c.getDate(),m&&(w=b(1,1)+b(o(d),4)+d,y+="up"+b(w.length,2)+w),g&&(C=b(1,1)+b(this.crc32(p),4)+p,y+="uc"+b(C.length,2)+C);var x="";x+="\n\x00",x+=m||g?"\x00\b":"\x00\x00",x+=n.compressionMethod,x+=b(a,2),x+=b(l,2),x+=b(n.crc32,4),x+=b(n.compressedSize,4),x+=b(n.uncompressedSize,4),x+=b(d.length,2),x+=b(y.length,2);var S=s.LOCAL_FILE_HEADER+x+d+y,A=s.CENTRAL_FILE_HEADER+"\x00"+x+b(p.length,2)+"\x00\x00\x00\x00"+(u===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+b(i,4)+d+y+p;return{fileRecord:S,dirRecord:A,compressedObject:n}},$={load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,n,i,r,o=[];for(t in this.files)this.files.hasOwnProperty(t)&&(i=this.files[t],r=new y(i.name,i._data,w(i.options)),n=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(n,r)&&o.push(r));return o},file:function(e,t,n){if(1===arguments.length){if(r.isRegExp(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}return this.filter(function(t,n){return!n.dir&&t===e})[0]||null}return e=this.root+e,x.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(r.isRegExp(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=A.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(e){e=w(e||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),r.checkSupport(e.type);var t,n,i=[],o=0,a=0,c=r.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var d in this.files)if(this.files.hasOwnProperty(d)){var h=this.files[d],m=h.options.compression||e.compression.toUpperCase(),g=u[m];if(!g)throw new Error(m+" is not a valid compression method !");var v=_.call(this,h,g),y=E.call(this,d,h,v,o);o+=y.fileRecord.length+v.compressedSize,a+=y.dirRecord.length,i.push(y)}var C="";C=s.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+b(i.length,2)+b(i.length,2)+b(a,4)+b(o,4)+b(c.length,2)+c;var x=e.type.toLowerCase();for(t="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new p(o+a+C.length):new f(o+a+C.length),n=0;n<i.length;n++)t.append(i[n].fileRecord),t.append(i[n].compressedObject.compressedContent);for(n=0;n<i.length;n++)t.append(i[n].dirRecord);t.append(C);var S=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(e.type.toLowerCase(),S);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",S));case"base64":return e.base64?l.encode(S):S;default:return S}},crc32:function(e,t){return o(e,t)},utf8encode:function(e){return r.transformTo("string",h.utf8encode(e))},utf8decode:function(e){return h.utf8decode(e)}};t.exports=$},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,t,n){function i(e,t){this.data=e,t||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0}var r=e("./dataReader"),o=e("./utils");i.prototype=new r,i.prototype.byteAt=function(e){return this.data.charCodeAt(e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=i},{"./dataReader":5,"./utils":21}],16:[function(e,t,n){var i=e("./utils"),r=function(){this.data=[]};r.prototype={append:function(e){e=i.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=r},{"./utils":21}],17:[function(e,t,n){(function(e){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof e,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var t=new ArrayBuffer(0);try{n.blob=0===new Blob([t],{type:"application/zip"}).size}catch(i){try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,o=new r;o.append(t),n.blob=0===o.getBlob("application/zip").size}catch(i){n.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(e,t,n){function i(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var r=e("./dataReader");i.prototype=new r,i.prototype.byteAt=function(e){return this.data[e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),r=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o;return-1},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=i},{"./dataReader":5}],19:[function(e,t,n){var i=e("./utils"),r=function(e){this.data=new Uint8Array(e),this.index=0};r.prototype={append:function(e){0!==e.length&&(e=i.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=r},{"./utils":21}],20:[function(e,t,n){for(var i=e("./utils"),r=e("./support"),o=e("./nodeBuffer"),s=new Array(256),a=0;256>a;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;s[254]=s[254]=1;var l=function(e){var t,n,i,o,s,a=e.length,l=0;for(o=0;a>o;o++)n=e.charCodeAt(o),55296===(64512&n)&&a>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),l+=128>n?1:2048>n?2:65536>n?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),s=0,o=0;l>s;o++)n=e.charCodeAt(o),55296===(64512&n)&&a>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),128>n?t[s++]=n:2048>n?(t[s++]=192|n>>>6,t[s++]=128|63&n):65536>n?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},u=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+s[e[n]]>t?n:t},c=function(e){var t,n,r,o,a=e.length,l=new Array(2*a);for(n=0,t=0;a>t;)if(r=e[t++],128>r)l[n++]=r;else if(o=s[r],o>4)l[n++]=65533,t+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&a>t;)r=r<<6|63&e[t++],o--;o>1?l[n++]=65533:65536>r?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)};n.utf8encode=function(e){return r.nodebuffer?o(e,"utf-8"):l(e)},n.utf8decode=function(e){if(r.nodebuffer)return i.transformTo("nodebuffer",e).toString("utf-8");e=i.transformTo(r.uint8array?"uint8array":"array",e);for(var t=[],n=0,o=e.length,s=65536;o>n;){var a=u(e,Math.min(n+s,o));r.uint8array?t.push(c(e.subarray(n,a))):t.push(c(e.slice(n,a))),n=a}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,n){function i(e){return e}function r(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}function o(e){var t=65536,i=[],r=e.length,o=n.getTypeOf(e),s=0,a=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(l){a=!1}if(!a){for(var c="",d=0;d<e.length;d++)c+=String.fromCharCode(e[d]);return c}for(;r>s&&t>1;)try{"array"===o||"nodebuffer"===o?i.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+t,r)))):i.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+t,r)))),s+=t}catch(l){t=Math.floor(t/2)}return i.join("")}function s(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}var a=e("./support"),l=e("./compressions"),u=e("./nodeBuffer");n.string2binary=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n));return t},n.arrayBuffer2Blob=function(e){n.checkSupport("blob");try{return new Blob([e],{type:"application/zip"})}catch(t){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new i;return r.append(e),r.getBlob("application/zip")}catch(t){throw new Error("Bug : can't construct the Blob.")}}},n.applyFromCharCode=o;var c={};c.string={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return r(e,new Uint8Array(e.length))},nodebuffer:function(e){return r(e,u(e.length))}},c.array={string:o,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(e)}},c.arraybuffer={string:function(e){return o(new Uint8Array(e))},array:function(e){return s(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(new Uint8Array(e))}},c.uint8array={string:o,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return u(e)}},c.nodebuffer={string:o,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:i},n.transformTo=function(e,t){if(t||(t=""),!e)return t;n.checkSupport(e);var i=n.getTypeOf(t),r=c[i][e](t);return r},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":a.nodebuffer&&u.test(e)?"nodebuffer":a.uint8array&&e instanceof Uint8Array?"uint8array":a.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){var t=a[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this browser")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,i="";for(n=0;n<(e||"").length;n++)t=e.charCodeAt(n),i+="\\x"+(16>t?"0":"")+t.toString(16).toUpperCase();return i},n.findCompression=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null},n.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t,n){function i(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var r=e("./stringReader"),o=e("./nodeBufferReader"),s=e("./uint8ArrayReader"),a=e("./utils"),l=e("./signature"),u=e("./zipEntry"),c=e("./support"),d=e("./object");i.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=d.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,i=this.zip64EndOfCentralSize-44,r=0;i>r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)e=new u({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(-1===e)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(e),this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===e)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=a.getTypeOf(e);"string"!==t||c.uint8array?"nodebuffer"===t?this.reader=new o(e):this.reader=new s(a.transformTo("uint8array",e)):this.reader=new r(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=i},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t,n){function i(e,t){this.options=e,this.loadOptions=t}var r=e("./stringReader"),o=e("./utils"),s=e("./compressedObject"),a=e("./object");i.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(e,t,n){return function(){var i=e.index;e.setIndex(t);var r=e.readData(n);return e.setIndex(i),r}},prepareContent:function(e,t,n,i,r){return function(){var e=o.transformTo(i.uncompressInputType,this.getCompressedContent()),t=i.uncompress(e);if(t.length!==r)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=o.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readString(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=new r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,i,r=e.index;for(this.extraFields=this.extraFields||{};e.index<r+this.extraFieldsLength;)t=e.readInt(2),n=e.readInt(2),i=e.readString(n),this.extraFields[t]={id:t,length:n,value:i}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new r(e.value);return 1!==t.readInt(1)?null:a.crc32(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new r(e.value);return 1!==t.readInt(1)?null:a.crc32(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null}},t.exports=i},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t,n){var i=e("./lib/utils/common").assign,r=e("./lib/deflate"),o=e("./lib/inflate"),s=e("./lib/zlib/constants"),a={};i(a,r,o,s),t.exports=a},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,n){function i(e,t){var n=new y(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function r(e,t){return t=t||{},t.raw=!0,i(e,t)}function o(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=e("./zlib/deflate.js"),a=e("./utils/common"),l=e("./utils/strings"),u=e("./zlib/messages"),c=e("./zlib/zstream"),d=0,h=4,f=0,p=1,m=-1,g=0,v=8,y=function(e){this.options=a.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==f)throw new Error(u[n]);t.header&&s.deflateSetHeader(this.strm,t.header)};y.prototype.push=function(e,t){var n,i,r=this.strm,o=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:t===!0?h:d,"string"==typeof e?r.input=l.string2buf(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new a.Buf8(o),r.next_out=0,r.avail_out=o),n=s.deflate(r,i),n!==p&&n!==f)return this.onEnd(n),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&i===h)&&("string"===this.options.to?this.onData(l.buf2binstring(a.shrinkBuf(r.output,r.next_out))):this.onData(a.shrinkBuf(r.output,r.next_out)));
}while((r.avail_in>0||0===r.avail_out)&&n!==p);return i===h?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f):!0},y.prototype.onData=function(e){this.chunks.push(e)},y.prototype.onEnd=function(e){e===f&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=y,n.deflate=i,n.deflateRaw=r,n.gzip=o},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,n){function i(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function r(e,t){return t=t||{},t.raw=!0,i(e,t)}var o=e("./zlib/inflate.js"),s=e("./utils/common"),a=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),d=e("./zlib/gzheader"),h=function(e){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(u[n]);this.header=new d,o.inflateGetHeader(this.strm,this.header)};h.prototype.push=function(e,t){var n,i,r,u,c,d=this.strm,h=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?d.input=a.binstring2buf(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(h),d.next_out=0,d.avail_out=h),n=o.inflate(d,l.Z_NO_FLUSH),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0===d.avail_out||n===l.Z_STREAM_END||0===d.avail_in&&i===l.Z_FINISH)&&("string"===this.options.to?(r=a.utf8border(d.output,d.next_out),u=d.next_out-r,c=a.buf2string(d.output,r),d.next_out=u,d.avail_out=h-u,u&&s.arraySet(d.output,d.output,r,u,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out)))}while(d.avail_in>0&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):!0},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=i,n.inflateRaw=r,n.ungzip=i},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+i),r);for(var o=0;i>o;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,s;for(i=0,t=0,n=e.length;n>t;t++)i+=e[t].length;for(s=new Uint8Array(i),r=0,t=0,n=e.length;n>t;t++)o=e[t],s.set(o,r),r+=o.length;return s}},o={arraySet:function(e,t,n,i,r){for(var o=0;i>o;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],28:[function(e,t,n){function i(e,t){if(65537>t&&(e.subarray&&s||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",i=0;t>i;i++)n+=String.fromCharCode(e[i]);return n}var r=e("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(a){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){s=!1}for(var l=new r.Buf8(256),u=0;256>u;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;l[254]=l[254]=1,n.string2buf=function(e){var t,n,i,o,s,a=e.length,l=0;for(o=0;a>o;o++)n=e.charCodeAt(o),55296===(64512&n)&&a>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),l+=128>n?1:2048>n?2:65536>n?3:4;for(t=new r.Buf8(l),s=0,o=0;l>s;o++)n=e.charCodeAt(o),55296===(64512&n)&&a>o+1&&(i=e.charCodeAt(o+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),o++)),128>n?t[s++]=n:2048>n?(t[s++]=192|n>>>6,t[s++]=128|63&n):65536>n?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;i>n;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,o,s,a=t||e.length,u=new Array(2*a);for(r=0,n=0;a>n;)if(o=e[n++],128>o)u[r++]=o;else if(s=l[o],s>4)u[r++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>n;)o=o<<6|63&e[n++],s--;s>1?u[r++]=65533:65536>o?u[r++]=o:(o-=65536,u[r++]=55296|o>>10&1023,u[r++]=56320|1023&o)}return i(u,r)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+l[e[n]]>t?n:t}},{"./common":27}],29:[function(e,t,n){function i(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do r=r+t[i++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0}t.exports=i},{}],30:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t,n){function i(){for(var e,t=[],n=0;256>n;n++){e=n;for(var i=0;8>i;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,i){var r=o,s=i+n;e=-1^e;for(var a=i;s>a;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}var o=i();t.exports=r},{}],32:[function(e,t,n){function i(e,t){return e.msg=L[t],t}function r(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(k.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function a(e,t){D._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,k.arraySet(t,e.input,e.next_in,r,n),1===e.state.wrap?e.adler=T(e.adler,t,r,n):2===e.state.wrap&&(e.adler=F(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function d(e,t){var n,i,r=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+le,f=u[o+s-1],p=u[o+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(n=t,u[n+s]===p&&u[n+s-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do;while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&h>o);if(i=le-(h-o),o=h-le,i>s){if(e.match_start=t,s=i,i>=a)break;f=u[o+s-1],p=u[o+s]}}while((t=d[t&c])>l&&0!==--r);return s<=e.lookahead?s:e.lookahead}function h(e){var t,n,i,r,o,s=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ue)){k.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,n=e.hash_size,t=n;do i=e.head[--t],e.head[t]=i>=s?i-s:0;while(--n);n=s,t=n;do i=e.prev[--t],e.prev[t]=i>=s?i-s:0;while(--n);r+=s}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=ae)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ae-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ae)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function f(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===O)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,a(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===M?(a(e,!0),0===e.strm.avail_out?we:Ce):e.strstart>e.block_start&&(a(e,!1),0===e.strm.avail_out)?ye:ye}function p(e,t){for(var n,i;;){if(e.lookahead<ue){if(h(e),e.lookahead<ue&&t===O)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=d(e,n)),e.match_length>=ae)if(i=D._tr_tally(e,e.strstart-e.match_start,e.match_length-ae),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ae){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<ae-1?e.strstart:ae-1,t===M?(a(e,!0),0===e.strm.avail_out?we:Ce):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:be}function m(e,t){for(var n,i,r;;){if(e.lookahead<ue){if(h(e),e.lookahead<ue&&t===O)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=ae&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ae-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=d(e,n),e.match_length<=5&&(e.strategy===W||e.match_length===ae&&e.strstart-e.match_start>4096)&&(e.match_length=ae-1)),e.prev_length>=ae&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-ae,i=D._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ae),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ae-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ae-1,e.strstart++,i&&(a(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if(i=D._tr_tally(e,0,e.window[e.strstart-1]),i&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=D._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ae-1?e.strstart:ae-1,t===M?(a(e,!0),0===e.strm.avail_out?we:Ce):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:be}function g(e,t){for(var n,i,r,o,s=e.window;;){if(e.lookahead<=le){if(h(e),e.lookahead<=le&&t===O)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ae&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=e.strstart+le;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&o>r);e.match_length=le-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ae?(n=D._tr_tally(e,1,e.match_length-ae),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===M?(a(e,!0),0===e.strm.avail_out?we:Ce):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:be}function v(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===O)return ye;break}if(e.match_length=0,n=D._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===M?(a(e,!0),0===e.strm.avail_out?we:Ce):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?ye:be}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=$[e.level].max_lazy,e.good_match=$[e.level].good_length,e.nice_match=$[e.level].nice_length,e.max_chain_length=$[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ae-1,e.match_available=0,e.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new k.Buf16(2*oe),this.dyn_dtree=new k.Buf16(2*(2*ie+1)),this.bl_tree=new k.Buf16(2*(2*re+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new k.Buf16(se+1),this.heap=new k.Buf16(2*ne+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new k.Buf16(2*ne+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Y,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:ge,e.adler=2===t.wrap?0:1,t.last_flush=O,D._tr_init(t),P):i(e,U)}function C(e){var t=w(e);return t===P&&y(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?U:(e.state.gzhead=t,P):U}function S(e,t,n,r,o,s){if(!e)return U;var a=1;if(t===j&&(t=6),0>r?(a=0,r=-r):r>15&&(a=2,r-=16),1>o||o>X||n!==Z||8>r||r>15||0>t||t>9||0>s||s>K)return i(e,U);8===r&&(r=9);var l=new b;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ae-1)/ae),l.window=new k.Buf8(2*l.w_size),l.head=new k.Buf16(l.hash_size),l.prev=new k.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new k.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=n,C(e)}function A(e,t){return S(e,t,Z,J,Q,G)}function _(e,t){var n,a,c,d;if(!e||!e.state||t>R||0>t)return e?i(e,U):U;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===ve&&t!==M)return i(e,0===e.avail_out?z:U);if(a.strm=e,n=a.last_flush,a.last_flush=t,a.status===de)if(2===a.wrap)e.adler=0,l(a,31),l(a,139),l(a,8),a.gzhead?(l(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),l(a,255&a.gzhead.time),l(a,a.gzhead.time>>8&255),l(a,a.gzhead.time>>16&255),l(a,a.gzhead.time>>24&255),l(a,9===a.level?2:a.strategy>=V||a.level<2?4:0),l(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(l(a,255&a.gzhead.extra.length),l(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=F(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=he):(l(a,0),l(a,0),l(a,0),l(a,0),l(a,0),l(a,9===a.level?2:a.strategy>=V||a.level<2?4:0),l(a,xe),a.status=ge);else{var h=Z+(a.w_bits-8<<4)<<8,f=-1;f=a.strategy>=V||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=f<<6,0!==a.strstart&&(h|=ce),h+=31-h%31,a.status=ge,u(a,h),0!==a.strstart&&(u(a,e.adler>>>16),u(a,65535&e.adler)),e.adler=1}if(a.status===he)if(a.gzhead.extra){for(c=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>c&&(e.adler=F(e.adler,a.pending_buf,a.pending-c,c)),s(e),c=a.pending,a.pending!==a.pending_buf_size));)l(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>c&&(e.adler=F(e.adler,a.pending_buf,a.pending-c,c)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=fe)}else a.status=fe;if(a.status===fe)if(a.gzhead.name){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(e.adler=F(e.adler,a.pending_buf,a.pending-c,c)),s(e),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(e.adler=F(e.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.gzindex=0,a.status=pe)}else a.status=pe;if(a.status===pe)if(a.gzhead.comment){c=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>c&&(e.adler=F(e.adler,a.pending_buf,a.pending-c,c)),s(e),c=a.pending,a.pending===a.pending_buf_size)){d=1;break}d=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,l(a,d)}while(0!==d);a.gzhead.hcrc&&a.pending>c&&(e.adler=F(e.adler,a.pending_buf,a.pending-c,c)),0===d&&(a.status=me)}else a.status=me;if(a.status===me&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(l(a,255&e.adler),l(a,e.adler>>8&255),e.adler=0,a.status=ge)):a.status=ge),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,P}else if(0===e.avail_in&&r(t)<=r(n)&&t!==M)return i(e,z);if(a.status===ve&&0!==e.avail_in)return i(e,z);if(0!==e.avail_in||0!==a.lookahead||t!==O&&a.status!==ve){var p=a.strategy===V?v(a,t):a.strategy===q?g(a,t):$[a.level].func(a,t);if((p===we||p===Ce)&&(a.status=ve),p===ye||p===we)return 0===e.avail_out&&(a.last_flush=-1),P;if(p===be&&(t===N?D._tr_align(a):t!==R&&(D._tr_stored_block(a,0,0,!1),t===B&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,P}return t!==M?P:a.wrap<=0?I:(2===a.wrap?(l(a,255&e.adler),l(a,e.adler>>8&255),l(a,e.adler>>16&255),l(a,e.adler>>24&255),l(a,255&e.total_in),l(a,e.total_in>>8&255),l(a,e.total_in>>16&255),l(a,e.total_in>>24&255)):(u(a,e.adler>>>16),u(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?P:I)}function E(e){var t;return e&&e.state?(t=e.state.status,t!==de&&t!==he&&t!==fe&&t!==pe&&t!==me&&t!==ge&&t!==ve?i(e,U):(e.state=null,t===ge?i(e,H):P)):U}var $,k=e("../utils/common"),D=e("./trees"),T=e("./adler32"),F=e("./crc32"),L=e("./messages"),O=0,N=1,B=3,M=4,R=5,P=0,I=1,U=-2,H=-3,z=-5,j=-1,W=1,V=2,q=3,K=4,G=0,Y=2,Z=8,X=9,J=15,Q=8,ee=29,te=256,ne=te+1+ee,ie=30,re=19,oe=2*ne+1,se=15,ae=3,le=258,ue=le+ae+1,ce=32,de=42,he=69,fe=73,pe=91,me=103,ge=113,ve=666,ye=1,be=2,we=3,Ce=4,xe=3,Se=function(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r};$=[new Se(0,0,0,0,f),new Se(4,4,8,4,p),new Se(4,5,16,8,p),new Se(4,6,32,32,p),new Se(4,4,16,16,m),new Se(8,16,32,32,m),new Se(8,16,128,128,m),new Se(8,32,128,256,m),new Se(32,128,258,1024,m),new Se(32,258,258,4096,m)],n.deflateInit=A,n.deflateInit2=S,n.deflateReset=C,n.deflateResetKeep=w,n.deflateSetHeader=x,n.deflate=_,n.deflateEnd=E,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t,n){function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i},{}],34:[function(e,t,n){var i=30,r=12;t.exports=function(e,t){var n,o,s,a,l,u,c,d,h,f,p,m,g,v,y,b,w,C,x,S,A,_,E,$,k;n=e.state,o=e.next_in,$=e.input,s=o+(e.avail_in-5),a=e.next_out,k=e.output,l=a-(t-e.avail_out),u=a+(e.avail_out-257),c=n.dmax,d=n.wsize,h=n.whave,f=n.wnext,p=n.window,m=n.hold,g=n.bits,v=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,w=(1<<n.distbits)-1;e:do{15>g&&(m+=$[o++]<<g,g+=8,m+=$[o++]<<g,g+=8),C=v[m&b];t:for(;;){if(x=C>>>24,m>>>=x,g-=x,x=C>>>16&255,0===x)k[a++]=65535&C;else{if(!(16&x)){if(0===(64&x)){C=v[(65535&C)+(m&(1<<x)-1)];continue t}if(32&x){n.mode=r;break e}e.msg="invalid literal/length code",n.mode=i;break e}S=65535&C,x&=15,x&&(x>g&&(m+=$[o++]<<g,g+=8),S+=m&(1<<x)-1,m>>>=x,g-=x),15>g&&(m+=$[o++]<<g,g+=8,m+=$[o++]<<g,g+=8),C=y[m&w];n:for(;;){if(x=C>>>24,m>>>=x,g-=x,x=C>>>16&255,!(16&x)){if(0===(64&x)){C=y[(65535&C)+(m&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=i;break e}if(A=65535&C,x&=15,x>g&&(m+=$[o++]<<g,g+=8,x>g&&(m+=$[o++]<<g,g+=8)),A+=m&(1<<x)-1,A>c){e.msg="invalid distance too far back",n.mode=i;break e}if(m>>>=x,g-=x,x=a-l,A>x){if(x=A-x,x>h&&n.sane){e.msg="invalid distance too far back",n.mode=i;break e}if(_=0,E=p,0===f){if(_+=d-x,S>x){S-=x;do k[a++]=p[_++];while(--x);_=a-A,E=k}}else if(x>f){if(_+=d+f-x,x-=f,S>x){S-=x;do k[a++]=p[_++];while(--x);if(_=0,S>f){x=f,S-=x;do k[a++]=p[_++];while(--x);_=a-A,E=k}}}else if(_+=f-x,S>x){S-=x;do k[a++]=p[_++];while(--x);_=a-A,E=k}for(;S>2;)k[a++]=E[_++],k[a++]=E[_++],k[a++]=E[_++],S-=3;S&&(k[a++]=E[_++],S>1&&(k[a++]=E[_++]))}else{_=a-A;do k[a++]=k[_++],k[a++]=k[_++],k[a++]=k[_++],S-=3;while(S>2);S&&(k[a++]=k[_++],S>1&&(k[a++]=k[_++]))}break}}break}}while(s>o&&u>a);S=g>>3,o-=S,g-=S<<3,m&=(1<<g)-1,e.next_in=o,e.next_out=a,e.avail_in=s>o?5+(s-o):5-(o-s),e.avail_out=u>a?257+(u-a):257-(a-u),n.hold=m,n.bits=g}},{}],35:[function(e,t,n){function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new v.Buf16(320),this.work=new v.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=M,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new v.Buf32(pe),t.distcode=t.distdyn=new v.Buf32(me),t.sane=1,t.back=-1,k):F}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):F}function a(e,t){var n,i;return e&&e.state?(i=e.state,0>t?(n=0,t=-t):(n=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?F:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,s(e))):F}function l(e,t){var n,i;return e?(i=new r,e.state=i,i.window=null,n=a(e,t),n!==k&&(e.state=null),n):F}function u(e){return l(e,ve)}function c(e){if(ye){var t;for(m=new v.Buf32(512),g=new v.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(C(S,e.lens,0,288,m,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;C(A,e.lens,0,32,g,0,e.work,{bits:5}),ye=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function d(e,t,n,i){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new v.Buf8(o.wsize)),i>=o.wsize?(v.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),v.arraySet(o.window,t,n-i,r,o.wnext),i-=r,i?(v.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function h(e,t){var n,r,o,s,a,l,u,h,f,p,m,g,pe,me,ge,ve,ye,be,we,Ce,xe,Se,Ae,_e,Ee=0,$e=new v.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return F;n=e.state,n.mode===K&&(n.mode=G),a=e.next_out,o=e.output,u=e.avail_out,s=e.next_in,r=e.input,l=e.avail_in,h=n.hold,f=n.bits,p=l,m=u,Se=k;e:for(;;)switch(n.mode){case M:if(0===n.wrap){n.mode=G;break}for(;16>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(2&n.wrap&&35615===h){n.check=0,$e[0]=255&h,$e[1]=h>>>8&255,n.check=b(n.check,$e,2,0),h=0,f=0,n.mode=R;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&h)!==B){e.msg="unknown compression method",n.mode=de;break}if(h>>>=4,f-=4,xe=(15&h)+8,0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&h?V:K,h=0,f=0;break;case R:for(;16>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(n.flags=h,(255&n.flags)!==B){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&($e[0]=255&h,$e[1]=h>>>8&255,n.check=b(n.check,$e,2,0)),h=0,f=0,n.mode=P;case P:for(;32>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}n.head&&(n.head.time=h),512&n.flags&&($e[0]=255&h,$e[1]=h>>>8&255,$e[2]=h>>>16&255,$e[3]=h>>>24&255,n.check=b(n.check,$e,4,0)),h=0,f=0,n.mode=I;case I:for(;16>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&($e[0]=255&h,$e[1]=h>>>8&255,n.check=b(n.check,$e,2,0)),h=0,f=0,n.mode=U;case U:if(1024&n.flags){for(;16>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&($e[0]=255&h,$e[1]=h>>>8&255,n.check=b(n.check,$e,2,0)),h=0,f=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&(g=n.length,g>l&&(g=l),g&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v.arraySet(n.head.extra,r,s,g,xe)),512&n.flags&&(n.check=b(n.check,r,g,s)),l-=g,s+=g,n.length-=g),n.length))break e;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===l)break e;g=0;do xe=r[s+g++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe));while(xe&&l>g);if(512&n.flags&&(n.check=b(n.check,r,g,s)),l-=g,s+=g,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=j;case j:if(4096&n.flags){if(0===l)break e;g=0;do xe=r[s+g++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe));while(xe&&l>g);if(512&n.flags&&(n.check=b(n.check,r,g,s)),l-=g,s+=g,xe)break e}else n.head&&(n.head.comment=null);n.mode=W;case W:if(512&n.flags){for(;16>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}h=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=K;break;case V:for(;32>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}e.adler=n.check=i(h),h=0,f=0,n.mode=q;case q:if(0===n.havedict)return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=f,T;e.adler=n.check=1,n.mode=K;case K:if(t===E||t===$)break e;case G:if(n.last){h>>>=7&f,f-=7&f,n.mode=le;break}for(;3>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}switch(n.last=1&h,h>>>=1,f-=1,3&h){case 0:n.mode=Y;break;case 1:if(c(n),n.mode=te,t===$){h>>>=2,f-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=de}h>>>=2,f-=2;break;case Y:for(h>>>=7&f,f-=7&f;32>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&h,h=0,f=0,n.mode=Z,t===$)break e;case Z:n.mode=X;case X:if(g=n.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break e;v.arraySet(o,r,s,g,a),l-=g,s+=g,u-=g,a+=g,n.length-=g;break}n.mode=K;break;case J:for(;14>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(n.nlen=(31&h)+257,h>>>=5,f-=5,n.ndist=(31&h)+1,h>>>=5,f-=5,n.ncode=(15&h)+4,h>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.ncode;){for(;3>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}n.lens[ke[n.have++]]=7&h,h>>>=3,f-=3}for(;n.have<19;)n.lens[ke[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ae={bits:n.lenbits},Se=C(x,n.lens,0,19,n.lencode,0,n.work,Ae),n.lenbits=Ae.bits,Se){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.nlen+n.ndist;){for(;Ee=n.lencode[h&(1<<n.lenbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(f>=ge);){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(16>ye)h>>>=ge,f-=ge,n.lens[n.have++]=ye;else{if(16===ye){for(_e=ge+2;_e>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(h>>>=ge,f-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],g=3+(3&h),h>>>=2,f-=2}else if(17===ye){for(_e=ge+3;_e>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}h>>>=ge,f-=ge,xe=0,g=3+(7&h),h>>>=3,f-=3}else{for(_e=ge+7;_e>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}h>>>=ge,f-=ge,xe=0,g=11+(127&h),h>>>=7,f-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;g--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Ae={bits:n.lenbits},Se=C(S,n.lens,0,n.nlen,n.lencode,0,n.work,Ae),n.lenbits=Ae.bits,Se){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Ae={bits:n.distbits},Se=C(A,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ae),n.distbits=Ae.bits,Se){e.msg="invalid distances set",n.mode=de;break}if(n.mode=te,t===$)break e;case te:n.mode=ne;case ne:if(l>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=f,w(e,m),a=e.next_out,o=e.output,u=e.avail_out,s=e.next_in,r=e.input,l=e.avail_in,h=n.hold,f=n.bits,n.mode===K&&(n.back=-1);break}for(n.back=0;Ee=n.lencode[h&(1<<n.lenbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(f>=ge);){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(ve&&0===(240&ve)){for(be=ge,we=ve,Ce=ye;Ee=n.lencode[Ce+((h&(1<<be+we)-1)>>be)],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(f>=be+ge);){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}h>>>=be,f-=be,n.back+=be}if(h>>>=ge,f-=ge,n.back+=ge,n.length=ye,0===ve){n.mode=ae;break}if(32&ve){n.back=-1,n.mode=K;break}if(64&ve){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(_e=n.extra;_e>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=re;case re:for(;Ee=n.distcode[h&(1<<n.distbits)-1],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(f>=ge);){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(0===(240&ve)){for(be=ge,we=ve,Ce=ye;Ee=n.distcode[Ce+((h&(1<<be+we)-1)>>be)],ge=Ee>>>24,ve=Ee>>>16&255,ye=65535&Ee,!(f>=be+ge);){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}h>>>=be,f-=be,n.back+=be}if(h>>>=ge,f-=ge,n.back+=ge,64&ve){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ve,n.mode=oe;case oe:if(n.extra){for(_e=n.extra;_e>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=se;case se:if(0===u)break e;if(g=m-u,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}g>n.wnext?(g-=n.wnext,pe=n.wsize-g):pe=n.wnext-g,g>n.length&&(g=n.length),me=n.window}else me=o,pe=a-n.offset,g=n.length;g>u&&(g=u),u-=g,n.length-=g;do o[a++]=me[pe++];while(--g);0===n.length&&(n.mode=ne);break;case ae:if(0===u)break e;o[a++]=n.length,u--,n.mode=ne;break;case le:if(n.wrap){for(;32>f;){if(0===l)break e;l--,h|=r[s++]<<f,f+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,o,m,a-m):y(n.check,o,m,a-m)),m=u,(n.flags?h:i(h))!==n.check){e.msg="incorrect data check",
n.mode=de;break}h=0,f=0}n.mode=ue;case ue:if(n.wrap&&n.flags){for(;32>f;){if(0===l)break e;l--,h+=r[s++]<<f,f+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}h=0,f=0}n.mode=ce;case ce:Se=D;break e;case de:Se=L;break e;case he:return O;case fe:default:return F}return e.next_out=a,e.avail_out=u,e.next_in=s,e.avail_in=l,n.hold=h,n.bits=f,(n.wsize||m!==e.avail_out&&n.mode<de&&(n.mode<le||t!==_))&&d(e,e.output,e.next_out,m-e.avail_out)?(n.mode=he,O):(p-=e.avail_in,m-=e.avail_out,e.total_in+=p,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,o,m,e.next_out-m):y(n.check,o,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===K?128:0)+(n.mode===te||n.mode===Z?256:0),(0===p&&0===m||t===_)&&Se===k&&(Se=N),Se)}function f(e){if(!e||!e.state)return F;var t=e.state;return t.window&&(t.window=null),e.state=null,k}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?F:(n.head=t,t.done=!1,k)):F}var m,g,v=e("../utils/common"),y=e("./adler32"),b=e("./crc32"),w=e("./inffast"),C=e("./inftrees"),x=0,S=1,A=2,_=4,E=5,$=6,k=0,D=1,T=2,F=-2,L=-3,O=-4,N=-5,B=8,M=1,R=2,P=3,I=4,U=5,H=6,z=7,j=8,W=9,V=10,q=11,K=12,G=13,Y=14,Z=15,X=16,J=17,Q=18,ee=19,te=20,ne=21,ie=22,re=23,oe=24,se=25,ae=26,le=27,ue=28,ce=29,de=30,he=31,fe=32,pe=852,me=592,ge=15,ve=ge,ye=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=o,n.inflateInit=u,n.inflateInit2=l,n.inflate=h,n.inflateEnd=f,n.inflateGetHeader=p,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t,n){var i=e("../utils/common"),r=15,o=852,s=592,a=0,l=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,p,m,g,v,y){var b,w,C,x,S,A,_,E,$,k=y.bits,D=0,T=0,F=0,L=0,O=0,N=0,B=0,M=0,R=0,P=0,I=null,U=0,H=new i.Buf16(r+1),z=new i.Buf16(r+1),j=null,W=0;for(D=0;r>=D;D++)H[D]=0;for(T=0;p>T;T++)H[t[n+T]]++;for(O=k,L=r;L>=1&&0===H[L];L--);if(O>L&&(O=L),0===L)return m[g++]=20971520,m[g++]=20971520,y.bits=1,0;for(F=1;L>F&&0===H[F];F++);for(F>O&&(O=F),M=1,D=1;r>=D;D++)if(M<<=1,M-=H[D],0>M)return-1;if(M>0&&(e===a||1!==L))return-1;for(z[1]=0,D=1;r>D;D++)z[D+1]=z[D]+H[D];for(T=0;p>T;T++)0!==t[n+T]&&(v[z[t[n+T]]++]=T);if(e===a?(I=j=v,A=19):e===l?(I=c,U-=257,j=d,W-=257,A=256):(I=h,j=f,A=-1),P=0,T=0,D=F,S=g,N=O,B=0,C=-1,R=1<<O,x=R-1,e===l&&R>o||e===u&&R>s)return 1;for(var V=0;;){V++,_=D-B,v[T]<A?(E=0,$=v[T]):v[T]>A?(E=j[W+v[T]],$=I[U+v[T]]):(E=96,$=0),b=1<<D-B,w=1<<N,F=w;do w-=b,m[S+(P>>B)+w]=_<<24|E<<16|$|0;while(0!==w);for(b=1<<D-1;P&b;)b>>=1;if(0!==b?(P&=b-1,P+=b):P=0,T++,0===--H[D]){if(D===L)break;D=t[n+v[T]]}if(D>O&&(P&x)!==C){for(0===B&&(B=O),S+=F,N=D-B,M=1<<N;L>N+B&&(M-=H[N+B],!(0>=M));)N++,M<<=1;if(R+=1<<N,e===l&&R>o||e===u&&R>s)return 1;C=P&x,m[C]=O<<24|N<<16|S-g|0}}return 0!==P&&(m[S+P]=D-B<<24|64<<16|0),y.bits=O,0}},{"../utils/common":27}],37:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,n){function i(e){for(var t=e.length;--t>=0;)e[t]=0}function r(e){return 256>e?se[e]:se[256+(e>>>7)]}function o(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function s(e,t,n){e.bi_valid>K-n?(e.bi_buf|=t<<e.bi_valid&65535,o(e,e.bi_buf),e.bi_buf=t>>K-e.bi_valid,e.bi_valid+=n-K):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function a(e,t,n){s(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function u(e){16===e.bi_valid?(o(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function c(e,t){var n,i,r,o,s,a,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(o=0;q>=o;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;V>n;n++)i=e.heap[n],o=l[2*l[2*i+1]+1]+1,o>p&&(o=p,m++),l[2*i+1]=o,i>u||(e.bl_count[o]++,s=0,i>=f&&(s=h[i-f]),a=l[2*i],e.opt_len+=a*(o+s),d&&(e.static_len+=a*(c[2*i+1]+s)));if(0!==m){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(i=e.bl_count[o];0!==i;)r=e.heap[--n],r>u||(l[2*r+1]!==o&&(e.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}function d(e,t,n){var i,r,o=new Array(q+1),s=0;for(i=1;q>=i;i++)o[i]=s=s+n[i-1]<<1;for(r=0;t>=r;r++){var a=e[2*r+1];0!==a&&(e[2*r]=l(o[a]++,a))}}function h(){var e,t,n,i,r,o=new Array(q+1);for(n=0,i=0;U-1>i;i++)for(le[i]=n,e=0;e<1<<Q[i];e++)ae[n++]=i;for(ae[n-1]=i,r=0,i=0;16>i;i++)for(ue[i]=r,e=0;e<1<<ee[i];e++)se[r++]=i;for(r>>=7;j>i;i++)for(ue[i]=r<<7,e=0;e<1<<ee[i]-7;e++)se[256+r++]=i;for(t=0;q>=t;t++)o[t]=0;for(e=0;143>=e;)re[2*e+1]=8,e++,o[8]++;for(;255>=e;)re[2*e+1]=9,e++,o[9]++;for(;279>=e;)re[2*e+1]=7,e++,o[7]++;for(;287>=e;)re[2*e+1]=8,e++,o[8]++;for(d(re,z+1,o),e=0;j>e;e++)oe[2*e+1]=5,oe[2*e]=l(e,5);ce=new fe(re,Q,H+1,z,q),de=new fe(oe,ee,0,j,q),he=new fe(new Array(0),te,0,W,G)}function f(e){var t;for(t=0;z>t;t++)e.dyn_ltree[2*t]=0;for(t=0;j>t;t++)e.dyn_dtree[2*t]=0;for(t=0;W>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?o(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function m(e,t,n,i){p(e),i&&(o(e,n),o(e,~n)),T.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function g(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function v(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&g(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!g(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function y(e,t,n){var i,o,l,u,c=0;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===i?a(e,o,t):(l=ae[o],a(e,l+H+1,t),u=Q[l],0!==u&&(o-=le[l],s(e,o,u)),i--,l=r(i),a(e,l,n),u=ee[l],0!==u&&(i-=ue[l],s(e,i,u)));while(c<e.last_lit);a(e,Y,t)}function b(e,t){var n,i,r,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=V,n=0;l>n;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)r=e.heap[++e.heap_len]=2>u?++u:0,o[2*r]=1,e.depth[r]=0,e.opt_len--,a&&(e.static_len-=s[2*r+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)v(e,o,n);r=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],v(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,v(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],c(e,t),d(o,u,e.bl_count)}function w(e,t,n){var i,r,o=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),t[2*(n+1)+1]=65535,i=0;n>=i;i++)r=s,s=t[2*(i+1)+1],++a<l&&r===s||(u>a?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[2*Z]++):10>=a?e.bl_tree[2*X]++:e.bl_tree[2*J]++,a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))}function C(e,t,n){var i,r,o=-1,l=t[1],u=0,c=7,d=4;for(0===l&&(c=138,d=3),i=0;n>=i;i++)if(r=l,l=t[2*(i+1)+1],!(++u<c&&r===l)){if(d>u){do a(e,r,e.bl_tree);while(0!==--u)}else 0!==r?(r!==o&&(a(e,r,e.bl_tree),u--),a(e,Z,e.bl_tree),s(e,u-3,2)):10>=u?(a(e,X,e.bl_tree),s(e,u-3,3)):(a(e,J,e.bl_tree),s(e,u-11,7));u=0,o=r,0===l?(c=138,d=3):r===l?(c=6,d=3):(c=7,d=4)}}function x(e){var t;for(w(e,e.dyn_ltree,e.l_desc.max_code),w(e,e.dyn_dtree,e.d_desc.max_code),b(e,e.bl_desc),t=W-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S(e,t,n,i){var r;for(s(e,t-257,5),s(e,n-1,5),s(e,i-4,4),r=0;i>r;r++)s(e,e.bl_tree[2*ne[r]+1],3);C(e,e.dyn_ltree,t-1),C(e,e.dyn_dtree,n-1)}function A(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return L;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return O;for(t=32;H>t;t++)if(0!==e.dyn_ltree[2*t])return O;return L}function _(e){me||(h(),me=!0),e.l_desc=new pe(e.dyn_ltree,ce),e.d_desc=new pe(e.dyn_dtree,de),e.bl_desc=new pe(e.bl_tree,he),e.bi_buf=0,e.bi_valid=0,f(e)}function E(e,t,n,i){s(e,(B<<1)+(i?1:0),3),m(e,t,n,!0)}function $(e){s(e,M<<1,3),a(e,Y,re),u(e)}function k(e,t,n,i){var r,o,a=0;e.level>0?(e.strm.data_type===N&&(e.strm.data_type=A(e)),b(e,e.l_desc),b(e,e.d_desc),a=x(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,r>=o&&(r=o)):r=o=n+5,r>=n+4&&-1!==t?E(e,t,n,i):e.strategy===F||o===r?(s(e,(M<<1)+(i?1:0),3),y(e,re,oe)):(s(e,(R<<1)+(i?1:0),3),S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),y(e,e.dyn_ltree,e.dyn_dtree)),f(e),i&&p(e)}function D(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ae[n]+H+1)]++,e.dyn_dtree[2*r(t)]++),e.last_lit===e.lit_bufsize-1}var T=e("../utils/common"),F=4,L=0,O=1,N=2,B=0,M=1,R=2,P=3,I=258,U=29,H=256,z=H+1+U,j=30,W=19,V=2*z+1,q=15,K=16,G=7,Y=256,Z=16,X=17,J=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=512,re=new Array(2*(z+2));i(re);var oe=new Array(2*j);i(oe);var se=new Array(ie);i(se);var ae=new Array(I-P+1);i(ae);var le=new Array(U);i(le);var ue=new Array(j);i(ue);var ce,de,he,fe=function(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length},pe=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},me=!1;n._tr_init=_,n._tr_stored_block=E,n._tr_flush_block=k,n._tr_tally=D,n._tr_align=$},{"../utils/common":27}],39:[function(e,t,n){function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},{}]},{},[9])(9)}),function(e,t,n){"use strict";function i(e,t,n){if(!e)throw ngMinErr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function r(e,t){return e||t?e?t?(z(e)&&(e=e.join(" ")),z(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function o(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function s(e,t,n){var i="";return e=z(e)?e:e&&j(e)&&e.length?e.split(/\s+/):[],H(e,function(e,r){e&&e.length>0&&(i+=r>0?" ":"",i+=n?t+e:e+t)}),i}function a(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function l(e){if(e instanceof U)switch(e.length){case 0:return[];case 1:if(e[0].nodeType===Y)return e;break;default:return U(u(e))}return e.nodeType===Y?U(e):void 0}function u(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==Y)return n}}function c(e,t,n){H(t,function(t){e.addClass(t,n)})}function d(e,t,n){H(t,function(t){e.removeClass(t,n)})}function h(e){return function(t,n){n.addClass&&(c(e,t,n.addClass),n.addClass=null),n.removeClass&&(d(e,t,n.removeClass),n.removeClass=null)}}function f(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||P;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=P},e.$$prepared=!0}return e}function p(e,t){m(e,t),g(e,t)}function m(e,t){t.from&&(e.css(t.from),t.from=null)}function g(e,t){t.to&&(e.css(t.to),t.to=null)}function v(e,t,n){var i=(t.addClass||"")+" "+(n.addClass||""),r=(t.removeClass||"")+" "+(n.removeClass||""),o=y(e.attr("class"),i,r);n.preparationClasses&&(t.preparationClasses=_(n.preparationClasses,t.preparationClasses),delete n.preparationClasses);var s=t.domOperation!==P?t.domOperation:null;return I(t,n),s&&(t.domOperation=s),o.addClass?t.addClass=o.addClass:t.addClass=null,o.removeClass?t.removeClass=o.removeClass:t.removeClass=null,t}function y(e,t,n){function i(e){j(e)&&(e=e.split(" "));var t={};return H(e,function(e){e.length&&(t[e]=!0)}),t}var r=1,o=-1,s={};e=i(e),t=i(t),H(t,function(e,t){s[t]=r}),n=i(n),H(n,function(e,t){s[t]=s[t]===r?null:o});var a={addClass:"",removeClass:""};return H(s,function(t,n){var i,s;t===r?(i="addClass",s=!e[n]):t===o&&(i="removeClass",s=e[n]),s&&(a[i].length&&(a[i]+=" "),a[i]+=n)}),a}function b(e){return e instanceof t.element?e[0]:e}function w(e,t,n){var i="";t&&(i=s(t,J,!0)),n.addClass&&(i=_(i,s(n.addClass,Z))),n.removeClass&&(i=_(i,s(n.removeClass,X))),i.length&&(n.preparationClasses=i,e.addClass(i))}function C(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function x(e,t){var n=t?"-"+t+"s":"";return A(e,[he,n]),[he,n]}function S(e,t){var n=t?"paused":"",i=M+le;return A(e,[i,n]),[i,n]}function A(e,t){var n=t[0],i=t[1];e.style[n]=i}function _(e,t){return e?t?e+" "+t:e:t}function E(e){return[de,e+"s"]}function $(e,t){var n=t?ce:he;return[n,e+"s"]}function k(e,t,n){var i=Object.create(null),r=e.getComputedStyle(t)||{};return H(n,function(e,t){var n=r[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=D(n)),0===n&&(n=null),i[t]=n}}),i}function D(e){var t=0,n=e.split(/\s*,\s*/);return H(n,function(e){"s"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function T(e){return 0===e||null!=e}function F(e,t){var n=N,i=e+"s";return t?n+=ie:i+=" linear all",[n,i]}function L(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function O(e,t,n){H(n,function(n){e[n]=q(e[n])?e[n]:t.style.getPropertyValue(n)})}var N,B,M,R,P=t.noop,I=t.extend,U=t.element,H=t.forEach,z=t.isArray,j=t.isString,W=t.isObject,V=t.isUndefined,q=t.isDefined,K=t.isFunction,G=t.isElement,Y=1,Z="-add",X="-remove",J="ng-",Q="-active",ee="ng-animate",te="$$ngAnimateChildren",ne="";V(e.ontransitionend)&&q(e.onwebkittransitionend)?(ne="-webkit-",N="WebkitTransition",B="webkitTransitionEnd transitionend"):(N="transition",B="transitionend"),V(e.onanimationend)&&q(e.onwebkitanimationend)?(ne="-webkit-",M="WebkitAnimation",R="webkitAnimationEnd animationend"):(M="animation",R="animationend");var ie="Duration",re="Property",oe="Delay",se="TimingFunction",ae="IterationCount",le="PlayState",ue=9999,ce=M+oe,de=M+ie,he=N+oe,fe=N+ie,pe=["$$rAF",function(e){function t(e){i=i.concat(e),n()}function n(){if(i.length){for(var t=i.shift(),o=0;o<t.length;o++)t[o]();r||e(function(){r||n()})}}var i,r;return i=t.queue=[],t.waitUntilQuiet=function(t){r&&r(),r=e(function(){r=null,t(),n()})},t}],me=[function(){return function(e,n,i){var r=i.ngAnimateChildren;t.isString(r)&&0===r.length?n.data(te,!0):i.$observe("ngAnimateChildren",function(e){e="on"===e||"true"===e,n.data(te,e)})}}],ge="$$animateCss",ve=1e3,ye=3,be=1.5,we={transitionDuration:fe,transitionDelay:he,transitionProperty:N+re,animationDuration:de,animationDelay:ce,animationIterationCount:M+ae},Ce={transitionDuration:fe,transitionDelay:he,animationDuration:de,animationDelay:ce},xe=["$animateProvider",function(e){var t=L(),n=L();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$animate",function(e,i,r,l,u,c,d,v){function y(e,t){var n="$$ngAnimateParentKey",i=e.parentNode,r=i[n]||(i[n]=++I);return r+"-"+e.getAttribute("class")+"-"+t}function w(n,i,r,o){var s=t.get(r);return s||(s=k(e,n,o),"infinite"===s.animationIterationCount&&(s.animationIterationCount=1)),t.put(r,s),s}function C(r,o,a,l){var u;if(t.count(a)>0&&(u=n.get(a),!u)){var c=s(o,"-stagger");i.addClass(r,c),u=k(e,r,l),u.animationDuration=Math.max(u.animationDuration,0),u.transitionDuration=Math.max(u.transitionDuration,0),i.removeClass(r,c),n.put(a,u)}return u||{}}function _(e){U.push(e),d.waitUntilQuiet(function(){t.flush(),n.flush();for(var e=u(),i=0;i<U.length;i++)U[i](e);U.length=0})}function D(e,t,n){var i=w(e,t,n,we),r=i.animationDelay,o=i.transitionDelay;return i.maxDelay=r&&o?Math.max(r,o):r||o,i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration),i}var L=h(i),I=0,U=[];return function(e,n){function u(){h()}function d(){h(!0)}function h(t){W||q&&V||(W=!0,V=!1,n.$$skipPreparationClasses||i.removeClass(e,fe),i.removeClass(e,me),S(j,!1),x(j,!1),H(ie,function(e){j.style[e[0]]=""}),L(e,n),p(e,n),Object.keys(U).length&&H(U,function(e,t){e?j.style.setProperty(t,e):j.style.removeProperty(t)}),n.onDone&&n.onDone(),K&&K.complete(!t))}function w(e){Ne.blockTransition&&x(j,e),Ne.blockKeyframeAnimation&&S(j,!!e)}function k(){return K=new r({end:u,cancel:d}),_(P),h(),{$$willAnimate:!1,start:function(){return K},end:u}}function I(){function t(){if(!W){if(w(!1),H(ie,function(e){var t=e[0],n=e[1];j.style[t]=n}),L(e,n),i.addClass(e,me),Ne.recalculateTimingStyles){if(pe=j.className+" "+fe,Se=y(j,pe),Le=D(j,pe,Se),Oe=Le.maxDelay,Y=Math.max(Oe,0),te=Le.maxDuration,0===te)return void h();Ne.hasTransitions=Le.transitionDuration>0,Ne.hasAnimations=Le.animationDuration>0}if(Ne.applyAnimationDelay&&(Oe="boolean"!=typeof n.delay&&T(n.delay)?parseFloat(n.delay):Oe,Y=Math.max(Oe,0),Le.animationDelay=Oe,Be=$(Oe,!0),ie.push(Be),j.style[Be[0]]=Be[1]),ee=Y*ve,ne=te*ve,n.easing){var t,a=n.easing;Ne.hasTransitions&&(t=N+se,ie.push([t,a]),j.style[t]=a),Ne.hasAnimations&&(t=M+se,ie.push([t,a]),j.style[t]=a)}Le.transitionDuration&&u.push(B),Le.animationDuration&&u.push(R),s=Date.now();var c=ee+be*ne,d=s+c,f=e.data(ge)||[],p=!0;if(f.length){var m=f[0];p=d>m.expectedEndTime,p?l.cancel(m.timer):f.push(h)}if(p){var v=l(r,c,!1);f[0]={timer:v,expectedEndTime:d},f.push(h),e.data(ge,f)}e.on(u.join(" "),o),n.to&&(n.cleanupStyles&&O(U,j,Object.keys(n.to)),g(e,n))}}function r(){var t=e.data(ge);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(ge)}}function o(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(ye));Math.max(n-s,0)>=ee&&i>=te&&(q=!0,h())}if(!W){if(!j.parentNode)return void h();var s,u=[],c=function(e){if(q)V&&e&&(V=!1,h());else if(V=!e,Le.animationDuration){var t=S(j,V);V?ie.push(t):a(ie,t)}},d=Te>0&&(Le.transitionDuration&&0===Ae.transitionDuration||Le.animationDuration&&0===Ae.animationDuration)&&Math.max(Ae.animationDelay,Ae.transitionDelay);d?l(t,Math.floor(d*Te*ve),!1):t(),G.resume=function(){c(!0)},G.pause=function(){c(!1)}}}var U={},j=b(e);if(!j||!j.parentNode||!v.enabled())return k();n=f(n);var W,V,q,K,G,Y,ee,te,ne,ie=[],oe=e.attr("class"),ae=o(n);if(0===n.duration||!c.animations&&!c.transitions)return k();var le=n.event&&z(n.event)?n.event.join(" "):n.event,ce=le&&n.structural,de="",he="";ce?de=s(le,J,!0):le&&(de=le),n.addClass&&(he+=s(n.addClass,Z)),n.removeClass&&(he.length&&(he+=" "),he+=s(n.removeClass,X)),n.applyClassesEarly&&he.length&&L(e,n);var fe=[de,he].join(" ").trim(),pe=oe+" "+fe,me=s(fe,Q),we=ae.to&&Object.keys(ae.to).length>0,xe=(n.keyframeStyle||"").length>0;if(!xe&&!we&&!fe)return k();var Se,Ae;if(n.stagger>0){var _e=parseFloat(n.stagger);Ae={transitionDelay:_e,animationDelay:_e,transitionDuration:0,animationDuration:0}}else Se=y(j,pe),Ae=C(j,fe,Se,Ce);n.$$skipPreparationClasses||i.addClass(e,fe);var Ee;if(n.transitionStyle){var $e=[N,n.transitionStyle];A(j,$e),ie.push($e)}if(n.duration>=0){Ee=j.style[N].length>0;var ke=F(n.duration,Ee);A(j,ke),ie.push(ke)}if(n.keyframeStyle){var De=[M,n.keyframeStyle];A(j,De),ie.push(De)}var Te=Ae?n.staggerIndex>=0?n.staggerIndex:t.count(Se):0,Fe=0===Te;Fe&&!n.skipBlocking&&x(j,ue);var Le=D(j,pe,Se),Oe=Le.maxDelay;Y=Math.max(Oe,0),te=Le.maxDuration;var Ne={};if(Ne.hasTransitions=Le.transitionDuration>0,Ne.hasAnimations=Le.animationDuration>0,Ne.hasTransitionAll=Ne.hasTransitions&&"all"==Le.transitionProperty,Ne.applyTransitionDuration=we&&(Ne.hasTransitions&&!Ne.hasTransitionAll||Ne.hasAnimations&&!Ne.hasTransitions),Ne.applyAnimationDuration=n.duration&&Ne.hasAnimations,Ne.applyTransitionDelay=T(n.delay)&&(Ne.applyTransitionDuration||Ne.hasTransitions),Ne.applyAnimationDelay=T(n.delay)&&Ne.hasAnimations,Ne.recalculateTimingStyles=he.length>0,(Ne.applyTransitionDuration||Ne.applyAnimationDuration)&&(te=n.duration?parseFloat(n.duration):te,Ne.applyTransitionDuration&&(Ne.hasTransitions=!0,Le.transitionDuration=te,Ee=j.style[N+re].length>0,ie.push(F(te,Ee))),Ne.applyAnimationDuration&&(Ne.hasAnimations=!0,Le.animationDuration=te,ie.push(E(te)))),0===te&&!Ne.recalculateTimingStyles)return k();if(null!=n.delay){var Be=parseFloat(n.delay);Ne.applyTransitionDelay&&ie.push($(Be)),Ne.applyAnimationDelay&&ie.push($(Be,!0))}return null==n.duration&&Le.transitionDuration>0&&(Ne.recalculateTimingStyles=Ne.recalculateTimingStyles||Fe),ee=Y*ve,ne=te*ve,n.skipBlocking||(Ne.blockTransition=Le.transitionDuration>0,Ne.blockKeyframeAnimation=Le.animationDuration>0&&Ae.animationDelay>0&&0===Ae.animationDuration),n.from&&(n.cleanupStyles&&O(U,j,Object.keys(n.from)),m(e,n)),Ne.blockTransition||Ne.blockKeyframeAnimation?w(te):n.skipBlocking||x(j,!1),{$$willAnimate:!0,end:u,start:function(){return W?void 0:(G={end:u,cancel:d,resume:null,pause:null},K=new r(G),_(I),K)}}}}]}],Se=["$$animationProvider",function(e){function t(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var n="ng-animate-shim",i="ng-anchor",r="ng-anchor-out",o="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,s,a,l,u,c,d){function f(e){return e.replace(/\bng-\S+\b/g,"")}function p(e,t){return j(e)&&(e=e.split(" ")),j(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function m(t,s,l){function u(e){var t={},n=b(e).getBoundingClientRect();return H(["width","height","top","left"],function(e){var i=n[e];switch(e){case"top":i+=y.scrollTop;break;case"left":i+=y.scrollLeft}t[e]=Math.floor(i)+"px"}),t}function c(){var t=e(g,{addClass:r,delay:!0,from:u(s)});return t.$$willAnimate?t:null}function d(e){return e.attr("class")||""}function h(){var t=f(d(l)),n=p(t,v),i=p(v,t),s=e(g,{to:u(l),addClass:o+" "+n,removeClass:r+" "+i,delay:!0});return s.$$willAnimate?s:null}function m(){g.remove(),s.removeClass(n),l.removeClass(n)}var g=U(b(s).cloneNode(!0)),v=f(d(g));s.addClass(n),l.addClass(n),g.addClass(i),C.append(g);var w,x=c();if(!x&&(w=h(),!w))return m();var S=x||w;return{start:function(){function e(){n&&n.end()}var t,n=S.start();return n.done(function(){return n=null,!w&&(w=h())?(n=w.start(),n.done(function(){n=null,m(),t.complete()}),n):(m(),void t.complete())}),t=new a({end:e,cancel:e})}}}function g(e,t,n,i){var r=v(e,P),o=v(t,P),s=[];return H(i,function(e){var t=e.out,i=e["in"],r=m(n,t,i);r&&s.push(r)}),r||o||0!==s.length?{start:function(){function e(){H(t,function(e){e.end()})}var t=[];r&&t.push(r.start()),o&&t.push(o.start()),H(s,function(e){t.push(e.start())});var n=new a({end:e,cancel:e});return a.all(t,function(e){n.complete(e)}),n}}:void 0}function v(t){var n=t.element,i=t.options||{};t.structural&&(i.event=t.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===t.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=_(i.event,i.preparationClasses));var r=e(n,i);return r.$$willAnimate?r:null}if(!u.animations&&!u.transitions)return P;var y=d[0].body,w=b(l),C=U(t(w)||y.contains(w)?w:y);h(c);return function(e){return e.from&&e.to?g(e.from,e.to,e.classes,e.anchors):v(e)}}]}],Ae=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,i){function r(n){n=z(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var s=n[o],a=e.$$registeredAnimations[s];a&&!r[s]&&(i.push(t.get(a)),r[s]=!0)}return i}var o=h(i);return function(e,t,i,s){function a(){s.domOperation(),o(e,s)}function l(e,t,i,r,o){var s;switch(i){case"animate":s=[t,r.from,r.to,o];break;case"setClass":s=[t,m,g,o];break;case"addClass":s=[t,m,o];break;case"removeClass":s=[t,g,o];break;default:s=[t,o]}s.push(r);var a=e.apply(e,s);if(a)if(K(a.start)&&(a=a.start()),a instanceof n)a.done(o);else if(K(a))return a;return P}function u(e,t,i,r,o){var s=[];return H(r,function(r){var a=r[o];a&&s.push(function(){var r,o,s=!1,u=function(e){s||(s=!0,(o||P)(e),r.complete(!e))};return r=new n({end:function(){u()},cancel:function(){u(!0)}}),o=l(a,e,t,i,function(e){var t=e===!1;u(t)}),r})}),s}function c(e,t,i,r,o){var s=u(e,t,i,r,o);if(0===s.length){var a,l;"beforeSetClass"===o?(a=u(e,"removeClass",i,r,"beforeRemoveClass"),l=u(e,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(a=u(e,"removeClass",i,r,"removeClass"),l=u(e,"addClass",i,r,"addClass")),a&&(s=s.concat(a)),l&&(s=s.concat(l))}if(0!==s.length)return function(e){var t=[];return s.length&&H(s,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){H(t,function(t){e?t.cancel():t.end()})}}}3===arguments.length&&W(i)&&(s=i,i=null),s=f(s),i||(i=e.attr("class")||"",s.addClass&&(i+=" "+s.addClass),s.removeClass&&(i+=" "+s.removeClass));var d,h,m=s.addClass,g=s.removeClass,v=r(i);if(v.length){var y,b;"leave"==t?(b="leave",y="afterLeave"):(b="before"+t.charAt(0).toUpperCase()+t.substr(1),y=t),"enter"!==t&&"move"!==t&&(d=c(e,t,s,v,b)),h=c(e,t,s,v,y)}return d||h?{start:function(){function t(t){l=!0,a(),p(e,s),u.complete(t)}function i(e){l||((r||P)(e),t(e))}var r,o=[];d&&o.push(function(e){r=d(e)}),o.length?o.push(function(e){a(),e(!0)}):a(),h&&o.push(function(e){r=h(e)});var l=!1,u=new n({end:function(){i()},cancel:function(){i(!0)}});return n.chain(o,t),u}}:void 0}}]}],_e=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){var n=t.element,i=t.event,r=t.options,o=t.classes;return e(n,i,o,r)}return function(e){if(e.from&&e.to){var i=n(e.from),r=n(e.to);if(!i&&!r)return;return{start:function(){function e(){return function(){H(o,function(e){e.end()})}}function n(e){s.complete(e)}var o=[];i&&o.push(i.start()),r&&o.push(r.start()),t.all(o,n);var s=new t({end:e(),cancel:e()});return s}}}return n(e)}}]}],Ee="data-ng-animate",$e="$ngAnimatePin",ke=["$animateProvider",function(e){function t(e,t,n,i){return s[e].some(function(e){return e(t,n,i)})}function n(e,t){e=e||{};var n=(e.addClass||"").length>0,i=(e.removeClass||"").length>0;return t?n&&i:n||i}var r=1,o=2,s=this.rules={skip:[],cancel:[],join:[]};s.join.push(function(e,t,i){return!t.structural&&n(t.options)}),s.skip.push(function(e,t,i){return!t.structural&&!n(t.options)}),s.skip.push(function(e,t,n){return"leave"==n.event&&t.structural}),s.skip.push(function(e,t,n){return n.structural&&n.state===o&&!t.structural}),s.cancel.push(function(e,t,n){return n.structural&&t.structural}),s.cancel.push(function(e,t,n){return n.state===o&&t.structural}),s.cancel.push(function(e,t,n){var i=t.options,r=n.options;return i.addClass&&i.addClass===r.removeClass||i.removeClass&&i.removeClass===r.addClass}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(s,a,c,d,m,g,y,x,S,A){function _(){var e=!1;return function(t){e?t():a.$$postDigest(function(){e=!0,t()})}}function E(e,t){return v(e,t,{})}function $(e,t){var n=b(e),i=[],r=P[t];return r&&H(r,function(e){e.node.contains(n)&&i.push(e.callback)}),i}function k(e,i,u){function c(t,n,i,r){S(function(){var t=$(e,n);t.length&&s(function(){H(t,function(t){t(e,i,r)})})}),t.progress(n,i,r)}function d(t){C(e,u),X(e,u),p(e,u),u.domOperation(),x.complete(!t)}var h,m;e=l(e),e&&(h=b(e),m=e.parent()),u=f(u);var x=new y,S=_();if(z(u.addClass)&&(u.addClass=u.addClass.join(" ")),u.addClass&&!j(u.addClass)&&(u.addClass=null),z(u.removeClass)&&(u.removeClass=u.removeClass.join(" ")),u.removeClass&&!j(u.removeClass)&&(u.removeClass=null),u.from&&!W(u.from)&&(u.from=null),u.to&&!W(u.to)&&(u.to=null),!h)return d(),x;var A=[h.className,u.addClass,u.removeClass].join(" ");if(!Z(A))return d(),x;var k=["enter","move","leave"].indexOf(i)>=0,F=!M||B.get(h),R=!F&&N.get(h)||{},P=!!R.state;if(F||P&&R.state==r||(F=!L(e,m,i)),F)return d(),x;k&&D(e);var I={structural:k,element:e,event:i,close:d,options:u,runner:x};if(P){var U=t("skip",e,I,R);if(U)return R.state===o?(d(),x):(v(e,R.options,u),R.runner);var V=t("cancel",e,I,R);if(V)if(R.state===o)R.runner.end();else{if(!R.structural)return v(e,R.options,I.options),R.runner;R.close()}else{var q=t("join",e,I,R);if(q){if(R.state!==o)return w(e,k?i:null,u),i=I.event=R.event,u=v(e,R.options,I.options),R.runner;E(e,u)}}}else E(e,u);var K=I.structural;if(K||(K="animate"===I.event&&Object.keys(I.options.to||{}).length>0||n(I.options)),!K)return d(),T(e),x;var G=(R.counter||0)+1;return I.counter=G,O(e,r,I),a.$$postDigest(function(){var t=N.get(h),r=!t;t=t||{};var s=e.parent()||[],a=s.length>0&&("animate"===t.event||t.structural||n(t.options));if(r||t.counter!==G||!a)return r&&(X(e,u),p(e,u)),(r||k&&t.event!==i)&&(u.domOperation(),x.end()),void(a||T(e));i=!t.structural&&n(t.options,!0)?"setClass":t.event,O(e,o);var l=g(e,i,t.options);l.done(function(t){d(!t);var n=N.get(h);n&&n.counter===G&&T(b(e)),c(x,i,"close",{})}),x.setHost(l),c(x,i,"start",{})}),x}function D(e){var t=b(e),n=t.querySelectorAll("["+Ee+"]");H(n,function(e){var t=parseInt(e.getAttribute(Ee)),n=N.get(e);switch(t){case o:n.runner.end();case r:n&&N.remove(e)}})}function T(e){var t=b(e);t.removeAttribute(Ee),N.remove(t)}function F(e,t){return b(e)===b(t)}function L(e,t,n){var i,r=U(d[0].body),o=F(e,r)||"HTML"===e[0].nodeName,s=F(e,c),a=!1,l=e.data($e);for(l&&(t=l);t&&t.length;){s||(s=F(t,c));var u=t[0];if(u.nodeType!==Y)break;var h=N.get(u)||{};if(a||(a=h.structural||B.get(u)),V(i)||i===!0){var f=t.data(te);q(f)&&(i=f)}if(a&&i===!1)break;s||(s=F(t,c),s||(l=t.data($e),l&&(t=l))),o||(o=F(t,r)),t=t.parent()}var p=!a||i;return p&&s&&o}function O(e,t,n){n=n||{},n.state=t;var i=b(e);i.setAttribute(Ee,t);var r=N.get(i),o=r?I(r,n):n;N.put(i,o)}var N=new m,B=new m,M=null,R=a.$watch(function(){return 0===x.totalPendingRequests},function(e){e&&(R(),a.$$postDigest(function(){a.$$postDigest(function(){null===M&&(M=!0)})}))}),P={},K=e.classNameFilter(),Z=K?function(e){return K.test(e)}:function(){return!0},X=h(S);return{on:function(e,t,n){var i=u(t);P[e]=P[e]||[],P[e].push({node:i,callback:n})},off:function(e,t,n){function i(e,t,n){var i=u(t);return e.filter(function(e){var t=e.node===i&&(!n||e.callback===n);return!t})}var r=P[e];r&&(P[e]=1===arguments.length?null:i(r,t,n))},pin:function(e,t){i(G(e),"element","not an element"),i(G(t),"parentElement","not an element"),e.data($e,t)},push:function(e,t,n,i){return n=n||{},n.domOperation=i,k(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!M;else{var i=G(e);if(i){var r=b(e),o=B.get(r);1===n?t=!o:(t=!!t,t?o&&B.remove(r):B.put(r,!0))}else t=M=!!e}return t}}}]}],De=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}],Te=["$q","$sniffer","$$animateAsyncRun",function(e,t,n){function i(e){this.setHost(e),this._doneCallbacks=[],this._runInAnimationFrame=n(),this._state=0}var r=0,o=1,s=2;return i.chain=function(e,t){function n(){return i===e.length?void t(!0):void e[i](function(e){return e===!1?void t(!1):(i++,void n())})}var i=0;n()},i.all=function(e,t){function n(n){r=r&&n,++i===e.length&&t(r)}var i=0,r=!0;H(e,function(e){e.done(n)})},i.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===s?e():this._doneCallbacks.push(e)},progress:P,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t);
},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===r&&(t._state=o,t._runInAnimationFrame(function(){t._resolve(e)}))},_resolve:function(e){this._state!==s&&(H(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=s)}},i}],Fe=["$animateProvider",function(e){function t(e,t){e.data(a,t)}function n(e){e.removeData(a)}function i(e){return e.data(a)}var o="ng-animate-ref",s=this.drivers=[],a="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(e,a,l,u,c,d){function m(e){function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode,i=n.parentNode;o.put(n,e);for(var s;i;){if(s=o.get(i)){s.processed||(s=t(s));break}i=i.parentNode}return(s||r).children.push(e),e}function n(e){var t,n=[],i=[];for(t=0;t<e.children.length;t++)i.push(e.children[t]);var r=i.length,o=0,s=[];for(t=0;t<i.length;t++){var a=i[t];0>=r&&(r=o,o=0,n.push(s),s=[]),s.push(a.fn),a.children.forEach(function(e){o++,i.push(e)}),r--}return s.length&&n.push(s),n}var i,r={children:[]},o=new c;for(i=0;i<e.length;i++){var s=e[i];o.put(s.domNode,e[i]={domNode:s.domNode,fn:s.fn,children:[]})}for(i=0;i<e.length;i++)t(e[i]);return n(r)}var g=[],v=h(e);return function(c,h,y){function w(e){var t="["+o+"]",n=e.hasAttribute(o)?[e]:e.querySelectorAll(t),i=[];return H(n,function(e){var t=e.getAttribute(o);t&&t.length&&i.push(e)}),i}function C(e){var t=[],n={};H(e,function(e,i){var r=e.element,s=b(r),a=e.event,l=["enter","move"].indexOf(a)>=0,u=e.structural?w(s):[];if(u.length){var c=l?"to":"from";H(u,function(e){var t=e.getAttribute(o);n[t]=n[t]||{},n[t][c]={animationID:i,element:U(e)}})}else t.push(e)});var i={},r={};return H(n,function(n,o){var s=n.from,a=n.to;if(!s||!a){var l=s?s.animationID:a.animationID,u=l.toString();return void(i[u]||(i[u]=!0,t.push(e[l])))}var c=e[s.animationID],d=e[a.animationID],h=s.animationID.toString();if(!r[h]){var f=r[h]={structural:!0,beforeStart:function(){c.beforeStart(),d.beforeStart()},close:function(){c.close(),d.close()},classes:x(c.classes,d.classes),from:c,to:d,anchors:[]};f.classes.length?t.push(f):(t.push(c),t.push(d))}r[h].anchors.push({out:s.element,"in":a.element})}),t}function x(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],i=0;i<e.length;i++){var r=e[i];if("ng-"!==r.substring(0,3))for(var o=0;o<t.length;o++)if(r===t[o]){n.push(r);break}}return n.join(" ")}function S(e){for(var t=s.length-1;t>=0;t--){var n=s[t];if(l.has(n)){var i=l.get(n),r=i(e);if(r)return r}}}function A(){c.addClass(ee),F&&e.addClass(c,F)}function _(e,t){function n(e){i(e).setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function E(){var e=i(c);!e||"leave"===h&&y.$$domOperationFired||e.end()}function $(t){c.off("$destroy",E),n(c),v(c,y),p(c,y),y.domOperation(),F&&e.removeClass(c,F),c.removeClass(ee),D.complete(!t)}y=f(y);var k=["enter","move","leave"].indexOf(h)>=0,D=new u({end:function(){$()},cancel:function(){$(!0)}});if(!s.length)return $(),D;t(c,D);var T=r(c.attr("class"),r(y.addClass,y.removeClass)),F=y.tempClasses;return F&&(T+=" "+F,y.tempClasses=null),g.push({element:c,classes:T,event:h,structural:k,options:y,beforeStart:A,close:$}),c.on("$destroy",E),g.length>1?D:(a.$$postDigest(function(){var e=[];H(g,function(t){i(t.element)?e.push(t):t.close()}),g.length=0;var t=C(e),n=[];H(t,function(e){n.push({domNode:b(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close,r=e.anchors?e.from.element||e.to.element:e.element;if(i(r)){var o=S(e);o&&(t=o.start)}if(t){var s=t();s.done(function(e){n(!e)}),_(e,s)}else n()}})}),d(m(n))}),D)}}]}];t.module("ngAnimate",[]).directive("ngAnimateChildren",me).factory("$$rAFScheduler",pe).factory("$$AnimateRunner",Te).factory("$$animateAsyncRun",De).provider("$$animateQueue",ke).provider("$$animation",Fe).provider("$animateCss",xe).provider("$$animateCssDriver",Se).provider("$$animateJs",Ae).provider("$$animateJsDriver",_e)}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){"use strict";function i(e,t){return I(new(I(function(){},{prototype:e})),t)}function r(e){return P(arguments,function(t){t!==e&&P(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function o(e,t){var n=[];for(var i in e.path){if(e.path[i]!==t.path[i])break;n.push(e.path[i])}return n}function s(e){if(Object.keys)return Object.keys(e);var t=[];return P(e,function(e,n){t.push(n)}),t}function a(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,i=Number(arguments[2])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=n);n>i;i++)if(i in e&&e[i]===t)return i;return-1}function l(e,t,n,i){var r,l=o(n,i),u={},c=[];for(var d in l)if(l[d].params&&(r=s(l[d].params),r.length))for(var h in r)a(c,r[h])>=0||(c.push(r[h]),u[r[h]]=e[r[h]]);return I({},u,t)}function u(e,t,n){if(!n){n=[];for(var i in e)n.push(i)}for(var r=0;r<n.length;r++){var o=n[r];if(e[o]!=t[o])return!1}return!0}function c(e,t){var n={};return P(e,function(e){n[e]=t[e]}),n}function d(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return P(n,function(n){n in e&&(t[n]=e[n])}),t}function h(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in e)-1==a(n,i)&&(t[i]=e[i]);return t}function f(e,t){var n=R(e),i=n?[]:{};return P(e,function(e,r){t(e,r)&&(i[n?i.length:r]=e)}),i}function p(e,t){var n=R(e)?[]:{};return P(e,function(e,i){n[i]=t(e,i)}),n}function m(e,t){var i=1,o=2,l={},u=[],c=l,d=I(e.when(l),{$$promises:l,$$values:l});this.study=function(l){function f(e,n){if(y[n]!==o){if(v.push(n),y[n]===i)throw v.splice(0,a(v,n)),new Error("Cyclic dependency: "+v.join(" -> "));if(y[n]=i,B(e))g.push(n,[function(){return t.get(e)}],u);else{var r=t.annotate(e);P(r,function(e){e!==n&&l.hasOwnProperty(e)&&f(l[e],e)}),g.push(n,e,r)}v.pop(),y[n]=o}}function p(e){return M(e)&&e.then&&e.$$promises}if(!M(l))throw new Error("'invocables' must be an object");var m=s(l||{}),g=[],v=[],y={};return P(l,f),l=v=y=null,function(i,o,s){function a(){--w||(C||r(b,o.$$values),v.$$values=b,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,f.resolve(b))}function l(e){v.$$failure=e,f.reject(e)}function u(n,r,o){function u(e){d.reject(e),l(e)}function c(){if(!O(v.$$failure))try{d.resolve(t.invoke(r,s,b)),d.promise.then(function(e){b[n]=e,a()},u)}catch(e){u(e)}}var d=e.defer(),h=0;P(o,function(e){y.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(h++,y[e].then(function(t){b[e]=t,--h||c()},u))}),h||c(),y[n]=d.promise}if(p(i)&&s===n&&(s=o,o=i,i=null),i){if(!M(i))throw new Error("'locals' must be an object")}else i=c;if(o){if(!p(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=d;var f=e.defer(),v=f.promise,y=v.$$promises={},b=I({},i),w=1+g.length/3,C=!1;if(O(o.$$failure))return l(o.$$failure),v;o.$$inheritedValues&&r(b,h(o.$$inheritedValues,m)),I(y,o.$$promises),o.$$values?(C=r(b,h(o.$$values,m)),v.$$inheritedValues=h(o.$$values,m),a()):(o.$$inheritedValues&&(v.$$inheritedValues=h(o.$$inheritedValues,m)),o.then(a,l));for(var x=0,S=g.length;S>x;x+=3)i.hasOwnProperty(g[x])?a():u(g[x],g[x+1],g[x+2]);return v}},this.resolve=function(e,t,n,i){return this.study(e)(t,n,i)}}function g(e,t,n){this.fromConfig=function(e,t,n){return O(e.template)?this.fromString(e.template,t):O(e.templateUrl)?this.fromUrl(e.templateUrl,t):O(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return N(e)?e(t):e},this.fromUrl=function(n,i){return N(n)&&(n=n(i)),null==n?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,i){return n.invoke(e,null,i||{params:t})}}function v(e,t,r){function o(t,n,i,r){if(g.push(t),p[t])return p[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(m[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return m[t]=new H.Param(t,n,i,r),m[t]}function s(e,t,n,i){var r=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:r=["(",")"+(i?"?":"")];break;case!0:r=["?(",")?"];break;default:r=["("+n+"|",")?"]}return o+r[0]+t+r[1]}function a(r,o){var s,a,l,u,c;return s=r[2]||r[3],c=t.params[s],l=e.substring(h,r.index),a=o?r[4]:r[4]||("*"==r[1]?".*":null),u=H.type(a||"string")||i(H.type("string"),{pattern:new RegExp(a,t.caseInsensitive?"i":n)}),{id:s,regexp:a,segment:l,type:u,cfg:c}}t=I({params:{}},M(t)?t:{});var l,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,c=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d="^",h=0,f=this.segments=[],p=r?r.params:{},m=this.params=r?r.params.$$new():new H.ParamSet,g=[];this.source=e;for(var v,y,b;(l=u.exec(e))&&(v=a(l,!1),!(v.segment.indexOf("?")>=0));)y=o(v.id,v.type,v.cfg,"path"),d+=s(v.segment,y.type.pattern.source,y.squash,y.isOptional),f.push(v.segment),h=u.lastIndex;b=e.substring(h);var w=b.indexOf("?");if(w>=0){var C=this.sourceSearch=b.substring(w);if(b=b.substring(0,w),this.sourcePath=e.substring(0,h+w),C.length>0)for(h=0;l=c.exec(C);)v=a(l,!0),y=o(v.id,v.type,v.cfg,"search"),h=u.lastIndex}else this.sourcePath=e,this.sourceSearch="";d+=s(b)+(t.strict===!1?"/?":"")+"$",f.push(b),this.regexp=new RegExp(d,t.caseInsensitive?"i":n),this.prefix=f[0],this.$$paramNames=g}function y(e){I(this,e)}function b(){function e(e){return null!=e?e.toString().replace(/\//g,"%2F"):e}function r(e){return null!=e?e.toString().replace(/%2F/g,"/"):e}function o(){return{strict:m,caseInsensitive:h}}function l(e){return N(e)||R(e)&&N(e[e.length-1])}function u(){for(;x.length;){var e=x.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(w[e.name],d.invoke(e.def))}}function c(e){I(this,e||{})}H=this;var d,h=!1,m=!0,g=!1,w={},C=!0,x=[],S={string:{encode:e,decode:r,is:function(e){return null==e||!O(e)||"string"==typeof e},pattern:/[^\/]*/},"int":{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return O(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};b.$$getDefaultValue=function(e){if(!l(e.value))return e.value;if(!d)throw new Error("Injectable functions cannot be called at configuration time");return d.invoke(e.value)},this.caseInsensitive=function(e){return O(e)&&(h=e),h},this.strictMode=function(e){return O(e)&&(m=e),m},this.defaultSquashPolicy=function(e){if(!O(e))return g;if(e!==!0&&e!==!1&&!B(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return g=e,e},this.compile=function(e,t){return new v(e,I(o(),t))},this.isMatcher=function(e){if(!M(e))return!1;var t=!0;return P(v.prototype,function(n,i){N(n)&&(t=t&&O(e[i])&&N(e[i]))}),t},this.type=function(e,t,n){if(!O(t))return w[e];if(w.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return w[e]=new y(I({name:e},t)),n&&(x.push({name:e,def:n}),C||u()),this},P(S,function(e,t){w[t]=new y(I({name:t},e))}),w=i(w,{}),this.$get=["$injector",function(e){return d=e,C=!1,u(),P(S,function(e,t){w[t]||(w[t]=new y(e))}),this}],this.Param=function(e,t,i,r){function o(e){var t=M(e)?s(e):[],n=-1===a(t,"value")&&-1===a(t,"type")&&-1===a(t,"squash")&&-1===a(t,"array");return n&&(e={value:e}),e.$$fn=l(e.value)?e.value:function(){return e.value},e}function u(t,n,i){if(t.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:t.type?t.type instanceof y?t.type:new y(t.type):"config"===i?w.any:w.string}function c(){var t={array:"search"===r?"auto":!1},n=e.match(/\[\]$/)?{array:!0}:{};return I(t,n,i).array}function h(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!O(n)||null==n)return g;if(n===!0||B(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function m(e,t,i,r){var o,s,l=[{from:"",to:i||t?n:""},{from:null,to:i||t?n:""}];return o=R(e.replace)?e.replace:[],B(r)&&o.push({from:r,to:n}),s=p(o,function(e){return e.from}),f(l,function(e){return-1===a(s,e.from)}).concat(o)}function v(){if(!d)throw new Error("Injectable functions cannot be called at configuration time");var e=d.invoke(i.$$fn);if(null!==e&&e!==n&&!x.type.is(e))throw new Error("Default value ("+e+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return e}function b(e){function t(e){return function(t){return t.from===e}}function n(e){var n=p(f(x.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),O(e)?x.type.$normalize(e):v()}function C(){return"{Param:"+e+" "+t+" squash: '"+_+"' optional: "+A+"}"}var x=this;i=o(i),t=u(i,t,r);var S=c();t=S?t.$asArray(S,"search"===r):t,"string"!==t.name||S||"path"!==r||i.value!==n||(i.value="");var A=i.value!==n,_=h(i,A),E=m(i,S,A,_);I(this,{id:e,type:t,location:r,array:S,squash:_,replace:E,isOptional:A,value:b,dynamic:n,config:i,toString:C})},c.prototype={$$new:function(){return i(this,I(new c,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,i=s(c.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),P(t,function(t){P(s(t),function(t){-1===a(e,t)&&-1===a(i,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return P(n.$$keys(),function(i){t[i]=n[i].value(e&&e[i])}),t},$$equals:function(e,t){var n=!0,i=this;return P(i.$$keys(),function(r){var o=e&&e[r],s=t&&t[r];i[r].type.equals(o,s)||(n=!1)}),n},$$validates:function(e){var i,r,o,s,a,l=this.$$keys();for(i=0;i<l.length&&(r=this[l[i]],o=e[l[i]],o!==n&&null!==o||!r.isOptional);i++){if(s=r.type.$normalize(o),!r.type.is(s))return!1;if(a=r.type.encode(s),t.isString(a)&&!r.type.pattern.exec(a))return!1}return!0},$$parent:n},this.ParamSet=c}function w(e,i){function r(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function s(e,t,n){if(!n)return!1;var i=e.invoke(t,t,{$match:n});return O(i)?i:!0}function a(i,r,o,s){function a(e,t,n){return"/"===m?e:t?m.slice(0,-1)+e:n?m.slice(1)+e:e}function h(e){function t(e){var t=e(o,i);return t?(B(t)&&i.replace().url(t),!0):!1}if(!e||!e.defaultPrevented){p&&i.url()===p;p=n;var r,s=u.length;for(r=0;s>r;r++)if(t(u[r]))return;c&&t(c)}}function f(){return l=l||r.$on("$locationChangeSuccess",h)}var p,m=s.baseHref(),g=i.url();return d||f(),{sync:function(){h()},listen:function(){return f()},update:function(e){return e?void(g=i.url()):void(i.url()!==g&&(i.url(g),i.replace()))},push:function(e,t,r){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),i.url(o),p=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var s=e.html5Mode();t.isObject(s)&&(s=s.enabled);var l=n.format(r);if(o=o||{},s||null===l||(l="#"+e.hashPrefix()+l),null!==l&&r&&r["#"]&&(l+="#"+r["#"]),l=a(l,s,o.absolute),!o.absolute||!l)return l;var u=!s&&l?"/":"",c=i.port();return c=80===c||443===c?"":":"+c,[i.protocol(),"://",i.host(),c,u,l].join("")}}}var l,u=[],c=null,d=!1;this.rule=function(e){if(!N(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(B(e)){var t=e;e=function(){return t}}else if(!N(e))throw new Error("'rule' must be a function");return c=e,this},this.when=function(e,t){var n,a=B(t);if(B(e)&&(e=i.compile(e)),!a&&!N(t)&&!R(t))throw new Error("invalid 'handler' in when()");var l={matcher:function(e,t){return a&&(n=i.compile(t),t=["$match",function(e){return n.format(e)}]),I(function(n,i){return s(n,t,e.exec(i.path(),i.search()))},{prefix:B(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return a&&(n=t,t=["$match",function(e){return o(n,e)}]),I(function(n,i){return s(n,t,e.exec(i.path()))},{prefix:r(e)})}},u={matcher:i.isMatcher(e),regex:e instanceof RegExp};for(var c in u)if(u[c])return this.rule(l[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),d=e},this.$get=a,a.$inject=["$location","$rootScope","$injector","$browser"]}function C(e,r){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function h(e,t){if(!e)return n;var i=B(e),r=i?e:e.name,s=o(r);if(s){if(!t)throw new Error("No reference point given for path '"+r+"'");t=h(t);for(var a=r.split("."),l=0,u=a.length,c=t;u>l;l++)if(""!==a[l]||0!==l){if("^"!==a[l])break;if(!c.parent)throw new Error("Path '"+r+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;a=a.slice(l).join("."),r=c.name+(c.name&&a?".":"")+a}var d=_[r];return!d||!i&&(i||d!==e&&d.self!==e)?n:d}function f(e,t){E[e]||(E[e]=[]),E[e].push(t)}function m(e){for(var t=E[e]||[];t.length;)g(t.shift())}function g(t){t=i(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!B(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(_.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var r=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):B(t.parent)?t.parent:M(t.parent)&&B(t.parent.name)?t.parent.name:"";if(r&&!_[r])return f(r,t.self);for(var o in k)N(k[o])&&(t[o]=k[o](t,k.$delegates[o]));return _[n]=t,!t[$]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){A.$current.navigable==t&&u(e,n)||A.transitionTo(t,e,{inherit:!0,location:!1})}]),m(n),t}function v(e){return e.indexOf("*")>-1}function y(e){for(var t=e.split("."),n=A.$current.name.split("."),i=0,r=t.length;r>i;i++)"*"===t[i]&&(n[i]="*");return"**"===t[0]&&(n=n.slice(a(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(a(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length!=n.length?!1:n.join("")===t.join("")}function b(e,t){return B(e)&&!O(t)?k[e]:N(t)&&B(e)?(k[e]&&!k.$delegates[e]&&(k.$delegates[e]=k[e]),k[e]=t,this):this}function w(e,t){return M(e)?t=e:t.name=e,g(t),this}function C(e,r,o,a,d,f,m,g,b){function w(t,n,i,o){var s=e.$broadcast("$stateNotFound",t,n,i);if(s.defaultPrevented)return m.update(),D;if(!s.retry)return null;if(o.$retry)return m.update(),T;var a=A.transition=r.when(s.retry);return a.then(function(){return a!==A.transition?E:(t.options.$retry=!0,A.transitionTo(t.to,t.toParams,t.options))},function(){return D}),m.update(),a}function C(e,n,i,s,l,u){function h(){var n=[];return P(e.views,function(i,r){var s=i.resolve&&i.resolve!==e.resolve?i.resolve:{};s.$template=[function(){return o.load(r,{view:i,locals:l.globals,params:f,notify:u.notify})||""}],n.push(d.resolve(s,l.globals,l.resolve,e).then(function(n){if(N(i.controllerProvider)||R(i.controllerProvider)){var o=t.extend({},s,l.globals);n.$$controller=a.invoke(i.controllerProvider,null,o)}else n.$$controller=i.controller;n.$$state=e,n.$$controllerAs=i.controllerAs,l[r]=n}))}),r.all(n).then(function(){return l.globals})}var f=i?n:c(e.params.$$keys(),n),p={$stateParams:f};l.resolve=d.resolve(e.resolve,p,l.resolve,e);var m=[l.resolve.then(function(e){l.globals=e})];return s&&m.push(s),r.all(m).then(h).then(function(e){return l})}var E=r.reject(new Error("transition superseded")),k=r.reject(new Error("transition prevented")),D=r.reject(new Error("transition aborted")),T=r.reject(new Error("transition failed"));return S.locals={resolve:null,globals:{$stateParams:{}}},A={params:{},current:S.self,$current:S,transition:null},A.reload=function(e){return A.transitionTo(A.current,f,{reload:e||!0,inherit:!1,notify:!0})},A.go=function(e,t,n){return A.transitionTo(e,t,I({inherit:!0,relative:A.$current},n))},A.transitionTo=function(t,n,o){n=n||{},o=I({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var s,u=A.$current,d=A.params,p=u.path,g=h(t,o.relative),v=n["#"];if(!O(g)){var y={to:t,toParams:n,options:o},b=w(y,u.self,d,o);if(b)return b;if(t=y.to,n=y.toParams,o=y.options,g=h(t,o.relative),!O(g)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(g[$])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(n=l(f,n||{},A.$current,g)),!g.params.$$validates(n))return T;n=g.params.$$values(n),t=g;var _=t.path,D=0,F=_[D],L=S.locals,N=[];if(o.reload){if(B(o.reload)||M(o.reload)){if(M(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var R=o.reload===!0?p[0]:h(o.reload);if(o.reload&&!R)throw new Error("No such reload state '"+(B(o.reload)?o.reload:o.reload.name)+"'");for(;F&&F===p[D]&&F!==R;)L=N[D]=F.locals,D++,F=_[D]}}else for(;F&&F===p[D]&&F.ownParams.$$equals(n,d);)L=N[D]=F.locals,D++,F=_[D];if(x(t,n,u,d,L,o))return v&&(n["#"]=v),A.params=n,U(A.params,f),o.location&&t.navigable&&t.navigable.url&&(m.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===o.location}),m.update(!0)),A.transition=null,r.when(A.current);if(n=c(t.params.$$keys(),n||{}),o.notify&&e.$broadcast("$stateChangeStart",t.self,n,u.self,d).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,u.self,d),m.update(),k;for(var P=r.when(L),H=D;H<_.length;H++,F=_[H])L=N[H]=i(L),P=C(F,n,F===t,P,L,o);var z=A.transition=P.then(function(){var i,r,s;if(A.transition!==z)return E;for(i=p.length-1;i>=D;i--)s=p[i],s.self.onExit&&a.invoke(s.self.onExit,s.self,s.locals.globals),s.locals=null;for(i=D;i<_.length;i++)r=_[i],r.locals=N[i],r.self.onEnter&&a.invoke(r.self.onEnter,r.self,r.locals.globals);return v&&(n["#"]=v),A.transition!==z?E:(A.$current=t,A.current=t.self,A.params=n,U(A.params,f),A.transition=null,o.location&&t.navigable&&m.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,u.self,d),m.update(!0),A.current)},function(i){return A.transition!==z?E:(A.transition=null,s=e.$broadcast("$stateChangeError",t.self,n,u.self,d,i),s.defaultPrevented||m.update(),r.reject(i))});return z},A.is=function(e,t,i){i=I({relative:A.$current},i||{});var r=h(e,i.relative);return O(r)?A.$current!==r?!1:t?u(r.params.$$values(t),f):!0:n},A.includes=function(e,t,i){if(i=I({relative:A.$current},i||{}),B(e)&&v(e)){if(!y(e))return!1;e=A.$current.name}var r=h(e,i.relative);return O(r)?O(A.$current.includes[r.name])?t?u(r.params.$$values(t),f,s(t)):!0:!1:n},A.href=function(e,t,i){i=I({lossy:!0,inherit:!0,absolute:!1,relative:A.$current},i||{});var r=h(e,i.relative);if(!O(r))return null;i.inherit&&(t=l(f,t||{},A.$current,r));var o=r&&i.lossy?r.navigable:r;return o&&o.url!==n&&null!==o.url?m.href(o.url,c(r.params.$$keys().concat("#"),t||{}),{absolute:i.absolute}):null},A.get=function(e,t){if(0===arguments.length)return p(s(_),function(e){return _[e].self});var n=h(e,t||A.$current);return n&&n.self?n.self:null},A}function x(e,t,n,i,r,o){function s(e,t,n){function i(t){return"search"!=e.params[t].location}var r=e.params.$$keys().filter(i),o=d.apply({},[e.params].concat(r)),s=new H.ParamSet(o);return s.$$equals(t,n)}return!o.reload&&e===n&&(r===n.locals||e.self.reloadOnSearch===!1&&s(n,i,t))?!0:void 0}var S,A,_={},E={},$="abstract",k={parent:function(e){if(O(e.parent)&&e.parent)return h(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?h(t[1]):S},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=I({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(B(t))return"^"==t.charAt(0)?r.compile(t.substring(1),n):(e.parent.navigable||S).url.concat(t,n);if(!t||r.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new H.ParamSet;return P(e.params||{},function(e,n){t[n]||(t[n]=new H.Param(n,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?I(e.parent.params.$$new(),e.ownParams):new H.ParamSet},views:function(e){var t={};return P(O(e.views)?e.views:{"":e},function(n,i){i.indexOf("@")<0&&(i+="@"+e.parent.name),t[i]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?I({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};S=g({name:"",url:"^",views:null,"abstract":!0}),S.navigable=null,this.decorator=b,this.state=w,this.$get=C,C.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function x(){function e(e,t){return{load:function(n,i){var r,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return i=I(o,i),i.view&&(r=t.fromConfig(i.view,i.params,i.locals)),r&&i.notify&&e.$broadcast("$viewContentLoading",i),r}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function S(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function A(e,n,i,r){function o(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function s(e,t){var n=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,t,n){var i=u.enter(e,null,t,n);i&&i.then&&i.then(n)},leave:function(e,t){var n=u.leave(e,t);n&&n.then&&n.then(t)}};if(l){var i=l&&l(t,e);return{enter:function(e,t,n){i.enter(e,null,t),n()},leave:function(e,t){i.leave(e),t()}}}return n()}var a=o(),l=a("$animator"),u=a("$animate"),c={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,a){return function(n,o,l){function u(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),h&&(v.leave(h,function(){d=null}),d=h,h=null)}function c(s){var c,d=E(n,l,o,r),y=d&&e.$current&&e.$current.locals[d];if(s||y!==p){c=n.$new(),p=e.$current.locals[d];var b=a(c,function(e){v.enter(e,o,function(){f&&f.$emit("$viewContentAnimationEnded"),(t.isDefined(g)&&!g||n.$eval(g))&&i(e)}),u()});h=b,f=c,f.$emit("$viewContentLoaded"),f.$eval(m)}}var d,h,f,p,m=l.onload||"",g=l.autoscroll,v=s(l,n);n.$on("$stateChangeSuccess",function(){c(!1)}),n.$on("$viewContentLoading",function(){c(!1)}),c(!0)}}};return c}function _(e,t,n,i){return{restrict:"ECA",priority:-400,compile:function(r){var o=r.html();return function(r,s,a){var l=n.$current,u=E(r,a,s,i),c=l&&l.locals[u];if(c){s.data("$uiView",{name:u,state:c.$$state}),s.html(c.$template?c.$template:o);var d=e(s.contents());if(c.$$controller){c.$scope=r,c.$element=s;var h=t(c.$$controller,c);c.$$controllerAs&&(r[c.$$controllerAs]=h),s.data("$ngControllerController",h),s.children().data("$ngControllerController",h)}d(r)}}}}}function E(e,t,n,i){var r=i(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function $(e,t){var n,i=e.match(/^\s*({[^}]*})\s*$/);if(i&&(e=t+"("+i[1]+")"),n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function k(e){var t=e.parent().inheritedData("$uiView");return t&&t.state&&t.state.name?t.state:void 0}function D(e,n){var i=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,o,s,a){var l=$(s.uiSref,e.current.name),u=null,c=k(o)||e.$current,d="[object SVGAnimatedString]"===Object.prototype.toString.call(o.prop("href"))?"xlink:href":"href",h=null,f="A"===o.prop("tagName").toUpperCase(),p="FORM"===o[0].nodeName,m=p?"action":d,g=!0,v={relative:c,inherit:!0},y=r.$eval(s.uiSrefOpts)||{};t.forEach(i,function(e){e in y&&(v[e]=y[e])});var b=function(n){if(n&&(u=t.copy(n)),g){h=e.href(l.state,u,v);var i=a[1]||a[0];return i&&i.$$addStateInfo(l.state,u),null===h?(g=!1,!1):void s.$set(m,h)}};l.paramExpr&&(r.$watch(l.paramExpr,function(e,t){e!==u&&b(e)},!0),u=t.copy(r.$eval(l.paramExpr))),b(),p||o.bind("click",function(t){var i=t.which||t.button;if(!(i>1||t.ctrlKey||t.metaKey||t.shiftKey||o.attr("target"))){var r=n(function(){e.go(l.state,u,v)});t.preventDefault();var s=f&&!h?1:0;t.preventDefault=function(){s--<=0&&n.cancel(r)}}})}}}function T(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,i,r){function o(){s()?i.addClass(l):i.removeClass(l)}function s(){for(var e=0;e<u.length;e++)if(a(u[e].state,u[e].params))return!0;return!1}function a(t,n){return"undefined"!=typeof r.uiSrefActiveEq?e.is(t.name,n):e.includes(t.name,n)}var l,u=[];l=n(r.uiSrefActiveEq||r.uiSrefActive||"",!1)(t),this.$$addStateInfo=function(t,n){var r=e.get(t,k(i));u.push({state:r||{name:t},params:n}),o()},t.$on("$stateChangeSuccess",o)}]}}function F(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function L(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var O=t.isDefined,N=t.isFunction,B=t.isString,M=t.isObject,R=t.isArray,P=t.forEach,I=t.extend,U=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),m.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",m),g.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",g);var H;v.prototype.concat=function(e,t){var n={caseInsensitive:H.caseInsensitive(),strict:H.strictMode(),squash:H.defaultSquashPolicy()};return new v(this.sourcePath+e+this.sourceSearch,I(n,t),this)},v.prototype.toString=function(){return this.source},v.prototype.exec=function(e,t){function n(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/g,"-")}var i=t(e).split(/-(?!\\)/),r=p(i,t);return p(r,n).reverse()}var i=this.regexp.exec(e);if(!i)return null;t=t||{};var r,o,s,a=this.parameters(),l=a.length,u=this.segments.length-1,c={};if(u!==i.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(r=0;u>r;r++){s=a[r];var d=this.params[s],h=i[r+1];for(o=0;o<d.replace;o++)d.replace[o].from===h&&(h=d.replace[o].to);h&&d.array===!0&&(h=n(h)),c[s]=d.value(h)}for(;l>r;r++)s=a[r],c[s]=this.params[s].value(t[s]);return c},v.prototype.parameters=function(e){return O(e)?this.params[e]||null:this.$$paramNames},v.prototype.validates=function(e){return this.params.$$validates(e)},v.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var n=this.segments,i=this.parameters(),r=this.params;if(!this.validates(e))return null;var o,s=!1,a=n.length-1,l=i.length,u=n[0];for(o=0;l>o;o++){var c=a>o,d=i[o],h=r[d],f=h.value(e[d]),m=h.isOptional&&h.type.equals(h.value(),f),g=m?h.squash:!1,v=h.type.encode(f);if(c){var y=n[o+1];if(g===!1)null!=v&&(u+=R(v)?p(v,t).join("-"):encodeURIComponent(v)),
u+=y;else if(g===!0){var b=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=y.match(b)[1]}else B(g)&&(u+=g+y)}else{if(null==v||m&&g!==!1)continue;R(v)||(v=[v]),v=p(v,encodeURIComponent).join("&"+d+"="),u+=(s?"&":"?")+(d+"="+v),s=!0}}return u},y.prototype.is=function(e,t){return!0},y.prototype.encode=function(e,t){return e},y.prototype.decode=function(e,t){return e},y.prototype.equals=function(e,t){return e==t},y.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},y.prototype.pattern=/.*/,y.prototype.toString=function(){return"{Type:"+this.name+"}"},y.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},y.prototype.$asArray=function(e,t){function i(e,t){function i(e,t){return function(){return e[t].apply(e,arguments)}}function r(e){return R(e)?e:O(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function s(e){return!e}function a(e,t){return function(n){n=r(n);var i=p(n,e);return t===!0?0===f(i,s).length:o(i)}}function l(e){return function(t,n){var i=r(t),o=r(n);if(i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!e(i[s],o[s]))return!1;return!0}}this.encode=a(i(e,"encode")),this.decode=a(i(e,"decode")),this.is=a(i(e,"is"),!0),this.equals=l(i(e,"equals")),this.pattern=e.pattern,this.$normalize=a(i(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new i(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",b),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),w.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",w),C.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",C),x.$inject=[],t.module("ui.router.state").provider("$view",x),t.module("ui.router.state").provider("$uiViewScroll",S),A.$inject=["$state","$injector","$uiViewScroll","$interpolate"],_.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",A),t.module("ui.router.state").directive("uiView",_),D.$inject=["$state","$timeout"],T.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",T).directive("uiSrefActiveEq",T),F.$inject=["$state"],L.$inject=["$state"],t.module("ui.router.state").filter("isState",F).filter("includedByState",L)}(window,window.angular),function(e,t,n){"use strict";function i(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return s(t,u(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],i=u(n,t.noop);return i.chars(e),n.join("")}function o(e,n){var i,r={},o=e.split(",");for(i=0;i<o.length;i++)r[n?t.lowercase(o[i]):o[i]]=!0;return r}function s(e,n){function i(e,i,o,s){if(i=t.lowercase(i),_[i])for(;b.last()&&E[b.last()];)r("",b.last());A[i]&&b.last()==i&&r("",i),s=C[i]||!!s,s||b.push(i);var l={};o.replace(f,function(e,t,n,i,r){var o=n||i||r||"";l[t]=a(o)}),n.start&&n.start(i,l,s)}function r(e,i){var r,o=0;if(i=t.lowercase(i))for(o=b.length-1;o>=0&&b[o]!=i;o--);if(o>=0){for(r=b.length-1;r>=o;r--)n.end&&n.end(b[r]);b.length=o}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var o,s,l,u,b=[],w=e;for(b.last=function(){return b[b.length-1]};e;){if(u="",s=!0,b.last()&&k[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(g,"$1").replace(y,"$1"),n.chars&&n.chars(a(t)),""}),r("",b.last())):(0===e.indexOf("<!--")?(o=e.indexOf("--",4),o>=0&&e.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(e.substring(4,o)),e=e.substring(o+3),s=!1)):v.test(e)?(l=e.match(v),l&&(e=e.replace(l[0],""),s=!1)):m.test(e)?(l=e.match(h),l&&(e=e.substring(l[0].length),l[0].replace(h,r),s=!1)):p.test(e)&&(l=e.match(d),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(d,i)),s=!1):(u+="<",e=e.substring(1))),s&&(o=e.indexOf("<"),u+=0>o?e:e.substring(0,o),e=0>o?"":e.substring(o),n.chars&&n.chars(a(u)))),e==w)throw c("badparse","The sanitizer was unable to parse the following block of html: {0}",e);w=e}r()}function a(e){return e?(N.innerHTML=e.replace(/</g,"&lt;"),N.textContent):""}function l(e){return e.replace(/&/g,"&amp;").replace(b,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,n){var i=!1,r=t.bind(e,e.push);return{start:function(e,o,s){e=t.lowercase(e),!i&&k[e]&&(i=e),i||D[e]!==!0||(r("<"),r(e),t.forEach(o,function(i,o){var s=t.lowercase(o),a="img"===e&&"src"===s||"background"===s;O[s]!==!0||T[s]===!0&&!n(i,a)||(r(" "),r(o),r('="'),r(l(i)),r('"'))}),r(s?"/>":">"))},end:function(e){e=t.lowercase(e),i||D[e]!==!0||(r("</"),r(e),r(">")),e==i&&(i=!1)},chars:function(e){i||r(l(e))}}}var c=t.$$minErr("$sanitize"),d=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,m=/^<\//,g=/<!--(.*?)-->/g,v=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^\#-~| |!])/g,C=o("area,br,col,hr,img,wbr"),x=o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),S=o("rp,rt"),A=t.extend({},S,x),_=t.extend({},x,o("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=t.extend({},S,o("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),$=o("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),k=o("script,style"),D=t.extend({},C,_,E,A,$),T=o("background,cite,href,longdesc,src,usemap,xlink:href"),F=o("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),L=o("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),O=t.extend({},T,L,F),N=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",i),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i;return function(o,s){function a(e){e&&f.push(r(e))}function l(e,n){f.push("<a "),t.isDefined(s)&&f.push('target="',s,'" '),f.push('href="',e.replace(/"/g,"&quot;"),'">'),a(n),f.push("</a>")}if(!o)return o;for(var u,c,d,h=o,f=[];u=h.match(n);)c=u[0],u[2]||u[4]||(c=(u[3]?"http://":"mailto:")+c),d=u.index,a(h.substr(0,d)),l(c,u[0].replace(i,"")),h=h.substring(d+u[0].length);return a(h),e(f.join(""))}}])}(window,window.angular),function(e,t,n){"use strict";function i(e){return t.lowercase(e.nodeName||e[0]&&e[0].nodeName)}function r(e,n,i){o.directive(e,["$parse","$swipe",function(r,o){var s=75,a=.3,l=30;return function(u,c,d){function h(e){if(!f)return!1;var t=Math.abs(e.y-f.y),i=(e.x-f.x)*n;return p&&s>t&&i>0&&i>l&&a>t/i}var f,p,m=r(d[e]),g=["touch"];t.isDefined(d.ngSwipeDisableMouse)||g.push("mouse"),o.bind(c,{start:function(e,t){f=e,p=!0},cancel:function(e){p=!1},end:function(e,t){h(e)&&u.$apply(function(){c.triggerHandler(i),m(u,{$event:t})})}},g)}}])}var o=t.module("ngTouch",[]);o.factory("$swipe",[function(){function e(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],i=t.changedTouches&&t.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function n(e,n){var i=[];return t.forEach(e,function(e){var t=r[e][n];t&&i.push(t)}),i.join(" ")}var i=10,r={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(t,r,o){var s,a,l,u,c=!1;o=o||["mouse","touch"],t.on(n(o,"start"),function(t){l=e(t),c=!0,s=0,a=0,u=l,r.start&&r.start(l,t)});var d=n(o,"cancel");d&&t.on(d,function(e){c=!1,r.cancel&&r.cancel(e)}),t.on(n(o,"move"),function(t){if(c&&l){var n=e(t);if(s+=Math.abs(n.x-u.x),a+=Math.abs(n.y-u.y),u=n,!(i>s&&i>a))return a>s?(c=!1,void(r.cancel&&r.cancel(t))):(t.preventDefault(),void(r.move&&r.move(n,t)))}}),t.on(n(o,"end"),function(t){c&&(c=!1,r.end&&r.end(e(t),t))})}}}]),o.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),o.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,r){function o(e,t,n,i){return Math.abs(e-n)<g&&Math.abs(t-i)<g}function s(e,t,n){for(var i=0;i<e.length;i+=2)if(o(e[i],e[i+1],t,n))return e.splice(i,i+2),!0;return!1}function a(e){if(!(Date.now()-c>m)){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,r=t[0].clientY;1>n&&1>r||h&&h[0]===n&&h[1]===r||(h&&(h=null),"label"===i(e.target)&&(h=[n,r]),s(d,n,r)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur&&e.target.blur()))}}function l(e){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,r=t[0].clientY;d.push(i,r),n(function(){for(var e=0;e<d.length;e+=2)if(d[e]==i&&d[e+1]==r)return void d.splice(e,e+2)},m,!1)}function u(e,t){d||(r[0].addEventListener("click",a,!0),r[0].addEventListener("touchstart",l,!0),d=[]),c=Date.now(),s(d,e,t)}var c,d,h,f=750,p=12,m=2500,g=25,v="ng-click-active";return function(n,i,r){function o(){h=!1,i.removeClass(v)}var s,a,l,c,d=e(r.ngClick),h=!1;i.on("touchstart",function(e){h=!0,s=e.target?e.target:e.srcElement,3==s.nodeType&&(s=s.parentNode),i.addClass(v),a=Date.now();var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],r=n[0];l=r.clientX,c=r.clientY}),i.on("touchcancel",function(e){o()}),i.on("touchend",function(e){var n=Date.now()-a,d=e.originalEvent||e,m=d.changedTouches&&d.changedTouches.length?d.changedTouches:d.touches&&d.touches.length?d.touches:[d],g=m[0],v=g.clientX,y=g.clientY,b=Math.sqrt(Math.pow(v-l,2)+Math.pow(y-c,2));h&&f>n&&p>b&&(u(v,y),s&&s.blur(),t.isDefined(r.disabled)&&r.disabled!==!1||i.triggerHandler("click",[e])),o()}),i.onclick=function(e){},i.on("click",function(e,t){n.$apply(function(){d(n,{$event:t||e})})}),i.on("mousedown",function(e){i.addClass(v)}),i.on("mousemove mouseup",function(e){i.removeClass(v)})}}]),r("ngSwipeLeft",-1,"swipeleft"),r("ngSwipeRight",1,"swiperight")}(window,window.angular),function(e,t,n){"use strict";function i(e,n,i,r,o,s){function a(e,n){return angular.element((n||t).querySelectorAll(e))}function l(e){return u[e]?u[e]:u[e]=n.get(e,{cache:s}).then(function(e){return e.data})}this.compile=function(t){t.template&&/\.html$/.test(t.template)&&(console.warn("Deprecated use of `template` option to pass a file. Please use the `templateUrl` option instead."),t.templateUrl=t.template,t.template="");var n=t.templateUrl,s=t.template||"",u=t.controller,c=t.controllerAs,d=angular.copy(t.resolve||{}),h=angular.copy(t.locals||{}),f=t.transformTemplate||angular.identity,p=t.bindToController;return angular.forEach(d,function(e,t){angular.isString(e)?d[t]=i.get(e):d[t]=i.invoke(e)}),angular.extend(d,h),n?d.$template=l(n):d.$template=e.when(s),t.contentTemplate&&(d.$template=e.all([d.$template,l(t.contentTemplate)]).then(function(e){var n=angular.element(e[0]),i=a('[ng-bind="content"]',n[0]).removeAttr("ng-bind").html(e[1]);return t.templateUrl||i.next().remove(),n[0].outerHTML})),e.all(d).then(function(e){var n=f(e.$template);t.html&&(n=n.replace(/ng-bind="/gi,'ng-bind-html="'));var i=angular.element("<div>").html(n.trim()).contents(),s=r(i);return{locals:e,element:i,link:function(t){if(e.$scope=t,u){var n=o(u,e,!0);p&&angular.extend(n.instance,e);var r=angular.isObject(n)?n:n();i.data("$ngControllerController",r),i.children().data("$ngControllerController",r),c&&(t[c]=r)}return s.apply(null,arguments)}}})};var u={}}angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var e=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",templateUrl:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"bsAsyncFilter",limit:6,autoSelect:!1,comparator:"",trimValue:!0};this.$get=["$window","$rootScope","$tooltip","$$rAF","$timeout",function(t,n,i,r,o){function s(t,n,s){var l={},u=angular.extend({},e,s);l=i(t,u);var c=s.scope,d=l.$scope;d.$resetMatches=function(){d.$matches=[],d.$activeIndex=u.autoSelect?0:-1},d.$resetMatches(),d.$activate=function(e){d.$$postDigest(function(){l.activate(e)})},d.$select=function(e,t){d.$$postDigest(function(){l.select(e)})},d.$isVisible=function(){return l.$isVisible()},l.update=function(e){d.$matches=e,d.$activeIndex>=e.length&&(d.$activeIndex=u.autoSelect?0:-1),a(d),r(l.$applyPlacement)},l.activate=function(e){d.$activeIndex=e},l.select=function(e){if(-1!==e){var t=d.$matches[e].value;n.$setViewValue(t),n.$render(),d.$resetMatches(),c&&c.$digest(),d.$emit(u.prefixEvent+".select",t,e,l)}},l.$isVisible=function(){return u.minLength&&n?d.$matches.length&&angular.isString(n.$viewValue)&&n.$viewValue.length>=u.minLength:!!d.$matches.length},l.$getIndex=function(e){var t=d.$matches.length,n=t;if(t){for(n=t;n--&&d.$matches[n].value!==e;);if(!(0>n))return n}},l.$onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},l.$onKeyDown=function(e){/(38|40|13)/.test(e.keyCode)&&(!l.$isVisible()||13===e.keyCode&&-1===d.$activeIndex||(e.preventDefault(),e.stopPropagation()),13===e.keyCode&&d.$matches.length?l.select(d.$activeIndex):38===e.keyCode&&d.$activeIndex>0?d.$activeIndex--:40===e.keyCode&&d.$activeIndex<d.$matches.length-1?d.$activeIndex++:angular.isUndefined(d.$activeIndex)&&(d.$activeIndex=0),d.$digest())};var h=l.show;l.show=function(){h(),o(function(){l.$element&&l.$element.on("mousedown",l.$onMouseDown),u.keyboard&&t&&t.on("keydown",l.$onKeyDown)},0,!1)};var f=l.hide;return l.hide=function(){l.$element&&l.$element.off("mousedown",l.$onMouseDown),u.keyboard&&t&&t.off("keydown",l.$onKeyDown),u.autoSelect||l.activate(-1),f()},l}function a(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}angular.element(t.document.body);return s.defaults=e,s}]}).filter("bsAsyncFilter",["$filter",function(e){return function(t,n,i){return t&&angular.isFunction(t.then)?t.then(function(t){return e("filter")(t,n,i)}):e("filter")(t,n,i)}}]).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(e,t,n,i,r){var o=i.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,s){var a={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","filter","limit","minLength","watchOptions","selectMode","autoSelect","comparator","id","prefixEvent","prefixClass"],function(e){angular.isDefined(n[e])&&(a[e]=n[e])});var l=/^(false|0|)$/i;angular.forEach(["html","container","trimValue"],function(e){angular.isDefined(n[e])&&l.test(n[e])&&(a[e]=!1)}),t.attr("autocomplete")||t.attr("autocomplete","off");var u=a.filter||o.filter,c=a.limit||o.limit,d=a.comparator||o.comparator,h=n.bsOptions;u&&(h+=" | "+u+":$viewValue"),d&&(h+=":"+d),c&&(h+=" | limitTo:"+c);var f=r(h),p=i(t,s,a);if(a.watchOptions){var m=f.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim();e.$watchCollection(m,function(t,n){f.valuesFn(e,s).then(function(e){p.update(e),s.$render()})})}e.$watch(n.ngModel,function(t,n){e.$modelValue=t,f.valuesFn(e,s).then(function(e){return a.selectMode&&!e.length&&t.length>0?void s.$setViewValue(s.$viewValue.substring(0,s.$viewValue.length-1)):(e.length>c&&(e=e.slice(0,c)),p.update(e),void s.$render())})}),s.$formatters.push(function(e){var t=f.displayValue(e);return t?t:e&&"object"!=typeof e?e:""}),s.$render=function(){if(s.$isEmpty(s.$viewValue))return t.val("");var e=p.$getIndex(s.$modelValue),n=angular.isDefined(e)?p.$scope.$matches[e].label:s.$viewValue;n=angular.isObject(n)?f.displayValue(n):n;var i=n?n.toString().replace(/<(?:.|\n)*?>/gm,""):"";t.val(a.trimValue===!1?i:i.trim())},e.$on("$destroy",function(){p&&p.destroy(),a=null,p=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var e=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",templateUrl:"tooltip/tooltip.tpl.html",template:"",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$bsCompiler","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(n,i,r,o,s,a,l,u,c,d,h){function f(o,s){function a(){N.$emit(L.prefixEvent+".show",F)}function f(){if(N.$emit(L.prefixEvent+".hide",F),U===W){if(j&&"focus"===L.trigger)return o[0].blur();T()}}function y(){var e=L.trigger.split(" ");angular.forEach(e,function(e){"click"===e?o.on("click",F.toggle):"manual"!==e&&(o.on("hover"===e?"mouseenter":"focus",F.enter),o.on("hover"===e?"mouseleave":"blur",F.leave),"button"===B&&"hover"!==e&&o.on(g?"touchstart":"mousedown",F.$onFocusElementMouseDown))})}function b(){for(var e=L.trigger.split(" "),t=e.length;t--;){var n=e[t];"click"===n?o.off("click",F.toggle):"manual"!==n&&(o.off("hover"===n?"mouseenter":"focus",F.enter),o.off("hover"===n?"mouseleave":"blur",F.leave),"button"===B&&"hover"!==n&&o.off(g?"touchstart":"mousedown",F.$onFocusElementMouseDown))}}function w(){"focus"!==L.trigger?U.on("keyup",F.$onKeyUp):o.on("keyup",F.$onFocusKeyUp)}function C(){"focus"!==L.trigger?U.off("keyup",F.$onKeyUp):o.off("keyup",F.$onFocusKeyUp)}function x(){h(function(){U.on("click",A),v.on("click",F.hide),V=!0},0,!1)}function S(){V&&(U.off("click",A),v.off("click",F.hide),V=!1)}function A(e){e.stopPropagation()}function _(e){e=e||L.target||o;var i=e[0],r="BODY"===i.tagName,s=i.getBoundingClientRect(),a={};for(var l in s)a[l]=s[l];null===a.width&&(a=angular.extend({},a,{width:s.right-s.left,height:s.bottom-s.top}));var u=r?{top:0,left:0}:c.offset(i),d={scroll:r?t.documentElement.scrollTop||t.body.scrollTop:e.prop("scrollTop")||0},h=r?{width:t.documentElement.clientWidth,height:n.innerHeight}:null;return angular.extend({},a,d,h,u)}function E(e,t,n,i){var r,o=e.split("-");switch(o[0]){case"right":r={top:t.top+t.height/2-i/2,left:t.left+t.width};break;case"bottom":r={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"left":r={top:t.top+t.height/2-i/2,left:t.left-n};break;default:r={top:t.top-i,left:t.left+t.width/2-n/2}}if(!o[1])return r;if("top"===o[0]||"bottom"===o[0])switch(o[1]){case"left":r.left=t.left;break;case"right":r.left=t.left+t.width-n}else if("left"===o[0]||"right"===o[0])switch(o[1]){case"top":r.top=t.top-i;break;case"bottom":r.top=t.top+t.height}return r}function $(e,t){var n=U[0],i=n.offsetWidth,r=n.offsetHeight,o=parseInt(c.css(n,"margin-top"),10),s=parseInt(c.css(n,"margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),e.top=e.top+o,e.left=e.left+s,c.setOffset(n,angular.extend({using:function(e){U.css({top:Math.round(e.top)+"px",left:Math.round(e.left)+"px",right:""})}},e),0);var a=n.offsetWidth,l=n.offsetHeight;if("top"===t&&l!==r&&(e.top=e.top+r-l),!/top-left|top-right|bottom-left|bottom-right/.test(t)){var u=k(t,e,a,l);if(u.left?e.left+=u.left:e.top+=u.top,c.setOffset(n,e),/top|right|bottom|left/.test(t)){var d=/top|bottom/.test(t),h=d?2*u.left-i+a:2*u.top-r+l,f=d?"offsetWidth":"offsetHeight";D(h,n[f],d)}}}function k(e,t,n,i){var r={top:0,left:0};if(!F.$viewport)return r;var o=L.viewport&&L.viewport.padding||0,s=_(F.$viewport);if(/right|left/.test(e)){var a=t.top-o-s.scroll,l=t.top+o-s.scroll+i;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var u=t.left-o,c=t.left+o+n;u<s.left?r.left=s.left-u:c>s.right&&(r.left=s.left+s.width-c)}return r}function D(e,t,n){var i=m(".tooltip-arrow, .arrow",U[0]);i.css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")}function T(){clearTimeout(R),F.$isShown&&null!==U&&(L.autoClose&&S(),L.keyboard&&C()),z&&(z.$destroy(),z=null),U&&(U.remove(),U=F.$element=null)}var F={},L=F.$options=angular.extend({},e,s),O=F.$promise=r.compile(L),N=F.$scope=L.scope&&L.scope.$new()||i.$new(),B=o[0].nodeName.toLowerCase();if(L.delay&&angular.isString(L.delay)){var M=L.delay.split(",").map(parseFloat);L.delay=M.length>1?{show:M[0],hide:M[1]}:M[0]}F.$id=L.id||o.attr("id")||"",L.title&&(N.title=u.trustAsHtml(L.title)),N.$setEnabled=function(e){N.$$postDigest(function(){F.setEnabled(e)})},N.$hide=function(){N.$$postDigest(function(){F.hide()})},N.$show=function(){N.$$postDigest(function(){F.show()})},N.$toggle=function(){N.$$postDigest(function(){F.toggle()})},F.$isShown=N.$isShown=!1;var R,P,I,U,H,z;O.then(function(e){I=e,F.init()}),F.init=function(){L.delay&&angular.isNumber(L.delay)&&(L.delay={show:L.delay,hide:L.delay}),"self"===L.container?H=o:angular.isElement(L.container)?H=L.container:L.container&&(H=m(L.container)),y(),L.target&&(L.target=angular.isElement(L.target)?L.target:m(L.target)),L.show&&N.$$postDigest(function(){"focus"===L.trigger?o[0].focus():F.show()})},F.destroy=function(){b(),T(),N.$destroy()},F.enter=function(){return clearTimeout(R),P="in",L.delay&&L.delay.show?void(R=setTimeout(function(){"in"===P&&F.show()},L.delay.show)):F.show()},F.show=function(){if(L.bsEnabled&&!F.$isShown){N.$emit(L.prefixEvent+".show.before",F);var e,t;L.container?(e=H,t=H[0].lastChild?angular.element(H[0].lastChild):null):(e=null,t=o),U&&T(),z=F.$scope.$new(),U=F.$element=I.link(z,function(e,t){}),U.css({top:"-9999px",left:"-9999px",right:"auto",display:"block",visibility:"hidden"}),L.animation&&U.addClass(L.animation),L.type&&U.addClass(L.prefixClass+"-"+L.type),L.customClass&&U.addClass(L.customClass),t?t.after(U):e.prepend(U),F.$isShown=N.$isShown=!0,p(N),F.$applyPlacement(),angular.version.minor<=2?l.enter(U,e,t,a):l.enter(U,e,t).then(a),p(N),d(function(){U&&U.css({visibility:"visible"}),L.keyboard&&("focus"!==L.trigger&&F.focus(),w())}),L.autoClose&&x()}},F.leave=function(){return clearTimeout(R),P="out",L.delay&&L.delay.hide?void(R=setTimeout(function(){"out"===P&&F.hide()},L.delay.hide)):F.hide()};var j,W;F.hide=function(e){F.$isShown&&(N.$emit(L.prefixEvent+".hide.before",F),j=e,W=U,angular.version.minor<=2?l.leave(U,f):l.leave(U).then(f),F.$isShown=N.$isShown=!1,p(N),L.keyboard&&null!==U&&C(),L.autoClose&&null!==U&&S())},F.toggle=function(){F.$isShown?F.leave():F.enter()},F.focus=function(){U[0].focus()},F.setEnabled=function(e){L.bsEnabled=e},F.setViewport=function(e){L.viewport=e},F.$applyPlacement=function(){if(U){var t=L.placement,n=/\s?auto?\s?/i,i=n.test(t);i&&(t=t.replace(n,"")||e.placement),U.addClass(L.placement);var r=_(),o=U.prop("offsetWidth"),s=U.prop("offsetHeight");if(F.$viewport=L.viewport&&m(L.viewport.selector||L.viewport),i){var a=t,l=_(F.$viewport);a.indexOf("bottom")>=0&&r.bottom+s>l.bottom?t=a.replace("bottom","top"):a.indexOf("top")>=0&&r.top-s<l.top&&(t=a.replace("top","bottom")),("right"===a||"bottom-left"===a||"top-left"===a)&&r.right+o>l.width?t="right"===a?"left":t.replace("left","right"):("left"===a||"bottom-right"===a||"top-right"===a)&&r.left-o<l.left&&(t="left"===a?"right":t.replace("right","left")),U.removeClass(a).addClass(t)}var u=E(t,r,o,s);$(u,t)}},F.$onKeyUp=function(e){27===e.which&&F.$isShown&&(F.hide(),e.stopPropagation())},F.$onFocusKeyUp=function(e){27===e.which&&(o[0].blur(),e.stopPropagation())},F.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),F.$isShown?o[0].blur():o[0].focus()};var V=!1;return F}function p(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function m(e,n){return angular.element((n||t).querySelectorAll(e))}var g=(String.prototype.trim,"createTouch"in n.document),v=angular.element(n.document);return f}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(e,t,n,i,r){return{restrict:"EAC",scope:!0,link:function(e,t,o,s){var a={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","animation","backdropAnimation","type","customClass","id"],function(e){angular.isDefined(o[e])&&(a[e]=o[e])});var l=/^(false|0|)$/i;angular.forEach(["html","container"],function(e){angular.isDefined(o[e])&&l.test(o[e])&&(a[e]=!1)});var u=t.attr("data-target");angular.isDefined(u)&&(l.test(u)?a.target=!1:a.target=u),e.hasOwnProperty("title")||(e.title=""),o.$observe("title",function(t){if(angular.isDefined(t)||!e.hasOwnProperty("title")){var i=e.title;e.title=n.trustAsHtml(t),angular.isDefined(i)&&r(function(){c&&c.$applyPlacement()})}}),o.bsTooltip&&e.$watch(o.bsTooltip,function(t,n){angular.isObject(t)?angular.extend(e,t):e.title=t,angular.isDefined(n)&&r(function(){c&&c.$applyPlacement()})},!0),o.bsShow&&e.$watch(o.bsShow,function(e,t){c&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(tooltip),?/i)),e===!0?c.show():c.hide())}),o.bsEnabled&&e.$watch(o.bsEnabled,function(e,t){c&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|1|,?(tooltip),?/i)),e===!1?c.setEnabled(!1):c.setEnabled(!0))}),o.viewport&&e.$watch(o.viewport,function(e){c&&angular.isDefined(e)&&c.setViewport(e)});var c=i(t,a);e.$on("$destroy",function(){c&&c.destroy(),a=null,c=null})}}}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var e=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",templateUrl:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-(1/0),maxTime:+(1/0),length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","$tooltip","$timeout",function(t,n,i,r,o,s,a){function l(t,n,i){function r(e){var t=6e4*p.minuteStep;return new Date(Math.floor(e.getTime()/t)*t)}function l(e,n){var i=e+n;if(t[0].createTextRange){var r=t[0].createTextRange();r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",i),r.select()}else t[0].setSelectionRange?t[0].setSelectionRange(e,i):angular.isUndefined(t[0].selectionStart)&&(t[0].selectionStart=e,t[0].selectionEnd=i)}function d(){t[0].focus()}var h=s(t,angular.extend({},e,i)),f=i.scope,p=h.$options,m=h.$scope,g=p.lang,v=function(e,t,n){return o.formatDate(e,t,g,n)},y=0,b=p.roundDisplay?r(new Date):new Date,w=n.$dateValue||b,C={hour:w.getHours(),meridian:w.getHours()<12,minute:w.getMinutes(),second:w.getSeconds(),millisecond:w.getMilliseconds()},x=o.getDatetimeFormat(p.timeFormat,g),S=o.hoursFormat(x),A=o.timeSeparator(x),_=o.minutesFormat(x),E=o.secondsFormat(x),$=o.showSeconds(x),k=o.showAM(x);m.$iconUp=p.iconUp,m.$iconDown=p.iconDown,m.$select=function(e,t){h.select(e,t)},m.$moveIndex=function(e,t){h.$moveIndex(e,t)},m.$switchMeridian=function(e){h.switchMeridian(e)},h.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())?(h.$date=e,angular.extend(C,{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}),h.$build()):h.$isBuilt||h.$build()},h.select=function(e,t,i){(!n.$dateValue||isNaN(n.$dateValue.getTime()))&&(n.$dateValue=new Date(1970,0,1)),angular.isDate(e)||(e=new Date(e)),0===t?n.$dateValue.setHours(e.getHours()):1===t?n.$dateValue.setMinutes(e.getMinutes()):2===t&&n.$dateValue.setSeconds(e.getSeconds()),n.$setViewValue(angular.copy(n.$dateValue)),n.$render(),p.autoclose&&!i&&a(function(){h.hide(!0)})},h.switchMeridian=function(e){if(n.$dateValue&&!isNaN(n.$dateValue.getTime())){var t=(e||n.$dateValue).getHours();n.$dateValue.setHours(12>t?t+12:t-12),n.$setViewValue(angular.copy(n.$dateValue)),n.$render()}},h.$build=function(){var e,t,n=m.midIndex=parseInt(p.length/2,10),i=[];for(e=0;e<p.length;e++)t=new Date(1970,0,1,C.hour-(n-e)*p.hourStep),i.push({date:t,label:v(t,S),selected:h.$date&&h.$isSelected(t,0),disabled:h.$isDisabled(t,0)});var r,o=[];for(e=0;e<p.length;e++)r=new Date(1970,0,1,0,C.minute-(n-e)*p.minuteStep),o.push({date:r,label:v(r,_),selected:h.$date&&h.$isSelected(r,1),disabled:h.$isDisabled(r,1)});var s,a=[];for(e=0;e<p.length;e++)s=new Date(1970,0,1,0,0,C.second-(n-e)*p.secondStep),a.push({date:s,label:v(s,E),selected:h.$date&&h.$isSelected(s,2),disabled:h.$isDisabled(s,2)});var l=[];for(e=0;e<p.length;e++)$?l.push([i[e],o[e],a[e]]):l.push([i[e],o[e]]);m.rows=l,m.showSeconds=$,m.showAM=k,m.isAM=(h.$date||i[n].date).getHours()<12,m.timeSeparator=A,h.$isBuilt=!0},h.$isSelected=function(e,t){return h.$date?0===t?e.getHours()===h.$date.getHours():1===t?e.getMinutes()===h.$date.getMinutes():2===t?e.getSeconds()===h.$date.getSeconds():void 0:!1},h.$isDisabled=function(e,t){var n;return 0===t?n=e.getTime()+6e4*C.minute+1e3*C.second:1===t?n=e.getTime()+36e5*C.hour+1e3*C.second:2===t&&(n=e.getTime()+36e5*C.hour+6e4*C.minute),n<1*p.minTime||n>1*p.maxTime},m.$arrowAction=function(e,t){"picker"===p.arrowBehavior?h.$setTimeByStep(e,t):h.$moveIndex(e,t)},h.$setTimeByStep=function(e,t){var n=new Date(h.$date||w),i=n.getHours(),r=n.getMinutes(),o=n.getSeconds();0===t?n.setHours(i-parseInt(p.hourStep,10)*e):1===t?n.setMinutes(r-parseInt(p.minuteStep,10)*e):2===t&&n.setSeconds(o-parseInt(p.secondStep,10)*e),h.select(n,t,!0)},h.$moveIndex=function(e,t){var n;0===t?(n=new Date(1970,0,1,C.hour+e*p.length,C.minute,C.second),angular.extend(C,{hour:n.getHours()})):1===t?(n=new Date(1970,0,1,C.hour,C.minute+e*p.length*p.minuteStep,C.second),angular.extend(C,{minute:n.getMinutes()})):2===t&&(n=new Date(1970,0,1,C.hour,C.minute,C.second+e*p.length*p.secondStep),angular.extend(C,{second:n.getSeconds()})),h.$build()},h.$onMouseDown=function(e){if("input"!==e.target.nodeName.toLowerCase()&&e.preventDefault(),e.stopPropagation(),c){var t=angular.element(e.target);"button"!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler("click")}},h.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return void h.hide(!0);var t=new Date(h.$date),n=t.getHours(),i=v(t,S).length,r=t.getMinutes(),o=v(t,_).length,s=t.getSeconds(),a=v(t,E).length,u=1,c=/(37|39)/.test(e.keyCode),d=2+1*$+1*k;
c&&(37===e.keyCode?y=1>y?d-1:y-1:39===e.keyCode&&(y=d-1>y?y+1:0));var m=[0,i],g=0;38===e.keyCode&&(g=-1),40===e.keyCode&&(g=1);var b=2===y&&$,w=2===y&&!$||3===y&&$;0===y?(t.setHours(n+g*parseInt(p.hourStep,10)),i=v(t,S).length,m=[0,i]):1===y?(t.setMinutes(r+g*parseInt(p.minuteStep,10)),o=v(t,_).length,m=[i+u,o]):b?(t.setSeconds(s+g*parseInt(p.secondStep,10)),a=v(t,E).length,m=[i+u+o+u,a]):w&&(c||h.switchMeridian(),m=[i+u+o+u+(a+u)*$,2]),h.select(t,y,!0),l(m[0],m[1]),f.$digest()}};var D=h.init;h.init=function(){return u&&p.useNative?(t.prop("type","time"),void t.css("-webkit-appearance","textfield")):(c&&(t.prop("type","text"),t.attr("readonly","true"),t.on("click",d)),void D())};var T=h.destroy;h.destroy=function(){u&&p.useNative&&t.off("click",d),T()};var F=h.show;h.show=function(){!c&&t.attr("readonly")||t.attr("disabled")||(F(),a(function(){h.$element&&h.$element.on(c?"touchstart":"mousedown",h.$onMouseDown),p.keyboard&&t&&t.on("keydown",h.$onKeyDown)},0,!1))};var L=h.hide;return h.hide=function(e){h.$isShown&&(h.$element&&h.$element.off(c?"touchstart":"mousedown",h.$onMouseDown),p.keyboard&&t&&t.off("keydown",h.$onKeyDown),L(e))},h}var u=/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent),c="createTouch"in t.document&&u;return e.lang||(e.lang=o.getDefaultLocale()),l.defaults=e,l}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function(e,t,i,r,o,s){var a=s.defaults,l=/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent);return{restrict:"EAC",require:"ngModel",link:function(e,t,i,u){function c(e){if(angular.isDate(e)){var t=isNaN(h.minTime)||new Date(e.getTime()).setFullYear(1970,0,1)>=h.minTime,n=isNaN(h.maxTime)||new Date(e.getTime()).setFullYear(1970,0,1)<=h.maxTime,i=t&&n;u.$setValidity("date",i),u.$setValidity("min",t),u.$setValidity("max",n),i&&(u.$dateValue=e)}}function d(){return!u.$dateValue||isNaN(u.$dateValue.getTime())?"":g(u.$dateValue,h.timeFormat)}var h={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","autoclose","timeType","timeFormat","timezone","modelTimeFormat","useNative","hourStep","minuteStep","secondStep","length","arrowBehavior","iconUp","iconDown","roundDisplay","id","prefixClass","prefixEvent"],function(e){angular.isDefined(i[e])&&(h[e]=i[e])});var f=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative","roundDisplay"],function(e){angular.isDefined(i[e])&&f.test(i[e])&&(h[e]=!1)}),i.bsShow&&e.$watch(i.bsShow,function(e,t){p&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(timepicker),?/i)),e===!0?p.show():p.hide())}),l&&(h.useNative||a.useNative)&&(h.timeFormat="HH:mm");var p=s(t,u,h);h=p.$options;var m=h.lang,g=function(e,t,n){return r.formatDate(e,t,m,n)},v=o({format:h.timeFormat,lang:m});angular.forEach(["minTime","maxTime"],function(e){angular.isDefined(i[e])&&i.$observe(e,function(t){p.$options[e]=v.getTimeForAttribute(e,t),!isNaN(p.$options[e])&&p.$build(),c(u.$dateValue)})}),e.$watch(i.ngModel,function(e,t){p.update(u.$dateValue)},!0),u.$parsers.unshift(function(e){var t;if(!e)return u.$setValidity("date",!0),null;var i=angular.isDate(e)?e:v.parse(e,u.$dateValue);return!i||isNaN(i.getTime())?(u.$setValidity("date",!1),n):(c(i),"string"===h.timeType?(t=v.timezoneOffsetAdjust(i,h.timezone,!0),g(t,h.modelTimeFormat||h.timeFormat)):(t=v.timezoneOffsetAdjust(u.$dateValue,h.timezone,!0),"number"===h.timeType?t.getTime():"unix"===h.timeType?t.getTime()/1e3:"iso"===h.timeType?t.toISOString():new Date(t)))}),u.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:"string"===h.timeType?v.parse(e,null,h.modelTimeFormat):"unix"===h.timeType?new Date(1e3*e):new Date(e),u.$dateValue=v.timezoneOffsetAdjust(t,h.timezone),d()}),u.$render=function(){t.val(d())},e.$on("$destroy",function(){p&&p.destroy(),h=null,p=null})}}}]),angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var e=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},t=this.controller=function(t,n,i){var r=this;r.$options=angular.copy(e),angular.forEach(["animation","navClass","activeClass"],function(e){angular.isDefined(i[e])&&(r.$options[e]=i[e])}),t.$navClass=r.$options.navClass,t.$activeClass=r.$options.activeClass,r.$panes=t.$panes=[],r.$activePaneChangeListeners=r.$viewChangeListeners=[],r.$push=function(e){angular.isUndefined(r.$panes.$active)&&t.$setActive(e.name||0),r.$panes.push(e)},r.$remove=function(e){var t,n=r.$panes.indexOf(e),i=r.$panes.$active;t=angular.isString(i)?r.$panes.map(function(e){return e.name}).indexOf(i):r.$panes.$active,r.$panes.splice(n,1),t>n?t--:n===t&&t===r.$panes.length&&t--,t>=0&&t<r.$panes.length?r.$setActive(r.$panes[t].name||t):r.$setActive()},r.$setActive=t.$setActive=function(e){r.$panes.$active=e,r.$activePaneChangeListeners.forEach(function(e){e()})},r.$isActive=t.$isActive=function(e,t){return r.$panes.$active===e.name||r.$panes.$active===t}};this.$get=function(){var n={};return n.defaults=e,n.controller=t,n}}).directive("bsTabs",["$window","$animate","$tab","$parse",function(e,t,n,i){var r=n.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",n.controller],templateUrl:function(e,t){return t.template||r.template},link:function(e,t,n,r){var o=r[0],s=r[1];if(o&&(s.$activePaneChangeListeners.push(function(){o.$setViewValue(s.$panes.$active)}),o.$formatters.push(function(e){return s.$setActive(e),e})),n.bsActivePane){var a=i(n.bsActivePane);s.$activePaneChangeListeners.push(function(){a.assign(e,s.$panes.$active)}),e.$watch(n.bsActivePane,function(e,t){s.$setActive(e)},!0)}}}}]).directive("bsPane",["$window","$animate","$sce",function(e,t,n){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(e,i,r,o){function s(){var n=a.$panes.indexOf(e);t[a.$isActive(e,n)?"addClass":"removeClass"](i,a.$options.activeClass)}var a=(o[0],o[1]);i.addClass("tab-pane"),r.$observe("title",function(t,i){e.title=n.trustAsHtml(t)}),e.name=r.name,a.$options.animation&&i.addClass(a.$options.animation),r.$observe("disabled",function(t,n){e.disabled=e.$eval(t)}),a.$push(e),e.$on("$destroy",function(){a.$remove(e)}),a.$activePaneChangeListeners.push(function(){s()}),s()}}}]),angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var e=this.$$spies={},n=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function(i,r,o,s,a,l){function u(e,t){return e[0].nodeName&&e[0].nodeName.toLowerCase()===t.toLowerCase()}function c(r){var c=angular.extend({},n,r);c.element||(c.element=f);var p=u(c.element,"body"),m=p?d:c.element,g=p?"window":c.id;if(e[g])return e[g].$$count++,e[g];var v,y,b,w,C,x,S,A,_={},E=_.$trackedElements=[],$=[];return _.init=function(){this.$$count=1,w=a(this.checkPosition,c.debounce),C=l(this.checkPosition,c.throttle),m.on("click",this.checkPositionWithEventLoop),d.on("resize",w),m.on("scroll",C),x=a(this.checkOffsets,c.debounce),v=o.$on("$viewContentLoaded",x),y=o.$on("$includeContentLoaded",x),x(),g&&(e[g]=_)},_.destroy=function(){this.$$count--,this.$$count>0||(m.off("click",this.checkPositionWithEventLoop),d.off("resize",w),m.off("scroll",C),v(),y(),g&&delete e[g])},_.checkPosition=function(){if($.length){if(A=(p?i.pageYOffset:m.prop("scrollTop"))||0,S=Math.max(i.innerHeight,h.prop("clientHeight")),A<$[0].offsetTop&&b!==$[0].target)return _.$activateElement($[0]);for(var e=$.length;e--;)if(!angular.isUndefined($[e].offsetTop)&&null!==$[e].offsetTop&&b!==$[e].target&&!(A<$[e].offsetTop||$[e+1]&&A>$[e+1].offsetTop))return _.$activateElement($[e])}},_.checkPositionWithEventLoop=function(){setTimeout(_.checkPosition,1)},_.$activateElement=function(e){if(b){var t=_.$getTrackedElement(b);t&&(t.source.removeClass("active"),u(t.source,"li")&&u(t.source.parent().parent(),"li")&&t.source.parent().parent().removeClass("active"))}b=e.target,e.source.addClass("active"),u(e.source,"li")&&u(e.source.parent().parent(),"li")&&e.source.parent().parent().addClass("active")},_.$getTrackedElement=function(e){return E.filter(function(t){return t.target===e})[0]},_.checkOffsets=function(){angular.forEach(E,function(e){var n=t.querySelector(e.target);e.offsetTop=n?s.offset(n).top:null,c.offset&&null!==e.offsetTop&&(e.offsetTop-=1*c.offset)}),$=E.filter(function(e){return null!==e.offsetTop}).sort(function(e,t){return e.offsetTop-t.offsetTop}),w()},_.trackElement=function(e,t){E.push({target:e,source:t})},_.untrackElement=function(e,t){for(var n,i=E.length;i--;)if(E[i].target===e&&E[i].source===t){n=i;break}E=E.splice(n,1)},_.activate=function(e){E[e].addClass("active")},_.init(),_}var d=angular.element(i),h=angular.element(r.prop("documentElement")),f=angular.element(i.document.body);return c}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function(e,t,n,i){return{restrict:"EAC",link:function(e,t,n){var r={scope:e};angular.forEach(["offset","target"],function(e){angular.isDefined(n[e])&&(r[e]=n[e])});var o=i(r);o.trackElement(r.target,t),e.$on("$destroy",function(){o&&(o.untrackElement(r.target,t),o.destroy()),r=null,o=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(e,t,n,i){return{restrict:"A",compile:function(e,t){var n=e[0].querySelectorAll("li > a[href]");angular.forEach(n,function(e){var t=angular.element(e);t.parent().attr("bs-scrollspy","").attr("data-target",t.attr("href"))})}}}]),angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var e=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",templateUrl:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"Choose among the following...",allText:"All",noneText:"None",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$tooltip","$timeout",function(t,n,i,r,o){function s(i,s,a){var u={},c=angular.extend({},e,a);u=r(i,c);var d=u.$scope;d.$matches=[],c.multiple?d.$activeIndex=[]:d.$activeIndex=-1,d.$isMultiple=c.multiple,d.$showAllNoneButtons=c.allNoneButtons&&c.multiple,d.$iconCheckmark=c.iconCheckmark,d.$allText=c.allText,d.$noneText=c.noneText,d.$activate=function(e){d.$$postDigest(function(){u.activate(e)})},d.$select=function(e,t){d.$$postDigest(function(){u.select(e)})},d.$isVisible=function(){return u.$isVisible()},d.$isActive=function(e){return u.$isActive(e)},d.$selectAll=function(){for(var e=0;e<d.$matches.length;e++)d.$isActive(e)||d.$select(e)},d.$selectNone=function(){for(var e=0;e<d.$matches.length;e++)d.$isActive(e)&&d.$select(e)},u.update=function(e){d.$matches=e,u.$updateActiveIndex()},u.activate=function(e){return c.multiple?(u.$isActive(e)?d.$activeIndex.splice(d.$activeIndex.indexOf(e),1):d.$activeIndex.push(e),c.sort&&d.$activeIndex.sort(function(e,t){return e-t})):d.$activeIndex=e,d.$activeIndex},u.select=function(e){var t=d.$matches[e].value;d.$apply(function(){u.activate(e),c.multiple?s.$setViewValue(d.$activeIndex.map(function(e){return angular.isUndefined(d.$matches[e])?null:d.$matches[e].value})):(s.$setViewValue(t),u.hide())}),d.$emit(c.prefixEvent+".select",t,e,u)},u.$updateActiveIndex=function(){c.multiple?angular.isArray(s.$modelValue)?d.$activeIndex=s.$modelValue.map(function(e){return u.$getIndex(e)}):d.$activeIndex=[]:angular.isDefined(s.$modelValue)&&d.$matches.length?d.$activeIndex=u.$getIndex(s.$modelValue):d.$activeIndex=-1},u.$isVisible=function(){return c.minLength&&s?d.$matches.length&&s.$viewValue.length>=c.minLength:d.$matches.length},u.$isActive=function(e){return c.multiple?-1!==d.$activeIndex.indexOf(e):d.$activeIndex===e},u.$getIndex=function(e){var t=d.$matches.length,n=t;if(t){for(n=t;n--&&d.$matches[n].value!==e;);if(!(0>n))return n}},u.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),l){var t=angular.element(e.target);t.triggerHandler("click")}},u.$onKeyDown=function(e){return/(9|13|38|40)/.test(e.keyCode)?(9!==e.keyCode&&(e.preventDefault(),e.stopPropagation()),c.multiple&&9===e.keyCode?u.hide():c.multiple||13!==e.keyCode&&9!==e.keyCode?void(c.multiple||(38===e.keyCode&&d.$activeIndex>0?d.$activeIndex--:38===e.keyCode&&d.$activeIndex<0?d.$activeIndex=d.$matches.length-1:40===e.keyCode&&d.$activeIndex<d.$matches.length-1?d.$activeIndex++:angular.isUndefined(d.$activeIndex)&&(d.$activeIndex=0),d.$digest())):u.select(d.$activeIndex)):void 0},u.$isIE=function(){var e=t.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0},u.$selectScrollFix=function(e){"UL"===n[0].activeElement.tagName&&(e.preventDefault(),e.stopImmediatePropagation(),e.target.focus())};var h=u.show;u.show=function(){h(),c.multiple&&u.$element.addClass("select-multiple"),o(function(){u.$element.on(l?"touchstart":"mousedown",u.$onMouseDown),c.keyboard&&i.on("keydown",u.$onKeyDown)},0,!1)};var f=u.hide;return u.hide=function(){!c.multiple&&angular.isUndefined(s.$modelValue)&&(d.$activeIndex=-1),u.$element.off(l?"touchstart":"mousedown",u.$onMouseDown),c.keyboard&&i.off("keydown",u.$onKeyDown),f(!0)},u}var a=(angular.element(t.document.body),/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent)),l="createTouch"in t.document&&a;return s.defaults=e,s}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function(e,t,n,i,r){var o=i.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,s){var a={scope:e,placeholder:o.placeholder};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","placeholder","allNoneButtons","maxLength","maxLengthHtml","allText","noneText","iconCheckmark","autoClose","id","sort","caretHtml","prefixClass","prefixEvent"],function(e){angular.isDefined(n[e])&&(a[e]=n[e])});var l=/^(false|0|)$/i;angular.forEach(["html","container","allNoneButtons","sort"],function(e){angular.isDefined(n[e])&&l.test(n[e])&&(a[e]=!1)});var u=t.attr("data-multiple");if(angular.isDefined(u)&&(l.test(u)?a.multiple=!1:a.multiple=u),"select"===t[0].nodeName.toLowerCase()){var c=t;c.css("display","none"),t=angular.element('<button type="button" class="btn btn-default"></button>'),c.after(t)}var d=r(n.bsOptions),h=i(t,s,a);h.$isIE()&&t[0].addEventListener("blur",h.$selectScrollFix);var f=d.$match[7].replace(/\|.+/,"").trim();e.$watchCollection(f,function(t,n){d.valuesFn(e,s).then(function(e){h.update(e),s.$render()})}),e.$watch(n.ngModel,function(e,t){h.$updateActiveIndex(),s.$render()},!0),s.$render=function(){var e,n;a.multiple&&angular.isArray(s.$modelValue)?(e=s.$modelValue.map(function(e){return n=h.$getIndex(e),angular.isDefined(n)?h.$scope.$matches[n].label:!1}).filter(angular.isDefined),e=e.length>(a.maxLength||o.maxLength)?e.length+" "+(a.maxLengthHtml||o.maxLengthHtml):e.join(", ")):(n=h.$getIndex(s.$modelValue),e=angular.isDefined(n)?h.$scope.$matches[n].label:!1),t.html((e?e:a.placeholder)+(a.caretHtml?a.caretHtml:o.caretHtml))},a.multiple&&(s.$isEmpty=function(e){return!e||0===e.length}),e.$on("$destroy",function(){h&&h.destroy(),a=null,h=null})}}}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var e=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",templateUrl:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["$tooltip",function(t){function n(n,i){var r=angular.extend({},e,i),o=t(n,r);return r.content&&(o.$scope.content=r.content),o}return n}]}).directive("bsPopover",["$window","$sce","$popover",function(e,t,n){var i=e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,r,o){var s={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","animation","customClass","autoClose","id","prefixClass","prefixEvent"],function(e){angular.isDefined(o[e])&&(s[e]=o[e])});var a=/^(false|0|)$/i;angular.forEach(["html","container","autoClose"],function(e){angular.isDefined(o[e])&&a.test(o[e])&&(s[e]=!1)});var l=r.attr("data-target");angular.isDefined(l)&&(a.test(l)?s.target=!1:s.target=l),angular.forEach(["title","content"],function(n){o[n]&&o.$observe(n,function(r,o){e[n]=t.trustAsHtml(r),angular.isDefined(o)&&i(function(){u&&u.$applyPlacement()})})}),o.bsPopover&&e.$watch(o.bsPopover,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t,angular.isDefined(n)&&i(function(){u&&u.$applyPlacement()})},!0),o.bsShow&&e.$watch(o.bsShow,function(e,t){u&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(popover),?/i)),e===!0?u.show():u.hide())}),o.viewport&&e.$watch(o.viewport,function(e){u&&angular.isDefined(e)&&u.setViewport(e)});var u=n(r,s);e.$on("$destroy",function(){u&&u.destroy(),s=null,u=null})}}}]),angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var e=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:e}}}).directive("bsNavbar",["$window","$location","$navbar",function(e,t,n){var i=n.defaults;return{restrict:"A",link:function(e,n,r,o){var s=angular.copy(i);angular.forEach(Object.keys(i),function(e){angular.isDefined(r[e])&&(s[e]=r[e])}),e.$watch(function(){return t.path()},function(e,t){var i=n[0].querySelectorAll("li["+s.routeAttr+"]");angular.forEach(i,function(t){var n=angular.element(t),i=n.attr(s.routeAttr).replace("/","\\/");s.strict&&(i="^"+i+"$");var r=new RegExp(i,"i");r.test(e)?n.addClass(s.activeClass):n.removeClass(s.activeClass)})})}}}]),angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var e=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"top",templateUrl:"modal/modal.tpl.html",template:"",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$bsCompiler","$animate","$timeout","$sce","dimensions",function(n,i,r,o,s,a,l){function u(t){function n(){S.$emit(C.prefixEvent+".show",w)}function s(){S.$emit(C.prefixEvent+".hide",w),p.removeClass(C.prefixClass+"-open"),C.animation&&p.removeClass(C.prefixClass+"-with-"+C.animation)}function l(){C.backdrop&&(_.on("click",v),$.on("click",v),$.on("wheel",y))}function u(){C.backdrop&&(_.off("click",v),$.off("click",v),$.off("wheel",y))}function m(){C.keyboard&&_.on("keyup",w.$onKeyUp)}function g(){C.keyboard&&_.off("keyup",w.$onKeyUp)}function v(e){e.target===e.currentTarget&&("static"===C.backdrop?w.focus():w.hide())}function y(e){e.preventDefault()}function b(){w.$isShown&&null!==_&&(u(),g()),E&&(E.$destroy(),E=null),_&&(_.remove(),_=w.$element=null)}var w={},C=w.$options=angular.extend({},e,t),x=w.$promise=r.compile(C),S=w.$scope=C.scope&&C.scope.$new()||i.$new();C.element||C.container||(C.container="body"),w.$id=C.id||C.element&&C.element.attr("id")||"",h(["title","content"],function(e){C[e]&&(S[e]=a.trustAsHtml(C[e]))}),S.$hide=function(){S.$$postDigest(function(){w.hide()})},S.$show=function(){S.$$postDigest(function(){w.show()})},S.$toggle=function(){S.$$postDigest(function(){w.toggle()})},w.$isShown=S.$isShown=!1;var A,_,E,$=angular.element('<div class="'+C.prefixClass+'-backdrop"/>');return $.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","z-index":1038}),x.then(function(e){A=e,w.init()}),w.init=function(){C.show&&S.$$postDigest(function(){w.show()})},w.destroy=function(){b(),$&&($.remove(),$=null),S.$destroy()},w.show=function(){if(!w.$isShown){var e,t;if(angular.isElement(C.container)?(e=C.container,t=C.container[0].lastChild?angular.element(C.container[0].lastChild):null):C.container?(e=d(C.container),t=e[0]&&e[0].lastChild?angular.element(e[0].lastChild):null):(e=null,t=C.element),_&&b(),E=w.$scope.$new(),_=w.$element=A.link(E,function(e,t){}),!S.$emit(C.prefixEvent+".show.before",w).defaultPrevented){_.css({display:"block"}).addClass(C.placement),C.animation&&(C.backdrop&&$.addClass(C.backdropAnimation),_.addClass(C.animation)),C.backdrop&&o.enter($,p,null),angular.version.minor<=2?o.enter(_,e,t,n):o.enter(_,e,t).then(n),w.$isShown=S.$isShown=!0,c(S);var i=_[0];f(function(){i.focus()}),p.addClass(C.prefixClass+"-open"),C.animation&&p.addClass(C.prefixClass+"-with-"+C.animation),l(),m()}}},w.hide=function(){w.$isShown&&(S.$emit(C.prefixEvent+".hide.before",w).defaultPrevented||(angular.version.minor<=2?o.leave(_,s):o.leave(_).then(s),C.backdrop&&o.leave($),w.$isShown=S.$isShown=!1,c(S),u(),g()))},w.toggle=function(){w.$isShown?w.hide():w.show()},w.focus=function(){_[0].focus()},w.$onKeyUp=function(e){27===e.which&&w.$isShown&&(w.hide(),e.stopPropagation())},w}function c(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function d(e,n){return angular.element((n||t).querySelectorAll(e))}var h=angular.forEach,f=(String.prototype.trim,n.requestAnimationFrame||n.setTimeout),p=angular.element(n.document.body);return u}]}).directive("bsModal",["$window","$sce","$modal",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(e,i,r,o){var s={scope:e,element:i,show:!1};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","backdrop","keyboard","html","container","animation","backdropAnimation","id","prefixEvent","prefixClass"],function(e){angular.isDefined(r[e])&&(s[e]=r[e])});var a=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(e){angular.isDefined(r[e])&&a.test(r[e])&&(s[e]=!1)}),angular.forEach(["title","content"],function(n){r[n]&&r.$observe(n,function(i,r){e[n]=t.trustAsHtml(i)})}),r.bsModal&&e.$watch(r.bsModal,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var l=n(s);i.on(r.trigger||"click",l.toggle),e.$on("$destroy",function(){l&&l.destroy(),s=null,l=null})}}}]),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=r,o}]),angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var e=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(t,n){function i(i,r){function o(e,t){return e.map(function(e,n){var i,r,o={};return o[c]=e,i=u(t,o),r=f(t,o),{label:i,value:r,index:n}})}var s={},a=angular.extend({},e,r);s.$values=[];var l,u,c,d,h,f,p;return s.init=function(){s.$match=l=i.match(a.regexp),u=t(l[2]||l[1]),c=l[4]||l[6],d=l[5],h=t(l[3]||""),f=t(l[2]?l[1]:c),p=t(l[7])},s.valuesFn=function(e,t){return n.when(p(e,t)).then(function(t){return angular.isArray(t)||(t=[]),s.$values=t.length?o(t,e):[],s.$values})},s.displayValue=function(e){var t={};return t[c]=e,u(t)},s.init(),s}return i}]}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(t,n){var i=(angular.element,{}),r=i.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()};i.css=function(t,n,i){var r;return r=t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n],i===!0?parseFloat(r)||0:r},i.offset=function(t){var n=t.getBoundingClientRect(),i=t.ownerDocument;return{width:n.width||t.offsetWidth,height:n.height||t.offsetHeight,top:n.top+(e.pageYOffset||i.documentElement.scrollTop)-(i.documentElement.clientTop||0),left:n.left+(e.pageXOffset||i.documentElement.scrollLeft)-(i.documentElement.clientLeft||0)}},i.setOffset=function(e,t,n){var r,o,s,a,l,u,c,d=i.css(e,"position"),h=angular.element(e),f={};"static"===d&&(e.style.position="relative"),l=i.offset(e),s=i.css(e,"top"),u=i.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(s+u).indexOf("auto")>-1,c?(r=i.position(e),a=r.top,o=r.left):(a=parseFloat(s)||0,o=parseFloat(u)||0),angular.isFunction(t)&&(t=t.call(e,n,l)),null!==t.top&&(f.top=t.top-l.top+a),null!==t.left&&(f.left=t.left-l.left+o),"using"in t?t.using.call(h,f):h.css({top:f.top+"px",left:f.left+"px"})},i.position=function(e){var t,n,s={top:0,left:0};return"fixed"===i.css(e,"position")?n=e.getBoundingClientRect():(t=o(e),n=i.offset(e),r(t,"html")||(s=i.offset(t)),s.top+=i.css(t,"borderTopWidth",!0),s.left+=i.css(t,"borderLeftWidth",!0)),{width:e.offsetWidth,height:e.offsetHeight,top:n.top-s.top-i.css(e,"marginTop",!0),left:n.left-s.left-i.css(e,"marginLeft",!0)}};var o=function(e){var t=e.ownerDocument,n=e.offsetParent||t;if(r(n,"#document"))return t.documentElement;for(;n&&!r(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||t.documentElement};return i.height=function(e,t){var n=e.offsetHeight;return t?n+=i.css(e,"marginTop",!0)+i.css(e,"marginBottom",!0):n-=i.css(e,"paddingTop",!0)+i.css(e,"paddingBottom",!0)+i.css(e,"borderTopWidth",!0)+i.css(e,"borderBottomWidth",!0),n},i.width=function(e,t){var n=e.offsetWidth;return t?n+=i.css(e,"marginLeft",!0)+i.css(e,"marginRight",!0):n-=i.css(e,"paddingLeft",!0)+i.css(e,"paddingRight",!0)+i.css(e,"borderLeftWidth",!0)+i.css(e,"borderRightWidth",!0),n},i}]),angular.module("mgcrea.ngStrap.helpers.debounce",[]).factory("debounce",["$timeout",function(e){return function(t,n,i){var r=null;return function(){var o=this,s=arguments,a=i&&!r;return r&&e.cancel(r),r=e(function(){r=null,i||t.apply(o,s)},n,!1),a&&t.apply(o,s),r}}}]).factory("throttle",["$timeout",function(e){return function(t,n,i){var r=null;return i||(i={}),function(){var o=this,s=arguments;r||(i.leading!==!1&&t.apply(o,s),r=e(function(){r=null,i.trailing!==!1&&t.apply(o,s)},n,!1))}}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(e){function t(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function n(){}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e,t){for(var n=e.length,i=t.toString().toLowerCase(),r=0;n>r;r++)if(e[r].toLowerCase()===i)return r;return-1}t.prototype.setMilliseconds=function(e){this.milliseconds=e},t.prototype.setSeconds=function(e){this.seconds=e},t.prototype.setMinutes=function(e){this.minutes=e},t.prototype.setHours=function(e){this.hours=e},t.prototype.getHours=function(){return this.hours},t.prototype.setDate=function(e){this.day=e},t.prototype.setMonth=function(e){this.month=e},t.prototype.setFullYear=function(e){this.year=e},t.prototype.fromDate=function(e){return this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),this.milliseconds=e.getMilliseconds(),this},t.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var o=t.prototype,s=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(e,a){var l=function(l){function u(e){var t,n=Object.keys(v),i=[],r=[],o=e;for(t=0;t<n.length;t++)if(e.split(n[t]).length>1){var s=o.search(n[t]);e=e.split(n[t]).join(""),v[n[t]]&&(i[s]=v[n[t]])}return angular.forEach(i,function(e){e&&r.push(e)}),r}function c(e){return e.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function d(e){var t,n=Object.keys(g),i=e;for(t=0;t<n.length;t++)i=i.split(n[t]).join("${"+t+"}");for(t=0;t<n.length;t++)i=i.split("${"+t+"}").join("("+g[n[t]]+")");return e=c(e),new RegExp("^"+i+"$",["i"])}var h,f,p=angular.extend({},s,l),m={},g={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:p.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:p.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:p.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:p.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:e.DATETIME_FORMATS.DAY.join("|"),EEE:e.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:p.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:e.DATETIME_FORMATS.MONTH.join("|"),MMM:e.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:p.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:p.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},v={sss:o.setMilliseconds,ss:o.setSeconds,s:o.setSeconds,mm:o.setMinutes,m:o.setMinutes,HH:o.setHours,H:o.setHours,hh:o.setHours,h:o.setHours,EEEE:n,EEE:n,dd:o.setDate,d:o.setDate,a:function(e){var t=this.getHours()%12;return this.setHours(e.match(/pm/i)?t+12:t)},MMMM:function(t){return this.setMonth(r(e.DATETIME_FORMATS.MONTH,t))},MMM:function(t){return this.setMonth(r(e.DATETIME_FORMATS.SHORTMONTH,t))},MM:function(e){return this.setMonth(1*e-1)},M:function(e){return this.setMonth(1*e-1)},yyyy:o.setFullYear,yy:function(e){return this.setFullYear(2e3+1*e)},y:function(e){return 50>=1*e&&2===e.length?this.setFullYear(2e3+1*e):this.setFullYear(1*e)}};return m.init=function(){m.$format=e.DATETIME_FORMATS[p.format]||p.format,h=d(m.$format),f=u(m.$format)},m.isValid=function(e){return angular.isDate(e)?!isNaN(e.getTime()):h.test(e)},m.parse=function(n,i,r,o){r&&(r=e.DATETIME_FORMATS[r]||r),angular.isDate(n)&&(n=a(n,r||m.$format,o));var s=r?d(r):h,l=r?u(r):f,c=s.exec(n);if(!c)return!1;for(var p=i&&!isNaN(i.getTime())?(new t).fromDate(i):(new t).fromDate(new Date(1970,0,1,0)),g=0;g<c.length-1;g++)l[g]&&l[g].call(p,c[g+1]);var v=p.toDate();return parseInt(p.day,10)!==v.getDate()?!1:v},m.getDateForAttribute=function(e,t){var n;if("today"===t){var r=new Date;n=new Date(r.getFullYear(),r.getMonth(),r.getDate()+("maxDate"===e?1:0),0,0,0,"minDate"===e?0:-1)}else n=angular.isString(t)&&t.match(/^".+"$/)?new Date(t.substr(1,t.length-2)):i(t)?new Date(parseInt(t,10)):angular.isString(t)&&0===t.length?"minDate"===e?-(1/0):+(1/0):new Date(t);return n},m.getTimeForAttribute=function(e,t){var n;return n="now"===t?(new Date).setFullYear(1970,0,1):angular.isString(t)&&t.match(/^".+"$/)?new Date(t.substr(1,t.length-2)).setFullYear(1970,0,1):i(t)?new Date(parseInt(t,10)).setFullYear(1970,0,1):angular.isString(t)&&0===t.length?"minTime"===e?-(1/0):+(1/0):m.parse(t,new Date(1970,0,1,0))},m.daylightSavingAdjust=function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},m.timezoneOffsetAdjust=function(e,t,n){return e?(t&&"UTC"===t&&(e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+(n?-1:1)*e.getTimezoneOffset())),e):null},m.init(),m};return l}]}]),angular.module("mgcrea.ngStrap.helpers.dateFormatter",[]).service("$dateFormatter",["$locale","dateFilter",function(e,t){function n(e){return/(h+)([:\.])?(m+)([:\.])?(s*)[ ]?(a?)/i.exec(e).slice(1)}this.getDefaultLocale=function(){return e.id},this.getDatetimeFormat=function(t,n){return e.DATETIME_FORMATS[t]||t},this.weekdaysShort=function(t){return e.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(e){return n(e)[0]},this.minutesFormat=function(e){return n(e)[2]},this.secondsFormat=function(e){return n(e)[4]},this.timeSeparator=function(e){return n(e)[1]},this.showSeconds=function(e){return!!n(e)[4]},this.showAM=function(e){return!!n(e)[5]},this.formatDate=function(e,n,i,r){return t(e,n,r)}}]),angular.module("mgcrea.ngStrap.core",[]).service("$bsCompiler",i),
i.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"],angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var e=this.defaults={animation:"am-fade",prefixClass:"dropdown",prefixEvent:"dropdown",placement:"bottom-left",templateUrl:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(t,n,i,r){function o(t,o){function l(e){return e.target!==t[0]?e.target!==t[0]&&u.hide():void 0}var u={},c=angular.extend({},e,o),d=u.$scope=c.scope&&c.scope.$new()||n.$new();u=i(t,c);var h=t.parent();u.$onKeyDown=function(e){if(/(38|40)/.test(e.keyCode)){e.preventDefault(),e.stopPropagation();var t=angular.element(u.$element[0].querySelectorAll("li:not(.divider) a"));if(t.length){var n;angular.forEach(t,function(e,t){a&&a.call(e,":focus")&&(n=t)}),38===e.keyCode&&n>0?n--:40===e.keyCode&&n<t.length-1?n++:angular.isUndefined(n)&&(n=0),t.eq(n)[0].focus()}}};var f=u.show;u.show=function(){d.content&&(f(),r(function(){c.keyboard&&u.$element&&u.$element.on("keydown",u.$onKeyDown),s.on("click",l)},0,!1),h.hasClass("dropdown")&&h.addClass("open"))};var p=u.hide;u.hide=function(){u.$isShown&&(c.keyboard&&u.$element&&u.$element.off("keydown",u.$onKeyDown),s.off("click",l),h.hasClass("dropdown")&&h.removeClass("open"),p())};var m=u.destroy;return u.destroy=function(){s.off("click",l),m()},u}var s=angular.element(t.document.body),a=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return o}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(e,t,i,r){var o={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","id"],function(e){angular.isDefined(i[e])&&(o[e]=i[e])});var s=/^(false|0|)$/i;angular.forEach(["html","container"],function(e){angular.isDefined(i[e])&&s.test(i[e])&&(o[e]=!1)}),i.bsDropdown&&e.$watch(i.bsDropdown,function(t,n){e.content=t},!0),i.bsShow&&e.$watch(i.bsShow,function(e,t){a&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(dropdown),?/i)),e===!0?a.show():a.hide())});var a=n(t,o);e.$on("$destroy",function(){a&&a.destroy(),o=null,a=null})}}}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var e=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",templateUrl:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",timezone:null,modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","datepickerViews","$tooltip","$timeout",function(t,n,i,r,o,s,a,l){function u(t,n,i){function r(e){e.selected=u.$isSelected(e.date)}function o(){t[0].focus()}var u=a(t,angular.extend({},e,i)),h=i.scope,f=u.$options,p=u.$scope;f.startView&&(f.startView-=f.minView);var m=s(u);u.$views=m.views;var g=m.viewDate;p.$mode=f.startView,p.$iconLeft=f.iconLeft,p.$iconRight=f.iconRight;var v=u.$views[p.$mode];p.$select=function(e){u.select(e)},p.$selectPane=function(e){u.$selectPane(e)},p.$toggleMode=function(){u.setMode((p.$mode+1)%u.$views.length)},u.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())&&(u.$date=e,v.update.call(v,e)),u.$build(!0)},u.updateDisabledDates=function(e){f.disabledDateRanges=e;for(var t=0,n=p.rows.length;n>t;t++)angular.forEach(p.rows[t],u.$setDisabledEl)},u.select=function(e,t){angular.isDate(n.$dateValue)||(n.$dateValue=new Date(e)),!p.$mode||t?(n.$setViewValue(angular.copy(e)),n.$render(),f.autoclose&&!t&&l(function(){u.hide(!0)})):(angular.extend(g,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),u.setMode(p.$mode-1),u.$build())},u.setMode=function(e){p.$mode=e,v=u.$views[p.$mode],u.$build()},u.$build=function(e){e===!0&&v.built||(e!==!1||v.built)&&v.build.call(v)},u.$updateSelected=function(){for(var e=0,t=p.rows.length;t>e;e++)angular.forEach(p.rows[e],r)},u.$isSelected=function(e){return v.isSelected(e)},u.$setDisabledEl=function(e){e.disabled=v.isDisabled(e.date)},u.$selectPane=function(e){var t=v.steps,n=new Date(Date.UTC(g.year+(t.year||0)*e,g.month+(t.month||0)*e,1));angular.extend(g,{year:n.getUTCFullYear(),month:n.getUTCMonth(),date:n.getUTCDate()}),u.$build()},u.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),d){var t=angular.element(e.target);"button"!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler("click")}},u.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return void(p.$mode?p.$apply(function(){u.setMode(p.$mode-1)}):u.hide(!0));v.onKeyDown(e),h.$digest()}};var y=u.init;u.init=function(){return c&&f.useNative?(t.prop("type","date"),void t.css("-webkit-appearance","textfield")):(d&&(t.prop("type","text"),t.attr("readonly","true"),t.on("click",o)),void y())};var b=u.destroy;u.destroy=function(){c&&f.useNative&&t.off("click",o),b()};var w=u.show;u.show=function(){!d&&t.attr("readonly")||t.attr("disabled")||(w(),l(function(){u.$isShown&&(u.$element.on(d?"touchstart":"mousedown",u.$onMouseDown),f.keyboard&&t.on("keydown",u.$onKeyDown))},0,!1))};var C=u.hide;return u.hide=function(e){u.$isShown&&(u.$element.off(d?"touchstart":"mousedown",u.$onMouseDown),f.keyboard&&t.off("keydown",u.$onKeyDown),C(e))},u}var c=/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent),d="createTouch"in t.document&&c;return e.lang||(e.lang=o.getDefaultLocale()),u.defaults=e,u}]}).directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function(e,t,n,i,r,o){var s=(o.defaults,/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent));return{restrict:"EAC",require:"ngModel",link:function(e,t,n,a){function l(e){return e&&e.length?e:null}function u(e){if(angular.isDate(e)){var t=isNaN(f.$options.minDate)||e.getTime()>=f.$options.minDate,n=isNaN(f.$options.maxDate)||e.getTime()<=f.$options.maxDate,i=t&&n;a.$setValidity("date",i),a.$setValidity("min",t),a.$setValidity("max",n),i&&(a.$dateValue=e)}}function c(){return!a.$dateValue||isNaN(a.$dateValue.getTime())?"":m(a.$dateValue,d.dateFormat)}var d={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","html","animation","autoclose","dateType","dateFormat","timezone","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id","prefixClass","prefixEvent"],function(e){angular.isDefined(n[e])&&(d[e]=n[e])});var h=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative"],function(e){angular.isDefined(n[e])&&h.test(n[e])&&(d[e]=!1)});var f=o(t,a,d);d=f.$options,s&&d.useNative&&(d.dateFormat="yyyy-MM-dd");var p=d.lang,m=function(e,t){return i.formatDate(e,t,p)},g=r({format:d.dateFormat,lang:p,strict:d.strictFormat});n.bsShow&&e.$watch(n.bsShow,function(e,t){f&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(datepicker),?/i)),e===!0?f.show():f.hide())}),angular.forEach(["minDate","maxDate"],function(e){angular.isDefined(n[e])&&n.$observe(e,function(t){f.$options[e]=g.getDateForAttribute(e,t),!isNaN(f.$options[e])&&f.$build(!1),u(a.$dateValue)})}),angular.isDefined(n.dateFormat)&&n.$observe("dateFormat",function(e){f.$options.dateFormat=e}),e.$watch(n.ngModel,function(e,t){f.update(a.$dateValue)},!0),angular.isDefined(n.disabledDates)&&e.$watch(n.disabledDates,function(e,t){e=l(e),t=l(t),e&&f.updateDisabledDates(e)}),a.$parsers.unshift(function(e){var t;if(!e)return a.$setValidity("date",!0),null;var n=g.parse(e,a.$dateValue);return!n||isNaN(n.getTime())?void a.$setValidity("date",!1):(u(n),"string"===d.dateType?(t=g.timezoneOffsetAdjust(n,d.timezone,!0),m(t,d.modelDateFormat||d.dateFormat)):(t=g.timezoneOffsetAdjust(a.$dateValue,d.timezone,!0),"number"===d.dateType?t.getTime():"unix"===d.dateType?t.getTime()/1e3:"iso"===d.dateType?t.toISOString():new Date(t)))}),a.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:"string"===d.dateType?g.parse(e,null,d.modelDateFormat):"unix"===d.dateType?new Date(1e3*e):new Date(e),a.$dateValue=g.timezoneOffsetAdjust(t,d.timezone),c()}),a.$render=function(){t.val(c())},e.$on("$destroy",function(){f&&f.destroy(),d=null,f=null})}}}]).provider("datepickerViews",function(){function e(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}function t(e,t){return(e%t+t)%t}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$dateFormatter","$dateParser","$sce",function(n,i,r){return function(o){var s=o.$scope,a=o.$options,l=a.lang,u=function(e,t){return n.formatDate(e,t,l)},c=i({format:a.dateFormat,lang:l,strict:a.strictFormat}),d=n.weekdaysShort(l),h=d.slice(a.startWeek).concat(d.slice(0,a.startWeek)),f=r.trustAsHtml('<th class="dow text-center">'+h.join('</th><th class="dow text-center">')+"</th>"),p=o.$date||(a.startDate?c.getDateForAttribute("startDate",a.startDate):new Date),m={year:p.getFullYear(),month:p.getMonth(),date:p.getDate()},g=[{format:a.dayFormat,split:7,steps:{month:1},update:function(e,t){!this.built||t||e.getFullYear()!==m.year||e.getMonth()!==m.month?(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build()):(e.getDate()!==m.date||1===e.getDate())&&(m.date=o.$date.getDate(),o.$updateSelected())},build:function(){var n=new Date(m.year,m.month,1),i=n.getTimezoneOffset(),r=new Date(+n-864e5*t(n.getDay()-a.startWeek,7)),l=r.getTimezoneOffset(),d=c.timezoneOffsetAdjust(new Date,a.timezone).toDateString();l!==i&&(r=new Date(+r+6e4*(l-i)));for(var h,p=[],g=0;42>g;g++)h=c.daylightSavingAdjust(new Date(r.getFullYear(),r.getMonth(),r.getDate()+g)),p.push({date:h,isToday:h.toDateString()===d,label:u(h,this.format),selected:o.$date&&this.isSelected(h),muted:h.getMonth()!==m.month,disabled:this.isDisabled(h)});s.title=u(n,a.monthTitleFormat),s.showLabels=!0,s.labels=f,s.rows=e(p,this.split),this.built=!0},isSelected:function(e){return o.$date&&e.getFullYear()===o.$date.getFullYear()&&e.getMonth()===o.$date.getMonth()&&e.getDate()===o.$date.getDate()},isDisabled:function(e){var t=e.getTime();if(t<a.minDate||t>a.maxDate)return!0;if(-1!==a.daysOfWeekDisabled.indexOf(e.getDay()))return!0;if(a.disabledDateRanges)for(var n=0;n<a.disabledDateRanges.length;n++)if(t>=a.disabledDateRanges[n].start&&t<=a.disabledDateRanges[n].end)return!0;return!1},onKeyDown:function(e){if(o.$date){var t,n=o.$date.getTime();37===e.keyCode?t=new Date(n-864e5):38===e.keyCode?t=new Date(n-6048e5):39===e.keyCode?t=new Date(n+864e5):40===e.keyCode&&(t=new Date(n+6048e5)),this.isDisabled(t)||o.select(t,!0)}}},{name:"month",format:a.monthFormat,split:4,steps:{year:1},update:function(e,t){this.built&&e.getFullYear()===m.year?e.getMonth()!==m.month&&(angular.extend(m,{month:o.$date.getMonth(),date:o.$date.getDate()}),o.$updateSelected()):(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build())},build:function(){for(var t,n=(new Date(m.year,0,1),[]),i=0;12>i;i++)t=new Date(m.year,i,1),n.push({date:t,label:u(t,this.format),selected:o.$isSelected(t),disabled:this.isDisabled(t)});s.title=u(t,a.yearTitleFormat),s.showLabels=!1,s.rows=e(n,this.split),this.built=!0},isSelected:function(e){return o.$date&&e.getFullYear()===o.$date.getFullYear()&&e.getMonth()===o.$date.getMonth()},isDisabled:function(e){var t=+new Date(e.getFullYear(),e.getMonth()+1,0);return t<a.minDate||e.getTime()>a.maxDate},onKeyDown:function(e){if(o.$date){var t=o.$date.getMonth(),n=new Date(o.$date);37===e.keyCode?n.setMonth(t-1):38===e.keyCode?n.setMonth(t-4):39===e.keyCode?n.setMonth(t+1):40===e.keyCode&&n.setMonth(t+4),this.isDisabled(n)||o.select(n,!0)}}},{name:"year",format:a.yearFormat,split:4,steps:{year:12},update:function(e,t){!this.built||t||parseInt(e.getFullYear()/20,10)!==parseInt(m.year/20,10)?(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build()):e.getFullYear()!==m.year&&(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$updateSelected())},build:function(){for(var t,n=m.year-m.year%(3*this.split),i=[],r=0;12>r;r++)t=new Date(n+r,0,1),i.push({date:t,label:u(t,this.format),selected:o.$isSelected(t),disabled:this.isDisabled(t)});s.title=i[0].label+"-"+i[i.length-1].label,s.showLabels=!1,s.rows=e(i,this.split),this.built=!0},isSelected:function(e){return o.$date&&e.getFullYear()===o.$date.getFullYear()},isDisabled:function(e){var t=+new Date(e.getFullYear()+1,0,0);return t<a.minDate||e.getTime()>a.maxDate},onKeyDown:function(e){if(o.$date){var t=o.$date.getFullYear(),n=new Date(o.$date);37===e.keyCode?n.setYear(t-1):38===e.keyCode?n.setYear(t-4):39===e.keyCode?n.setYear(t+1):40===e.keyCode&&n.setYear(t+4),this.isDisabled(n)||o.select(n,!0)}}}];return{views:a.minView?Array.prototype.slice.call(g,a.minView):g,viewDate:m}}}]}),angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var e=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in",startCollapsed:!1,allowMultiple:!1},t=this.controller=function(t,n,i){function r(e){for(var t=l.$targets.$active,n=0;n<t.length;n++)e<t[n]&&(t[n]=t[n]-1),t[n]===l.$targets.length&&(t[n]=l.$targets.length-1)}function o(e){var t=l.$targets.$active;return-1===t.indexOf(e)?!1:!0}function s(e){var t=l.$targets.$active.indexOf(e);-1!==t&&l.$targets.$active.splice(t,1)}function a(e){l.$options.allowMultiple||l.$targets.$active.splice(0,1),-1===l.$targets.$active.indexOf(e)&&l.$targets.$active.push(e)}var l=this;l.$options=angular.copy(e),angular.forEach(["animation","disallowToggle","activeClass","startCollapsed","allowMultiple"],function(e){angular.isDefined(i[e])&&(l.$options[e]=i[e])});var u=/^(false|0|)$/i;angular.forEach(["disallowToggle","startCollapsed","allowMultiple"],function(e){angular.isDefined(i[e])&&u.test(i[e])&&(l.$options[e]=!1)}),l.$toggles=[],l.$targets=[],l.$viewChangeListeners=[],l.$registerToggle=function(e){l.$toggles.push(e)},l.$registerTarget=function(e){l.$targets.push(e)},l.$unregisterToggle=function(e){var t=l.$toggles.indexOf(e);l.$toggles.splice(t,1)},l.$unregisterTarget=function(e){var t=l.$targets.indexOf(e);l.$targets.splice(t,1),l.$options.allowMultiple&&s(e),r(t),l.$viewChangeListeners.forEach(function(e){e()})},l.$targets.$active=l.$options.startCollapsed?[]:[0],l.$setActive=t.$setActive=function(e){angular.isArray(e)?l.$targets.$active=e:l.$options.disallowToggle?a(e):o(e)?s(e):a(e),l.$viewChangeListeners.forEach(function(e){e()})},l.$activeIndexes=function(){return l.$options.allowMultiple?l.$targets.$active:1===l.$targets.$active.length?l.$targets.$active[0]:-1}};this.$get=function(){var n={};return n.defaults=e,n.controller=t,n}}).directive("bsCollapse",["$window","$animate","$collapse",function(e,t,n){n.defaults;return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",n.controller],link:function(e,t,n,i){var r=i[0],o=i[1];r&&(o.$viewChangeListeners.push(function(){r.$setViewValue(o.$activeIndexes())}),r.$formatters.push(function(e){if(angular.isArray(e))o.$setActive(e);else{var t=o.$activeIndexes();angular.isArray(t)?-1===t.indexOf(1*e)&&o.$setActive(1*e):t!==1*e&&o.$setActive(1*e)}return e}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(e,t,n,i){var r=(i[0],i[1]);t.attr("data-toggle","collapse"),r.$registerToggle(t),e.$on("$destroy",function(){r.$unregisterToggle(t)}),t.on("click",function(){var i=n.bsCollapseToggle&&"bs-collapse-toggle"!==n.bsCollapseToggle?n.bsCollapseToggle:r.$toggles.indexOf(t);r.$setActive(1*i),e.$apply()})}}}).directive("bsCollapseTarget",["$animate",function(e){return{require:["^?ngModel","^bsCollapse"],link:function(t,n,i,r){function o(){var t=s.$targets.indexOf(n),i=s.$activeIndexes(),r="removeClass";angular.isArray(i)?-1!==i.indexOf(t)&&(r="addClass"):t===i&&(r="addClass"),e[r](n,s.$options.activeClass)}var s=(r[0],r[1]);n.addClass("collapse"),s.$options.animation&&n.addClass(s.$options.animation),s.$registerTarget(n),t.$on("$destroy",function(){s.$unregisterTarget(n)}),s.$viewChangeListeners.push(function(){o()}),o()}}}]),angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var e=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:e}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(e,t){e.attr("data-toggle","buttons"),e.removeAttr("ng-model");var n=e[0].querySelectorAll('input[type="checkbox"]');angular.forEach(n,function(e){var n=angular.element(e);n.attr("bs-checkbox",""),n.attr("ng-model",t.ngModel+"."+n.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function(e,t){var n=e.defaults,i=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(e,r,o,s){var a=n,l="INPUT"===r[0].nodeName,u=l?r.parent():r,c=angular.isDefined(o.trueValue)?o.trueValue:!0;i.test(o.trueValue)&&(c=e.$eval(o.trueValue));var d=angular.isDefined(o.falseValue)?o.falseValue:!1;i.test(o.falseValue)&&(d=e.$eval(o.falseValue));var h="boolean"!=typeof c||"boolean"!=typeof d;h&&(s.$parsers.push(function(e){return e?c:d}),s.$formatters.push(function(e){return angular.equals(e,c)}),e.$watch(o.ngModel,function(e,t){s.$render()})),s.$render=function(){var e=angular.equals(s.$modelValue,c);t(function(){l&&(r[0].checked=e),u.toggleClass(a.activeClass,e)})},r.bind(a.toggleEvent,function(){e.$apply(function(){l||s.$setViewValue(!u.hasClass("active")),h||s.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(e,t){e.attr("data-toggle","buttons"),e.removeAttr("ng-model");var n=e[0].querySelectorAll('input[type="radio"]');angular.forEach(n,function(e){angular.element(e).attr("bs-radio",""),angular.element(e).attr("ng-model",t.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function(e,t){var n=e.defaults,i=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(e,r,o,s){var a,l=n,u="INPUT"===r[0].nodeName,c=u?r.parent():r;o.$observe("value",function(t){a=i.test(t)?e.$eval(t):t,s.$render()}),s.$render=function(){var e=angular.equals(s.$modelValue,a);t(function(){u&&(r[0].checked=e),c.toggleClass(l.activeClass,e)})},r.bind(l.toggleEvent,function(){e.$apply(function(){s.$setViewValue(a),s.$render()})})}}}]),angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var e=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",prefixEvent:"aside",placement:"right",templateUrl:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function(t){function n(n){var i={},r=angular.extend({},e,n);return i=t(r)}return n}]}).directive("bsAside",["$window","$sce","$aside",function(e,t,n){e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,i,r,o){var s={scope:e,element:i,show:!1};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(e){angular.isDefined(r[e])&&(s[e]=r[e])});var a=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(e){angular.isDefined(r[e])&&a.test(r[e])&&(s[e]=!1)}),angular.forEach(["title","content"],function(n){r[n]&&r.$observe(n,function(i,r){e[n]=t.trustAsHtml(i)})}),r.bsAside&&e.$watch(r.bsAside,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var l=n(s);i.on(r.trigger||"click",l.toggle),e.$on("$destroy",function(){l&&l.destroy(),s=null,l=null})}}}]),angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var e=this.defaults={animation:"am-fade",prefixClass:"alert",prefixEvent:"alert",placement:null,templateUrl:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function(t,n){function i(i){var r={},o=angular.extend({},e,i);r=t(o),r.$scope.dismissable=!!o.dismissable,o.type&&(r.$scope.type=o.type);var s=r.show;return o.duration&&(r.show=function(){s(),n(function(){r.hide()},1e3*o.duration)}),r}return i}]}).directive("bsAlert",["$window","$sce","$alert",function(e,t,n){e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,i,r,o){var s={scope:e,element:i,show:!1};angular.forEach(["template","templateUrl","controller","controllerAs","placement","keyboard","html","container","animation","duration","dismissable"],function(e){angular.isDefined(r[e])&&(s[e]=r[e])});var a=/^(false|0|)$/i;angular.forEach(["keyboard","html","container","dismissable"],function(e){angular.isDefined(r[e])&&a.test(r[e])&&(s[e]=!1)}),e.hasOwnProperty("title")||(e.title=""),angular.forEach(["title","content","type"],function(n){r[n]&&r.$observe(n,function(i,r){e[n]=t.trustAsHtml(i)})}),r.bsAlert&&e.$watch(r.bsAlert,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var l=n(s);i.on(r.trigger||"click",l.toggle),e.$on("$destroy",function(){l&&l.destroy(),s=null,l=null})}}}]),angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var e=this.defaults={offsetTop:"auto",inlineStyles:!0};this.$get=["$window","debounce","dimensions",function(t,n,i){function r(r,a){function l(e,t,n){var i=u(),r=c();return y>=i?"top":null!==e&&i+e<=t.top?"middle":null!==b&&t.top+n+g>=r-b?"bottom":"middle"}function u(){return f[0]===t?t.pageYOffset:f[0].scrollTop}function c(){return f[0]===t?t.document.body.scrollHeight:f[0].scrollHeight}var d={},h=angular.extend({},e,a),f=h.target,p="affix affix-top affix-bottom",m=!1,g=0,v=0,y=0,b=0,w=null,C=null,x=r.parent();if(h.offsetParent)if(h.offsetParent.match(/^\d+$/))for(var S=0;S<1*h.offsetParent-1;S++)x=x.parent();else x=angular.element(h.offsetParent);return d.init=function(){this.$parseOffsets(),v=i.offset(r[0]).top+g,m=!r[0].style.width,f.on("scroll",this.checkPosition),f.on("click",this.checkPositionWithEventLoop),s.on("resize",this.$debouncedOnResize),this.checkPosition(),this.checkPositionWithEventLoop()},d.destroy=function(){f.off("scroll",this.checkPosition),f.off("click",this.checkPositionWithEventLoop),s.off("resize",this.$debouncedOnResize)},d.checkPositionWithEventLoop=function(){setTimeout(d.checkPosition,1)},d.checkPosition=function(){var e=u(),t=i.offset(r[0]),n=i.height(r[0]),s=l(C,t,n);w!==s&&(w=s,"top"===s?(C=null,m&&r.css("width",""),h.inlineStyles&&(r.css("position",h.offsetParent?"":"relative"),r.css("top",""))):"bottom"===s?(C=h.offsetUnpin?-(1*h.offsetUnpin):t.top-e,m&&r.css("width",""),h.inlineStyles&&(r.css("position",h.offsetParent?"":"relative"),r.css("top",h.offsetParent?"":o[0].offsetHeight-b-n-v+"px"))):(C=null,m&&r.css("width",r[0].offsetWidth+"px"),h.inlineStyles&&(r.css("position","fixed"),r.css("top",g+"px"))),r.removeClass(p).addClass("affix"+("middle"!==s?"-"+s:"")))},d.$onResize=function(){d.$parseOffsets(),d.checkPosition()},d.$debouncedOnResize=n(d.$onResize,50),d.$parseOffsets=function(){var e=r.css("position");h.inlineStyles&&r.css("position",h.offsetParent?"":"relative"),h.offsetTop&&("auto"===h.offsetTop&&(h.offsetTop="+0"),h.offsetTop.match(/^[-+]\d+$/)?(g=1*-h.offsetTop,y=h.offsetParent?i.offset(x[0]).top+1*h.offsetTop:i.offset(r[0]).top-i.css(r[0],"marginTop",!0)+1*h.offsetTop):y=1*h.offsetTop),h.offsetBottom&&(b=h.offsetParent&&h.offsetBottom.match(/^[-+]\d+$/)?c()-(i.offset(x[0]).top+i.height(x[0]))+1*h.offsetBottom+1:1*h.offsetBottom),h.inlineStyles&&r.css("position",e)},d.init(),d}var o=angular.element(t.document.body),s=angular.element(t);return r}]}).directive("bsAffix",["$affix","$window",function(e,t){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(n,i,r,o){var s={scope:n,target:o?o.$element:angular.element(t)};angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin","inlineStyles"],function(e){if(angular.isDefined(r[e])){var t=r[e];/true/i.test(t)&&(t=!0),/false/i.test(t)&&(t=!1),s[e]=t}});var a=e(i,s);n.$on("$destroy",function(){a&&a.destroy(),s=null,a=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function(e){this.$element=e}]}}),angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"])}(window,document),angular.module("angular-carousel",["ngTouch","angular-carousel.shifty"]),angular.module("angular-carousel").directive("rnCarouselAutoSlide",["$interval",function(e){return{restrict:"A",link:function(t,n,i){var r=function(){t.autoSlider&&(e.cancel(t.autoSlider),t.autoSlider=null)},o=function(){t.autoSlide()};t.$watch("carouselIndex",o),i.hasOwnProperty("rnCarouselPauseOnHover")&&"false"!==i.rnCarouselPauseOnHover&&(n.on("mouseenter",r),n.on("mouseleave",o)),t.$on("$destroy",function(){r(),n.off("mouseenter",r),n.off("mouseleave",o)})}}}]),angular.module("angular-carousel").directive("rnCarouselIndicators",["$parse",function(e){return{restrict:"A",scope:{slides:"=",index:"=rnCarouselIndex"},templateUrl:"carousel-indicators.html",link:function(t,n,i){var r=e(i.rnCarouselIndex);t.goToSlide=function(e){r.assign(t.$parent.$parent,e)}}}}]),angular.module("angular-carousel").run(["$templateCache",function(e){e.put("carousel-indicators.html",'<div class="rn-carousel-indicator">\n<span ng-repeat="slide in slides" ng-class="{active: $index==index}" ng-click="goToSlide($index)">●</span></div>')}]),function(){"use strict";angular.module("angular-carousel").service("DeviceCapabilities",function(){function e(){var e="transform",t="webkitTransform";return"undefined"!=typeof document.body.style[e]?["webkit","moz","o","ms"].every(function(t){var n="-"+t+"-transform";return"undefined"!=typeof document.body.style[n]?(e=n,!1):!0}):e="undefined"!=typeof document.body.style[t]?"-webkit-transform":void 0,e}function t(){var e,t=document.createElement("p"),n={webkitTransform:"-webkit-transform",msTransform:"-ms-transform",transform:"transform"};document.body.insertBefore(t,null);for(var i in n)void 0!==t.style[i]&&(t.style[i]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(n[i]));return document.body.removeChild(t),void 0!==e&&e.length>0&&"none"!==e}return{has3d:t(),transformProperty:e()}}).service("computeCarouselSlideStyle",["DeviceCapabilities",function(e){return function(t,n,i){var r,o={display:"inline-block"},s=100*t+n,a=e.has3d?"translate3d("+s+"%, 0, 0)":"translate3d("+s+"%, 0)",l=(100-Math.abs(s))/100;if(e.transformProperty)if("fadeAndSlide"==i)o[e.transformProperty]=a,r=0,Math.abs(s)<100&&(r=.3+.7*l),o.opacity=r;else if("hexagon"==i){var u=100,c=0,d=60*(l-1);u=-100*t>n?100:0,c=-100*t>n?d:-d,o[e.transformProperty]=a+" rotateY("+c+"deg)",o[e.transformProperty+"-origin"]=u+"% 50%"}else if("zoom"==i){o[e.transformProperty]=a;var h=1;Math.abs(s)<100&&(h=1+2*(1-l)),o[e.transformProperty]+=" scale("+h+")",o[e.transformProperty+"-origin"]="50% 50%",r=0,Math.abs(s)<100&&(r=.3+.7*l),o.opacity=r}else o[e.transformProperty]=a;else o["margin-left"]=s+"%";return o}}]).service("createStyleString",function(){return function(e){var t=[];return angular.forEach(e,function(e,n){t.push(n+":"+e)}),t.join(";")}}).directive("rnCarousel",["$swipe","$window","$document","$parse","$compile","$timeout","$interval","computeCarouselSlideStyle","createStyleString","Tweenable",function(e,t,n,i,r,o,s,a,l,u){function c(e,t,n){var i=n;return e.every(function(e,n){return angular.equals(e,t)?(i=n,!1):!0}),i}var d=0;t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame;return{restrict:"A",scope:!0,compile:function(h,f){var p,m,g=h[0].querySelector("li"),v=g?g.attributes:[],y=!1,b=!1;return["ng-repeat","data-ng-repeat","ng:repeat","x-ng-repeat"].every(function(e){var t=v[e];if(angular.isDefined(t)){var n=t.value.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),i=n[3];if(p=n[1],m=n[2],p)return angular.isDefined(f.rnCarouselBuffered)&&(b=!0,t.value=p+" in "+m+"|carouselSlice:carouselBufferIndex:carouselBufferSize",i&&(t.value+=" track by "+i)),y=!0,!1}return!0}),function(h,p,g,v){function w(){return p[0].querySelectorAll("ul[rn-carousel] > li")}function C(e){U=!0,T({x:e.clientX,y:e.clientY},e)}function x(e){var t=100*h.carouselBufferIndex+e;angular.forEach(w(),function(e,n){e.style.cssText=l(a(n,t,R.transitionType))})}function S(e,t){if(void 0===e&&(e=h.carouselIndex),t=t||{},t.animate===!1||"none"===R.transitionType)return V=!1,I=-100*e,h.carouselIndex=e,void F();V=!0;var n=new u;n.tween({from:{x:I},to:{x:-100*e},duration:R.transitionDuration,easing:R.transitionEasing,step:function(e){x(e.x)},finish:function(){h.$apply(function(){h.carouselIndex=e,I=-100*e,F(),o(function(){V=!1},0,!1)})}})}function A(){var e=p[0].getBoundingClientRect();return e.width?e.width:e.right-e.left}function _(){z=A()}function E(){W||(W=!0,n.bind("mouseup",C))}function $(){W&&(W=!1,n.unbind("mouseup",C))}function k(e,t){return V||H.length<=1?void 0:(_(),j=p[0].querySelector("li").getBoundingClientRect().left,O=!0,N=e.x,!1)}function D(e,t){var n,i;if(E(),O&&(n=e.x,i=N-n,i>2||-2>i)){U=!0;var r=I+100*-i/z;x(r)}return!1}function T(e,t,n){if((!t||U)&&($(),O=!1,U=!1,B=N-e.x,0!==B&&!V))if(I+=100*-B/z,R.isSequential){var r=R.moveTreshold*z,o=-B,s=-Math[o>=0?"ceil":"floor"](o/z),a=Math.abs(o)>r;H&&s+h.carouselIndex>=H.length&&(s=H.length-1-h.carouselIndex),s+h.carouselIndex<0&&(s=-h.carouselIndex);var l=a?s:0;B=h.carouselIndex+l,S(B),void 0!==g.rnCarouselOnInfiniteScrollRight&&0===s&&0!==h.carouselIndex&&(i(g.rnCarouselOnInfiniteScrollRight)(h),S(0)),void 0!==g.rnCarouselOnInfiniteScrollLeft&&0===s&&0===h.carouselIndex&&0===l&&(i(g.rnCarouselOnInfiniteScrollLeft)(h),S(H.length))}else h.$apply(function(){h.carouselIndex=parseInt(-I/100,10),F()})}function F(){var e=0,t=(h.carouselBufferSize-1)/2;b?(e=h.carouselIndex<=t?0:H&&H.length<h.carouselBufferSize?0:H&&h.carouselIndex>H.length-h.carouselBufferSize?H.length-h.carouselBufferSize:h.carouselIndex-t,h.carouselBufferIndex=e,o(function(){x(I)},0,!1)):o(function(){x(I)},0,!1)}function L(){_(),S()}d++;var O,N,B,M={transitionType:g.rnCarouselTransition||"slide",transitionEasing:g.rnCarouselEasing||"easeTo",transitionDuration:parseInt(g.rnCarouselDuration,10)||300,isSequential:!0,autoSlideDuration:3,bufferSize:5,moveTreshold:.1,defaultIndex:0},R=angular.extend({},M),P=!1,I=0,U=!1,H=[],z=null,j=null,W=!1,V=!1;"true"!==g.rnSwipeDisabled&&e.bind(p,{start:k,move:D,end:T,cancel:function(e){T({},e)}}),h.nextSlide=function(e){var t=h.carouselIndex+1;t>H.length-1&&(t=0),V||S(t,e)},h.prevSlide=function(e){var t=h.carouselIndex-1;0>t&&(t=H.length-1),S(t,e)};var q=!0;if(h.carouselIndex=0,y||(H=[],angular.forEach(w(),function(e,t){H.push({id:t})})),void 0!==g.rnCarouselControls){var K=(y?h.$eval(m.replace("::","")).length:H.length)>1?angular.isDefined(f.rnCarouselControlsAllowLoop):!1,G=y?"("+m.replace("::","")+").length - 1":H.length-1,Y='<div class="rn-carousel-controls">\n  <span class="rn-carousel-control rn-carousel-control-prev" ng-click="prevSlide()" ng-if="carouselIndex > 0 || '+K+'"></span>\n  <span class="rn-carousel-control rn-carousel-control-next" ng-click="nextSlide()" ng-if="carouselIndex < '+G+" || "+K+'"></span>\n</div>';
p.parent().append(r(angular.element(Y))(h))}if(void 0!==g.rnCarouselAutoSlide){var Z=parseInt(g.rnCarouselAutoSlide,10)||R.autoSlideDuration;h.autoSlide=function(){h.autoSlider&&(s.cancel(h.autoSlider),h.autoSlider=null),h.autoSlider=s(function(){V||O||h.nextSlide()},1e3*Z)}}if(g.rnCarouselDefaultIndex){var X=i(g.rnCarouselDefaultIndex);R.defaultIndex=X(h.$parent)||0}if(g.rnCarouselIndex){var J=function(e){Q.assign(h.$parent,e)},Q=i(g.rnCarouselIndex);angular.isFunction(Q.assign)?(h.$watch("carouselIndex",function(e){J(e)}),h.$parent.$watch(Q,function(e,t){void 0!==e&&null!==e&&(H&&H.length>0&&e>=H.length?(e=H.length-1,J(e)):H&&0>e&&(e=0,J(e)),V||S(e,{animate:!q}),q=!1)}),P=!0,R.defaultIndex&&S(R.defaultIndex,{animate:!q})):isNaN(g.rnCarouselIndex)||S(parseInt(g.rnCarouselIndex,10),{animate:!1})}else S(R.defaultIndex,{animate:!q}),q=!1;if(g.rnCarouselLocked&&h.$watch(g.rnCarouselLocked,function(e,t){V=e===!0?!0:!1}),y){var ee=void 0!==g.rnCarouselDeepWatch;h[ee?"$watch":"$watchCollection"](m,function(e,t){if(H=e,ee&&angular.isArray(e)){var n=t[h.carouselIndex],i=c(e,n,h.carouselIndex);S(i,{animate:!1})}else S(h.carouselIndex,{animate:!1})},!0)}h.$on("$destroy",function(){$()}),h.carouselBufferIndex=0,h.carouselBufferSize=R.bufferSize;var te=angular.element(t);te.bind("orientationchange",L),te.bind("resize",L),h.$on("$destroy",function(){$(),te.unbind("orientationchange",L),te.unbind("resize",L)})}}}}])}(),angular.module("angular-carousel.shifty",[]).factory("Tweenable",function(){return function(e){var t=function(){"use strict";function t(){}function n(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function i(e,t){return n(t,function(n){e[n]=t[n]}),e}function r(e,t){n(t,function(n){"undefined"==typeof e[n]&&(e[n]=t[n])})}function o(e,t,n,i,r,o,a){var l,u=(e-o)/r;for(l in t)t.hasOwnProperty(l)&&(t[l]=s(n[l],i[l],d[a[l]],u));return t}function s(e,t,n,i){return e+(t-e)*n(i)}function a(e,t){var i=c.prototype.filter,r=e._filterArgs;n(i,function(n){"undefined"!=typeof i[n][t]&&i[n][t].apply(e,r)})}function l(e,t,n,i,r,s,l,u,c){y=t+n,b=Math.min(v(),y),w=b>=y,C=n-(y-b),e.isPlaying()&&!w?(e._scheduleId=c(e._timeoutHandler,m),a(e,"beforeTween"),o(b,i,r,s,n,t,l),a(e,"afterTween"),u(i,e._attachment,C)):w&&(u(s,e._attachment,C),e.stop(!0))}function u(e,t){var i={};return"string"==typeof t?n(e,function(e){i[e]=t}):n(e,function(e){i[e]||(i[e]=t[e]||f)}),i}function c(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=h,"undefined"!=typeof t&&this.setConfig(t)}var d,h,f="linear",p=500,m=1e3/60,g=Date.now?Date.now:function(){return+new Date},v="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:g;h="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var y,b,w,C;return c.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=v(),this._start(this.get(),this._attachment),this.resume())},c.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._start=e.start||t,this._step=e.step||t,this._finish=e.finish||t,this._duration=e.duration||p,this._currentState=e.from||this.get(),this._originalState=this.get(),this._targetState=e.to||this.get();var n=this._currentState,i=this._targetState;return r(i,n),this._easing=u(n,e.easing||f),this._filterArgs=[n,this._originalState,i,this._easing],a(this,"tweenCreated"),this},c.prototype.get=function(){return i({},this._currentState)},c.prototype.set=function(e){this._currentState=e},c.prototype.pause=function(){return this._pausedAtTime=v(),this._isPaused=!0,this},c.prototype.resume=function(){this._isPaused&&(this._timestamp+=v()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0;var e=this;return this._timeoutHandler=function(){l(e,e._timestamp,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)},this._timeoutHandler(),this},c.prototype.seek=function(e){return this._timestamp=v()-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,l(this,this._timestamp,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction),this._timeoutHandler(),this.pause()),this},c.prototype.stop=function(n){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=t,(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.clearTimeout)(this._scheduleId),n&&(i(this._currentState,this._targetState),a(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},c.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},c.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},c.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},c.prototype.filter={},c.prototype.formula={linear:function(e){return e}},d=c.prototype.formula,i(c,{now:v,each:n,tweenProps:o,tweenProp:s,applyFilter:a,shallowCopy:i,defaults:r,composeEasingObject:u}),e.Tweenable=c,c}();!function(){t.shallowCopy(t.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?2-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})}(),function(){function e(e,t,n,i,r,o){function s(e){return((f*e+p)*e+m)*e}function a(e){return((g*e+v)*e+y)*e}function l(e){return(3*f*e+2*p)*e+m}function u(e){return 1/(200*e)}function c(e,t){return a(h(e,t))}function d(e){return e>=0?e:0-e}function h(e,t){var n,i,r,o,a,u;for(r=e,u=0;8>u;u++){if(o=s(r)-e,d(o)<t)return r;if(a=l(r),d(a)<1e-6)break;r-=o/a}if(n=0,i=1,r=e,n>r)return n;if(r>i)return i;for(;i>n;){if(o=s(r),d(o-e)<t)return r;e>o?n=r:i=r,r=.5*(i-n)+n}return r}var f=0,p=0,m=0,g=0,v=0,y=0;return m=3*t,p=3*(i-t)-m,f=1-m-p,y=3*n,v=3*(r-n)-y,g=1-y-v,c(e,u(o))}function n(t,n,i,r){return function(o){return e(o,t,n,i,r,1)}}t.setBezierFunction=function(e,i,r,o,s){var a=n(i,r,o,s);return a.x1=i,a.y1=r,a.x2=o,a.y2=s,t.prototype.formula[e]=a},t.unsetBezierFunction=function(e){delete t.prototype.formula[e]}}(),function(){function e(e,n,i,r,o){return t.tweenProps(r,n,e,i,1,0,o)}var n=new t;n._filterArgs=[],t.interpolate=function(i,r,o,s){var a=t.shallowCopy({},i),l=t.composeEasingObject(i,s||"linear");n.set({});var u=n._filterArgs;u.length=0,u[0]=a,u[1]=i,u[2]=r,u[3]=l,t.applyFilter(n,"tweenCreated"),t.applyFilter(n,"beforeTween");var c=e(i,a,r,o,l);return t.applyFilter(n,"afterTween"),c}}(),function(e){function t(e,t){$.length=0;var n,i=e.length;for(n=0;i>n;n++)$.push("_"+t+"_"+n);return $}function n(e){var t=e.match(C);return t?(1===t.length||e[0].match(w))&&t.unshift(""):t=["",""],t.join(E)}function i(t){e.each(t,function(e){var n=t[e];"string"==typeof n&&n.match(_)&&(t[e]=r(n))})}function r(e){return l(_,e,o)}function o(e){var t=s(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function s(e){return e=e.replace(/#/,""),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),k[0]=a(e.substr(0,2)),k[1]=a(e.substr(2,2)),k[2]=a(e.substr(4,2)),k}function a(e){return parseInt(e,16)}function l(e,t,n){var i=t.match(e),r=t.replace(e,E);if(i)for(var o,s=i.length,a=0;s>a;a++)o=i.shift(),r=r.replace(E,n(o));return r}function u(e){return l(S,e,c)}function c(e){for(var t=e.match(x),n=t.length,i=e.match(A)[0],r=0;n>r;r++)i+=parseInt(t[r],10)+",";return i=i.slice(0,-1)+")"}function d(i){var r={};return e.each(i,function(e){var o=i[e];if("string"==typeof o){var s=v(o);r[e]={formatString:n(o),chunkNames:t(s,e)}}}),r}function h(t,n){e.each(n,function(e){for(var i=t[e],r=v(i),o=r.length,s=0;o>s;s++)t[n[e].chunkNames[s]]=+r[s];delete t[e]})}function f(t,n){e.each(n,function(e){var i=t[e],r=p(t,n[e].chunkNames),o=m(r,n[e].chunkNames);i=g(n[e].formatString,o),t[e]=u(i)})}function p(e,t){for(var n,i={},r=t.length,o=0;r>o;o++)n=t[o],i[n]=e[n],delete e[n];return i}function m(e,t){D.length=0;for(var n=t.length,i=0;n>i;i++)D.push(e[t[i]]);return D}function g(e,t){for(var n=e,i=t.length,r=0;i>r;r++)n=n.replace(E,+t[r].toFixed(4));return n}function v(e){return e.match(x)}function y(t,n){e.each(n,function(e){for(var i=n[e],r=i.chunkNames,o=r.length,s=t[e].split(" "),a=s[s.length-1],l=0;o>l;l++)t[r[l]]=s[l]||a;delete t[e]})}function b(t,n){e.each(n,function(e){for(var i=n[e],r=i.chunkNames,o=r.length,s="",a=0;o>a;a++)s+=" "+t[r[a]],delete t[r[a]];t[e]=s.substr(1)})}var w=/(\d|\-|\.)/,C=/([^\-0-9\.]+)/g,x=/[0-9.\-]+/g,S=new RegExp("rgb\\("+x.source+/,\s*/.source+x.source+/,\s*/.source+x.source+"\\)","g"),A=/^.*\(/,_=/#([0-9]|[a-f]){3,6}/gi,E="VAL",$=[],k=[],D=[];e.prototype.filter.token={tweenCreated:function(e,t,n,r){i(e),i(t),i(n),this._tokenData=d(e)},beforeTween:function(e,t,n,i){y(i,this._tokenData),h(e,this._tokenData),h(t,this._tokenData),h(n,this._tokenData)},afterTween:function(e,t,n,i){f(e,this._tokenData),f(t,this._tokenData),f(n,this._tokenData),b(i,this._tokenData)}}}(t)}(window),window.Tweenable}),function(){"use strict";angular.module("angular-carousel").filter("carouselSlice",function(){return function(e,t,n){return angular.isArray(e)?e.slice(t,t+n):angular.isObject(e)?e:void 0}})}(),"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},u=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;r>i;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=u[n]=[],d=function(){return new u(this)};if(a[n]=Error[n],c.item=function(e){return this[e]||null},c.contains=function(e){return e+="",-1!==l(this,e)},c.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do e=t[n]+"",-1===l(this,e)&&(this.push(e),r=!0);while(++n<i);r&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do for(e=n[i]+"",t=l(this,e);-1!==t;)this.splice(t,1),o=!0,t=l(this,e);while(++i<r);o&&this._updateClassName()},c.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var h={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,h)}catch(f){-2146823252===f.number&&(h.enumerable=!1,r.defineProperty(i,t,h))}}else r[n].__defineGetter__&&i.__defineGetter__(t,d)}}(self),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},r=n.prototype,o=i.prototype,s=e.FileReaderSync,a=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,h=c.revokeObjectURL,f=c,p=e.btoa,m=e.atob,g=e.ArrayBuffer,v=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;u--;)a.prototype[l[u]]=u+1;return c.createObjectURL||(f=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(y),n.origin=t&&t[1])),n}),f.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(c,e)},r.append=function(e){var n=this.data;if(v&&(e instanceof g||e instanceof v)){for(var r="",o=new v(e),l=0,u=o.length;u>l;l++)r+=String.fromCharCode(o[l]);n.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!s)throw new a("NOT_READABLE_ERR");var c=new s;n.push(c.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var r=arguments.length;return 3>r&&(n=null),new i(this.data.slice(e,r>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,t){var i=t?t.type||"":"",r=new n;if(e)for(var o=0,s=e.length;s>o;o++)Uint8Array&&e[o]instanceof Uint8Array?r.append(e[o].buffer):r.append(e[o]);var a=r.getBlob(i);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var i=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=i(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.MediumEditor=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}var t;!function(e){function n(t,n,i){i||(i=e);try{for(var r=0;r<t.length;r++){var o=t[r];if(!(o in i)){if(!n)return;i[o]={}}i=i[o]}return i}catch(s){}}function i(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var r=0;r<i.length;r++){var o=i[r];if(o)for(n in o)o.hasOwnProperty(n)&&"undefined"!=typeof o[n]&&(e||t.hasOwnProperty(n)===!1)&&(t[n]=o[n])}return t}t={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46},parentElements:["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return i.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return i.apply(this,e)},derives:function(e,t){function n(){}var r=t.prototype;return n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=e,t.prototype=i(!1,t.prototype,r),t},findAdjacentTextNodeWithContent:function(e,t,n){var i,r=!1,o=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=o.nextNode();i;){if(i===t)r=!0;else if(r&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=o.nextNode()}return i},isDescendant:function(e,t,n){if(!e||!t)return!1;if(n&&e===t)return!0;for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},now:Date.now,throttle:function(e,t){var n,i,r,o=50,s=null,a=0,l=function(){a=Date.now(),s=null,r=e.apply(n,i),s||(n=i=null)};return t||0===t||(t=o),function(){var o=Date.now(),u=t-(o-a);return n=this,i=arguments,0>=u||u>t?(s&&(clearTimeout(s),s=null),a=o,r=e.apply(n,i),s||(n=i=null)):s||(s=setTimeout(l,u)),r}},traverseUp:function(e,t){do{if(1===e.nodeType){if(t(e))return e;if(e.getAttribute("data-medium-element"))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,t){var n,i,r,o,s,a,l;if(e.queryCommandSupported("insertHTML"))try{return e.execCommand("insertHTML",!1,t)}catch(u){}if(n=e.defaultView.getSelection(),n.getRangeAt&&n.rangeCount){if(i=n.getRangeAt(0),l=i.commonAncestorContainer,3===l.nodeType&&l.nodeValue===i.toString()||3!==l.nodeType&&l.innerHTML===i.toString()){for(;l.parentNode&&1===l.parentNode.childNodes.length&&!l.parentNode.getAttribute("data-medium-element");)l=l.parentNode;i.selectNode(l)}for(i.deleteContents(),r=e.createElement("div"),r.innerHTML=t,o=e.createDocumentFragment();r.firstChild;)s=r.firstChild,a=o.appendChild(s);i.insertNode(o),a&&(i=i.cloneRange(),i.setStartAfter(a),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,n=t&&3===t.nodeType?t.parentNode:t;return n},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===this.parentElements.indexOf(t);)e=e.parentNode,e&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},execFormatBlock:function(e,t){var n=this.getSelectionData(this.getSelectionStart(e));if("blockquote"===t&&n.el&&"blockquote"===n.el.parentNode.tagName.toLowerCase())return e.execCommand("outdent",!1,null);if(n.tagName===t&&(t="p"),this.isIE){if("blockquote"===t)return e.execCommand("indent",!1,t);t="<"+t+">"}return e.execCommand("formatBlock",!1,t)},setTargetBlank:function(e){var t;if("a"===e.tagName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),t=0;t<e.length;t+=1)e[t].target="_blank"},addClassToAnchors:function(e,t){var n,i,r=t.split(" ");if("a"===e.tagName.toLowerCase())for(i=0;i<r.length;i+=1)e.classList.add(r[i]);else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)for(i=0;i<r.length;i+=1)e[n].classList.add(r[i])},isListItem:function(e){if(!e)return!1;if("li"===e.tagName.toLowerCase())return!0;for(var t=e.parentNode,n=t.tagName.toLowerCase();-1===this.parentElements.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t||!t.tagName)return!1;n=t.tagName.toLowerCase()}return!1},cleanListDOM:function(e){if("li"===e.tagName.toLowerCase()){var t=e.parentElement;"p"===t.parentElement.tagName.toLowerCase()&&this.unwrapElement(t.parentElement)}},unwrapElement:function(e){var t,n=e.parentNode,i=e.firstChild;do t=i.nextSibling,n.insertBefore(i,e),i=t;while(i);n.removeChild(e)},warn:function(){void 0!==e.console&&console.warn.apply(console,arguments)},deprecated:function(e,n,i){var r=e+" is deprecated, please use "+n+" instead.";i&&(r+=" Will be removed in "+i),t.warn(r)},deprecatedMethod:function(e,n,i,r){t.deprecated(e,n,r),"function"==typeof this[n]&&this[n].apply(this,i)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.forEach(function(t){e.tagName.toLowerCase()===t&&e.parentNode.removeChild(e)})},setObject:function(e,t,i){var r=e.split("."),o=r.pop(),s=n(r,!0,i);return s&&o?s[o]=t:void 0},getObject:function(e,t,i){return n(e?e.split("."):[],t,i)}}}(window);var n;!function(){n={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>',key:"b"},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>',key:"i"},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>',key:"u"},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},header1:{name:"header1",action:function(e){return"append-"+e.firstHeader},aria:function(e){return e.firstHeader},tagNames:function(e){return[e.firstHeader]},contentDefault:"<b>H1</b>"},header2:{name:"header2",action:function(e){return"append-"+e.secondHeader},aria:function(e){return e.secondHeader},tagNames:function(e){return[e.secondHeader]},contentDefault:"<b>H2</b>"},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'}}}();var i;!function(){i={allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorInputCheckboxLabel:"Open in new window",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableAnchorPreview:!1,disableEditing:!1,disablePlaceholders:!1,toolbarAlign:"center",elementsContainer:!1,imageDragging:!0,standardizeSelectionStart:!1,contentWindow:window,ownerDocument:document,firstHeader:"h3",placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,anchorTarget:!1,anchorButton:!1,anchorButtonClass:"btn",extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",paste:{forcePlainText:!0,cleanPastedHtml:!1,cleanAttrs:["class","style","dir"],cleanTags:["meta"]}}}();var r;!function(){r=function(e){t.extend(this,e)},r.extend=function(e){var n,i=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(n,i);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,e&&t.extend(n.prototype,e),n},r.prototype={init:function(){}}}();var o;!function(){o={findMatchingSelectionParent:function(e,n){var i,r,o=n.getSelection();return 0===o.rangeCount?!1:(i=o.getRangeAt(0),r=i.commonAncestorContainer,t.traverseUp(r,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return e.getAttribute("data-medium-element")},e)},selectionInContentEditableFalse:function(e){return this.findMatchingSelectionParent(function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")},e)},getSelectionHtml:function(){var e,t,n,i="",r=this.options.contentWindow.getSelection();if(r.rangeCount){for(n=this.options.ownerDocument.createElement("div"),e=0,t=r.rangeCount;t>e;e+=1)n.appendChild(r.getRangeAt(e).cloneContents());i=n.innerHTML}return i},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){var t=null;return t=this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},selectNode:function(e,t){var n=t.createRange(),i=t.getSelection();n.selectNodeContents(e),i.removeAllRanges(),i.addRange(n)}}}();var s;!function(){s=function(e){this.base=e,this.options=this.base.options,this.events=[],this.customEvents={},this.listeners={}},s.prototype={attachDOMEvent:function(e,t,n,i){e.addEventListener(t,n,i),this.events.push([e,t,n,i])},detachDOMEvent:function(e,t,n,i){var r,o=this.indexOfListener(e,t,n,i);-1!==o&&(r=this.events.splice(o,1)[0],r[0].removeEventListener(r[1],r[2],r[3]))},indexOfListener:function(e,t,n,i){var r,o,s;for(r=0,o=this.events.length;o>r;r+=1)if(s=this.events[r],s[0]===e&&s[1]===t&&s[2]===n&&s[3]===i)return r;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},attachCustomEvent:function(e,t){this.setupListener(e),this.listeners[e]&&(this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t))},triggerCustomEvent:function(e,t,n){this.customEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},setupListener:function(e){if(!this.listeners[e])switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleInteraction.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleInteraction.bind(this),!0),this.listeners[e]=!0;break;case"blur":this.setupListener("externalInteraction"),this.listeners[e]=!0;break;case"focus":this.setupListener("externalInteraction"),this.listeners[e]=!0;break;case"editableClick":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"click",this.handleClick.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableBlur":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"blur",this.handleBlur.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeypress":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keypress",this.handleKeypress.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeyup":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keyup",this.handleKeyup.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeydown":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keydown",this.handleKeydown.bind(this))}.bind(this)),this.listeners[e]=!0;break;case"editableKeydownEnter":this.setupListener("editableKeydown"),this.listeners[e]=!0;break;case"editableKeydownTab":this.setupListener("editableKeydown"),this.listeners[e]=!0;break;case"editableKeydownDelete":this.setupListener("editableKeydown"),this.listeners[e]=!0;break;case"editableMouseover":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"mouseover",this.handleMouseover.bind(this))},this),this.listeners[e]=!0;break;case"editableDrag":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"dragover",this.handleDragging.bind(this)),this.attachDOMEvent(e,"dragleave",this.handleDragging.bind(this))},this),this.listeners[e]=!0;break;case"editableDrop":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"drop",this.handleDrop.bind(this))},this),this.listeners[e]=!0;break;case"editablePaste":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"paste",this.handlePaste.bind(this))},this),this.listeners[e]=!0}},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},handleInteraction:function(e){this.updateFocus(e.target,e)},updateFocus:function(e,n){var i,r,s=this.options.contentWindow.getSelection(),a=this.base.toolbar?this.base.toolbar.getToolbarElement():null,l=this.base.getExtensionByName("anchor-preview"),u=l&&l.getPreviewElement?l.getPreviewElement():null,c=s.isCollapsed?null:o.getSelectedParentElement(s.getRangeAt(0));this.base.elements.some(function(n){return!i&&n.getAttribute("data-medium-focused")&&(i=n),r||!t.isDescendant(n,e,!0)&&!t.isDescendant(n,c)||(r=n),!!i&&!!r},this);var d=!t.isDescendant(i,e,!0)&&!t.isDescendant(a,e,!0)&&!t.isDescendant(u,e,!0);
r!==i&&(i&&d&&(i.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",n,i)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",n,r))),d&&this.triggerCustomEvent("externalInteraction",n)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){this.triggerCustomEvent("editableKeypress",e,e.currentTarget)},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(e){switch(this.triggerCustomEvent("editableKeydown",e,e.currentTarget),e.which){case t.keyCode.ENTER:this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget);break;case t.keyCode.TAB:this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget);break;case t.keyCode.DELETE:case t.keyCode.BACKSPACE:this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget)}}}}();var a;!function(){a=function(e,t){this.options=e,this.name=e.name,this.init(t)},a.prototype={init:function(e){this.base=e,this.button=this.createButton(),this.base.on(this.button,"click",this.handleClick.bind(this)),this.options.key&&this.base.subscribe("editableKeydown",this.handleKeydown.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.options.action?this.options.action(this.base.options):this.options.action},getAria:function(){return"function"==typeof this.options.aria?this.options.aria(this.base.options):this.options.aria},getTagNames:function(){return"function"==typeof this.options.tagNames?this.options.tagNames(this.base.options):this.options.tagNames},createButton:function(){var e=this.base.options.ownerDocument.createElement("button"),t=this.options.contentDefault;return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),e.setAttribute("data-action",this.getAction()),e.setAttribute("aria-label",this.getAria()),this.base.options.buttonLabels&&("fontawesome"===this.base.options.buttonLabels&&this.options.contentFA?t=this.options.contentFA:"object"==typeof this.base.options.buttonLabels&&this.base.options.buttonLabels[this.name]&&(t=this.base.options.buttonLabels[this.options.name])),e.innerHTML=t,e},handleKeydown:function(e){var t,n;(e.ctrlKey||e.metaKey)&&(t=String.fromCharCode(e.which||e.keyCode).toLowerCase(),this.options.key===t&&(e.preventDefault(),e.stopPropagation(),n=this.getAction(),n&&this.base.execAction(n)))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.base.execAction(t)},isActive:function(){return this.button.classList.contains(this.base.options.activeButtonClass)},setInactive:function(){this.button.classList.remove(this.base.options.activeButtonClass),delete this.knownState},setActive:function(){this.button.classList.add(this.base.options.activeButtonClass),delete this.knownState},queryCommandState:function(){var e=null;return this.options.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,r=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(r&&r.length>0&&e.tagName&&(i=-1!==r.indexOf(e.tagName.toLowerCase())),!i&&this.options.style&&(t=this.options.style.value.split("|"),n=this.base.options.contentWindow.getComputedStyle(e,null).getPropertyValue(this.options.style.prop),t.forEach(function(e){this.knownState||(i=-1!==n.indexOf(e),(i||"text-decoration"!==this.options.style.prop)&&(this.knownState=i))},this)),i)}}}();var l;!function(){function e(){return[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;|“|”)([^&]+)(&quot;|&rdquo;|&ldquo;|“|”)&gt;/gi),'<a href="$2">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""]]}l=function(e,t){this.base=e,this.options=t,(this.options.forcePlainText||this.options.cleanPastedHTML)&&this.base.subscribe("editablePaste",this.handlePaste.bind(this))},l.prototype={handlePaste:function(e,n){var i,r,o="",s="text/html",a="text/plain";if(this.options.contentWindow.clipboardData&&void 0===e.clipboardData&&(e.clipboardData=this.options.contentWindow.clipboardData,s="Text",a="Text"),e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented){if(e.preventDefault(),this.options.cleanPastedHTML&&e.clipboardData.getData(s))return this.cleanPaste(e.clipboardData.getData(s));if(this.options.disableReturn||n.getAttribute("data-disable-return"))o=t.htmlEntities(e.clipboardData.getData(a));else if(i=e.clipboardData.getData(a).split(/[\r\n]+/g),i.length>1)for(r=0;r<i.length;r+=1)""!==i[r]&&(o+="<p>"+t.htmlEntities(i[r])+"</p>");else o=t.htmlEntities(i[0]);t.insertHTMLCommand(this.options.ownerDocument,o)}},cleanPaste:function(n){var i,r,s,a=o.getSelectionElement(this.options.contentWindow),l=/<p|<br|<div/.test(n),u=e().concat(this.options.cleanReplacements||[]);for(i=0;i<u.length;i+=1)n=n.replace(u[i][0],u[i][1]);if(l){r=n.split("<br><br>"),this.pasteHTML("<p>"+r.join("</p><p>")+"</p>");try{this.options.ownerDocument.execCommand("insertText",!1,"\n")}catch(c){}for(r=a.querySelectorAll("a,p,div,br"),i=0;i<r.length;i+=1)switch(s=r[i],s.innerHTML=s.innerHTML.replace(/\n/gi," "),s.tagName.toLowerCase()){case"a":this.options.targetBlank&&t.setTargetBlank(s);break;case"p":case"div":this.filterCommonBlocks(s);break;case"br":this.filterLineBreak(s)}}else this.pasteHTML(n)},pasteHTML:function(e,n){n=t.defaults({},n,this.options);var i,r,o,s,a=this.options.ownerDocument.createDocumentFragment();for(a.appendChild(this.options.ownerDocument.createElement("body")),s=a.querySelector("body"),s.innerHTML=e,this.cleanupSpans(s),i=s.querySelectorAll("*"),o=0;o<i.length;o+=1)r=i[o],t.cleanupAttrs(r,n.cleanAttrs),t.cleanupTags(r,n.cleanTags);t.insertHTMLCommand(this.options.ownerDocument,s.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(e){var n,i,r,o=e.querySelectorAll(".replace-with"),s=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<o.length;n+=1)i=o[n],r=this.options.ownerDocument.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?r.innerHTML="<i>"+i.innerHTML+"</i>":r.innerHTML=i.innerHTML,i.parentNode.replaceChild(r,i);for(o=e.querySelectorAll("span"),n=0;n<o.length;n+=1){if(i=o[n],t.traverseUp(i,s))return!1;/^\s*$/.test()?i.parentNode.removeChild(i):i.parentNode.replaceChild(this.options.ownerDocument.createTextNode(i.textContent),i)}}}}();var u;!function(){function e(){this.parent=!0,this.options={name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>'},this.name="anchor",this.hasForm=!0}e.prototype={formSaveLabel:"&#10003;",formCloseLabel:"&times;",handleClick:function(e){e.preventDefault(),e.stopPropagation();var n=o.getSelectedParentElement(t.getSelectionRange(this.base.options.ownerDocument));return n.tagName&&"a"===n.tagName.toLowerCase()?this.base.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.base.options.anchorInputPlaceholder,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.base.options.anchorTarget&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.base.options.anchorInputCheckboxLabel,"</label>"),this.base.options.anchorButton&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>Button</label>"),e.join("")},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},getFormOpts:function(){var e=this.getForm().querySelector(".medium-editor-toolbar-anchor-target"),t=this.getForm().querySelector(".medium-editor-toolbar-anchor-button"),n={url:this.getInput().value};return this.base.options.checkLinkFormat&&(n.url=this.checkLinkFormat(n.url)),e&&e.checked?n.target="_blank":n.target="_self",t&&t.checked&&(n.buttonClass=this.base.options.anchorButtonClass),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.base.createLink(e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(t.test(e)?"":"http://")+e},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.base.on(e,"click",this.handleFormClick.bind(this)),this.base.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.base.on(t,"click",this.handleCloseClick.bind(this)),this.base.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.base.options.ownerDocument,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.base.id,t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},handleTextboxKeyup:function(e){return e.keyCode===t.keyCode.ENTER?(e.preventDefault(),void this.doFormSave()):void(e.keyCode===t.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}},u=t.derives(a,e)}();var c;!function(){c=function(){this.parent=!0,this.name="anchor-preview"},c.prototype={previewValueSelector:"i",init:function(e){this.base=e,this.anchorPreview=this.createPreview(),this.base.options.elementsContainer.appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.base.options.ownerDocument.createElement("div");return e.id="medium-editor-anchor-preview-"+this.base.id,e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.base.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner"></i></div>'},deactivate:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||e.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(){var e,t,n=40,i=this.activeAnchor.getBoundingClientRect(),r=(i.left+i.right)/2;e=this.anchorPreview.offsetWidth/2,t=this.base.options.diffLeft-e,this.anchorPreview.style.top=Math.round(n+i.bottom-this.base.options.diffTop+this.base.options.contentWindow.pageYOffset-this.anchorPreview.offsetHeight)+"px",e>r?this.anchorPreview.style.left=t+e+"px":this.base.options.contentWindow.innerWidth-r<e?this.anchorPreview.style.left=this.base.options.contentWindow.innerWidth+t-e+"px":this.anchorPreview.style.left=t+r+"px"},attachToEditables:function(){this.base.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(){var e=this.base.getExtensionByName("anchor"),t=this.activeAnchor;e&&t&&(this.base.selectElement(this.activeAnchor),this.base.delay(function(){t&&(e.showForm(t.attributes.href.value),t=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.base.off(this.activeAnchor,"mouseout",this.instance_handleAnchorMouseout),this.instance_handleAnchorMouseout=null},handleEditableMouseover:function(e){if(e.target&&"a"===e.target.tagName.toLowerCase()){if(!/href=["']\S+["']/.test(e.target.outerHTML)||/href=["']#\S+["']/.test(e.target.outerHTML))return!0;if(this.base.toolbar&&this.base.toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==e.target&&this.detachPreviewHandlers(),this.anchorToPreview=e.target,this.instance_handleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.base.on(this.anchorToPreview,"mouseout",this.instance_handleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.base.options.anchorPreviewHideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.interval_timer),this.instance_handlePreviewMouseover&&(this.base.off(this.anchorPreview,"mouseover",this.instance_handlePreviewMouseover),this.base.off(this.anchorPreview,"mouseout",this.instance_handlePreviewMouseout),this.activeAnchor&&(this.base.off(this.activeAnchor,"mouseover",this.instance_handlePreviewMouseover),this.base.off(this.activeAnchor,"mouseout",this.instance_handlePreviewMouseout))),this.hidePreview(),this.hovering=this.instance_handlePreviewMouseover=this.instance_handlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instance_handlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instance_handlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.interval_timer=setInterval(this.updatePreview.bind(this),200),this.base.on(this.anchorPreview,"mouseover",this.instance_handlePreviewMouseover),this.base.on(this.anchorPreview,"mouseout",this.instance_handlePreviewMouseout),this.base.on(this.activeAnchor,"mouseover",this.instance_handlePreviewMouseover),this.base.on(this.activeAnchor,"mouseout",this.instance_handlePreviewMouseout)}}}();var d;!function(){d=function(e){this.base=e,this.options=e.options,this.initThrottledMethods()},d.prototype={createToolbar:function(){var e=this.base.options.ownerDocument.createElement("div");return e.id="medium-editor-toolbar-"+this.base.id,e.className="medium-editor-toolbar",this.options.staticToolbar?e.className+=" static-toolbar":e.className+=" stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.base.commands.forEach(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var e,n,i,r=this.base.options.ownerDocument.createElement("ul");return r.id="medium-editor-toolbar-actions"+this.base.id,r.className="medium-editor-toolbar-actions clearfix",r.style.display="block",this.base.commands.forEach(function(i){"function"==typeof i.getButton&&(n=i.getButton(this.base),e=this.base.options.ownerDocument.createElement("li"),t.isElement(n)?e.appendChild(n):e.innerHTML=n,r.appendChild(e))}.bind(this)),i=r.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.options.firstButtonClass),i[i.length-1].classList.add(this.options.lastButtonClass)),r},deactivate:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.base.subscribe("blur",this.handleBlur.bind(this)),this.base.subscribe("focus",this.handleFocus.bind(this)),this.base.subscribe("editableClick",this.handleEditableClick.bind(this)),this.base.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.base.on(this.options.ownerDocument.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.options.staticToolbar&&this.options.stickyToolbar&&this.base.on(this.options.contentWindow,"scroll",this.handleWindowScroll.bind(this),!0),this.base.on(this.options.contentWindow,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){return e&&e.target&&t.isDescendant(this.getToolbarElement(),e.target)?!1:void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),0)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),"function"==typeof this.options.onShowToolbar&&this.options.onShowToolbar())},hideToolbar:function(){this.isDisplayed()&&(this.base.commands.forEach(function(e){"function"==typeof e.onHide&&e.onHide()}),this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),"function"==typeof this.options.onHideToolbar&&this.options.onHideToolbar())},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.base.commands.forEach(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var e=o.getSelectionHtml.call(this).replace(/<[\S]+><\/[\S]+>/gim,""),t=e.match(/<(p|h[1-6]|blockquote)[^>]*>/g);return!!t&&t.length>1},modifySelection:function(){var e=this.options.contentWindow.getSelection(),n=e.getRangeAt(0);if(this.options.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=t.findAdjacentTextNodeWithContent(o.getSelectionElement(this.options.contentWindow),n.startContainer,this.options.ownerDocument);if(i){for(var r=0;0===i.nodeValue.substr(r,1).trim().length;)r+=1;var s=this.options.ownerDocument.createRange();s.setStart(i,r),s.setEnd(n.endContainer,n.endOffset),e.removeAllRanges(),e.addRange(s),n=s}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.getFocusedElement()||o.selectionInContentEditableFalse(this.options.contentWindow))return void this.hideToolbar();var e=o.getSelectionElement(this.options.contentWindow);if(!e||-1===this.base.elements.indexOf(e)||e.getAttribute("data-disable-toolbar"))return void this.hideToolbar();if(this.options.updateOnEmptySelection&&this.options.staticToolbar)return void this.showAndUpdateToolbar();""===this.options.contentWindow.getSelection().toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():this.showAndUpdateToolbar()}},getFocusedElement:function(){for(var e=0;e<this.base.elements.length;e+=1)if(this.base.elements[e].getAttribute("data-medium-focused"))return this.base.elements[e];return null},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.base.commands.forEach(function(e){"function"==typeof e.isActive&&e.setInactive()}.bind(this)),this.checkActiveButtons()},checkActiveButtons:function(){var e,n=[],i=null,r=t.getSelectionRange(this.options.ownerDocument),s=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(r)for(e=o.getSelectedParentElement(r),this.base.commands.forEach(function(e){return"function"==typeof e.queryCommandState&&(i=e.queryCommandState(),null!==i)?void(i&&e.setActive()):void n.push(e)});void 0!==e.tagName&&-1===t.parentElements.indexOf(e.tagName.toLowerCase)&&(n.forEach(s),-1===this.base.elements.indexOf(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e,t=this.getFocusedElement(),n=this.options.contentWindow.getSelection();return t?(this.options.staticToolbar?(this.showToolbar(),this.positionStaticToolbar(t)):n.isCollapsed||(this.showToolbar(),this.positionToolbar(n)),e=this.base.getExtensionByName("anchor-preview"),void(e&&"function"==typeof e.hidePreview&&e.hidePreview())):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.options.ownerDocument.documentElement&&this.options.ownerDocument.documentElement.scrollTop||this.options.ownerDocument.body.scrollTop,i=this.options.contentWindow.innerWidth,r=this.getToolbarElement(),o=e.getBoundingClientRect(),s=o.top+n,a=o.left+o.width/2,l=r.offsetHeight,u=r.offsetWidth,c=u/2;this.options.stickyToolbar?n>s+e.offsetHeight-l?(r.style.top=s+e.offsetHeight-l+"px",r.classList.remove("sticky-toolbar")):n>s-l?(r.classList.add("sticky-toolbar"),r.style.top="0px"):(r.classList.remove("sticky-toolbar"),r.style.top=s-l+"px"):r.style.top=s-l+"px","left"===this.options.toolbarAlign?t=o.left:"center"===this.options.toolbarAlign?t=a-c:"right"===this.options.toolbarAlign&&(t=o.right-u),0>t?t=0:t+u>i&&(t=i-Math.ceil(u)-1),r.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0";var t=this.options.contentWindow.innerWidth,n=e.getRangeAt(0),i=n.getBoundingClientRect(),r=(i.left+i.right)/2,o=this.getToolbarElement(),s=o.offsetHeight,a=o.offsetWidth,l=a/2,u=50,c=this.options.diffLeft-l;i.top<u?(o.classList.add("medium-toolbar-arrow-over"),o.classList.remove("medium-toolbar-arrow-under"),o.style.top=u+i.bottom-this.options.diffTop+this.options.contentWindow.pageYOffset-s+"px"):(o.classList.add("medium-toolbar-arrow-under"),o.classList.remove("medium-toolbar-arrow-over"),o.style.top=i.top+this.options.diffTop+this.options.contentWindow.pageYOffset-s+"px"),l>r?o.style.left=c+l+"px":l>t-r?o.style.left=t+c-l+"px":o.style.left=c+r+"px"}}}();var h;!function(){h=function(e){this.base=e,this.initPlaceholders(),this.attachEventHandlers()},h.prototype={initPlaceholders:function(){this.base.elements.forEach(function(e){this.updatePlaceholder(e)},this)},showPlaceholder:function(e){e&&e.classList.add("medium-editor-placeholder")},hidePlaceholder:function(e){e&&e.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(e){e.querySelector("img")||e.querySelector("blockquote")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):this.showPlaceholder(e)},attachEventHandlers:function(){this.base.subscribe("blur",this.handleExternalInteraction.bind(this)),this.base.subscribe("editableBlur",this.handleBlur.bind(this)),this.base.subscribe("editableClick",this.handleHidePlaceholderEvent.bind(this)),this.base.subscribe("editableKeypress",this.handleHidePlaceholderEvent.bind(this)),this.base.subscribe("editablePaste",this.handleHidePlaceholderEvent.bind(this))},handleHidePlaceholderEvent:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)},handleExternalInteraction:function(){this.initPlaceholders()}}}();var f;return function(){f={}}(),function(){function p(e,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var i=t.getSelectionStart(this.options.ownerDocument);i&&""===i.textContent.trim()&&e.preventDefault()}}function m(e){var n=t.getSelectionStart(this.options.ownerDocument),i=n&&n.tagName.toLowerCase();"pre"===i&&(e.preventDefault(),t.insertHTMLCommand(this.options.ownerDocument,"    ")),t.isListItem(n)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function g(e){var n,i,r,s=t.getSelectionStart(this.options.ownerDocument),a=s.tagName.toLowerCase(),l=/^(\s+|<br\/?>)?$/i,u=/h\d/i;(e.which===t.keyCode.BACKSPACE||e.which===t.keyCode.ENTER)&&s.previousElementSibling&&u.test(a)&&0===o.getCaretOffsets(s).left?e.which===t.keyCode.BACKSPACE&&l.test(s.previousElementSibling.innerHTML)?(s.previousElementSibling.parentNode.removeChild(s.previousElementSibling),e.preventDefault()):e.which===t.keyCode.ENTER&&(r=this.options.ownerDocument.createElement("p"),r.innerHTML="<br>",s.previousElementSibling.parentNode.insertBefore(r,s),e.preventDefault()):e.which===t.keyCode.DELETE&&s.nextElementSibling&&s.previousElementSibling&&!u.test(a)&&l.test(s.innerHTML)&&u.test(s.nextElementSibling.tagName)?(n=this.options.ownerDocument.createRange(),i=this.options.ownerDocument.getSelection(),n.setStart(s.nextElementSibling,0),n.collapse(!0),i.removeAllRanges(),i.addRange(n),s.previousElementSibling.parentNode.removeChild(s),e.preventDefault()):e.which!==t.keyCode.BACKSPACE||"li"!==a||!l.test(s.innerHTML)||s.previousElementSibling||s.parentElement.previousElementSibling||"li"!==s.nextElementSibling.tagName.toLowerCase()||(r=this.options.ownerDocument.createElement("p"),r.innerHTML="<br>",s.parentElement.parentElement.insertBefore(r,s.parentElement),n=this.options.ownerDocument.createRange(),i=this.options.ownerDocument.getSelection(),n.setStart(r,0),n.collapse(!0),i.removeAllRanges(),i.addRange(n),s.parentElement.removeChild(s),e.preventDefault())}function v(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)}function y(e){var n,i="medium-editor-dragover";e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(n=Array.prototype.slice.call(e.dataTransfer.files,0),n.some(function(e){if(e.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(e),i="medium-img-"+ +new Date,t.insertHTMLCommand(this.options.ownerDocument,'<img class="medium-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.options.ownerDocument.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),e.target.classList.remove(i)}function b(e){var n,i=t.getSelectionStart(this.options.ownerDocument);i&&(i.getAttribute("data-medium-element")&&0===i.children.length&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),e.which!==t.keyCode.ENTER||t.isListItem(i)||(n=i.tagName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||/h\d/.test(n)||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function w(e){e||(e=[]),"string"==typeof e&&(e=this.options.ownerDocument.querySelectorAll(e)),t.isElement(e)&&(e=[e]),this.elements=Array.prototype.slice.apply(e)}function C(e,t,n){return e.parent&&(e.base=n),"function"==typeof e.init&&e.init(n),e.name||(e.name=t),e}function x(){var e,t=!1;if(this.options.disableAnchorPreview)return!1;if(this.options.extensions["anchor-preview"])return!1;if(this.options.disableToolbar)return!1;for(e=0;e<this.elements.length;e+=1)if(!this.elements[e].getAttribute("data-disable-toolbar")){t=!0;break}return t}function S(e){var t=this.options.ownerDocument.createElement("div"),n=+new Date,i=this.elements[e];return t.className=i.className,t.id=n,t.innerHTML=i.value,i.classList.add("medium-editor-hidden"),i.parentNode.insertBefore(t,i),this.on(t,"input",function(){i.value=this.serialize()[n].value}.bind(this)),t}function A(){var e,t=!1;for(e=0;e<this.elements.length;e+=1)this.options.disableEditing||this.elements[e].getAttribute("data-disable-editing")||("textarea"===this.elements[e].tagName.toLowerCase()&&(this.elements[e]=S.call(this,e)),this.elements[e].setAttribute("contentEditable",!0)),this.elements[e].getAttribute("data-placeholder")||this.elements[e].setAttribute("data-placeholder",this.options.placeholder),this.elements[e].setAttribute("data-medium-element",!0),this.elements[e].setAttribute("role","textbox"),this.elements[e].setAttribute("aria-multiline",!0),this.options.disableToolbar||this.elements[e].getAttribute("data-disable-toolbar")||(t=!0);!this.toolbar&&t&&(this.toolbar=new d(this),this.options.elementsContainer.appendChild(this.toolbar.getToolbarElement()))}function _(){var e;if(this.subscribe("editableKeydownTab",m.bind(this)),this.subscribe("editableKeydownDelete",g.bind(this)),this.subscribe("editableKeydownEnter",g.bind(this)),this.options.disableReturn||this.options.disableDoubleReturn)this.subscribe("editableKeydownEnter",p.bind(this));else for(e=0;e<this.elements.length;e+=1)if(this.elements[e].getAttribute("data-disable-return")||this.elements[e].getAttribute("data-disable-double-return")){
this.subscribe("editableKeydownEnter",p.bind(this));break}this.options.disableReturn||this.elements.forEach(function(e){e.getAttribute("data-disable-return")||this.on(e,"keyup",b.bind(this))},this),this.options.imageDragging&&(this.subscribe("editableDrag",v.bind(this)),this.subscribe("editableDrop",y.bind(this)))}function E(){var e=t.extend({},this.options.paste,{forcePlainText:this.options.forcePlainText,cleanPastedHtml:this.options.cleanPastedHtml,disableReturn:this.options.disableReturn,targetBlank:this.options.targetBlank,contentWindow:this.options.contentWindow,ownerDocument:this.options.ownerDocument});this.pasteHandler=new l(this,e)}function $(){var e,t,i=this.options.buttons,r=this.options.extensions;this.commands=[],i.forEach(function(t){r[t]?(e=C(r[t],t,this),this.commands.push(e)):"anchor"===t?(e=C(new u,t,this),this.commands.push(e)):n.hasOwnProperty(t)&&(e=new a(n[t],this),this.commands.push(e))},this);for(t in r)r.hasOwnProperty(t)&&-1===i.indexOf(t)&&(e=C(r[t],t,this));x.call(this)&&this.commands.push(C(new c,"anchor-preview",this))}function k(e,n){n&&[["forcePlainText","paste.forcePlainText"],["cleanPastedHtml","paste.cleanPastedHtml"]].forEach(function(e){n.hasOwnProperty(e[0])&&void 0!==n[e[0]]&&t.deprecated(e[0],e[1])});var i=["paste"],r=t.extend({},n);return i.forEach(function(n){r[n]?r[n]=t.defaults({},r[n],e[n]):r[n]=e[n]}),t.defaults(r,e)}function D(e,n){var i,r=/^append-(.+)$/gi;return i=r.exec(e),i?t.execFormatBlock(this.options.ownerDocument,i[1]):"createLink"===e?this.createLink(n):"image"===e?this.options.ownerDocument.execCommand("insertImage",!1,this.options.contentWindow.getSelection()):this.options.ownerDocument.execCommand(e,!1,null)}e.statics={ButtonsData:n,DefaultButton:a,AnchorExtension:u,Toolbar:d,AnchorPreview:c},e.Extension=r,e.extensions=f,e.util=t,e.selection=o,e.prototype={defaults:i,init:function(e,t){var n=1;if(this.options=k.call(this,this.defaults,t),w.call(this,e),0!==this.elements.length){for(this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body);this.options.elementsContainer.querySelector("#medium-editor-toolbar-"+n);)n+=1;return this.id=n,this.setup()}},setup:function(){this.isActive||(this.events=new s(this),this.isActive=!0,$.call(this),A.call(this),_.call(this),E.call(this),this.options.disablePlaceholders||(this.placeholders=new h(this)))},destroy:function(){if(this.isActive){var e;for(this.isActive=!1,void 0!==this.toolbar&&(this.toolbar.deactivate(),delete this.toolbar),e=0;e<this.elements.length;e+=1)this.elements[e].removeAttribute("contentEditable"),this.elements[e].removeAttribute("data-medium-element");this.commands.forEach(function(e){"function"==typeof e.deactivate&&e.deactivate()},this),this.events.detachAllDOMEvents()}},on:function(e,t,n,i){this.events.attachDOMEvent(e,t,n,i)},off:function(e,t,n,i){this.events.detachDOMEvent(e,t,n,i)},subscribe:function(e,t){this.events.attachCustomEvent(e,t)},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,n={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.commands&&this.commands.length&&this.commands.some(function(n){return n.name===e?(t=n,!0):!1}),t},callExtensions:function(e){if(!(arguments.length<1)){var t,n,i=Array.prototype.slice.call(arguments,1);for(n in this.options.extensions)this.options.extensions.hasOwnProperty(n)&&(t=this.options.extensions[n],void 0!==t[e]&&t[e].apply(t,i));return this}},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){return this.toolbar&&this.toolbar.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;t=n.exec(e),t&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(r){i=null}return i},execAction:function(e,n){var i,r,o=/^full-(.+)$/gi;return i=o.exec(e),i?(this.saveSelection(),this.selectAllContents(),r=D.call(this,i[1],n),this.restoreSelection()):r=D.call(this,e,n),("insertunorderedlist"===e||"insertorderedlist"===e)&&t.cleanListDOM(this.getSelectedParentElement()),this.checkSelection(),r},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),o.getSelectedParentElement(e)},hideToolbarDefaultActions:function(){return this.toolbar&&this.toolbar.hideToolbarDefaultActions(),this},setToolbarPosition:function(){this.toolbar&&this.toolbar.setToolbarPosition()},selectAllContents:function(){var e=o.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){o.selectNode(e,this.options.ownerDocument);var t=o.getSelectionElement(this.options.contentWindow);t&&this.events.focusElement(t)},saveSelection:function(){this.selectionState=null;var e,n,i,r=this.options.contentWindow.getSelection(),o=-1;r.rangeCount>0&&(e=r.getRangeAt(0),n=e.cloneRange(),this.elements.some(function(n,i){return n===e.startContainer||t.isDescendant(n,e.startContainer)?(o=i,!0):!1}),o>-1&&(n.selectNodeContents(this.elements[o]),n.setEnd(e.startContainer,e.startOffset),i=n.toString().length,this.selectionState={start:i,end:i+e.toString().length,editableElementIndex:o}))},restoreSelection:function(){if(this.selectionState){var e,t,n,i,r=this.elements[this.selectionState.editableElementIndex],o=0,s=this.options.ownerDocument.createRange(),a=[r],l=!1,u=!1;for(s.setStart(r,0),s.collapse(!0),e=a.pop();!u&&e;){if(3===e.nodeType)i=o+e.length,!l&&this.selectionState.start>=o&&this.selectionState.start<=i&&(s.setStart(e,this.selectionState.start-o),l=!0),l&&this.selectionState.end>=o&&this.selectionState.end<=i&&(s.setEnd(e,this.selectionState.end-o),u=!0),o=i;else for(t=e.childNodes.length-1;t>=0;)a.push(e.childNodes[t]),t-=1;u||(e=a.pop())}n=this.options.contentWindow.getSelection(),n.removeAllRanges(),n.addRange(s)}},createLink:function(e){var n,i;if(e.url&&e.url.trim().length>0&&(this.options.ownerDocument.execCommand("createLink",!1,e.url),(this.options.targetBlank||"_blank"===e.target)&&t.setTargetBlank(t.getSelectionStart(this.options.ownerDocument)),e.buttonClass&&t.addClassToAnchors(t.getSelectionStart(this.options.ownerDocument),e.buttonClass)),this.options.targetBlank||"_blank"===e.target||e.buttonClass)for(n=this.options.ownerDocument.createEvent("HTMLEvents"),n.initEvent("input",!0,!0,this.options.contentWindow),i=0;i<this.elements.length;i+=1)this.elements[i].dispatchEvent(n)},activate:function(){t.deprecatedMethod.call(this,"activate","setup",arguments)},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments)},cleanPaste:function(e){this.pasteHandler.cleanPaste(e)},pasteHTML:function(e,t){this.pasteHandler.pasteHTML(e,t)}}}(),e.version=function(e,t,n){return{major:parseInt(e,10),minor:parseInt(t,10),revision:parseInt(n,10),toString:function(){return[e,t,n].join(".")}}}.apply(this,{version:"4.4.0"}.version.split(".")),e}()),angular.module("angular-medium-editor",[]).directive("mediumEditor",function(){return{require:"ngModel",restrict:"AE",scope:{bindOptions:"="},link:function(e,t,n,i){angular.element(t).addClass("angular-medium-editor");var r={},o="",s=function(){n.options&&(r=e.$eval(n.options));var t={};void 0!==e.bindOptions&&(t=e.bindOptions),r=angular.extend(r,t)};s(),o=r.placeholder,e.$watch("bindOptions",function(){i.editor&&i.editor.destroy(),s(),i.$isEmpty(i.$viewValue)||(r.placeholder=""),i.editor=new MediumEditor(t,r)});var a=function(){e.$apply(function(){if("<p><br></p>"===t.html()||""===t.html()){r.placeholder=o;new MediumEditor(t,r)}i.$setViewValue(t.html())})};t.on("blur",a),t.on("input",a),i.$render=function(){this.editor||(i.$isEmpty(i.$viewValue)||(r.placeholder=""),this.editor=new MediumEditor(t,r)),t.html(i.$isEmpty(i.$viewValue)?"":i.$viewValue),i.$isEmpty(i.$viewValue)||angular.element(t).removeClass("medium-editor-placeholder")}}}}),function(){function e(e){var t=n;e&&(n[e]||(n[e]={}),t=n[e]),t.define&&t.define.packaged||(i.original=t.define,t.define=i,t.define.packaged=!0),t.require&&t.require.packaged||(o.original=t.require,t.require=o,t.require.packaged=!0)}var t="ace",n=function(){return this}();if(n||"undefined"==typeof window||(n=window),t||"undefined"==typeof requirejs){var i=function(e,t,n){return"string"!=typeof e?void(i.original?i.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())):(2==arguments.length&&(n=t),void(i.modules[e]||(i.payloads[e]=n,i.modules[e]=null)))};i.modules={},i.payloads={};var r=function(e,t,n){if("string"==typeof t){var i=a(e,t);if(void 0!=i)return n&&n(),i}else if("[object Array]"===Object.prototype.toString.call(t)){for(var r=[],s=0,l=t.length;l>s;++s){var u=a(e,t[s]);if(void 0==u&&o.original)return;r.push(u)}return n&&n.apply(null,r)||!0}},o=function(e,t){var n=r("",e,t);return void 0==n&&o.original?o.original.apply(this,arguments):n},s=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return s(e,n[0])+"!"+s(e,n[1])}if("."==t.charAt(0)){var i=e.split("/").slice(0,-1).join("/");for(t=i+"/"+t;-1!==t.indexOf(".")&&r!=t;){var r=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},a=function(e,t){t=s(e,t);var n=i.modules[t];if(!n){if(n=i.payloads[t],"function"==typeof n){var o={},a={id:t,uri:"",exports:o,packaged:!0},l=function(e,n){return r(t,e,n)},u=n(l,o,a);o=u||a.exports,i.modules[t]=o,delete i.payloads[t]}n=i.modules[t]=o||n}return n};e(t)}}(),ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,n){"use strict";function i(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function r(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var i=n||0;i<e.length;i++)if(e[i]===t)return i;return-1}var o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},s=void 0===o.exec.call(/()??/,"")[1],a=function(){var e=/^/g;return o.test.call(e,""),!e.lastIndex}();a&&s||(RegExp.prototype.exec=function(e){var t,n,l=o.exec.apply(this,arguments);if("string"==typeof e&&l){if(!s&&l.length>1&&r(l,"")>-1&&(n=RegExp(this.source,o.replace.call(i(this),"g","")),o.replace.call(e.slice(l.index),n,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(l[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var u=1;u<l.length;u++)t=this._xregexp.captureNames[u-1],t&&(l[t]=l[u]);!a&&this.global&&!l[0].length&&this.lastIndex>l.index&&this.lastIndex--}return l},a||(RegExp.prototype.test=function(e){var t=o.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function i(){}function r(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function o(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError("Function.prototype.bind called on incompatible "+t);var n=p.call(arguments,1),r=function(){if(this instanceof r){var i=t.apply(this,n.concat(p.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(p.call(arguments)))};return t.prototype&&(i.prototype=t.prototype,r.prototype=new i,i.prototype=null),r});var s,a,l,u,c,d=Function.prototype.call,h=Array.prototype,f=Object.prototype,p=h.slice,m=d.bind(f.toString),g=d.bind(f.hasOwnProperty);if((c=g(f,"__defineGetter__"))&&(s=d.bind(f.__defineGetter__),a=d.bind(f.__defineSetter__),l=d.bind(f.__lookupGetter__),u=d.bind(f.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,n=[];return n.splice.apply(n,e(20)),n.splice.apply(n,e(26)),t=n.length,n.splice(5,0,"XXX"),t+1==n.length,t+1==n.length?!0:void 0}()){var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(p.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):void 0==e?e=0:0>e&&(e=Math.max(n+e,0)),n>e+t||(t=n-e);var i=this.slice(e,e+t),r=p.call(arguments,2),o=r.length;if(e===n)o&&this.push.apply(this,r);else{var s=Math.min(t,n-e),a=e+s,l=a+o-s,u=n-a,c=n-s;if(a>l)for(var d=0;u>d;++d)this[l+d]=this[a+d];else if(l>a)for(d=u;d--;)this[l+d]=this[a+d];if(o&&e===c)this.length=c,this.push.apply(this,r);else for(this.length=c+o,d=0;o>d;++d)this[e+d]=r[d]}return i};Array.isArray||(Array.isArray=function(e){return"[object Array]"==m(e)});var y=Object("a"),b="a"!=y[0]||!(0 in y);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=M(this),n=b&&"[object String]"==m(this)?this.split(""):t,i=arguments[1],r=-1,o=n.length>>>0;if("[object Function]"!=m(e))throw new TypeError;for(;++r<o;)r in n&&e.call(i,n[r],r,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=M(this),n=b&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0,r=Array(i),o=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var s=0;i>s;s++)s in n&&(r[s]=e.call(o,n[s],s,t));return r}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=M(this),i=b&&"[object String]"==m(this)?this.split(""):n,r=i.length>>>0,o=[],s=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var a=0;r>a;a++)a in i&&(t=i[a],e.call(s,t,a,n)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=M(this),n=b&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0,r=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var o=0;i>o;o++)if(o in n&&!e.call(r,n[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=M(this),n=b&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0,r=arguments[1];if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");for(var o=0;i>o;o++)if(o in n&&e.call(r,n[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=M(this),n=b&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o++];break}if(++o>=i)throw new TypeError("reduce of empty array with no initial value")}for(;i>o;o++)o in n&&(r=e.call(void 0,r,n[o],o,t));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=M(this),n=b&&"[object String]"==m(this)?this.split(""):t,i=n.length>>>0;if("[object Function]"!=m(e))throw new TypeError(e+" is not a function");if(!i&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,o=i-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in n){r=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do o in this&&(r=e.call(void 0,r,n[o],o,t));while(o--);return r}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=b&&"[object String]"==m(this)?this.split(""):M(this),n=t.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=o(arguments[1])),i=i>=0?i:Math.max(0,n+i);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=b&&"[object String]"==m(this)?this.split(""):M(this),n=t.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:f)}),!Object.getOwnPropertyDescriptor){var w="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(w+e);if(g(e,t)){var n,i,r;if(n={enumerable:!0,configurable:!0},c){var o=e.__proto__;e.__proto__=f;var i=l(e,t),r=u(e,t);if(e.__proto__=o,i||r)return i&&(n.get=i),r&&(n.set=r),n}return n.value=e[t],n}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var C;C=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var n;if(null===e)n=C();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var i=function(){};i.prototype=e,n=new i,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}if(Object.defineProperty){var x=r({}),S="undefined"==typeof document||r(document.createElement("div"));if(!x||!S)var A=Object.defineProperty}if(!Object.defineProperty||A){var _="Property description must be an object: ",E="Object.defineProperty called on non-object: ",$="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(e,t,n){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(E+e);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError(_+n);if(A)try{return A.call(Object,e,t,n)}catch(i){}if(g(n,"value"))if(c&&(l(e,t)||u(e,t))){var r=e.__proto__;e.__proto__=f,delete e[t],e[t]=n.value,e.__proto__=r}else e[t]=n.value;else{if(!c)throw new TypeError($);g(n,"get")&&s(e,t,n.get),g(n,"set")&&a(e,t,n.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var n in t)g(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(k){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(e){return!1}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";g(e,t);)t+="?";e[t]=!0;var n=g(e,t);return delete e[t],n}),!Object.keys){var D=!0,T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],F=T.length;for(var L in{toString:null})D=!1;Object.keys=function R(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var R=[];for(var t in e)g(e,t)&&R.push(t);if(D)for(var n=0,i=F;i>n;n++){var r=T[n];g(e,r)&&R.push(r)}return R}}Date.now||(Date.now=function(){return(new Date).getTime()});var O="	\n\f\r   ᠎             　\u2028\u2029\ufeff";if(!String.prototype.trim||O.trim()){O="["+O+"]";var N=new RegExp("^"+O+O+"*"),B=new RegExp(O+O+"*$");String.prototype.trim=function(){return String(this).replace(N,"").replace(B,"")}}var M=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){"use strict";e("./regexp"),e("./es5-shim")}),ace.define("ace/lib/dom",["require","exports","module"],function(e,t,n){"use strict";var i="http://www.w3.org/1999/xhtml";return t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||i,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=(e.className||"").split(/\s+/g);return-1!==n.indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var r=n.indexOf(t);if(-1==r)break;i=!1,n.splice(r,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(t=t||document,t.createStyleSheet&&(n=t.styleSheets)){for(;i<n.length;)if(n[i++].owningElement.id===e)return!0}else if(n=t.getElementsByTagName("style"))for(;i<n.length;)if(n[i++].id===e)return!0;return!1},t.importCssString=function(e,n,i){if(i=i||document,n&&t.hasCssString(n,i))return null;var r;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */"),i.createStyleSheet?(r=i.createStyleSheet(),r.cssText=e,n&&(r.owningElement.id=n)):(r=t.createElement("style"),r.appendChild(i.createTextNode(e)),n&&(r.id=n),t.getDocumentHead(i).appendChild(r))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var i=t.createElement("link");i.rel="stylesheet",i.href=e,t.getDocumentHead(n).appendChild(i)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=t.createElement("ace_outer"),r=i.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",i.appendChild(n);var o=e.documentElement;o.appendChild(i);var s=n.offsetWidth;r.overflow="scroll";var a=n.offsetWidth;return s==a&&(a=i.clientWidth),o.removeChild(i),s-a},"undefined"==typeof document?void(t.importCssString=function(){}):(void 0!==window.pageYOffset?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),void(t.getParentWindow=function(e){return e.defaultView||e.parentWindow}))}),ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(e,t,n){"use strict";e("./fixoldbrowsers");var i=e("./oop"),r=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n["return"],n.escape=n.esc,n.del=n["delete"],n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(t,r),t.keyCodeToString=function(e){var t=r[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator){var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),r=navigator.userAgent;t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((r.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isAIR=r.indexOf("AdobeAIR")>=0,t.isIPad=r.indexOf("iPad")>=0,t.isTouchPad=r.indexOf("TouchPad")>=0,t.isChromeOS=r.indexOf(" CrOS ")>=0}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function i(e,t,n){var i=u(t);if(!s.isMac&&a){if(a.OSKey&&(i|=8),a.altGr){if(3==(3&i))return;a.altGr=0}if(18===n||17===n){var r="location"in t?t.location:t.keyLocation;if(17===n&&1===r)1==a[n]&&(l=t.timeStamp);else if(18===n&&3===i&&2===r){var c=t.timeStamp-l;50>c&&(a.altGr=!0)}}}if(n in o.MODIFIER_KEYS&&(n=-1),8&i&&n>=91&&93>=n&&(n=-1),!i&&13===n){var r="location"in t?t.location:t.keyLocation;if(3===r&&(e(t,i,-n),t.defaultPrevented))return}if(s.isChromeOS&&8&i){if(e(t,i,n),t.defaultPrevented)return;i&=-9}return i||n in o.FUNCTION_KEYS||n in o.PRINTABLE_KEYS?e(t,i,n):!1}function r(){a=Object.create(null),a.count=0,a.lastT=0}var o=e("./keys"),s=e("./useragent"),a=null,l=0;t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var i=function(){n.call(e,window.event)};n._wrapper=i,e.attachEvent("on"+t,i)}},t.removeListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):void(e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n))},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||s.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,i){function r(e){n&&n(e),i&&i(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",r,!0),t.removeListener(document,"dragstart",r,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",r,!0),t.addListener(document,"dragstart",r,!0),r},t.addTouchMoveListener=function(e,n){if("ontouchmove"in e){var i,r;t.addListener(e,"touchstart",function(e){var t=e.changedTouches[0];i=t.clientX,r=t.clientY}),t.addListener(e,"touchmove",function(e){var t=1,o=e.changedTouches[0];e.wheelX=-(o.clientX-i)/t,e.wheelY=-(o.clientY-r)/t,i=o.clientX,r=o.clientY,n(e)})}},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),n(e)})},t.addMultiMouseDownListener=function(e,n,i,r){var o,a,l,u=0,c={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!==t.getButton(e)?u=0:e.detail>1?(u++,u>4&&(u=1)):u=1,s.isIE){var d=Math.abs(e.clientX-o)>5||Math.abs(e.clientY-a)>5;(!l||d)&&(u=1),l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600),1==u&&(o=e.clientX,a=e.clientY)}if(e._clicks=u,i[r]("mousedown",e),u>4)u=0;else if(u>1)return i[r](c[u],e)}),s.isOldIE&&t.addListener(e,"dblclick",function(e){u=2,l&&clearTimeout(l),l=setTimeout(function(){l=null},n[u-1]||600),i[r]("mousedown",e),i[r](c[u],e)})};var u=!s.isMac||!s.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};if(t.getModifierString=function(e){return o.KEY_MODS[u(e)]},t.addCommandKeyListener=function(e,n){var o=t.addListener;if(s.isOldGecko||s.isOpera&&!("KeyboardEvent"in window)){var l=null;o(e,"keydown",function(e){l=e.keyCode}),o(e,"keypress",function(e){return i(n,e,l)})}else{var u=null;o(e,"keydown",function(e){var t=e.keyCode;a[t]=(a[t]||0)+1,91==t||92==t?a.OSKey=!0:a.OSKey&&e.timeStamp-a.lastT>200&&1==a.count&&r(),1==a[t]&&a.count++,a.lastT=e.timeStamp;var o=i(n,e,t);return u=e.defaultPrevented,o}),o(e,"keypress",function(e){u&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),u=null)}),o(e,"keyup",function(e){var t=e.keyCode;a[t]?a.count=Math.max(a.count-1,0):r(),(91==t||92==t)&&(a.OSKey=!1),a[t]=null}),a||(r(),o(window,"focus",r))}},"object"==typeof window&&window.postMessage&&!s.isOldIE){var c=1;t.nextTick=function(e,n){n=n||window;var i="zero-timeout-message-"+c;t.addListener(n,"message",function r(o){o.data==i&&(t.stopPropagation(o),t.removeListener(n,"message",r),e())}),n.postMessage(i,"*")}}t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),ace.define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var i=/^\s\s*/,r=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(r,"");
},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,i=e.length;i>n;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function o(e){if("object"!=typeof e||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=o(e[n]);return t}var i=e.constructor;if(i===RegExp)return e;t=i();for(var n in e)t[n]=o(e[n]);return t},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function(e){return i.cancel(),t=setTimeout(n,e||0),i};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i.isPending=function(){return t},i},t.delayedCall=function(e,t){var n=null,i=function(){n=null,e()},r=function(e){null==n&&(n=setTimeout(i,e||t))};return r.delay=function(e){n&&clearTimeout(n),n=setTimeout(i,e||t)},r.schedule=r,r.call=function(){this.cancel(),e()},r.cancel=function(){n&&clearTimeout(n),n=null},r.isPending=function(){return n},r}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("../lib/dom"),s=e("../lib/lang"),a=r.isChrome<18,l=r.isIE,u=function(e,t){function n(e){if(!m){if(m=!0,k)t=0,n=e?0:d.value.length-1;else var t=e?2:1,n=2;try{d.setSelectionRange(t,n)}catch(i){}m=!1}}function u(){m||(d.value=h,r.isWebKit&&C.schedule())}function c(){clearTimeout(H),H=setTimeout(function(){g&&(d.style.cssText=g,g=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},r.isOldIE?200:0)}var d=o.createElement("textarea");d.className="ace_text-input",r.isTouchPad&&d.setAttribute("x-palm-disable-auto-cap",!0),d.setAttribute("wrap","off"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck",!1),d.style.opacity="0",r.isOldIE&&(d.style.top="-1000px"),e.insertBefore(d,e.firstChild);var h="",f=!1,p=!1,m=!1,g="",v=!0;try{var y=document.activeElement===d}catch(b){}i.addListener(d,"blur",function(e){t.onBlur(e),y=!1}),i.addListener(d,"focus",function(e){y=!0,t.onFocus(e),n()}),this.focus=function(){if(g)return d.focus();var e=d.style.top;d.style.position="fixed",d.style.top="-1000px",d.focus(),setTimeout(function(){d.style.position="","-1000px"==d.style.top&&(d.style.top=e)},0)},this.blur=function(){d.blur()},this.isFocused=function(){return y};var w=s.delayedCall(function(){y&&n(v)}),C=s.delayedCall(function(){m||(d.value=h,y&&n())});r.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=v&&(v=!v,w.schedule())}),u(),y&&t.onFocus();var x=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length};if(!d.setSelectionRange&&d.createTextRange&&(d.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},x=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?t.text==e.value:!1}),r.isOldIE){var S=!1,A=function(e){if(!S){var t=d.value;if(!m&&t&&t!=h){if(e&&t==h[0])return _.schedule();T(t),S=!0,u(),S=!1}}},_=s.delayedCall(A);i.addListener(d,"propertychange",A);var E={13:1,27:1};i.addListener(d,"keyup",function(e){return!m||d.value&&!E[e.keyCode]||setTimeout(I,0),(d.value.charCodeAt(0)||0)<129?_.call():void(m?P():R())}),i.addListener(d,"keydown",function(e){_.schedule(50)})}var $=function(e){f?f=!1:x(d)?(t.selectAll(),n()):k&&n(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var D=!1,T=function(e){k&&(e=k(e),k=null),p?(n(),e&&t.onPaste(e),p=!1):e==h.charAt(0)?D?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==h?e=e.substr(2):e.charAt(0)==h.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==h.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==h.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),D&&(D=!1)},F=function(e){if(!m){var t=d.value;T(t),u()}},L=function(e,t){var n=e.clipboardData||window.clipboardData;if(n&&!a){var i=l?"Text":"text/plain";return t?n.setData(i,t)!==!1:n.getData(i)}},O=function(e,r){var o=t.getCopyText();return o?void(L(e,o)?(r?t.onCut():t.onCopy(),i.preventDefault(e)):(f=!0,d.value=o,d.select(),setTimeout(function(){f=!1,u(),n(),r?t.onCut():t.onCopy()}))):i.preventDefault(e)},N=function(e){O(e,!0)},B=function(e){O(e,!1)},M=function(e){var o=L(e);"string"==typeof o?(o&&t.onPaste(o,e),r.isIE&&setTimeout(n),i.preventDefault(e)):(d.value="",p=!0)};i.addCommandKeyListener(d,t.onCommandKey.bind(t)),i.addListener(d,"select",$),i.addListener(d,"input",F),i.addListener(d,"cut",N),i.addListener(d,"copy",B),i.addListener(d,"paste",M),"oncut"in d&&"oncopy"in d&&"onpaste"in d||i.addListener(e,"keydown",function(e){if((!r.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:B(e);break;case 86:M(e);break;case 88:N(e)}});var R=function(e){m||!t.onCompositionStart||t.$readOnly||(m={},t.onCompositionStart(),setTimeout(P,0),t.on("mousedown",I),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},P=function(){if(m&&t.onCompositionUpdate&&!t.$readOnly){var e=d.value.replace(/\x01/g,"");if(m.lastValue!==e&&(t.onCompositionUpdate(e),m.lastValue&&t.undo(),m.lastValue=e,m.lastValue)){var n=t.selection.getRange();t.insert(m.lastValue),t.session.markUndoGroup(),m.range=t.selection.getRange(),t.selection.setRange(n),t.selection.clearSelection()}}},I=function(e){if(t.onCompositionEnd&&!t.$readOnly){var n=m;m=!1;var i=setTimeout(function(){i=null;var e=d.value.replace(/\x01/g,"");m||(e==n.lastValue?u():!n.lastValue&&e&&(u(),T(e)))});k=function(e){return i&&clearTimeout(i),e=e.replace(/\x01/g,""),e==n.lastValue?"":(n.lastValue&&i&&t.undo(),e)},t.onCompositionEnd(),t.removeListener("mousedown",I),"compositionend"==e.type&&n.range&&t.selection.setRange(n.range)}},U=s.delayedCall(P,50);i.addListener(d,"compositionstart",R),r.isGecko?i.addListener(d,"text",function(){U.schedule()}):(i.addListener(d,"keyup",function(){U.schedule()}),i.addListener(d,"keydown",function(){U.schedule()})),i.addListener(d,"compositionend",I),this.getElement=function(){return d},this.setReadOnly=function(e){d.readOnly=e},this.onContextMenu=function(e){D=!0,n(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,n){if(n||!r.isOldIE){g||(g=d.style.cssText),d.style.cssText=(n?"z-index:100000;":"")+"height:"+d.style.height+";"+(r.isIE?"opacity:0.1;":"");var s=t.container.getBoundingClientRect(),a=o.computedStyle(t.container),l=s.top+(parseInt(a.borderTopWidth)||0),u=s.left+(parseInt(s.borderLeftWidth)||0),h=s.bottom-l-d.clientHeight-2,f=function(e){d.style.left=e.clientX-u-2+"px",d.style.top=Math.min(e.clientY-l-2,h)+"px"};f(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),r.isWin&&!r.isOldIE&&i.capture(t.container,f,c))}},this.onContextMenuClose=c;var H,z=function(e){t.textInput.onContextMenu(e),c()};i.addListener(t.renderer.scroller,"contextmenu",z),i.addListener(d,"contextmenu",z)};t.TextInput=u}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e)),t.setDefaultHandler("touchmove",this.onTouchMove.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function r(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}function o(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)var n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return 0>n?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var s=(e("../lib/dom"),e("../lib/event"),e("../lib/useragent"),0);(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,r=e.getButton();if(0!==r){var o=i.getSelectionRange(),s=o.isEmpty();return i.$blockScrolling++,s&&i.selection.moveToPosition(n),i.$blockScrolling--,void i.textInput.onContextMenu(e.domEvent)}return this.mousedownEvent.time=Date.now(),!t||i.isFocused()||(i.focus(),!this.$focusTimout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;n.$blockScrolling++,this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"),n.$blockScrolling--},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(t.$blockScrolling++,this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var r=o(this.$clickSelection,n);n=r.cursor,e=r.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.$blockScrolling--,t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),r=n.selection[e](i.row,i.column);if(n.$blockScrolling++,this.$clickSelection){var s=this.$clickSelection.comparePoint(r.start),a=this.$clickSelection.comparePoint(r.end);if(-1==s&&0>=a)t=this.$clickSelection.end,(r.end.row!=i.row||r.end.column!=i.column)&&(i=r.start);else if(1==a&&s>=0)t=this.$clickSelection.start,(r.start.row!=i.row||r.start.column!=i.column)&&(i=r.end);else if(-1==s&&1==a)i=r.end,t=r.start;else{var l=o(this.$clickSelection,i);i=l.cursor,t=l.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.$blockScrolling--,n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>s||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session,r=i.getBracketRange(t);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),i=this.editor,r=i.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);return r||200>n?(this.$lastScrollTime=t,i.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}},this.onTouchMove=function(e){var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),i=this.editor,r=i.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);return r||200>n?(this.$lastScrollTime=t,i.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}).call(i.prototype),t.DefaultHandlers=i}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function i(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=(e("./lib/oop"),e("./lib/dom"));(function(){this.$init=function(){return this.$element=r.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){r.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){r.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(i.prototype),t.Tooltip=i}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function i(e){function t(){var t=d.getDocumentPosition().row,r=l.$annotations[t];if(!r)return n();var o=s.session.getLength();if(t==o){var a=s.renderer.pixelToScreenCoordinates(0,d.y).row,c=d.$pos;if(a>s.session.documentToScreenRow(c.row,c.column))return n()}if(h!=r)if(h=r.text.join("<br/>"),u.setHtml(h),u.show(),s.on("mousewheel",n),e.$tooltipFollowsMouse)i(d);else{var f=d.domEvent.target,p=f.getBoundingClientRect(),m=u.getElement().style;m.left=p.right+"px",m.top=p.bottom+"px"}}function n(){c&&(c=clearTimeout(c)),h&&(u.hide(),h=null,s.removeEventListener("mousewheel",n))}function i(e){u.setPosition(e.x,e.y)}var s=e.editor,l=s.renderer.$gutterLayer,u=new r(s.container);e.editor.setDefaultHandler("guttermousedown",function(t){if(s.isFocused()&&0==t.getButton()){var n=l.getRegion(t);if("foldWidgets"!=n){var i=t.getDocumentPosition().row,r=s.session.selection;if(t.getShiftKey())r.selectTo(i,0);else{if(2==t.domEvent.detail)return s.selectAll(),t.preventDefault();e.$clickSelection=s.selection.getLineRange(i)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}});var c,d,h;e.editor.setDefaultHandler("guttermousemove",function(r){var s=r.domEvent.target||r.domEvent.srcElement;return o.hasCssClass(s,"ace_fold-widget")?n():(h&&e.$tooltipFollowsMouse&&i(r),d=r,void(c||(c=setTimeout(function(){c=null,d&&!e.isMousePressed?t():n()},50))))}),a.addListener(s.renderer.$gutter,"mouseout",function(e){d=null,h&&!c&&(c=setTimeout(function(){c=null,n()},50))}),s.on("changeSession",n)}function r(e){l.call(this,e)}var o=e("../lib/dom"),s=e("../lib/oop"),a=e("../lib/event"),l=e("../tooltip").Tooltip;s.inherits(r,l),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=this.getWidth(),o=this.getHeight();e+=15,t+=15,e+r>n&&(e-=e+r-n),t+o>i&&(t-=20+o),l.prototype.setPosition.call(this,e,t)}}.call(r.prototype),t.GutterHandler=i}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function i(e){function t(e,t){var n=Date.now(),i=!t||e.row!=t.row,o=!t||e.column!=t.column;if(!k||i||o)g.$blockScrolling+=1,g.moveCursorToPosition(e),g.$blockScrolling-=1,k=n,D={x:w,y:C};else{var s=r(D.x,D.y,w,C);s>c?k=null:n-k>=u&&(g.renderer.scrollCursorIntoView(),k=null)}}function n(e,t){var n=Date.now(),i=g.renderer.layerConfig.lineHeight,r=g.renderer.layerConfig.characterWidth,o=g.renderer.scroller.getBoundingClientRect(),s={x:{left:w-o.left,right:o.right-w},y:{top:C-o.top,bottom:o.bottom-C}},a=Math.min(s.x.left,s.x.right),u=Math.min(s.y.top,s.y.bottom),c={row:e.row,column:e.column};2>=a/r&&(c.column+=s.x.left<s.x.right?-3:2),1>=u/i&&(c.row+=s.y.top<s.y.bottom?-1:1);var d=e.row!=c.row,h=e.column!=c.column,f=!t||e.row!=t.row;d||h&&!f?$?n-$>=l&&g.renderer.scrollCursorIntoView(c):$=n:$=null}function i(){var e=A;A=g.renderer.screenToTextCoordinates(w,C),t(A,e),n(A,e)}function d(){S=g.selection.toOrientedRange(),b=g.session.addMarker(S,"ace_selection",g.getSelectionStyle()),g.clearSelection(),g.isFocused()&&g.renderer.$cursorLayer.setBlinking(!1),clearInterval(x),i(),x=setInterval(i,20),F=0,s.addListener(document,"mousemove",f)}function h(){clearInterval(x),g.session.removeMarker(b),b=null,g.$blockScrolling+=1,g.selection.fromOrientedRange(S),g.$blockScrolling-=1,g.isFocused()&&!E&&g.renderer.$cursorLayer.setBlinking(!g.getReadOnly()),S=null,A=null,F=0,$=null,k=null,s.removeListener(document,"mousemove",f)}function f(){null==L&&(L=setTimeout(function(){null!=L&&b&&h()},20))}function p(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function m(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],i=a.isMac?e.altKey:e.ctrlKey,r="uninitialized";try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return i&&t.indexOf(r)>=0?o="copy":n.indexOf(r)>=0?o="move":t.indexOf(r)>=0&&(o="copy"),o}var g=e.editor,v=o.createElement("img");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.isOpera&&(v.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var y=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];y.forEach(function(t){e[t]=this[t]},this),g.addEventListener("mousedown",this.onMouseDown.bind(e));var b,w,C,x,S,A,_,E,$,k,D,T=g.container,F=0;this.onDragStart=function(e){if(this.cancelDrag||!T.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}S=g.getSelectionRange();var n=e.dataTransfer;n.effectAllowed=g.getReadOnly()?"copy":"copyMove",a.isOpera&&(g.container.appendChild(v),v.scrollTop=0),n.setDragImage&&n.setDragImage(v,0,0),a.isOpera&&g.container.removeChild(v),n.clearData(),n.setData("Text",g.session.getTextRange()),E=!0,this.setState("drag")},this.onDragEnd=function(e){if(T.draggable=!1,E=!1,this.setState(null),!g.getReadOnly()){var t=e.dataTransfer.dropEffect;_||"move"!=t||g.session.remove(g.getSelectionRange()),g.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){return!g.getReadOnly()&&p(e.dataTransfer)?(w=e.clientX,C=e.clientY,b||d(),F++,e.dataTransfer.dropEffect=_=m(e),s.preventDefault(e)):void 0},this.onDragOver=function(e){return!g.getReadOnly()&&p(e.dataTransfer)?(w=e.clientX,C=e.clientY,b||(d(),F++),null!==L&&(L=null),e.dataTransfer.dropEffect=_=m(e),s.preventDefault(e)):void 0},this.onDragLeave=function(e){return F--,0>=F&&b?(h(),_=null,s.preventDefault(e)):void 0},this.onDrop=function(e){if(A){var t=e.dataTransfer;if(E)switch(_){case"move":S=S.contains(A.row,A.column)?{start:A,end:A}:g.moveText(S,A);break;case"copy":S=g.moveText(S,A,!0)}else{var n=t.getData("Text");S={start:A,end:g.session.insert(A,n)},g.focus(),_=null}return h(),s.preventDefault(e)}},s.addListener(T,"dragstart",this.onDragStart.bind(e)),s.addListener(T,"dragend",this.onDragEnd.bind(e)),s.addListener(T,"dragenter",this.onDragEnter.bind(e)),s.addListener(T,"dragover",this.onDragOver.bind(e)),s.addListener(T,"dragleave",this.onDragLeave.bind(e)),s.addListener(T,"drop",this.onDrop.bind(e));var L=null}function r(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}var o=e("../lib/dom"),s=e("../lib/event"),a=e("../lib/useragent"),l=200,u=200,c=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor,t=e.container;t.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var n=a.isWin?"default":"move";e.renderer.setCursorStyle(n),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(a.isIE&&"dragReady"==this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if("dragWait"===this.state){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),i=e.getButton(),r=e.domEvent.detail||1;if(1===r&&0===i&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),t.getDragDelay()){if(a.isWebKit){this.cancelDrag=!0;var s=t.container;s.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(i.prototype),t.DragdropHandler=i}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),r=document.createElement("script");r.src=e,n.appendChild(r),r.onload=r.onreadystatechange=function(e,n){(n||!r.readyState||"loaded"==r.readyState||"complete"==r.readyState)&&(r=r.onload=r.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var i={},r=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],i=this._defaultHandlers[e];if(n.length||i){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=o),n=n.slice();for(var s=0;s<n.length&&(n[s](t,this),!t.propagationStopped);s++);return i&&!t.defaultPrevented?i(t,this):void 0}},i._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)}},i.once=function(e,t){var n=this;t&&this.addEventListener(e,function i(){n.removeEventListener(e,i),t.apply(null,arguments)})},i.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var i=n[e],r=n._disabled_[e];r||(n._disabled_[e]=r=[]),r.push(i);var o=r.indexOf(t);-1!=o&&r.splice(o,1)}n[e]=t},i.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var i=n._disabled_[e];if(n[e]==t){n[e];i&&this.setDefaultHandler(e,i.pop())}else if(i){var r=i.indexOf(t);-1!=r&&i.splice(r,1)}}},i.on=i.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];return i||(i=this._eventRegistry[e]=[]),-1==i.indexOf(t)&&i[n?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=i}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"no use strict";function i(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function r(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout(function(){throw n})}var o=e("./oop"),s=e("./event_emitter").EventEmitter,a={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return i('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:i('misspelled option "'+e+'"')}},l=function(){this.$defaultOptions={}};(function(){o.implement(this,s),this.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach(function(t){var i=n[t];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=t),e.$options[i.name]=i,"initialValue"in i&&(e["$"+i.name]=i.initialValue)}),o.implement(e,a),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},this.setDefaultValue=function(e,t,n){var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[t]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,t,n):i[t].value=n)},this.setDefaultValues=function(e,t){Object.keys(t).forEach(function(n){this.setDefaultValue(e,n,t[n])},this)},this.warn=i,this.reportError=r}).call(l.prototype),t.AppConfig=l}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(e,t,n){"no use strict";function i(i){if(u.packaged=i||e.packaged||n.packaged||l.define&&define.packaged,!l.document)return"";for(var o={},s="",a=document.currentScript||document._currentScript,c=a&&a.ownerDocument||document,d=c.getElementsByTagName("script"),h=0;h<d.length;h++){var f=d[h],p=f.src||f.getAttribute("src");if(p){for(var m=f.attributes,g=0,v=m.length;v>g;g++){var y=m[g];0===y.name.indexOf("data-ace-")&&(o[r(y.name.replace(/^data-ace-/,""))]=y.value)}var b=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(s=b[1])}}s&&(o.base=o.base||s,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var w in o)"undefined"!=typeof o[w]&&t.set(w,o[w])}function r(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var o=e("./lib/lang"),s=(e("./lib/oop"),e("./lib/net")),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var l=function(){return this||"undefined"!=typeof window&&window}(),u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!u.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return u[e]},t.set=function(e,t){if(!u.hasOwnProperty(e))throw new Error("Unknown config key: "+e);u[e]=t},t.all=function(){return o.copyObject(u)},t.moduleUrl=function(e,t){if(u.$moduleUrls[e])return u.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var i="snippets"==t?"/":"-",r=n[n.length-1];if("worker"==t&&"-"==i){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");r=r.replace(o,"")}(!r||r==t)&&n.length>1&&(r=n[n.length-2]);var s=u[t+"Path"];return null==s?s=u.basePath:"/"==i&&(t=i=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+i+r+this.get("suffix")},t.setModuleUrl=function(e,t){return u.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,i){var r,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{r=e(n)}catch(a){}if(r&&!t.$loading[n])return i&&i(r);if(t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(i),!(t.$loading[n].length>1)){var l=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var i=t.$loading[n];t.$loading[n]=null,i.forEach(function(t){t&&t(e)})})};return t.get("packaged")?void s.loadScript(t.moduleUrl(n,o),l):l()}},i(!0),t.init=i}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){"use strict";var i=e("../lib/event"),r=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,l=e("./dragdrop_handler").DragdropHandler,u=e("../config"),c=function(e){var t=this;this.editor=e,new o(this),new s(this),new l(this);var n=function(t){document.hasFocus&&document.hasFocus()||window.focus(),e.focus(),e.isFocused()||window.focus()},a=e.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click")),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener(a,[400,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(i.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),i.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),r.isIE&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",n),
i.addListener(e.renderer.scrollBarH.element,"mousedown",n))),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),i.addTouchMoveListener(e.container,this.onTouchMove.bind(this,"touchmove"));var u=e.renderer.$gutter;i.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(a,"mousedown",n),i.addListener(u,"mousedown",function(t){return e.focus(),i.preventDefault(t)}),e.on("mousemove",function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var i=e.renderer.screenToTextCoordinates(n.x,n.y),r=e.session.selection.getRange(),o=e.renderer;!r.isEmpty()&&r.insideStart(i.row,i.column)?o.setCursorStyle("default"):o.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new a(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new a(t,this.editor))},this.onMouseWheel=function(e,t){var n=new a(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.onTouchMove=function(e,t){var n=new a(t,this.editor);n.speed=1,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var o=this,s=function(e){if(e){if(r.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new a(e,o.editor),o.$mouseMoved=!0}},l=function(e){clearInterval(c),u(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e)},u=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){l(e)});o.$onCaptureMouseMove=s,o.releaseMouse=i.capture(this.editor.container,s,l);var c=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(c.prototype),u.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:r.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c}),ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){"use strict";function i(e){e.on("click",function(t){var n=t.getDocumentPosition(),i=e.session,r=i.getFoldAt(n.row,n.column,1);r&&(t.getAccelKey()?i.removeFold(r):i.expandFold(r),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var i=t.getDocumentPosition().row,r=e.session;r.foldWidgets&&r.foldWidgets[i]&&e.session.onFoldWidgetClick(i,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==n){var i=t.getDocumentPosition().row,r=e.session,o=r.getParentFoldRangeData(i,!0),s=o.range||o.firstRange;if(s){i=s.start.row;var a=r.getFoldAt(i,r.getLine(i).length,1);a?r.removeFold(a):(r.addFold("...",s),e.renderer.scrollCursorIntoView({row:s.start.row,column:0}))}t.stop()}})}t.FoldHandler=i}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var i=e("../lib/keys"),r=e("../lib/event"),o=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1==t?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,i){for(var o,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&(o=this.$handlers[l].handleKeyboard(this.$data,e,t,n,i),!(o&&o.command&&(s="null"==o.command?!0:a.exec(o.command,this.$editor,o.args,i),s&&i&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(i),s))););return s||-1!=e||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,t)),s&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(e,t,n){var r=i.keyCodeToString(n);this.$callKeyboardHandlers(t,r,n,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)}}).call(o.prototype),t.KeyBinding=o}),ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var i=function(e,t){return e.row-t.row||e.column-t.column},r=function(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,n=e.end,i=e.start;return t=this.compare(n.row,n.column),1==t?(t=this.compare(i.row,i.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(i.row,i.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return 0==this.compare(e,t)?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var i={row:t+1,column:0};else if(this.start.row<e)var i={row:e,column:0};return r.fromPoints(i||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(0==n)return this;if(-1==n)var i={row:e,column:t};else var o={row:e,column:t};return r.fromPoints(i||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new r(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=i,r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){i.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+e);var t=this.getSelectionAnchor(),n=this.getSelectionLead(),i=this.isBackwards();i&&0===t.column||this.setSelectionAnchor(t.row,t.column+e),(i||0!==n.column)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,r=this.session.getFoldLine(i);return r?(i=r.start.row,n=r.end.row):n=i,t===!0?new s(i,0,n,this.session.getLine(n).length):new s(i,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column-n,t.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),t=this.lead;this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column,t.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),r=this.session.getDisplayLine(e,null,i.row,i.column),o=r.match(/^\s*/);o[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=o[0].length),this.moveCursorToPosition(i)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e,t=this.lead.row,n=this.lead.column,i=this.doc.getLine(t),r=i.substring(n);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(t,n,1);return o?void this.moveCursorTo(o.end.row,o.end.column):((e=this.session.nonTokenRe.exec(r))&&(n+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=i.substring(n)),n>=i.length?(this.moveCursorTo(t,i.length),this.moveCursorRight(),void(t<this.doc.getLength()-1&&this.moveCursorWordRight())):((e=this.session.tokenRe.exec(r))&&(n+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(t,n)))},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return void this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getFoldStringAt(t,n,-1);null==i&&(i=this.doc.getLine(t).substring(0,n));var o,s=r.stringReverse(i);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(o=this.session.nonTokenRe.exec(s))&&(n-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=n?(this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft())):((o=this.session.tokenRe.exec(s))&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(t,n))},this.$shortWordEndIndex=function(e){var t,n,i=0,r=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,t=this.session.tokenRe.exec(e))i=this.session.tokenRe.lastIndex;else{for(;(n=e[i])&&r.test(n);)i++;if(1>i)for(o.lastIndex=0;(n=e[i])&&!o.test(n);)if(o.lastIndex=0,i++,r.test(n)){if(i>2){i--;break}for(;(n=e[i])&&r.test(n);)i++;if(i>2)break}}return o.lastIndex=0,i},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),r=this.session.getFoldAt(e,t,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(t==n.length){var o=this.doc.getLength();do e++,i=this.doc.getLine(e);while(o>e&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var s=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getLine(t).substring(0,n);if(0===n){do t--,i=this.doc.getLine(t);while(t>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var o=r.stringReverse(i),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,n-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var i=this.session.screenToDocumentPosition(n.row+e,n.column);0!==e&&0===t&&i.row===this.lead.row&&i.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[i.row]&&(i.row>0||e>0)&&i.row++,this.moveCursorTo(i.row,i.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var n=this.getCursor();return s.fromPoints(t,n)}catch(i){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(a.prototype),t.Selection=a}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var i=e("./config"),r=2e3,o=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var n=this.states[t],i=[],r=0,o=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<n.length;l++){var u=n[l];if(u.defaultToken&&(o.defaultToken=u.defaultToken),u.caseInsensitive&&(s="gi"),null!=u.regex){u.regex instanceof RegExp&&(u.regex=u.regex.toString().slice(1,-1));var c=u.regex,d=new RegExp("(?:("+c+")|(.))").exec("a").length-2;Array.isArray(u.token)?1==u.token.length||1==d?u.token=u.token[0]:d-1!=u.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:u,groupCount:d-1}),u.token=u.token[0]):(u.tokenArray=u.token,u.token=null,u.onMatch=this.$arrayTokens):"function"!=typeof u.token||u.onMatch||(d>1?u.onMatch=this.$applyToken:u.onMatch=u.token),d>1&&(/\\\d/.test(u.regex)?c=u.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+r+1)}):(d=1,c=this.removeCapturingGroups(u.regex)),u.splitRegex||"string"==typeof u.token||a.push(u)),o[r]=l,r+=d,i.push(c),u.onMatch||(u.onMatch=null)}}i.length||(o[0]=0,i.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){r=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var i=[],r=0,o=n.length;o>r;r++)t[r]&&(i[i.length]={type:n[r],value:t[r]});return i},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],i=this.tokenArray,r=0,o=i.length;o>r;r++)t[r+1]&&(n[n.length]={type:i[r],value:t[r+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,i=!1,r={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,o,s,a,l){return i?i="]"!=a:a?i=!0:s?(n==r.stack&&(r.end=l+1,r.stack=-1),n--):o&&(n++,1!=o.length&&(r.stack=n,r.start=l)),e}),null!=r.end&&/^\)*$/.test(e.substr(r.end))&&(e=e.substring(0,r.start)+e.substr(r.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);t=n[0],"#tmp"===t&&(n.shift(),t=n.shift())}else var n=[];var i=t||"start",o=this.states[i];o||(i="start",o=this.states[i]);var s=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var l,u=[],c=0,d=0,h={type:null,value:""};l=a.exec(e);){var f=s.defaultToken,p=null,m=l[0],g=a.lastIndex;if(g-m.length>c){var v=e.substring(c,g-m.length);h.type==f?h.value+=v:(h.type&&u.push(h),h={type:f,value:v})}for(var y=0;y<l.length-2;y++)if(void 0!==l[y+1]){p=o[s[y]],f=p.onMatch?p.onMatch(m,i,n):p.token,p.next&&(i="string"==typeof p.next?p.next:p.next(i,n),o=this.states[i],o||(this.reportError("state doesn't exist",i),i="start",o=this.states[i]),s=this.matchMappings[i],c=g,a=this.regExps[i],a.lastIndex=g);break}if(m)if("string"==typeof f)p&&p.merge===!1||h.type!==f?(h.type&&u.push(h),h={type:f,value:m}):h.value+=m;else if(f){h.type&&u.push(h),h={type:null,value:""};for(var y=0;y<f.length;y++)u.push(f[y])}if(c==e.length)break;if(c=g,d++>r){for(d>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});c<e.length;)h.type&&u.push(h),h={value:e.substring(c,c+=2e3),type:"overflow"};i="start",n=[];break}}return h.type&&u.push(h),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:u,state:n.length?n:i}},this.reportError=i.reportError}).call(o.prototype),t.Tokenizer=o}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var i=e("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var i=e[n],r=0;r<i.length;r++){var o=i[r];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(t)&&(o.next=t+o.next),o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState))}this.$rules[t+n]=i}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,r,o){var s="function"==typeof e?(new e).getRules():e;if(r)for(var a=0;a<r.length;a++)r[a]=t+r[a];else{r=[];for(var l in s)r.push(t+l)}if(this.addRules(s,t),n)for(var u=Array.prototype[o?"push":"unshift"],a=0;a<r.length;a++)u.apply(this.$rules[r[a]],i.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function n(o){var s=r[o];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a];!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var u=l.next||l.push;if(u&&Array.isArray(u)){var c=l.stateName;c||(c=l.token,"string"!=typeof c&&(c=c[0]||""),r[c]&&(c+=i++)),r[c]=u,l.next=c,n(c)}else"pop"==u&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var d in l.rules)r[d]?r[d].push&&r[d].push.apply(r[d],l.rules[d]):r[d]=l.rules[d];if(l.include||"string"==typeof l)var h=l.include||l,f=r[h];else Array.isArray(l)&&(f=l);if(f){var p=[a,1].concat(f);l.noEscape&&(p=p.filter(function(e){return!e.next})),s.splice.apply(s,p),a--,f=null}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}var i=0,r=this.$rules;Object.keys(r).forEach(n,this)},this.createKeywordMapper=function(e,t,n,i){var r=Object.create(null);return Object.keys(e).forEach(function(t){var o=e[t];n&&(o=o.toLowerCase());for(var s=o.split(i||"|"),a=s.length;a--;)r[s[a]]=t}),Object.getPrototypeOf(r)&&(r.__proto__=null),this.$keywordList=Object.keys(r),e=null,n?function(e){return r[e.toLowerCase()]||t}:function(e){return r[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),t.TextHighlightRules=r}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call(i.prototype),t.Behaviour=i}),ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";function i(e){var n=/\w{4}/g;for(var i in e)t.packages[i]=e[i].replace(n,"\\u$&")}t.packages={},i({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),ace.define("ace/token_iterator",["require","exports","module"],function(e,t,n){"use strict";var i=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)t-=1,n+=e[t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}}}).call(i.prototype),t.TokenIterator=i}),ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var i=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,o=e("./behaviour").Behaviour,s=e("../unicode"),a=e("../lib/lang"),l=e("../token_iterator").TokenIterator,u=e("../range").Range,c=function(){this.HighlightRules=r,this.$behaviour=new o};(function(){this.tokenRe=new RegExp("^["+s.packages.L+s.packages.Mn+s.packages.Mc+s.packages.Nd+s.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+s.packages.L+s.packages.Mn+s.packages.Mc+s.packages.Nd+s.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,i){function r(e){for(var t=n;i>=t;t++)e(o.getLine(t),t)}var o=t.doc,s=!0,l=!0,u=1/0,c=t.getTabSize(),d=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var h=this.lineCommentStart.map(a.escapeRegExp).join("|"),f=this.lineCommentStart[0];else var h=a.escapeRegExp(this.lineCommentStart),f=this.lineCommentStart;h=new RegExp("^(\\s*)(?:"+h+") ?"),d=t.getUseSoftTabs();var p=function(e,t){var n=e.match(h);if(n){var i=n[1].length,r=n[0].length;y(e,i,r)||" "!=n[0][r-1]||r--,o.removeInLine(t,i,r)}},m=f+" ",g=function(e,t){(!s||/\S/.test(e))&&(y(e,u,u)?o.insertInLine({row:t,column:u},m):o.insertInLine({row:t,column:u},f))},v=function(e,t){return h.test(e)},y=function(e,t,n){for(var i=0;t--&&" "==e.charAt(t);)i++;if(i%c!=0)return!1;for(var i=0;" "==e.charAt(n++);)i++;return c>2?i%c!=c-1:i%c==0}}else{if(!this.blockComment)return!1;var f=this.blockComment.start,b=this.blockComment.end,h=new RegExp("^(\\s*)(?:"+a.escapeRegExp(f)+")"),w=new RegExp("(?:"+a.escapeRegExp(b)+")\\s*$"),g=function(e,t){v(e,t)||(!s||/\S/.test(e))&&(o.insertInLine({row:t,column:e.length},b),o.insertInLine({row:t,column:u},f))},p=function(e,t){var n;(n=e.match(w))&&o.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(h))&&o.removeInLine(t,n[1].length,n[0].length)},v=function(e,n){if(h.test(e))return!0;for(var i=t.getTokens(n),r=0;r<i.length;r++)if("comment"===i[r].type)return!0}}var C=1/0;r(function(e,t){var n=e.search(/\S/);-1!==n?(u>n&&(u=n),l&&!v(e,t)&&(l=!1)):C>e.length&&(C=e.length)}),u==1/0&&(u=C,s=!1,l=!1),d&&u%c!=0&&(u=Math.floor(u/c)*c),r(l?p:g)},this.toggleBlockComment=function(e,t,n,i){var r=this.blockComment;if(r){!r.start&&r[0]&&(r=r[0]);var o,s,a=new l(t,i.row,i.column),c=a.getCurrentToken(),d=(t.selection,t.selection.toOrientedRange());if(c&&/comment/.test(c.type)){for(var h,f;c&&/comment/.test(c.type);){var p=c.value.indexOf(r.start);if(-1!=p){var m=a.getCurrentTokenRow(),g=a.getCurrentTokenColumn()+p;h=new u(m,g,m,g+r.start.length);break}c=a.stepBackward()}for(var a=new l(t,i.row,i.column),c=a.getCurrentToken();c&&/comment/.test(c.type);){var p=c.value.indexOf(r.end);if(-1!=p){var m=a.getCurrentTokenRow(),g=a.getCurrentTokenColumn()+p;f=new u(m,g,m,g+r.end.length);break}c=a.stepForward()}f&&t.remove(f),h&&(t.remove(h),o=h.start.row,s=-r.start.length)}else s=r.start.length,o=n.start.row,t.insert(n.end,r.end),t.insert(n.start,r.start);d.start.row==o&&(d.start.column+=s),d.end.row==o&&(d.end.column+=s),t.selection.fromOrientedRange(d)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);for(var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<n.length;t++)!function(e){var i=n[t],r=e[i];e[n[t]]=function(){return this.$delegator(i,arguments,r)}}(this)},this.$delegator=function(e,t,n){var i=t[0];"string"!=typeof i&&(i=i[0]);for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o=i.split(this.$embeds[r]);if(!o[0]&&o[1]){t[0]=o[1];var s=this.$modes[this.$embeds[r]];return s[e].apply(s,t)}}var a=n.apply(this,t);return n?a:void 0},this.transformAction=function(e,t,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][t]){var a=o[s][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var i in t)for(var r=t[i],o=0,s=r.length;s>o;o++)if("string"==typeof r[o].token)/keyword|support|storage/.test(r[o].token)&&n.push(r[o].regex);else if("object"==typeof r[o].token)for(var a=0,l=r[o].token.length;l>a;a++)if(/keyword|support|storage/.test(r[o].token[a])){var i=r[o].regex.match(/\(.+?\)/g)[a];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,i){var r=this.$keywordList||this.$createKeywordList();return r.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(c.prototype),t.Mode=c}),ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var i=t.start.row,r=t.start.column,o=e[i]||"";switch(t.action){case"insert":var s=t.lines;if(1===s.length)e[i]=o.substring(0,r)+t.lines[0]+o.substring(r);else{var a=[i,1].concat(t.lines);e.splice.apply(e,a),e[i]=o.substring(0,r)+e[i],e[i+t.lines.length-1]+=o.substring(r)}break;case"remove":var l=t.end.column,u=t.end.row;i===u?e[i]=o.substring(0,r)+o.substring(l):e.splice(i,u-i+1,o.substring(0,r)+e[u].substring(l))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,o=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var i=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&i}function t(t,n,i){var r="insert"==t.action,o=(r?1:-1)*(t.end.row-t.start.row),s=(r?1:-1)*(t.end.column-t.start.column),a=t.start,l=r?a:t.end;return e(n,a,i)?{row:n.row,column:n.column}:e(l,n,!i)?{row:n.row+o,column:n.column+(n.row==l.row?s:0)}:{row:a.row,column:a.column}}i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(!(e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row)){var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)}},this.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var r={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:r,value:i})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):0>e?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),0>t&&(n.column=0),n}}).call(o.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,l=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){i.implement(this,o),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){
var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[t]},!0),this.clonePos(i)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:0>e?e=0:e>=n&&(e=n-1,t=void 0);var i=this.getLine(e);return void 0==t&&(t=i.length),t=Math.min(Math.max(t,0),i.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),i={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:t}),this.clonePos(i)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var i=this.clippedPos(e,t),r=this.clippedPos(e,n);return this.applyDelta({start:i,end:r,action:"remove",lines:this.getLinesForRange({start:i,end:r})},!0),this.clonePos(i)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,i=t<this.getLength()-1,r=n?e-1:e,o=n?this.getLine(r).length:0,a=i?t+1:t,l=i?0:this.getLine(a).length,u=new s(r,o,a,l),c=this.$lines.slice(e,t+1);return this.applyDelta({start:u.start,end:u.end,action:"remove",lines:this.getLinesForRange(u)}),c},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var n;return n=t?this.insert(e.start,t):e.start},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4&&this.$splitAndapplyLargeDelta(e,2e4),r(this.$lines,e,t),this._signal("change",e))},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,i=n.length,r=e.start.row,o=e.start.column,s=0,a=0;;){s=a,a+=t-1;var l=n.slice(s,a);if(a>i){e.lines=l,e.start.row=r+s,e.start.column=o;break}l.push(""),this.applyDelta({start:this.pos(r+s,o),end:this.pos(r+a,o=0),action:e.action,lines:l},!0)}},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=t||0,o=n.length;o>r;r++)if(e-=n[r].length+i,0>e)return{row:r,column:e+n[r].length+i};return{row:o-1,column:n[o-1].length}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,r=0,o=Math.min(e.row,n.length),s=t||0;o>s;++s)r+=n[s].length+i;return r+e.column}}).call(l.prototype),t.Document=l}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,o=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,i=-1,r=n.doc,o=t;n.lines[t];)t++;var s=r.getLength(),a=0;for(n.running=!1;s>t;){n.$tokenizeRow(t),i=t;do t++;while(n.lines[t]);if(a++,a%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,i>=o&&n.fireUpdateEvent(o,i)}}};(function(){i.implement(this,r),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],i=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=i.state+""?(this.states[e]=i.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=i.tokens}}).call(o.prototype),t.BackgroundTokenizer=o}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var i=e("./lib/lang"),r=(e("./lib/oop"),e("./range").Range),o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,l=s;a>=l;l++){var u=this.cache[l];null==u&&(u=i.getMatchOffsets(n.getLine(l),this.regExp),u.length>this.MAX_RANGES&&(u=u.slice(0,this.MAX_RANGES)),u=u.map(function(e){return new r(l,e.offset,l,e.offset+e.length)}),this.cache[l]=u.length?u:"");for(var c=u.length;c--;)t.drawSingleLineMarker(e,u[c].toScreenRange(n),this.clazz,o)}}}).call(o.prototype),t.SearchHighlight=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var i,r,o,s=0,a=this.folds,l=!0;null==t&&(t=this.end.row,n=this.end.column);for(var u=0;u<a.length;u++){if(i=a[u],r=i.range.compareStart(t,n),-1==r)return void e(null,t,n,s,l);if(o=e(null,i.start.row,i.start.column,s,l),o=!o&&e(i.placeholder,i.start.row,i.start.column,s),o||0===r)return;l=!i.sameRow,s=i.end.column}e(null,t,n,s,l)},this.getNextFoldTo=function(e,t){for(var n,i,r=0;r<this.folds.length;r++){if(n=this.folds[r],i=n.range.compareEnd(e,t),-1==i)return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var i,r,o=this.getNextFoldTo(e,t);if(o)if(i=o.fold,"inside"==o.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){r=this.folds;var s=r.indexOf(i);for(0===s&&(this.start.column+=n),s;s<r.length;s++){if(i=r[s],i.start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var r=n.fold,o=this.folds,s=this.foldData,a=o.indexOf(r),l=o[a-1];this.end.row=l.end.row,this.end.column=l.end.column,o=o.splice(a,o.length-a);var u=new i(s,o);return s.splice(s.indexOf(this)+1,0,u),u},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if(e-=i.start.column-t,0>e)return{row:i.start.row,column:i.start.column+e};if(e-=i.placeholder.length,0>e)return i.start;t=i.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("./range").Range,r=i.comparePoints,o=function(){this.ranges=[]};(function(){this.comparePoints=r,this.pointIndex=function(e,t,n){for(var i=this.ranges,o=n||0;o<i.length;o++){var s=i[o],a=r(e,s.end);if(!(a>0)){var l=r(e,s.start);return 0===a?t&&0!==l?-o-2:o:l>0||0===l&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);0>n&&(n=-n-1);var i=this.pointIndex(e.end,t,n);return 0>i?i=-i-1:i++,this.ranges.splice(n,i-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges.splice(t,1):void 0},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return r(e.start,t.start)});for(var n,i=t[0],o=1;o<t.length;o++){n=i,i=t[o];var s=r(n.end,i.start);0>s||(0!=s||n.isEmpty()||i.isEmpty())&&(r(n.end,i.end)<0&&(n.end.row=i.end.row,n.end.column=i.end.column),t.splice(o,1),e.push(i),i=n,o--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges[t]:void 0},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});0>i&&(i=-i-1);var r=this.pointIndex({row:t,column:0},i);0>r&&(r=-r-1);for(var o=[],s=i;r>s;s++)o.push(n[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){if("insert"==e.action)var t=e.start,n=e.end;else var n=e.start,t=e.end;for(var i=t.row,r=n.row,o=r-i,s=-t.column+n.column,a=this.ranges,l=0,u=a.length;u>l;l++){var c=a[l];if(!(c.end.row<i)){if(c.start.row>i)break;if(c.start.row==i&&c.start.column>=t.column&&(c.start.column==t.column&&this.$insertRight||(c.start.column+=s,c.start.row+=o)),c.end.row==i&&c.end.column>=t.column){if(c.end.column==t.column&&this.$insertRight)continue;c.end.column==t.column&&s>0&&u-1>l&&c.end.column>c.start.column&&c.end.column==a[l+1].start.column&&(c.end.column-=s),c.end.column+=s,c.end.row+=o}}}if(0!=o&&u>l)for(;u>l;l++){var c=a[l];c.start.row+=o,c.end.row+=o}}}).call(o.prototype),t.RangeList=o}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function i(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function r(e,t){i(e.start,t),i(e.end,t)}function o(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}function s(e,t){o(e.start,t),o(e.end,t)}var a=(e("../range").Range,e("../range_list").RangeList),l=e("../lib/oop"),u=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};l.inherits(u,a),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new u(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);r(e,this.start);for(var t=e.start.row,n=e.start.column,i=0,o=-1;i<this.subFolds.length&&(o=this.subFolds[i].range.compare(t,n),1==o);i++);var s=this.subFolds[i];if(0==o)return s.addSubFold(e);for(var t=e.range.end.row,n=e.range.end.column,a=i,o=-1;a<this.subFolds.length&&(o=this.subFolds[a].range.compare(t,n),1==o);a++);this.subFolds[a];if(0==o)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);this.subFolds.splice(i,a-i,e);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return s(e,this.start)}}.call(u.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";function i(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var r=i.folds,o=0;o<r.length;o++){var s=r[o];if(s.range.contains(e,t)){if(1==n&&s.range.isEnd(e,t))continue;if(-1==n&&s.range.isStart(e,t))continue;return s}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,i=this.$foldData,r=[];t.column+=1,n.column-=1;for(var o=0;o<i.length;o++){var s=i[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=i[o].folds,l=0;l<a.length;l++){var u=a[l];if(s=u.range.compareRange(e),-2==s)break;if(2!=s){if(42==s)break;r.push(u)}}}}return t.column-=1,n.column+=1,r},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e},this.getFoldStringAt=function(e,t,n,i){if(i=i||this.getFoldLine(e),!i)return null;for(var r,o,s={end:{column:0}},a=0;a<i.folds.length;a++){o=i.folds[a];var l=o.range.compareEnd(e,t);if(-1==l){r=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===l)return null;s=o}return r||(r=this.getLine(o.start.row).substring(s.end.column)),-1==n?r.substring(0,t-s.end.column):1==n?r.substring(t-s.end.column):r},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.start.row<=e&&r.end.row>=e)return r;if(r.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0),i;i<n.length;i++){var r=n[i];if(r.end.row>=e)return r}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,r=0;r<n.length;r++){var o=n[r],s=o.end.row,a=o.start.row;if(s>=t){t>a&&(a>=e?i-=t-a:i=0);break}s>=e&&(i-=a>=e?s-a:s-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n,i=this.$foldData,r=!1;e instanceof s?n=e:(n=new s(t,e),n.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,u=n.end.row,c=n.end.column;if(!(u>a||a==u&&c-2>=l))throw new Error("The range has to be at least 2 characters width");var d=this.getFoldAt(a,l,1),h=this.getFoldAt(u,c,-1);if(d&&h==d)return d.addSubFold(n);d&&!d.range.isStart(a,l)&&this.removeFold(d),h&&!h.range.isEnd(u,c)&&this.removeFold(h);var f=this.getFoldsInRange(n.range);f.length>0&&(this.removeFolds(f),f.forEach(function(e){n.addSubFold(e)}));for(var p=0;p<i.length;p++){var m=i[p];if(u==m.start.row){m.addFold(n),r=!0;break}if(a==m.end.row){if(m.addFold(n),r=!0,!n.sameRow){var g=i[p+1];if(g&&g.start.row==u){m.merge(g);break}}break}if(u<=m.start.row)break}return r||(m=this.$addFoldLine(new o(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(m.start.row,m.start.row):this.$updateRowLengthCache(m.start.row,m.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,r=this.$foldData,o=t.folds;if(1==o.length)r.splice(r.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);o=s.folds,o.shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;if(null==e?(n=new r(0,0,this.getLength(),0),t=!0):n="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,i=this.getFoldsInRangeList(n),t)this.removeFolds(i);else for(var o=i;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(n);return i.length?i:void 0},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,r){null==i&&(i=e.start.row),null==r&&(r=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var o=this.doc,s="";return e.walk(function(e,t,n,a){if(!(i>t)){if(t==i){if(r>n)return;a=Math.max(r,a)}s+=null!=e?e:o.getLine(t).substring(a,n)}},t,n),s},this.getDisplayLine=function(e,t,n,i){var r=this.getFoldLine(e);if(r)return this.getFoldDisplayLine(r,e,t,n,i);var o;return o=this.doc.getLine(e),o.substring(i||0,t||o.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new o(e,n)})},this.toggleFold=function(e){var t,n,i=this.selection,r=i.getRange();if(r.isEmpty()){var o=r.start;if(t=this.getFoldAt(o.row,o.column))return void this.expandFold(t);(n=this.findMatchingBracket(o))?1==r.comparePoint(n)?r.end=n:(r.start=n,r.start.column++,r.end.column--):(n=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==r.comparePoint(n)?r.end=n:r.start=n,r.start.column++):r=this.getCommentFoldRange(o.row,o.column)||r}else{var s=this.getFoldsInRange(r);if(e&&s.length)return void this.expandFolds(s);1==s.length&&(t=s[0])}if(t||(t=this.getFoldAt(r.start.row,r.start.column)),t&&t.range.toString()==r.toString())return void this.expandFold(t);var a="...";if(!r.isMultiLine()){if(a=this.getTextRange(r),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,r)},this.getCommentFoldRange=function(e,t,n){var i=new a(this,e,t),o=i.getCurrentToken();if(o&&/^comment|string/.test(o.type)){var s=new r,l=new RegExp(o.type.replace(/\..*/,"\\."));if(1!=n){do o=i.stepBackward();while(o&&l.test(o.type));i.stepForward()}if(s.start.row=i.getCurrentTokenRow(),s.start.column=i.getCurrentTokenColumn()+2,i=new a(this,e,t),-1!=n){do o=i.stepForward();while(o&&l.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return s.end.row=i.getCurrentTokenRow(),s.end.column=i.getCurrentTokenColumn()+o.value.length-2,s}},this.foldAll=function(e,t,n){void 0==n&&(n=1e5);var i=this.foldWidgets;if(i){t=t||this.getLength(),e=e||0;for(var r=e;t>r;r++)if(null==i[r]&&(i[r]=this.getFoldWidget(r)),"start"==i[r]){var o=this.getFoldWidgetRange(r);if(o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e){r=o.end.row;try{var s=this.addFold("...",o);s&&(s.collapseChildren=n)}catch(a){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){if(this.$foldMode!=e){if(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!e||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,r=e-1;r>=0;){var o=n[r];if(null==o&&(o=n[r]=this.getFoldWidget(r)),"start"==o){var s=this.getFoldWidgetRange(r);if(i||(i=s),s&&s.end.row>=e)break}r--}return{range:-1!==r&&s,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},i=this.$toggleFoldWidget(e,n);if(!i){var r=t.target||t.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),i=this.getLine(e),r="end"===n?-1:1,o=this.getFoldAt(e,-1===r?0:i.length,r);if(o)return void(t.children||t.all?this.removeFold(o):this.expandFold(o));var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1),o&&s.isEqual(o.range)))return void this.removeFold(o);if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,u=a.range.end.row;this.foldAll(l,u,t.all?1e4:0)}else t.children?(u=s?s.end.row:this.getLength(),this.foldAll(e+1,u,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var i=this.getParentFoldRangeData(t,!0);if(n=i.range||i.firstRange){t=n.start.row;var r=this.getFoldAt(t,this.getLine(t).length,1);r?this.removeFold(r):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}var r=e("../range").Range,o=e("./fold_line").FoldLine,s=e("./fold").Fold,a=e("../token_iterator").TokenIterator;t.Folding=i}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";function i(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,r=n.charAt(e.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(s||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!s)return null;if(s[1]){var a=this.$findClosingBracket(s[1],e);if(!a)return null;t=o.fromPoints(e,a),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a=this.$findOpeningBracket(s[2],e);if(!a)return null;t=o.fromPoints(a,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn()-2,u=a.value;;){for(;l>=0;){var c=u.charAt(l);if(c==i){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else c==e&&(o+=1);l-=1}do a=s.stepBackward();while(a&&!n.test(a.type));if(null==a)break;u=a.value,l=u.length-1}return null}},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var l=t.column-s.getCurrentTokenColumn();;){for(var u=a.value,c=u.length;c>l;){var d=u.charAt(l);if(d==i){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else d==e&&(o+=1);l+=1}do a=s.stepForward();while(a&&!n.test(a.type));if(null==a)break;l=0}return null}}}var r=e("../token_iterator").TokenIterator,o=e("../range").Range;t.BracketMatch=i}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/lang"),o=e("./config"),s=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,l=e("./mode/text").Mode,u=e("./range").Range,c=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,f=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new c(e)),this.setDocument(e),this.selection=new a(this),o.resetOptions(this),this.setMode(t),o._signal("session",this)};(function(){function e(e){return 4352>e?!1:e>=4352&&4447>=e||e>=4515&&4519>=e||e>=4602&&4607>=e||e>=9001&&9002>=e||e>=11904&&11929>=e||e>=11931&&12019>=e||e>=12032&&12245>=e||e>=12272&&12283>=e||e>=12288&&12350>=e||e>=12353&&12438>=e||e>=12441&&12543>=e||e>=12549&&12589>=e||e>=12593&&12686>=e||e>=12688&&12730>=e||e>=12736&&12771>=e||e>=12784&&12830>=e||e>=12832&&12871>=e||e>=12880&&13054>=e||e>=13056&&19903>=e||e>=19968&&42124>=e||e>=42128&&42182>=e||e>=43360&&43388>=e||e>=44032&&55203>=e||e>=55216&&55238>=e||e>=55243&&55291>=e||e>=63744&&64255>=e||e>=65040&&65049>=e||e>=65072&&65106>=e||e>=65108&&65126>=e||e>=65128&&65131>=e||e>=65281&&65376>=e||e>=65504&&65510>=e}i.implement(this,s),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;i>=n;){var r=n+i>>1,o=e[r];if(t>o)n=r+1;else{if(!(o>t))return r;i=r-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);this.$fromUndo||!this.$undoManager||e.ignore||(this.$deltasDoc.push(e),t&&0!=t.length&&this.$deltasFold.push({action:"removeFolds",folds:t}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),r=0;if(null==t)o=i.length-1,r=this.getLine(e).length;else for(var o=0;o<i.length&&(r+=i[o].value.length,!(r>=t));o++);return(n=i[o])?(n.index=o,n.start=r-n.value.length,n):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){
return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,i){var r=this.$markerId++,o={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:r};return i?(this.$frontMarkers[r]=o,this._signal("changeFrontMarker")):(this.$backMarkers[r]=o,this._signal("changeBackMarker")),r},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,i){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var r=new u(e,0,t,1/0);return r.id=this.addMarker(r,n,"fullLine",i),r},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var r=/\s/;else var r=this.nonTokenRe;var o=t;if(o>0){do o--;while(o>=0&&n.charAt(o).match(r));o++}for(var s=t;s<n.length&&n.charAt(s).match(r);)s++;return new u(e,o,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,i=n.path}else i=e||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new l),this.$modes[i]&&!n?(this.$onChangeMode(this.$modes[i]),void(t&&t())):(this.$modeId=i,o.loadModule(["mode",i],function(e){return this.$modeId!==i?t&&t():(this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[i]=e,e.$id=i),this.$onChangeMode(e)),void(t&&t()))}.bind(this)),void(this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)))},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(void 0!==n.addEventListener){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(n);else{this.bgTokenizer=new d(n);var r=this;this.bgTokenizer.addEventListener("update",function(e){r._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){o.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,r=0,o=this.$foldData[r],s=o?o.start.row:1/0,a=t.length,l=0;a>l;l++){if(l>s){if(l=o.end.row+1,l>=a)break;o=this.$foldData[r++],s=o?o.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,i=e.length-1;-1!=i;i--){var r=e[i];"doc"==r.group?(this.doc.revertDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!0,n)):r.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=null,i=0;i<e.length;i++){var r=e[i];"doc"==r.group&&(this.doc.applyDeltas(r.deltas),n=this.$getUndoSelection(r.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function i(e){return t?"insert"!==e.action:"insert"===e.action}var r,o,s=e[0],a=!1;i(s)?(r=u.fromPoints(s.start,s.end),a=!0):(r=u.fromPoints(s.start,s.start),a=!1);for(var l=1;l<e.length;l++)s=e[l],i(s)?(o=s.start,-1==r.compare(o.row,o.column)&&r.setStart(o),o=s.end,1==r.compare(o.row,o.column)&&r.setEnd(o),a=!0):(o=s.start,-1==r.compare(o.row,o.column)&&(r=u.fromPoints(s.start,s.start)),a=!1);if(null!=n){0===u.comparePoints(n.start,r.start)&&(n.start.column+=r.end.column-r.start.column,n.end.column+=r.end.column-r.start.column);var c=n.compareRange(r);1==c?r.setStart(n.start):-1==c&&r.setEnd(n.end)}return r},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var i=this.getTextRange(e),r=this.getFoldsInRange(e),o=u.fromPoints(t,t);if(!n){this.remove(e);var s=e.start.row-e.end.row,a=s?-e.end.column:e.start.column-e.end.column;a&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=a),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=a)),s&&o.start.row>=e.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,i),r.length){var l=e.start,c=o.start,s=c.row-l.row,a=c.column-l.column;this.addFolds(r.map(function(e){return e=e.clone(),e.start.row==l.row&&(e.start.column+=a),e.end.row==l.row&&(e.end.column+=a),e.start.row+=s,e.end.row+=s,e}))}return o},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;t>=i;i++)this.doc.insertInLine({row:i,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),r=t.start.row;r<=t.end.row;++r){var o=this.getLine(r);n.start.row=r,n.end.row=r;for(var s=0;i>s&&" "==o.charAt(s);++s);i>s&&"	"==o.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),0>n){var i=this.getRowFoldStart(e+n);if(0>i)return 0;var r=i-e}else if(n>0){var i=this.getRowFoldEnd(t+n);if(i>this.doc.getLength()-1)return 0;var r=i-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var r=t-e+1}var o=new u(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(o).map(function(e){return e=e.clone(),e.start.row+=r,e.end.row+=r,e}),a=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+r,a),s.length&&this.addFolds(s),r},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return 0>t?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),0>e)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)&&(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var i=this.$constrainWrapLimit(e,n.min,n.max);return i!=this.$wrapLimit&&i>1?(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,i=e.start,r=e.end,o=i.row,s=r.row,a=s-o,l=null;if(this.$updating=!0,0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(o,a);var u=this.$foldData;l=this.getFoldsInRange(e),this.removeFolds(l);var c=this.getFoldLine(r.row),d=0;if(c){c.addRemoveChars(r.row,r.column,i.column-r.column),c.shiftRow(-a);var h=this.getFoldLine(o);h&&h!==c&&(h.merge(c),c=h),d=u.indexOf(c)+1}for(d;d<u.length;d++){var c=u[d];c.start.row>=r.row&&c.shiftRow(-a)}s=o}else{var f=Array(a);f.unshift(o,0);var p=t?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,f);var u=this.$foldData,c=this.getFoldLine(o),d=0;if(c){var m=c.range.compareInside(i.row,i.column);0==m?(c=c.split(i.row,i.column),c&&(c.shiftRow(a),c.addRemoveChars(s,0,r.column-i.column))):-1==m&&(c.addRemoveChars(o,0,r.column-i.column),c.shiftRow(a)),d=u.indexOf(c)+1}for(d;d<u.length;d++){var c=u[d];c.start.row>=o&&c.shiftRow(a)}}else{a=Math.abs(e.start.column-e.end.column),"remove"===n&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a);var c=this.getFoldLine(o);c&&c.addRemoveChars(o,i.column,a)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),l},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var n,i,r=this.doc.getAllLines(),o=this.getTabSize(),s=this.$wrapData,l=this.$wrapLimit,u=e;for(t=Math.min(t,r.length-1);t>=u;)i=this.getFoldLine(u,i),i?(n=[],i.walk(function(e,t,i,o){var s;if(null!=e){s=this.$getDisplayTokens(e,n.length),s[0]=a;for(var l=1;l<s.length;l++)s[l]=c}else s=this.$getDisplayTokens(r[t].substring(o,i),n.length);n=n.concat(s)}.bind(this),i.end.row,r[i.end.row].length+1),s[i.start.row]=this.$computeWrapSplits(n,l,o),u=i.end.row+1):(n=this.$getDisplayTokens(r[u]),s[u]=this.$computeWrapSplits(n,l,o),u++)};var t=1,n=2,a=3,c=4,f=9,p=10,m=11,g=12;this.$computeWrapSplits=function(e,t,i){function r(){var t=0;if(0===y)return t;if(v)for(var n=0;n<e.length;n++){var r=e[n];if(r==p)t+=1;else{if(r!=m){if(r==g)continue;break}t+=i}}return h&&v!==!1&&(t+=i),Math.min(t,y)}function o(t){var n=e.slice(u,t),i=n.length;n.join("").replace(/12/g,function(){i-=1}).replace(/2/g,function(){i-=1}),s.length||(b=r(),s.indent=b),d+=i,s.push(d),u=t}if(0==e.length)return[];for(var s=[],l=e.length,u=0,d=0,h=this.$wrapAsCode,v=this.$indentedSoftWrap,y=t<=Math.max(2*i,8)||v===!1?0:Math.floor(t/2),b=0;l-u>t-b;){var w=u+t-b;if(e[w-1]>=p&&e[w]>=p)o(w);else if(e[w]!=a&&e[w]!=c){for(var C=Math.max(w-(t-(t>>2)),u-1);w>C&&e[w]<a;)w--;if(h){for(;w>C&&e[w]<a;)w--;for(;w>C&&e[w]==f;)w--}else for(;w>C&&e[w]<p;)w--;w>C?o(++w):(w=u+t,e[w]==n&&w--,o(w-b))}else{for(w;w!=u-1&&e[w]!=a;w--);if(w>u){o(w);continue}for(w=u+t;w<e.length&&e[w]==c;w++);if(w==e.length)break;o(w)}}return s},this.$getDisplayTokens=function(i,r){var o,s=[];r=r||0;for(var a=0;a<i.length;a++){var l=i.charCodeAt(a);if(9==l){o=this.getScreenTabSize(s.length+r),s.push(m);for(var u=1;o>u;u++)s.push(g)}else 32==l?s.push(p):l>39&&48>l||l>57&&64>l?s.push(f):l>=4352&&e(l)?s.push(t,n):s.push(t)}return s},this.$getStringScreenWidth=function(t,n,i){if(0==n)return[0,0];null==n&&(n=1/0),i=i||0;var r,o;for(o=0;o<t.length&&(r=t.charCodeAt(o),i+=9==r?this.getScreenTabSize(i):r>=4352&&e(r)?2:1,!(i>n));o++);return[i,o]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(0>e)return{row:0,column:0};var n,i,r=0,o=0,s=0,a=0,l=this.$screenRowCache,u=this.$getRowCacheIndex(l,e),c=l.length;if(c&&u>=0)var s=l[u],r=this.$docRowCache[u],d=e>l[c-1];else var d=!c;for(var h=this.getLength()-1,f=this.getNextFoldLine(r),p=f?f.start.row:1/0;e>=s&&(a=this.getRowLength(r),!(s+a>e||r>=h));)s+=a,r++,r>p&&(r=f.end.row+1,f=this.getNextFoldLine(r,f),p=f?f.start.row:1/0),d&&(this.$docRowCache.push(r),this.$screenRowCache.push(s));if(f&&f.start.row<=r)n=this.getFoldDisplayLine(f),r=f.start.row;else{if(e>=s+a||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),f=null}var m=0;if(this.$useWrapMode){var g=this.$wrapData[r];if(g){var v=Math.floor(e-s);i=g[v],v>0&&g.length&&(m=g.indent,o=g[v-1]||g[g.length-1],n=n.substring(o))}}return o+=this.$getStringScreenWidth(n,t-m)[1],this.$useWrapMode&&o>=i&&(o=i-1),f?f.idxToPosition(o):{row:r,column:o}},this.documentToScreenPosition=function(e,t){if("undefined"==typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var i=0,r=null,o=null;o=this.getFoldAt(e,t,1),o&&(e=o.start.row,t=o.start.column);var s,a=0,l=this.$docRowCache,u=this.$getRowCacheIndex(l,e),c=l.length;if(c&&u>=0)var a=l[u],i=this.$screenRowCache[u],d=e>l[c-1];else var d=!c;for(var h=this.getNextFoldLine(a),f=h?h.start.row:1/0;e>a;){if(a>=f){if(s=h.end.row+1,s>e)break;h=this.getNextFoldLine(s,h),f=h?h.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,d&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var p="";h&&a>=f?(p=this.getFoldDisplayLine(h,e,t),r=h.start.row):(p=this.getLine(e).substring(0,t),r=e);var m=0;if(this.$useWrapMode){var g=this.$wrapData[r];if(g){for(var v=0;p.length>=g[v];)i++,v++;p=p.substring(g[v-1]||0,p.length),m=v>0?g.indent:0}}return{row:i,column:m+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,r=0,t=this.$foldData[r++],o=t?t.start.row:1/0;n>i;){var s=this.$wrapData[i];e+=s?s.length+1:1,i++,i>o&&(i=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:1/0)}else{e=this.getLength();for(var a=this.$foldData,r=0;r<a.length;r++)t=a[r],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,i){if(0===n)return[0,0];n||(n=1/0),i=i||0;var r,o;for(o=0;o<t.length&&(r=t.charAt(o),i+="	"===r?this.getScreenTabSize(i):e.getCharacterWidth(r),!(i>n));o++);return[i,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(f.prototype),e("./edit_session/folding").Folding.call(f.prototype),e("./edit_session/bracket_match").BracketMatch.call(f.prototype),o.defineOptions(f.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e="auto"==e?"text"!=this.$mode.type:"text"!=e,e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=f}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var i=e("./lib/lang"),r=e("./lib/oop"),o=e("./range").Range,s=function(){this.$options={}};(function(){this.set=function(e){return r.mixin(this.$options,e),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var i=null;return n.forEach(function(e,n,r){if(e.start)i=e;else{var s=e.offset+(r||0);if(i=new o(n,s,n,s+e.length),!e.length&&t.start&&t.start.start&&0!=t.skipCurrent&&i.isEqual(t.start))return i=null,!1}return!0}),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,r=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine){var l,u=a.length,c=r.length-u;e:for(var d=a.offset||0;c>=d;d++){for(var h=0;u>h;h++)if(-1==r[d+h].search(a[h]))continue e;var f=r[d],p=r[d+u-1],m=f.length-f.match(a[0])[0].length,g=p.match(a[u-1])[0].length;l&&l.end.row===d&&l.end.column>m||(s.push(l=new o(d,m,d+u-1,g)),u>2&&(d=d+u-2))}}else for(var v=0;v<r.length;v++)for(var y=i.getMatchOffsets(r[v],a),h=0;h<y.length;h++){var b=y[h];s.push(new o(v,b.offset,v,b.offset+b.length))}if(n){for(var w=n.start.column,C=n.start.column,v=0,h=s.length-1;h>v&&s[v].start.column<w&&s[v].start.row==n.start.row;)v++;for(;h>v&&s[h].end.column>C&&s[h].end.row==n.end.row;)h--;for(s=s.slice(v,h+1),v=0,h=s.length;h>v;v++)s[v].start.row+=n.start.row,s[v].end.row+=n.start.row}return s},this.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var r=i.exec(e);if(!r||r[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];s&&s.toLowerCase()!=s?t[o]=t[o].toUpperCase():t[o]=t[o].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var r;if(t.$isMultiLine)var s=n.length,a=function(t,i,a){var l=t.search(n[0]);if(-1!=l){for(var u=1;s>u;u++)if(t=e.getLine(i+u),-1==t.search(n[u]))return;var c=t.match(n[s-1])[0].length,d=new o(i,l,i+s-1,c);return 1==n.offset?(d.start.row--,d.start.column=Number.MAX_VALUE):a&&(d.start.column+=a),r(d)?!0:void 0}};else if(t.backwards)var a=function(e,t,o){for(var s=i.getMatchOffsets(e,n),a=s.length-1;a>=0;a--)if(r(s[a],t,o))return!0};else var a=function(e,t,o){for(var s=i.getMatchOffsets(e,n),a=0;a<s.length;a++)if(r(s[a],t,o))return!0};var l=this.$lineIterator(e,t);return{forEach:function(e){r=e,l.forEach(a)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=i.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var r=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,r);try{var o=new RegExp(n,r)}catch(s){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],r=0;r<n.length;r++)try{i.push(new RegExp(n[r],t))}catch(o){return!1}return""==n[0]?(i.shift(),i.offset=1):i.offset=0,i},this.$lineIterator=function(e,t){var n=1==t.backwards,i=0!=t.skipCurrent,r=t.range,o=t.start;o||(o=r?r[n?"end":"start"]:e.selection.getRange()),o.start&&(o=o[i!=n?"end":"start"]);var s=r?r.start.row:0,a=r?r.end.row:e.getLength()-1,l=n?function(n){var i=o.row,r=e.getLine(i).substring(0,o.column);if(!n(r,i)){for(i--;i>=s;i--)if(n(e.getLine(i),i))return;if(0!=t.wrap)for(i=a,s=o.row;i>=s;i--)if(n(e.getLine(i),i))return}}:function(n){var i=o.row,r=e.getLine(i).substr(o.column);if(!n(r,i,o.column)){for(i+=1;a>=i;i++)if(n(e.getLine(i),i))return;if(0!=t.wrap)for(i=s,a=o.row;a>=i;i++)if(n(e.getLine(i),i))return}};return{forEach:l}}}).call(s.prototype),t.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function i(e,t){this.platform=t||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function r(e,t){i.call(this,e,t),this.$singleCommand=!1}var o=e("../lib/keys"),s=e("../lib/useragent"),a=o.KEY_MODS;r.prototype=i.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||0}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var i=this.commandKeyBinding;for(var r in i){var o=i[r];if(o==e)delete i[r];else if(Array.isArray(o)){var s=o.indexOf(e);-1!=s&&(o.splice(s,1),1==o.length&&(i[r]=o[0]))}}},this.bindKey=function(e,t,n){return"object"==typeof e&&(void 0==n&&(n=e.position),e=e[this.platform]),e?"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach(function(e){var i="";if(-1!=e.indexOf(" ")){var r=e.split(/\s+/);e=r.pop(),r.forEach(function(e){var t=this.parseKeys(e),n=a[t.hashId]+t.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")},this),i+=" "}var o=this.parseKeys(e),s=a[o.hashId]+o.key;this._addCommandToBinding(i+s,t,n)},this):void 0},this._addCommandToBinding=function(t,n,i){var r,o=this.commandKeyBinding;if(n)if(!o[t]||this.$singleCommand)o[t]=n;else{Array.isArray(o[t])?-1!=(r=o[t].indexOf(n))&&o[t].splice(r,1):o[t]=[o[t]],"number"!=typeof i&&(i=i||n.isDefault?-100:e(n));var s=o[t];for(r=0;r<s.length;r++){var a=s[r],l=e(a);if(l>i)break}s.splice(r,0,n)}else delete o[t]},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(n){if("string"==typeof n)return this.bindKey(n,t);"function"==typeof n&&(n={exec:n}),"object"==typeof n&&(n.name||(n.name=t),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=o[n];if(o.FUNCTION_KEYS[i])n=o.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,s=t.length;s--;){var a=o.KEY_MODS[t[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[s]+" in "+e),!1;r|=a}return{key:n,hashId:r}},this.findKeyCommand=function(e,t){var n=a[e]+t;return this.commandKeyBinding[n]},this.handleKeyboard=function(e,t,n,i){if(!(0>i)){var r=a[t]+n,o=this.commandKeyBinding[r];return e.$keyChain&&(e.$keyChain+=" "+r,o=this.commandKeyBinding[e.$keyChain]||o),!o||"chainKeys"!=o&&"chainKeys"!=o[o.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||i>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-r.length-1)),{command:o}):(e.$keyChain=e.$keyChain||r,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(i.prototype),t.HashHandler=i,t.MultiHashHandler=r}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,s=function(e,t){r.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};i.inherits(s,r),function(){i.implement(this,o),this.exec=function(e,t,n){if(Array.isArray(e)){for(var i=e.length;i--;)if(this.exec(e[i],t,n))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r={editor:t,command:e,args:n};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),r.returnValue===!1?!1:!0},this.toggleRecording=function(e){return this.$inReplay?void 0:(e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(s.prototype),t.CommandManager=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function i(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),o=e("../config"),s=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(e){o.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","Ctrl-E"),exec:function(e){o.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){o.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0);
},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:i("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(e){o.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:i("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",exec:function(e){},readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(e){o.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(e){return e.selection.isEmpty()?void e.remove("left"):!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:i("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:i(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()),l=a.replace(/\n\s*/," ").length,u=e.session.doc.getLine(n.row),c=n.row+1;c<=i.row+1;c++){var d=r.stringTrimLeft(r.stringTrimRight(e.session.doc.getLine(c)));0!==d.length&&(d=" "+d),u+=d}i.row+1<e.session.doc.getLength()-1&&(u+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new s(n.row,0,i.row+2,0),u),l>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+l)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:i(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,i=e.selection.rangeList.ranges,r=[];i.length<1&&(i=[e.selection.getRange()]);for(var o=0;o<i.length;o++)o==i.length-1&&(i[o].end.row!==t||i[o].end.column!==n)&&r.push(new s(i[o].end.row,i[o].end.column,t,n)),0===o?(0!==i[o].start.row||0!==i[o].start.column)&&r.push(new s(0,0,i[o].start.row,i[o].start.column)):r.push(new s(i[o-1].end.row,i[o-1].end.column,i[o].start.row,i[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var o=0;o<r.length;o++)e.selection.addRange(r[o],!1)},readOnly:!0,scrollIntoView:"none"}]}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/lang"),s=e("./lib/useragent"),a=e("./keyboard/textinput").TextInput,l=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,c=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,h=e("./search").Search,f=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,g=e("./commands/default_commands").commands,v=e("./config"),y=e("./token_iterator").TokenIterator,b=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new m(s.isMac?"mac":"win",g),this.textInput=new a(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new c(this),this.$mouseHandler=new l(this),new u(this),this.$blockScrolling=0,this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new d("")),v.resetOptions(this),v._signal("editor",this)};(function(){i.implement(this,p),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(e){if(this.curOp){if(e&&e.returnValue===!1)return this.curOp=null;this._signal("beforeEndOperation");var t=this.curOp.command;t.name&&this.$blockScrolling>0&&this.$blockScrolling--;var n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),r=this.renderer.layerConfig;(i.start.row>=r.lastRow||i.end.row<=r.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,i=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var r=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(t.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e){this.$keybindingId=e;var n=this;v.loadModule(["keybinding",e],function(i){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(i&&i.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=t.findMatchingBracket(e.getCursorPosition());if(n)var i=new f(n.row,n.column,n.row,n.column+1);else if(t.$mode.getMatching)var i=t.$mode.getMatching(e.session);i&&(t.$bracketHighlight=t.addMarker(i,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var n=e.getCursorPosition(),i=new y(e.session,n.row,n.column),r=i.getCurrentToken();if(!r||!/\b(?:tag-open|tag-name)/.test(r.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1==r.type.indexOf("tag-open")||(r=i.stepForward())){var o=r.value,s=0,a=i.stepBackward();if("<"==a.value){do a=r,r=i.stepForward(),r&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--);while(r&&s>=0)}else{do r=a,a=i.stepBackward(),r&&r.value===o&&-1!==r.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--);while(a&&0>=s);i.stepForward()}if(!r)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var l=i.getCurrentTokenRow(),u=i.getCurrentTokenColumn(),c=new f(l,u,l,u+r.value.length);t.$tagHighlight&&0!==c.compareRange(t.$backMarkers[t.$tagHighlight].range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),c&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(c,"ace_bracket","text"))}}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(v.warn("Automatically scrolling cursor into view after selection change","this will be disabled in the next version","set editor.$blockScrolling = Infinity to disable this message"),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new f(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column-1,i=t.end.column+1,r=e.getLine(t.start.row),o=r.length,s=r.substring(Math.max(n,0),Math.min(i,o));if(!(n>=0&&/^[\w\d]/.test(s)||o>=i&&/[\w\d]$/.test(s))&&(s=r.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(s))){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s});return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(t);else{var n=t.split(/\r\n|\r|\n/),i=this.selection.rangeList.ranges;if(n.length>i.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,t);for(var r=i.length;r--;){var o=i[r];o.isEmpty()||this.session.remove(o),this.session.insert(o.start,n[r])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,i=n.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=i.transformAction(n.getState(r.row),"insertion",this,n,e);o&&(e!==o.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=o.text)}if("	"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var s=new f.fromPoints(r,r);s.end.column+=e.length,this.session.remove(s)}}else{var s=this.getSelectionRange();r=this.session.remove(s),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(r.row);if(r.column>a.search(/\S|$/)){var l=a.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+l)}}this.clearSelection();var u=r.column,c=n.getState(r.row),a=n.getLine(r.row),d=i.checkOutdent(c,a,e);n.insert(r,e);if(o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new f(r.row,u+o.selection[0],r.row,u+o.selection[1])):this.selection.setSelectionRange(new f(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))),n.getDocument().isNewLine(e)){var h=i.getNextLineIndent(c,a.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},h)}d&&i.autoOutdent(c,n,r.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){
return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),r=n.getMode().transformAction(i,"deletion",this,n,t);if(0===t.end.column){var o=n.getTextRange(t);if("\n"==o[o.length-1]){var s=n.getLine(t.end.row);/^\s+$/.test(s)&&(t.end.column=s.length)}}r&&(t=r)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,r=this.session.getLine(e.row);t<r.length?(n=r.charAt(t)+r.charAt(t-1),i=new f(e.row,t-1,e.row,t+1)):(n=r.charAt(t-1)+r.charAt(t-2),i=new f(e.row,t-2,e.row,t)),this.session.replace(i,n)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"	")}if(t.start.column<t.end.column){var i=e.getTextRange(t);if(!/^\s+$/.test(i)){var n=this.$getSelectedRows();return void e.indentRows(n.first,n.last,"	")}}var r=e.getLine(t.start.row),s=t.start,a=e.getTabSize(),l=e.documentToScreenColumn(s.row,s.column);if(this.session.getUseSoftTabs())var u=a-l%a,c=o.stringRepeat(" ",u);else{for(var u=l%a;" "==r[t.start.column]&&u;)t.start.column--,u--;this.selection.setSelectionRange(t),c="	"}return this.insert(c)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var i=new f(0,0,0,0),r=e.first;r<=e.last;r++){var o=t.getLine(r);i.start.row=r,i.end.row=r,i.end.column=o.length,t.replace(i,n[r-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(e);n.lastIndex<t;){var r=n.exec(i);if(r.index<=t&&r.index+r[0].length>=t){var o={value:r[0],start:r.index,end:r.index+r[0].length};return o}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new f(t,n-1,t,n),r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(t,n);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,l=parseFloat(o.value);l*=Math.pow(10,a),e*=s!==o.end&&s>n?Math.pow(10,o.end-n-1):Math.pow(10,o.end-n),l+=e,l/=Math.pow(10,a);var u=l.toFixed(a),c=new f(t,o.start,t,o.end);this.session.replace(c,u),this.moveCursorTo(t,Math.max(o.start+1,n+u.length-o.value.length))}}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),i=e.isBackwards();if(n.isEmpty()){var r=n.start.row;t.duplicateLines(r,r)}else{var o=i?n.start:n.end,s=t.insert(o,t.getTextRange(n),!1);n.start=o,n.end=s,e.setSelectionRange(n,i)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n,i,r=this.selection;if(!r.inMultiSelectMode||this.inVirtualSelectionMode){var o=r.toOrientedRange();n=this.$getSelectedRows(o),i=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(i=0),o.moveBy(i,0),r.fromOrientedRange(o)}else{var s=r.rangeList.ranges;r.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,u=s.length,c=0;u>c;c++){var d=c;s[c].moveBy(a,0),n=this.$getSelectedRows(s[c]);for(var h=n.first,f=n.last;++c<u;){l&&s[c].moveBy(l,0);var p=this.$getSelectedRows(s[c]);if(t&&p.first!=f)break;if(!t&&p.first>f+1)break;f=p.last}for(c--,a=this.session.$moveLines(h,f,t?0:e),t&&-1==e&&(d=c+1);c>=d;)s[d].moveBy(a,0),d++;t||(a=0),l+=a}r.fromOrientedRange(r.ranges[0]),r.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,r=e*Math.floor(i.height/i.lineHeight);this.$blockScrolling++,t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(r,0)}):t===!1&&(this.selection.moveCursorBy(r,0),this.selection.clearSelection()),this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),i=new y(this.session,n.row,n.column),r=i.getCurrentToken(),o=r||i.stepForward();if(o){var s,a,l=!1,u={},c=n.column-o.start,d={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;c<o.value.length&&!l;c++)if(d[o.value[c]])switch(a=d[o.value[c]]+"."+o.type.replace("rparen","lparen"),isNaN(u[a])&&(u[a]=0),o.value[c]){case"(":case"[":case"{":u[a]++;break;case")":case"]":case"}":u[a]--,-1===u[a]&&(s="bracket",l=!0)}}else o&&-1!==o.type.indexOf("tag-name")&&(isNaN(u[o.value])&&(u[o.value]=0),"<"===r.value?u[o.value]++:"</"===r.value&&u[o.value]--,-1===u[o.value]&&(s="tag",l=!0));l||(r=o,o=i.stepForward(),c=0)}while(o&&!l);if(s){var h,p;if("bracket"===s)h=this.session.getBracketRange(n),h||(h=new f(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+c-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+c-1),p=h.start,(t||p.row===n.row&&Math.abs(p.column-n.column)<2)&&(h=this.session.getBracketRange(p)));else if("tag"===s){if(!o||-1===o.type.indexOf("tag-name"))return;var m=o.value;if(h=new f(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2),0===h.compare(n.row,n.column)){l=!1;do o=r,r=i.stepBackward(),r&&(-1!==r.type.indexOf("tag-close")&&h.setEnd(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+1),o.value===m&&-1!==o.type.indexOf("tag-name")&&("<"===r.value?u[m]++:"</"===r.value&&u[m]--,0===u[m]&&(l=!0)));while(r&&!l)}o&&o.type.indexOf("tag-name")&&(p=h.start,p.row==n.row&&Math.abs(p.column-n.column)<2&&(p=h.end))}p=h&&h.cursor||p,p&&(e?h&&t?this.selection.setRange(h):h&&h.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(p.row,p.column):this.selection.moveTo(p.row,p.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),null!==n&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),i):i},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;this.$blockScrolling+=1;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o)this.$tryReplace(n[o],e)&&i++;return this.selection.setSelectionRange(r),this.$blockScrolling-=1,i},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var r=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(r)||this.$search.$options.needle,e||(r=this.session.getWordRange(r.start.row,r.start.column),e=this.session.getTextRange(r)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:r});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,n),o):(t.backwards?r.start=r.end:r.end=r.start,void this.selection.setRange(r))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var r=this.$scrollAnchor;r.style.cssText="position:absolute",this.container.insertBefore(r,this.container.firstChild);var o=this.on("changeSelection",function(){i=!0}),s=this.renderer.on("beforeRender",function(){i&&(t=n.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(i&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,o=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=o.top-s.offset;i=o.top>=0&&a+t.top<0?!0:o.top<s.height&&o.top+t.top+s.lineHeight>window.innerHeight?!1:null,null!=i&&(r.style.top=a+"px",r.style.left=o.left+"px",r.style.height=s.lineHeight+"px",r.scrollIntoView(i)),i=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",o),this.renderer.removeEventListener("afterRender",a),this.renderer.removeEventListener("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,r.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}}).call(b.prototype),v.defineOptions(b.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),t.Editor=b}),ace.define("ace/undomanager",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.reset()};(function(){function e(e){return{action:e.action,start:e.start,end:e.end,lines:1==e.lines.length?null:e.lines,text:1==e.lines.length?e.lines[0]:null}}function t(e){return{action:e.action,start:e.start,end:e.end,lines:e.lines||[e.text]}}function n(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++){for(var r=e[i],o={group:r.group,deltas:new Array(r.length)},s=0;s<r.deltas.length;s++){var a=r.deltas[s];o.deltas[s]=t(a)}n[i]=o}return n}this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(this.$deserializeDeltas(t),e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(t){return n(t,e)},this.$deserializeDeltas=function(e){return n(e,t)}}).call(i.prototype),t.UndoManager=i}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/dom"),r=e("../lib/oop"),o=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){r.implement(this,s),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.row,r=this.$annotations[i];r||(r=this.$annotations[i]={text:[]});var s=n.text;s=s?o.escapeHTML(s):n.html||"",-1===r.text.indexOf(s)&&r.text.push(s);var a=n.type;"error"==a?r.className=" ace_error":"warning"==a&&" ace_error"!=r.className?r.className=" ace_warning":"info"!=a||r.className||(r.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var i=new Array(n+1);i.unshift(t,1),this.$annotations.splice.apply(this.$annotations,i)}}},this.update=function(e){for(var t=this.session,n=e.firstRow,r=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),o=t.getNextFoldLine(n),s=o?o.start.row:1/0,a=this.$showFoldWidgets&&t.foldWidgets,l=t.$breakpoints,u=t.$decorations,c=t.$firstLineNumber,d=0,h=t.gutterRenderer||this.$renderer,f=null,p=-1,m=n;;){if(m>s&&(m=o.end.row+1,o=t.getNextFoldLine(m,o),s=o?o.start.row:1/0),m>r){for(;this.$cells.length>p+1;)f=this.$cells.pop(),this.element.removeChild(f.element);break}f=this.$cells[++p],f||(f={element:null,textNode:null,foldWidget:null},f.element=i.createElement("div"),f.textNode=document.createTextNode(""),f.element.appendChild(f.textNode),this.element.appendChild(f.element),this.$cells[p]=f);var g="ace_gutter-cell ";l[m]&&(g+=l[m]),u[m]&&(g+=u[m]),this.$annotations[m]&&(g+=this.$annotations[m].className),f.element.className!=g&&(f.element.className=g);var v=t.getRowLength(m)*e.lineHeight+"px";if(v!=f.element.style.height&&(f.element.style.height=v),a){var y=a[m];null==y&&(y=a[m]=t.getFoldWidget(m))}if(y){f.foldWidget||(f.foldWidget=i.createElement("span"),f.element.appendChild(f.foldWidget));var g="ace_fold-widget ace_"+y;g+="start"==y&&m==s&&m<o.end.row?" ace_closed":" ace_open",f.foldWidget.className!=g&&(f.foldWidget.className=g);var v=e.lineHeight+"px";f.foldWidget.style.height!=v&&(f.foldWidget.style.height=v)}else f.foldWidget&&(f.element.removeChild(f.foldWidget),f.foldWidget=null);var b=d=h?h.getText(t,m):m+c;b!=f.textNode.data&&(f.textNode.data=b),m++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||t.$useWrapMode)&&(d=t.getLength()+c);var w=h?h.getWidth(t,d,e):d.toString().length*e.characterWidth,C=this.$padding||this.$computePadding();w+=C.left+C.right,w===this.gutterWidth||isNaN(w)||(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(a.prototype),t.Gutter=a}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../range").Range,r=e("../lib/dom"),o=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){function e(e,t,n,i){return(e?1:0)|(t?2:0)|(n?4:0)|(i?8:0)}this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(e){this.config=e;var t=[];for(var n in this.markers){var i=this.markers[n];if(i.range){var r=i.range.clipRows(e.firstRow,e.lastRow);if(!r.isEmpty())if(r=r.toScreenRange(this.session),i.renderer){var o=this.$getTop(r.start.row,e),s=this.$padding+r.start.column*e.characterWidth;i.renderer(t,r,s,o,e)}else"fullLine"==i.type?this.drawFullLineMarker(t,r,i.clazz,e):"screenLine"==i.type?this.drawScreenLineMarker(t,r,i.clazz,e):r.isMultiLine()?"text"==i.type?this.drawTextMarker(t,r,i.clazz,e):this.drawMultiLineMarker(t,r,i.clazz,e):this.drawSingleLineMarker(t,r,i.clazz+" ace_start ace_br15",e)}else i.update(t,this,this.session,e)}this.element.innerHTML=t.join("")}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(t,n,r,o,s){for(var a=this.session,l=n.start.row,u=n.end.row,c=l,d=0,h=0,f=a.getScreenLastRowColumn(c),p=new i(c,n.start.column,c,h);u>=c;c++)p.start.row=p.end.row=c,p.start.column=c==l?n.start.column:a.getRowWrapIndent(c),p.end.column=f,d=h,h=f,f=u>c+1?a.getScreenLastRowColumn(c+1):c==u?0:n.end.column,this.drawSingleLineMarker(t,p,r+(c==l?" ace_start":"")+" ace_br"+e(c==l||c==l+1&&n.start.column,h>d,h>f,c==u),o,c==u?0:1,s)},this.drawMultiLineMarker=function(e,t,n,i,r){var o=this.$padding,s=i.lineHeight,a=this.$getTop(t.start.row,i),l=o+t.start.column*i.characterWidth;r=r||"",e.push("<div class='",n," ace_br1 ace_start' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",l,"px;",r,"'></div>"),a=this.$getTop(t.end.row,i);var u=t.end.column*i.characterWidth;if(e.push("<div class='",n," ace_br12' style='","height:",s,"px;","width:",u,"px;","top:",a,"px;","left:",o,"px;",r,"'></div>"),s=(t.end.row-t.start.row-1)*i.lineHeight,!(0>=s)){a=this.$getTop(t.start.row+1,i);var c=(t.start.column?1:0)|(t.end.column?0:8);e.push("<div class='",n,c?" ace_br"+c:"","' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",o,"px;",r,"'></div>")}},this.drawSingleLineMarker=function(e,t,n,i,r,o){var s=i.lineHeight,a=(t.end.column+(r||0)-t.start.column)*i.characterWidth,l=this.$getTop(t.start.row,i),u=this.$padding+t.start.column*i.characterWidth;e.push("<div class='",n,"' style='","height:",s,"px;","width:",a,"px;","top:",l,"px;","left:",u,"px;",o||"","'></div>")},this.drawFullLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i),s=i.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,i)-o),e.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i),s=i.lineHeight;e.push("<div class='",n,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")}}).call(o.prototype),t.Marker=o}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/dom"),o=e("../lib/lang"),s=(e("../lib/useragent"),e("../lib/event_emitter").EventEmitter),a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){i.implement(this,s),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.$updateEolChar=function(){var e="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;return this.EOL_CHAR!=e?(this.EOL_CHAR=e,!0):void 0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;e+1>n;n++)this.showInvisibles?t.push("<span class='ace_invisible ace_invisible_tab'>"+o.stringRepeat(this.TAB_CHAR,n)+"</span>"):t.push(o.stringRepeat(" ",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide",r="",s="";if(this.showInvisibles){i+=" ace_invisible",r=" ace_invisible_space",s=" ace_invisible_tab";var a=o.stringRepeat(this.SPACE_CHAR,this.tabSize),l=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else var a=o.stringRepeat(" ",this.tabSize),l=a;this.$tabStrings[" "]="<span class='"+i+r+"'>"+a+"</span>",this.$tabStrings["	"]="<span class='"+i+s+"'>"+l+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;for(var i=Math.max(t,e.firstRow),r=Math.min(n,e.lastRow),o=this.element.childNodes,s=0,a=e.firstRow;i>a;a++){var l=this.session.getFoldLine(a);if(l){if(l.containsRow(i)){i=l.start.row;break}a=l.end.row}s++}for(var a=i,l=this.session.getNextFoldLine(a),u=l?l.start.row:1/0;;){if(a>u&&(a=l.end.row+1,l=this.session.getNextFoldLine(a,l),u=l?l.start.row:1/0),a>r)break;var c=o[s++];if(c){var d=[];this.$renderLine(d,a,!this.$useLineGroups(),a==u?l:!1),c.style.height=e.lineHeight*this.session.getRowLength(a)+"px",c.innerHTML=d.join("")}a++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var r=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)}if(e.lastRow>t.lastRow){var r=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(r)}},this.$renderLinesFragment=function(e,t,n){for(var i=this.element.ownerDocument.createDocumentFragment(),o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;;){if(o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),o>n)break;var l=r.createElement("div"),u=[];if(this.$renderLine(u,o,!1,o==a?s:!1),l.innerHTML=u.join(""),this.$useLineGroups())l.className="ace_line_group",i.appendChild(l),l.style.height=e.lineHeight*this.session.getRowLength(o)+"px";else for(;l.firstChild;)i.appendChild(l.firstChild);
o++}return i},this.update=function(e){this.config=e;for(var t=[],n=e.firstRow,i=e.lastRow,r=n,o=this.session.getNextFoldLine(r),s=o?o.start.row:1/0;;){if(r>s&&(r=o.end.row+1,o=this.session.getNextFoldLine(r,o),s=o?o.start.row:1/0),r>i)break;this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(r),"px'>"),this.$renderLine(t,r,!1,r==s?o:!1),this.$useLineGroups()&&t.push("</div>"),r++}this.element.innerHTML=t.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,i){var r=this,s=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,a=function(e,n,i,s,a){if(n)return r.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+o.stringRepeat(r.SPACE_CHAR,e.length)+"</span>":e;if("&"==e)return"&#38;";if("<"==e)return"&#60;";if(">"==e)return"&#62;";if("	"==e){var l=r.session.getScreenTabSize(t+s);return t+=l-1,r.$tabStrings[l]}if("　"==e){var u=r.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",c=r.showInvisibles?r.SPACE_CHAR:"";return t+=1,"<span class='"+u+"' style='width:"+2*r.config.characterWidth+"px'>"+c+"</span>"}return i?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+r.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*r.config.characterWidth+"px'>"+e+"</span>")},l=i.replace(s,a);if(this.$textToken[n.type])e.push(l);else{var u="ace_"+n.type.replace(/\./g," ace_"),c="";"fold"==n.type&&(c=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",u,"'",c,">",l,"</span>")}return t+i.length},this.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);return 0>=i||i>=n?t:" "==t[0]?(i-=i%this.tabSize,e.push(o.stringRepeat(this.$tabStrings[" "],i/this.tabSize)),t.substr(i)):"	"==t[0]?(e.push(o.stringRepeat(this.$tabStrings["	"],i)),t.substr(i)):t},this.$renderWrappedLine=function(e,t,n,i){for(var r=0,s=0,a=n[0],l=0,u=0;u<t.length;u++){var c=t[u],d=c.value;if(0==u&&this.displayIndentGuides){if(r=d.length,d=this.renderIndentGuide(e,d,a),!d)continue;r-=d.length}if(r+d.length<a)l=this.$renderToken(e,l,c,d),r+=d.length;else{for(;r+d.length>=a;)l=this.$renderToken(e,l,c,d.substring(0,a-r)),d=d.substring(a-r),r=a,i||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),e.push(o.stringRepeat(" ",n.indent)),s++,l=0,a=n[s]||Number.MAX_VALUE;0!=d.length&&(r+=d.length,l=this.$renderToken(e,l,c,d))}}},this.$renderSimpleLine=function(e,t){var n=0,i=t[0],r=i.value;this.displayIndentGuides&&(r=this.renderIndentGuide(e,r)),r&&(n=this.$renderToken(e,n,i,r));for(var o=1;o<t.length;o++)i=t[o],r=i.value,n=this.$renderToken(e,n,i,r)},this.$renderLine=function(e,t,n,i){if(i||0==i||(i=this.session.getFoldLine(t)),i)var r=this.$getFoldLineTokens(t,i);else var r=this.session.getTokens(t);if(n||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),r.length){var o=this.session.getRowSplitData(t);o&&o.length?this.$renderWrappedLine(e,r,o,n):this.$renderSimpleLine(e,r)}this.showInvisibles&&(i&&(t=i.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function n(e,t,n){for(var i=0,o=0;o+e[i].value.length<t;)if(o+=e[i].value.length,i++,i==e.length)return;if(o!=t){var s=e[i].value.substring(t-o);s.length>n-t&&(s=s.substring(0,n-t)),r.push({type:e[i].type,value:s}),o=t+s.length,i+=1}for(;n>o&&i<e.length;){var s=e[i].value;s.length+o>n?r.push({type:e[i].type,value:s.substring(0,n-o)}):r.push(e[i]),o+=s.length,i+=1}}var i=this.session,r=[],o=i.getTokens(e);return t.walk(function(e,t,s,a,l){null!=e?r.push({type:"fold",value:e}):(l&&(o=i.getTokens(t)),o.length&&n(o,a,s))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i,r=e("../lib/dom"),o=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),void 0===i&&(i=!("opacity"in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(i?this.$updateVisibility:this.$updateOpacity).bind(this)};(function(){this.$updateVisibility=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)t[n].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e==this.smoothBlinking||i||(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),i=this.$padding+n.column*this.config.characterWidth,r=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:r}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,i=0;(void 0===t||0===t.length)&&(t=[{cursor:null}]);for(var n=0,r=t.length;r>n;n++){var o=this.getPixelPosition(t[n].cursor,!0);if(!((o.top>e.height+e.offset||o.top<0)&&n>1)){var s=(this.cursors[i++]||this.addCursor()).style;this.drawCursor?this.drawCursor(s,o,e,t[n],this.session):(s.left=o.left+"px",s.top=o.top+"px",s.width=e.characterWidth+"px",s.height=e.lineHeight+"px")}}for(;this.cursors.length>i;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(o.prototype),t.Cursor=o}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter,a=function(e){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(a.prototype);var l=function(e,t){a.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};i.inherits(l,a),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(l.prototype);var u=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(u,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(u.prototype),t.ScrollBar=l,t.ScrollBarV=l,t.ScrollBarH=u,t.VScrollBar=l,t.HScrollBar=u}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var i=e("./lib/event"),r=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending&&this.changes){this.pending=!0;var t=this;i.nextFrame(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}).call(r.prototype),t.RenderLoop=r}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var i=e("../lib/oop"),r=e("../lib/dom"),o=e("../lib/lang"),s=e("../lib/useragent"),a=e("../lib/event_emitter").EventEmitter,l=0,u=t.FontMetrics=function(e,t){this.el=r.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=r.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=r.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),l||this.$testFractionalRect(),this.$measureNode.innerHTML=o.stringRepeat("X",l),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){i.implement(this,a),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=r.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;l=t>0&&1>t?50:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",s.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50===l){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var n={height:e.height,width:e.width/l}}else var n={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/l};return 0===n.width||0===n.height?null:n},this.$measureCharWidth=function(e){this.$main.innerHTML=o.stringRepeat(e,l);var t=this.$main.getBoundingClientRect();return t.width/l},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(u.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop"),r=e("./lib/dom"),o=e("./config"),s=e("./lib/useragent"),a=e("./layer/gutter").Gutter,l=e("./layer/marker").Marker,u=e("./layer/text").Text,c=e("./layer/cursor").Cursor,d=e("./scrollbar").HScrollBar,h=e("./scrollbar").VScrollBar,f=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,g='.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}';r.importCssString(g,"ace_editor.css");var v=function(e,t){var n=this;this.container=e||r.createElement("div"),this.$keepTextAreaAtCursor=!s.isOldIE,r.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new l(this.content);var i=this.$textLayer=new u(this.content);this.canvas=i.element,this.$markerFront=new l(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,m),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var r=this.container;i||(i=r.clientHeight||r.scrollHeight),n||(n=r.clientWidth||r.scrollWidth);var o=this.$updateCachedSize(e,t,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,i){i-=this.$extraHeight||0;var r=0,o=this.$size,s={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return i&&(e||o.height!=i)&&(o.height=i,r|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",
r|=this.CHANGE_SCROLL),n&&(e||o.width!=n)&&(r|=this.CHANGE_SIZE,o.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(r|=this.CHANGE_FULL)),o.$dirty=!n||!i,r&&this._signal("resize",s),r},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=r.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var i=this.textarea.style,r=this.lineHeight;if(0>t||t>e.height-r)return void(i.top=i.left="0");var o=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");o*=this.session.$getStringScreenWidth(s)[0]+2,r+=2}n-=this.scrollLeft,n>this.$size.scrollerWidth-o&&(n=this.$size.scrollerWidth-o),n+=this.gutterWidth,i.height=r+"px",i.width=o+"px",i.left=Math.min(n,this.$size.scrollerWidth-o)+"px",i.top=Math.min(t,this.$size.height-r)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,i){var r=this.scrollMargin;r.top=0|e,r.bottom=0|t,r.right=0|i,r.left=0|n,r.v=r.top+r.bottom,r.h=r.left+r.right,r.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-r.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t)return void(this.$changes|=e);if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;i>0&&(this.scrollTop=i,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px"}return e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),void this._signal("afterRender"))},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight());var i=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var r=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,r,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength(),r=i*this.lineHeight,o=this.$getLongestLine(),s=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-o-2*this.$padding<0),a=this.$horizScroll!==s;a&&(this.$horizScroll=s,this.scrollBarH.setVisible(s));var l=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var u=this.scrollTop%this.lineHeight,c=t.scrollerHeight+this.lineHeight,d=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;r+=d;var h=this.scrollMargin;this.session.setScrollTop(Math.max(-h.top,Math.min(this.scrollTop,r-t.scrollerHeight+h.bottom))),this.session.setScrollLeft(Math.max(-h.left,Math.min(this.scrollLeft,o+2*this.$padding-t.scrollerWidth+h.right)));var f=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r+d<0||this.scrollTop>h.top),p=l!==f;p&&(this.$vScroll=f,this.scrollBarV.setVisible(f));var m,g,v=Math.ceil(c/this.lineHeight)-1,y=Math.max(0,Math.round((this.scrollTop-u)/this.lineHeight)),b=y+v,w=this.lineHeight;y=e.screenToDocumentRow(y,0);var C=e.getFoldLine(y);C&&(y=C.start.row),m=e.documentToScreenRow(y,0),g=e.getRowLength(y)*w,b=Math.min(e.screenToDocumentRow(b,0),e.getLength()-1),c=t.scrollerHeight+e.getRowLength(b)*w+g,u=this.scrollTop-m*w;var x=0;return this.layerConfig.width!=o&&(x=this.CHANGE_H_SCROLL),(a||p)&&(x=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),p&&(o=this.$getLongestLine())),this.layerConfig={width:o,padding:this.$padding,firstRow:y,firstRowScreen:m,lastRow:b,lineHeight:w,characterWidth:this.characterWidth,minHeight:c,maxHeight:r,offset:u,gutterOffset:Math.max(0,Math.ceil((u+t.height-t.scrollerHeight)/w)),height:this.$size.scrollerHeight},x},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;return e>n.lastRow+1||t<n.firstRow?void 0:t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),r=i.left,o=i.top,s=n&&n.top||0,a=n&&n.bottom||0,l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+s>o?(t&&(o-=t*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):l+this.$size.scrollerHeight-a<o+this.lineHeight&&(t&&(o+=t*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight));var u=this.scrollLeft;u>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):u+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):u<=this.$padding&&r-u<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),i=this.$size.scrollerHeight-this.lineHeight,r=n.top-i*(t||0);return this.session.setScrollTop(r),r},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,i=this.STEPS,r=[],o=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;i>n;++n)r.push(o(n/this.STEPS,e,t-e));return r},this.scrollToLine=function(e,t,n,i){var r=this.$cursorLayer.getPixelPosition({row:e,column:0}),o=r.top;t&&(o-=this.$size.scrollerHeight/2);var s=this.scrollTop;this.session.setScrollTop(o),n!==!1&&this.animateScrolling(s,i)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(e!=n){if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length&&(e=r[0],e==n))return}var o=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:o},clearInterval(this.$timer),i.session.setScrollTop(o.shift()),i.session.$scrollTop=n,this.$timer=setInterval(function(){o.length?(i.session.setScrollTop(o.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):(i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return 0>t&&this.session.getScrollTop()>=1-this.scrollMargin.top?!0:t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom?!0:0>e&&this.session.getScrollLeft()>=1-this.scrollMargin.left?!0:e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right?!0:void 0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,r=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),o=Math.round(i);return{row:r,column:o,side:i-o>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),r=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(r,Math.max(i,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),r=this.$padding+Math.round(i.column*this.characterWidth),o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(r.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(e,t){function n(n){if(i.$themeId!=e)return t&&t();if(n.cssClass){r.importCssString(n.cssText,n.cssClass,i.container.ownerDocument),i.theme&&r.removeCssClass(i.container,i.theme.cssClass);var o="padding"in n?n.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&o!=i.$padding&&i.setPadding(o),i.$theme=n.cssClass,i.theme=n,r.addCssClass(i.container,n.cssClass),r.setCssClass(i.container,"ace_dark",n.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:n}),t&&t()}}var i=this;if(this.$themeId=e,i._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)n(e);else{var s=e||this.$options.theme.initialValue;o.loadModule(["theme",s],n)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){r.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){r.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.scroller.style.cursor!=e&&(this.scroller.style.cursor=e)},this.setMouseCursor=function(e){this.scroller.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(v.prototype),o.defineOptions(v.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=e?"":"none",void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=r.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight))},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=v}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/net"),o=e("../lib/event_emitter").EventEmitter,s=e("../config"),a=function(t,n,i,r){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)r=r||s.moduleUrl(n,"worker");else{var o=this.$normalizePath;r=r||o(e.toUrl("ace/worker/worker.js",null,"_"));var a={};t.forEach(function(t){a[t]=o(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(r)}catch(l){if(!(l instanceof window.DOMException))throw l;var u=this.$workerBlob(r),c=window.URL||window.webkitURL,d=c.createObjectURL(u);this.$worker=new Worker(d),c.revokeObjectURL(d)}this.$worker.postMessage({init:!0,tlns:a,module:n,classname:i}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,o),this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return r.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))},this.$workerBlob=function(e){var t="importScripts('"+r.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,o=new i;return o.append(t),o.getBlob("application/javascript")}}}).call(a.prototype);var l=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var i=null,r=!1,a=Object.create(o),l=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){l.messageBuffer.push(e),i&&(r?setTimeout(u):u())},this.setEmitSync=function(e){r=e};var u=function(){var e=l.messageBuffer.shift();e.command?i[e.command].apply(i,e.args):e.event&&a._signal(e.event,e.data)};a.postMessage=function(e){l.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],function(e){for(i=new e[n](a);l.messageBuffer.length;)u()})};l.prototype=a.prototype,t.UIWorkerClient=l,t.WorkerClient=a}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var i=e("./range").Range,r=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),s=function(e,t,n,i,r,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=r,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=i,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,r),this.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=n.addMarker(new i(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),e.others.push(i)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,r=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,o=t.start.column-this.pos.column;if(this.updateAnchors(e),r&&(this.length+=n),r&&!this.session.$fromUndo)if("insert"===e.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],l={row:a.row,column:a.column+o};this.doc.insertMergedLines(l,e.lines)}else if("remove"===e.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],l={row:a.row,column:a.column+o};this.doc.remove(new i(l.row,l.column,l.row,l.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,r){t.removeMarker(n.markerId),n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),r,null,!1)};n(this.pos,this.mainClass);for(var r=this.others.length;r--;)n(this.others[r],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;t>n;n++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),t.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function r(e){var t=e.domEvent,n=t.altKey,r=t.shiftKey,a=t.ctrlKey,l=e.getAccelKey(),u=e.getButton();if(a&&s.isMac&&(u=t.button),e.editor.inMultiSelectMode&&2==u)return void e.editor.textInput.onContextMenu(e.domEvent);if(!a&&!n&&!l)return void(0===u&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode());if(0===u){var c,d=e.editor,h=d.selection,f=d.inMultiSelectMode,p=e.getDocumentPosition(),m=h.getCursor(),g=e.inSelection()||h.isEmpty()&&i(p,m),v=e.x,y=e.y,b=function(e){v=e.clientX,y=e.clientY},w=d.session,C=d.renderer.pixelToScreenCoordinates(v,y),x=C;if(d.$mouseHandler.$enableJumpToDef)a&&n||l&&n?c=r?"block":"add":n&&d.$blockSelectEnabled&&(c="block");else if(l&&!n){if(c="add",!f&&r)return}else n&&d.$blockSelectEnabled&&(c="block");if(c&&s.isMac&&t.ctrlKey&&d.$mouseHandler.cancelContextMenu(),"add"==c){if(!f&&g)return;if(!f){var S=h.toOrientedRange();d.addSelectionMarker(S)}var A=h.rangeList.rangeAtPoint(p);d.$blockScrolling++,d.inVirtualSelectionMode=!0,r&&(A=null,S=h.ranges[0]||S,d.removeSelectionMarker(S)),d.once("mouseup",function(){var e=h.toOrientedRange();A&&e.isEmpty()&&i(A.cursor,e.cursor)?h.substractPoint(e.cursor):(r?h.substractPoint(S.cursor):S&&(d.removeSelectionMarker(S),h.addRange(S)),h.addRange(e)),d.$blockScrolling--,d.inVirtualSelectionMode=!1})}else if("block"==c){e.stop(),d.inVirtualSelectionMode=!0;var _,E=[],$=function(){var e=d.renderer.pixelToScreenCoordinates(v,y),t=w.screenToDocumentPosition(e.row,e.column);i(x,e)&&i(t,h.lead)||(x=e,d.$blockScrolling++,d.selection.moveToPosition(t),d.renderer.scrollCursorIntoView(),d.removeSelectionMarkers(E),E=h.rectangularRangeBlock(x,C),d.$mouseHandler.$clickSelection&&1==E.length&&E[0].isEmpty()&&(E[0]=d.$mouseHandler.$clickSelection.clone()),E.forEach(d.addSelectionMarker,d),d.updateSelectionMarkers(),d.$blockScrolling--)};d.$blockScrolling++,f&&!l?h.toSingleRange():!f&&l&&(_=h.toOrientedRange(),d.addSelectionMarker(_)),r?C=w.documentToScreenPosition(h.lead):h.moveToPosition(p),d.$blockScrolling--,x={row:-1,column:-1};var k=function(e){clearInterval(T),d.removeSelectionMarkers(E),E.length||(E=[h.toOrientedRange()]),d.$blockScrolling++,_&&(d.removeSelectionMarker(_),h.toSingleRange(_));for(var t=0;t<E.length;t++)h.addRange(E[t]);d.inVirtualSelectionMode=!1,d.$mouseHandler.$clickSelection=null,d.$blockScrolling--},D=$;o.capture(d.container,b,k);var T=setInterval(function(){D()},20);return e.preventDefault()}}}var o=e("../lib/event"),s=e("../lib/useragent");t.onMouseDown=r}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0
},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function i(e,t,n){return m.$options.wrap=!0,m.$options.needle=t,m.$options.backwards=-1==n,m.find(e)}function r(e,t){return e.row==t.row&&e.column==t.column}function o(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",c),e.commands.addCommands(f.defaultCommands),s(e))}function s(e){function t(t){i&&(e.renderer.setMouseCursor(""),i=!1)}var n=e.textInput.getElement(),i=!1;d.addListener(n,"keydown",function(n){var r=18==n.keyCode&&!(n.ctrlKey||n.shiftKey||n.metaKey);e.$blockSelectEnabled&&r?i||(e.renderer.setMouseCursor("crosshair"),i=!0):i&&t()}),d.addListener(n,"keyup",t),d.addListener(n,"blur",t)}var a=e("./range_list").RangeList,l=e("./range").Range,u=e("./selection").Selection,c=e("./mouse/multi_select_handler").onMouseDown,d=e("./lib/event"),h=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var p=e("./search").Search,m=new p,g=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(g.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);return t?(this.$onRemoveRange(t),t[0]):void 0},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=l.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),i=this.isBackwards(),r=n.start.row,o=n.end.row;if(r==o){if(i)var s=n.end,a=n.start;else var s=n.start,a=n.end;return this.addRange(l.fromPoints(a,a)),void this.addRange(l.fromPoints(s,s))}var u=[],c=this.getLineRange(r,!0);c.start.column=n.start.column,u.push(c);for(var d=r+1;o>d;d++)u.push(this.getLineRange(d,!0));c=this.getLineRange(o,!0),c.end.column=n.end.column,u.push(c),u.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=l.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.selectionLead),r=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(i,r);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var i=[],o=e.column<t.column;if(o)var s=e.column,a=t.column;else var s=t.column,a=e.column;var u=e.row<t.row;if(u)var c=e.row,d=t.row;else var c=t.row,d=e.row;0>s&&(s=0),0>c&&(c=0),c==d&&(n=!0);for(var h=c;d>=h;h++){var f=l.fromPoints(this.session.screenToDocumentPosition(h,s),this.session.screenToDocumentPosition(h,a));if(f.isEmpty()){if(p&&r(f.end,p))break;var p=f.end}f.cursor=o?f.start:f.end,i.push(f)}if(u&&i.reverse(),!n){for(var m=i.length-1;i[m].isEmpty()&&m>0;)m--;if(m>0)for(var g=0;i[g].isEmpty();)g++;for(var v=m;v>=g;v--)i[v].isEmpty()&&i.splice(v,1)}return i}}.call(u.prototype);var v=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var r=t.indexOf(i);-1!=r&&t.splice(r,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?i=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?i=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),i=t.exec(n,e.args||{})):i=t.multiSelectAction(n,e.args||{});else{var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var i,r=n&&n.keepOrder,o=1==n||n&&n.$byLines,s=this.session,a=this.selection,l=a.rangeList,c=(r?a:l).ranges;if(!c.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var d=a._eventRegistry;a._eventRegistry={};var h=new u(s);this.inVirtualSelectionMode=!0;for(var f=c.length;f--;){if(o)for(;f>0&&c[f].start.row==c[f-1].end.row;)f--;h.fromOrientedRange(c[f]),h.index=f,this.selection=s.selection=h;var p=e.exec?e.exec(this,t||{}):e(this,t||{});i||void 0===p||(i=p),h.toOrientedRange(c[f])}h.detach(),this.selection=s.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=d,a.mergeOverlappingRanges();var m=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),m&&m.from==m.to&&this.renderer.animateScrolling(m.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],i=0;i<t.length;i++)n.push(this.session.getTextRange(t[i]));var r=this.session.getDocument().getNewLineCharacter();e=n.join(r),e.length==(n.length-1)*r.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;(i.row!=t.row||this.session.$clipPositionToDocument(i.row,i.column).column!=t.column)&&this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(e,t,n){if(t=t||{},t.needle=e||t.needle,void 0==t.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;n||o.toSingleRange(r[0]);for(var s=r.length;s--;)o.addRange(r[s],!0);return i&&o.rangeList.rangeAtPoint(i.start)&&o.addRange(i,!0),this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(r.row+e,r.column);if(n.isEmpty())var s=o;else var a=this.session.documentToScreenPosition(i?n.end:n.start),s=this.session.screenToDocumentPosition(a.row+e,a.column);if(i){var u=l.fromPoints(o,s);u.cursor=u.start}else{var u=l.fromPoints(s,o);u.cursor=u.end}if(u.desiredColumn=r.column,this.selection.inMultiSelectMode){if(t)var c=n.cursor}else this.selection.addRange(n);this.selection.addRange(u),c&&this.selection.substractPoint(c)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,r=i.length;r--;){var o=i[r];if(o.isEmpty()){var s=t.getWordRange(o.start.row,o.start.column);o.start.row=s.start.row,o.start.column=s.start.column,o.end.row=s.end.row,o.end.column=s.end.column}}n.mergeOverlappingRanges();for(var a=[],r=i.length;r--;){var o=i[r];a.unshift(t.getTextRange(o))}0>e?a.unshift(a.pop()):a.push(a.shift());for(var r=i.length;r--;){var o=i[r],s=o.clone();t.replace(o,a[r]),o.start.row=s.start.row,o.start.column=s.start.column}},this.selectMore=function(e,t,n){var r=this.session,o=r.multiSelect,s=o.toOrientedRange();if(!s.isEmpty()||(s=r.getWordRange(s.start.row,s.start.column),s.cursor=-1==e?s.start:s.end,this.multiSelect.addRange(s),!n)){var a=r.getTextRange(s),l=i(r,a,e);l&&(l.cursor=-1==e?l.start:l.end,this.$blockScrolling+=1,this.session.unfold(l),this.multiSelect.addRange(l),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,i=-1,r=n.filter(function(e){return e.cursor.row==i?!0:void(i=e.cursor.row)});if(n.length&&r.length!=n.length-1){r.forEach(function(e){t.substractPoint(e.cursor)});var o=0,s=1/0,a=n.map(function(t){var n=t.cursor,i=e.getLine(n.row),r=i.substr(n.column).search(/\S/g);return-1==r&&(r=0),n.column>o&&(o=n.column),s>r&&(s=r),r});n.forEach(function(t,n){var i=t.cursor,r=o-i.column,u=a[n]-s;r>u?e.insert(i,h.stringRepeat(" ",r-u)):e.remove(new l(i.row,i.column,i.row,i.column-r+u)),t.start.column=t.end.column=o,t.start.row=t.end.row=i.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),c=u.start.row,d=u.end.row,f=c==d;if(f){var p,m=this.session.getLength();do p=this.session.getLine(d);while(/[=:]/.test(p)&&++d<m);do p=this.session.getLine(c);while(/[=:]/.test(p)&&--c>0);0>c&&(c=0),d>=m&&(d=m-1)}var g=this.session.removeFullLines(c,d);g=this.$reAlignText(g,f),this.session.insert({row:c,column:0},g.join("\n")+"\n"),f||(u.start.column=0,u.end.column=g[g.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(e,t){function n(e){return h.stringRepeat(" ",e)}function i(e){return e[2]?n(s)+e[2]+n(a-e[2].length+l)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function r(e){return e[2]?n(s+a-e[2].length)+e[2]+n(l," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function o(e){return e[2]?n(s)+e[2]+n(l)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var s,a,l,u=!0,c=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==s?(s=t[1].length,a=t[2].length,l=t[3].length,t):(s+a+l!=t[1].length+t[2].length+t[3].length&&(c=!1),s!=t[1].length&&(u=!1),s>t[1].length&&(s=t[1].length),a<t[2].length&&(a=t[2].length),l>t[3].length&&(l=t[3].length),t):[e]}).map(t?i:u?c?r:i:o)}}).call(v.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=o,e("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(e){o(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",c)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",c))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../../range").Range,r=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var r=/\S/,o=e.getLine(t),s=o.search(r);if(-1!=s){for(var a=n||o.length,l=e.getLength(),u=t,c=t;++t<l;){var d=e.getLine(t).search(r);if(-1!=d){if(s>=d)break;c=t}}if(c>u){var h=e.getLine(c).length;return new i(u,a,c,h)}}},this.openingBracketBlock=function(e,t,n,r,o){var s={row:n,column:r+1},a=e.$findClosingBracket(t,s,o);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,n,r,o){var s={row:n,column:r},a=e.$findOpeningBracket(t,s);return a?(a.column++,s.column--,i.fromPoints(a,s)):void 0}}).call(r.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var i=e("../lib/dom");i.importCssString(t.cssText,t.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var r=(e("./lib/oop"),e("./lib/dom"));e("./range").Range;(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets?this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var i=e.data,r=i.start.row,o=i.end.row,s="add"==e.action,a=r+1;o>a;a++)n[a]&&(n[a].hidden=s);n[o]&&(s?n[r]?n[o].hidden=s:n[r]=n[o]:(n[r]==n[o]&&(n[r]=void 0),n[o].hidden=s))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,i=e.end.row-n;if(0===i);else if("remove"==e.action){var r=t.splice(n+1,i);r.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var o=new Array(i);o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var n=this.editor.renderer;e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,n.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/n.layerConfig.lineHeight);var i=this.session.getFoldAt(e.row,0);if(e.$fold=i,i){var o=this.session.lineWidgets;e.row!=i.end.row||o[i.start.row]?e.hidden=!0:o[i.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,n),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}if(this.session.lineWidgets){var n=this.session.lineWidgets[e.row];if(n==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;n;){if(n.$oldWidget==e){n.$oldWidget=e.$oldWidget;break}n=n.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],i=[];n;)i.push(n),n=n.$oldWidget;return i},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,i=t.layerConfig;if(n&&n.length){for(var r=1/0,o=0;o<n.length;o++){var s=n[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var a=s.h/i.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row),0>a&&(a=0)),s.rowCount!=a&&(s.rowCount=a,s.row<r&&(r=s.row))}}r!=1/0&&(this.session._emit("changeFold",{data:{start:{row:r}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,i=this.session.lineWidgets;if(i){for(var r=Math.min(this.firstRow,n.firstRow),o=Math.max(this.lastRow,n.lastRow,i.length);r>0&&!i[r];)r--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var s=r;o>=s;s++){var a=i[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";var u=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(u-=t.scrollLeft),a.el.style.left=u+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),t.LineWidgets=i}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function i(e,t,n){for(var i=0,r=e.length-1;r>=i;){var o=i+r>>1,s=n(t,e[o]);if(s>0)i=o+1;else{if(!(0>s))return o;r=o-1}}return-(i+1)}function r(e,t,n){var r=e.getAnnotations().sort(a.comparePoints);if(r.length){var o=i(r,{row:t,column:-1},a.comparePoints);0>o&&(o=-o-1),o>=r.length?o=n>0?0:r.length-1:0===o&&0>n&&(o=r.length-1);var s=r[o];if(s&&n){if(s.row===t){do s=r[o+=n];while(s&&s.row===t);if(!s)return r.slice()}var l=[];t=s.row;do l[0>n?"unshift":"push"](s),s=r[o+=n];while(s&&s.row==t);return l.length&&l}}}var o=e("../line_widgets").LineWidgets,s=e("../lib/dom"),a=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new o(n),n.widgetManager.attach(e));var i=e.getCursorPosition(),a=i.row,l=n.widgetManager.getWidgetsAtRow(a).filter(function(e){return"errorMarker"==e.type})[0];l?l.destroy():a-=t;var u,c=r(n,a,t);if(c){var d=c[0];i.column=(d.pos&&"number"!=typeof d.column?d.pos.sc:d.column)||0,i.row=d.row,u=e.renderer.$gutterLayer.$annotations[i.row]}else{if(l)return;u={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(i.row),e.selection.moveToPosition(i);var h={row:i.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},f=h.el.appendChild(s.createElement("div")),p=h.el.appendChild(s.createElement("div"));p.className="error_widget_arrow "+u.className;var m=e.renderer.$cursorLayer.getPixelPosition(i).left;p.style.left=m+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",f.className="error_widget "+u.className,f.innerHTML=u.text.join("<br>"),f.appendChild(s.createElement("div"));var g=function(e,t,n){return 0!==t||"esc"!==n&&"return"!==n?void 0:(h.destroy(),{command:"null"})};h.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(g),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy))},e.keyBinding.addKeyboardHandler(g),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},s.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/dom"),r=e("./lib/event"),o=e("./editor").Editor,s=e("./edit_session").EditSession,a=e("./undomanager").UndoManager,l=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if("string"==typeof e){var n=e;if(e=document.getElementById(n),!e)throw new Error("ace.edit can't find div #"+n)}if(e&&e.env&&e.env.editor instanceof o)return e.env.editor;var s="";if(e&&/input|textarea/i.test(e.tagName)){var a=e;s=a.value,e=i.createElement("pre"),a.parentNode.replaceChild(e,a)}else e&&(s=i.getInnerText(e),e.innerHTML="");var u=t.createEditSession(s),c=new o(new l(e));c.setSession(u);var d={document:u,editor:c,onResize:c.resize.bind(c,null)};return a&&(d.textarea=a),r.addListener(window,"resize",d.onResize),c.on("destroy",function(){r.removeListener(window,"resize",d.onResize),d.editor.container.env=null}),c.container.env=c.env=d,c},t.createEditSession=function(e,t){var n=new s(e,t);return n.setUndoManager(new a),n},t.EditSession=s,t.UndoManager=a,t.version="1.2.2"}),function(){ace.require(["ace/ace"],function(e){e&&e.config.init(!0),window.ace||(window.ace=e);for(var t in e)e.hasOwnProperty(t)&&(window.ace[t]=e[t])})}(),ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},o.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};i.inherits(o,r),o.getTagRule=function(e){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},o.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},o.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=o}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";function i(){var e=a.replace("\\d","\\d\\-"),t={onMatch:function(e,t,n){var i="/"==e.charAt(1)?2:1;return 1==i?(t!=this.nextState?n.unshift(this.next,this.nextState,0):n.unshift(this.next),n[2]++):2==i&&t==this.nextState&&(n[1]--,(!n[1]||n[1]<0)&&(n.shift(),n.shift())),[{type:"meta.tag.punctuation."+(1==i?"":"end-")+"tag-open.xml",
value:e.slice(0,i)},{type:"meta.tag.tag-name.xml",value:e.substr(i)}]},regex:"</?"+e,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(t);var n={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[n,t,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(e,t,n){return t==n[0]&&n.shift(),2==e.length&&(n[0]==this.nextState&&n[1]--,(!n[1]||n[1]<0)&&n.splice(0,2)),this.next=n[0]||"start",[{type:this.token,value:e}]},nextState:"jsx"},n,{token:"entity.other.attribute-name.xml",regex:e},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},n,{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[n,{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]}],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}var r=e("../lib/oop"),o=e("./doc_comment_highlight_rules").DocCommentHighlightRules,s=e("./text_highlight_rules").TextHighlightRules,a="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b",l=function(e){var t=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),n="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",r="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},o.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+a+")(\\.)(prototype)(\\.)("+a+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+a+")(\\.)("+a+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+a+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+a+")(\\.)("+a+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+a+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+a+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+n+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:t,regex:a},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+a+")(\\.)("+a+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:a},{regex:"",token:"empty",next:"no_regex"}],start:[o.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:a},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[o.getTagRule(),{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment",caseInsensitive:!0}],comment:[o.getTagRule(),{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment",caseInsensitive:!0}],line_comment_regex_allowed:[o.getTagRule(),{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment",caseInsensitive:!0}],line_comment:[o.getTagRule(),{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment",caseInsensitive:!0}],qqstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:r},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},e&&e.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(e,t,n){return this.next="{"==e?this.nextState:"","{"==e&&n.length?(n.unshift("start",t),"paren"):"}"==e&&n.length&&(n.shift(),this.next=n.shift(),-1!=this.next.indexOf("string")||-1!=this.next.indexOf("jsx"))?"paren.quasi.end":"{"==e?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:r},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),e&&e.noJSX||i.call(this)),this.embedRules(o,"doc-",[o.getEndRule("no_regex")]),this.normalizeRules()};r.inherits(l,s),t.JavaScriptHighlightRules=l}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../range").Range,r=function(){};(function(){this.checkOutdent=function(e,t){return/^\s+$/.test(e)?/^\s*\}/.test(t):!1},this.autoOutdent=function(e,t){var n=e.getLine(t),r=n.match(/^(\s*\})/);if(!r)return 0;var o=r[1].length,s=e.findMatchingBracket({row:t,column:o});if(!s||s.row==t)return 0;var a=this.$getIndent(e.getLine(s.row));e.replace(new i(t,0,t,o-1),a)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype),t.MatchingBraceOutdent=r}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var i,r=e("../../lib/oop"),o=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),l=["text","paren.rparen","punctuation.operator"],u=["text","paren.rparen","punctuation.operator","comment"],c={},d=function(e){var t=-1;return e.multiSelect&&(t=e.selection.index,c.rangeCount!=e.multiSelect.rangeCount&&(c={rangeCount:e.multiSelect.rangeCount})),c[t]?i=c[t]:void(i=c[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},h=function(e,t,n,i){var r=e.end.row-e.start.row;return{text:n+t+i,selection:[0,e.start.column+1,r,e.end.column+(r?0:1)]}},f=function(){this.add("braces","insertion",function(e,t,n,r,o){var s=n.getCursorPosition(),l=r.doc.getLine(s.row);if("{"==o){d(n);var u=n.getSelectionRange(),c=r.doc.getTextRange(u);if(""!==c&&"{"!==c&&n.getWrapBehavioursEnabled())return h(u,c,"{","}");if(f.isSaneInsertion(n,r))return/[\]\}\)]/.test(l[s.column])||n.inMultiSelectMode?(f.recordAutoInsert(n,r,"}"),{text:"{}",selection:[1,1]}):(f.recordMaybeInsert(n,r,"{"),{text:"{",selection:[1,1]})}else if("}"==o){d(n);var p=l.substring(s.column,s.column+1);if("}"==p){var m=r.$findOpeningBracket("}",{column:s.column+1,row:s.row});if(null!==m&&f.isAutoInsertedClosing(s,l,o))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==o||"\r\n"==o){d(n);var g="";f.isMaybeInsertedClosing(s,l)&&(g=a.stringRepeat("}",i.maybeInsertedBrackets),f.clearMaybeInsertedClosing());var p=l.substring(s.column,s.column+1);if("}"===p){var v=r.findMatchingBracket({row:s.row,column:s.column+1},"}");if(!v)return null;var y=this.$getIndent(r.getLine(v.row))}else{if(!g)return void f.clearMaybeInsertedClosing();var y=this.$getIndent(l)}var b=y+r.getTabString();return{text:"\n"+b+"\n"+y+g,selection:[1,b.length,1,b.length]}}f.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,r,o){var s=r.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){d(n);var a=r.doc.getLine(o.start.row),l=a.substring(o.end.column,o.end.column+1);if("}"==l)return o.end.column++,o;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,i,r){if("("==r){d(n);var o=n.getSelectionRange(),s=i.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return h(o,s,"(",")");if(f.isSaneInsertion(n,i))return f.recordAutoInsert(n,i,")"),{text:"()",selection:[1,1]}}else if(")"==r){d(n);var a=n.getCursorPosition(),l=i.doc.getLine(a.row),u=l.substring(a.column,a.column+1);if(")"==u){var c=i.$findOpeningBracket(")",{column:a.column+1,row:a.row});if(null!==c&&f.isAutoInsertedClosing(a,l,r))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"("==o){d(n);var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if(")"==a)return r.end.column++,r}}),this.add("brackets","insertion",function(e,t,n,i,r){if("["==r){d(n);var o=n.getSelectionRange(),s=i.doc.getTextRange(o);if(""!==s&&n.getWrapBehavioursEnabled())return h(o,s,"[","]");if(f.isSaneInsertion(n,i))return f.recordAutoInsert(n,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==r){d(n);var a=n.getCursorPosition(),l=i.doc.getLine(a.row),u=l.substring(a.column,a.column+1);if("]"==u){var c=i.$findOpeningBracket("]",{column:a.column+1,row:a.row});if(null!==c&&f.isAutoInsertedClosing(a,l,r))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&"["==o){d(n);var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if("]"==a)return r.end.column++,r}}),this.add("string_dquotes","insertion",function(e,t,n,i,r){if('"'==r||"'"==r){d(n);var o=r,s=n.getSelectionRange(),a=i.doc.getTextRange(s);if(""!==a&&"'"!==a&&'"'!=a&&n.getWrapBehavioursEnabled())return h(s,a,o,o);if(!a){var l=n.getCursorPosition(),u=i.doc.getLine(l.row),c=u.substring(l.column-1,l.column),f=u.substring(l.column,l.column+1),p=i.getTokenAt(l.row,l.column),m=i.getTokenAt(l.row,l.column+1);if("\\"==c&&p&&/escape/.test(p.type))return null;var g,v=p&&/string|escape/.test(p.type),y=!m||/string|escape/.test(m.type);if(f==o)g=v!==y;else{if(v&&!y)return null;if(v&&y)return null;var b=i.$mode.tokenRe;b.lastIndex=0;var w=b.test(c);b.lastIndex=0;var C=b.test(c);if(w||C)return null;if(f&&!/[\s;,.})\]\\]/.test(f))return null;g=!0}return{text:g?o+o:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==o||"'"==o)){d(n);var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if(a==o)return r.end.column++,r}})};f.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),i=new s(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",l)){var r=new s(t,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",l))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",u)},f.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},f.recordAutoInsert=function(e,t,n){var r=e.getCursorPosition(),o=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,o,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=r.row,i.autoInsertedLineEnd=n+o.substr(r.column),i.autoInsertedBrackets++},f.recordMaybeInsert=function(e,t,n){var r=e.getCursorPosition(),o=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,o)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=r.row,i.maybeInsertedLineStart=o.substr(0,r.column)+n,i.maybeInsertedLineEnd=o.substr(r.column),i.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(e,t,n){return i.autoInsertedBrackets>0&&e.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&t.substr(e.column)===i.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(e,t){return i.maybeInsertedBrackets>0&&e.row===i.maybeInsertedRow&&t.substr(e.column)===i.maybeInsertedLineEnd&&t.substr(0,e.column)==i.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(f,o),t.CstyleBehaviour=f}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("../../range").Range,o=e("./fold_mode").FoldMode,s=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(s,o),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var r=this._getFoldWidgetBase(e,t,n);return!r&&this.startRegionRe.test(i)?"start":r},this.getFoldWidgetRange=function(e,t,n,i){var r=e.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,n);var o=r.match(this.foldingStartMarker);if(o){var s=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,s);var a=e.getCommentFoldRange(n,s+o[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(e,n):"all"!=t&&(a=null)),a}if("markbegin"!==t){var o=r.match(this.foldingStopMarker);if(o){var s=o.index+o[0].length;return o[1]?this.closingBracketBlock(e,o[1],n,s):e.getCommentFoldRange(n,s,-1)}}},this.getSectionRange=function(e,t){var n=e.getLine(t),i=n.search(/\S/),o=t,s=n.length;t+=1;for(var a=t,l=e.getLength();++t<l;){n=e.getLine(t);var u=n.search(/\S/);if(-1!==u){if(i>u)break;var c=this.getFoldWidgetRange(e,"all",t);if(c){if(c.start.row<=o)break;if(c.isMultiLine())t=c.end.row;else if(i==u)break}a=t}}return new r(o,s,a,e.getLine(a).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),o=e.getLength(),s=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<o;){t=e.getLine(n);var u=a.exec(t);if(u&&(u[1]?l--:l++,!l))break}var c=n;return c>s?new r(s,i,c,t.length):void 0}}.call(s.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text").Mode,o=e("./javascript_highlight_rules").JavaScriptHighlightRules,s=e("./matching_brace_outdent").MatchingBraceOutdent,a=(e("../range").Range,e("../worker/worker_client").WorkerClient),l=e("./behaviour/cstyle").CstyleBehaviour,u=e("./folding/cstyle").FoldMode,c=function(){this.HighlightRules=o,this.$outdent=new s,this.$behaviour=new l,this.foldingRules=new u};i.inherits(c,r),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),r=this.getTokenizer().getLineTokens(t,e),o=r.tokens,s=r.state;if(o.length&&"comment"==o[o.length-1].type)return i;if("start"==e||"no_regex"==e){var a=t.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);a&&(i+=n)}else if("doc-start"==e){if("start"==s||"no_regex"==s)return"";var a=t.match(/^\s*(\/?)\*/);a&&(a[1]&&(i+=" "),i+="* ")}return i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new a(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/javascript"}.call(c.prototype),t.Mode=c}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=(e("../lib/lang"),e("./text_highlight_rules").TextHighlightRules),o=t.supportType="animation-fill-mode|alignment-adjust|alignment-baseline|animation-delay|animation-direction|animation-duration|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|animation|appearance|azimuth|backface-visibility|background-attachment|background-break|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|background|baseline-shift|binding|bleed|bookmark-label|bookmark-level|bookmark-state|bookmark-target|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|border|bottom|box-align|box-decoration-break|box-direction|box-flex-group|box-flex|box-lines|box-ordinal-group|box-orient|box-pack|box-shadow|box-sizing|break-after|break-before|break-inside|caption-side|clear|clip|color-profile|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|crop|cue-after|cue-before|cue|cursor|direction|display|dominant-baseline|drop-initial-after-adjust|drop-initial-after-align|drop-initial-before-adjust|drop-initial-before-align|drop-initial-size|drop-initial-value|elevation|empty-cells|fit|fit-position|float-offset|float|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|font|grid-columns|grid-rows|hanging-punctuation|height|hyphenate-after|hyphenate-before|hyphenate-character|hyphenate-lines|hyphenate-resource|hyphens|icon|image-orientation|image-rendering|image-resolution|inline-box-align|left|letter-spacing|line-height|line-stacking-ruby|line-stacking-shift|line-stacking-strategy|line-stacking|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|margin|mark-after|mark-before|mark|marks|marquee-direction|marquee-play-count|marquee-speed|marquee-style|max-height|max-width|min-height|min-width|move-to|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|orphans|outline-color|outline-offset|outline-style|outline-width|outline|overflow-style|overflow-x|overflow-y|overflow|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page-policy|page|pause-after|pause-before|pause|perspective-origin|perspective|phonemes|pitch-range|pitch|play-during|pointer-events|position|presentation-level|punctuation-trim|quotes|rendering-intent|resize|rest-after|rest-before|rest|richness|right|rotation-point|rotation|ruby-align|ruby-overhang|ruby-position|ruby-span|size|speak-header|speak-numeral|speak-punctuation|speak|speech-rate|stress|string-set|table-layout|target-name|target-new|target-position|target|text-align-last|text-align|text-decoration|text-emphasis|text-height|text-indent|text-justify|text-outline|text-shadow|text-transform|text-wrap|top|transform-origin|transform-style|transform|transition-delay|transition-duration|transition-property|transition-timing-function|transition|unicode-bidi|vertical-align|visibility|voice-balance|voice-duration|voice-family|voice-pitch-range|voice-pitch|voice-rate|voice-stress|voice-volume|volume|white-space-collapse|white-space|widows|width|word-break|word-spacing|word-wrap|z-index",s=t.supportFunction="rgb|rgba|url|attr|counter|counters",a=t.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero",l=t.supportConstantColor="aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow",u=t.supportConstantFonts="arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace",c=t.numRe="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))",d=t.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b",h=t.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b",f=function(){var e=this.createKeywordMapper({"support.function":s,"support.constant":a,"support.type":o,"support.constant.color":l,"support.constant.fonts":u},"text",!0);this.$rules={start:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"@.*?{",push:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],media:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"\\}",next:"pop"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],comment:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}],ruleset:[{token:"paren.rparen",regex:"\\}",next:"pop"},{token:"comment",regex:"\\/\\*",push:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:["constant.numeric","keyword"],regex:"("+c+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"},{token:"constant.numeric",regex:c},{token:"constant.numeric",regex:"#[a-f0-9]{6}"
},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:d},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:h},{token:["support.function","string","support.function"],regex:"(url\\()(.*)(\\))"},{token:e,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:!0}]},this.normalizeRules()};i.inherits(f,r),t.CssHighlightRules=f}),ace.define("ace/mode/css_completions",["require","exports","module"],function(e,t,n){"use strict";var i={background:{"#$0":1},"background-color":{"#$0":1,transparent:1,fixed:1},"background-image":{"url('/$0')":1},"background-repeat":{repeat:1,"repeat-x":1,"repeat-y":1,"no-repeat":1,inherit:1},"background-position":{bottom:2,center:2,left:2,right:2,top:2,inherit:2},"background-attachment":{scroll:1,fixed:1},"background-size":{cover:1,contain:1},"background-clip":{"border-box":1,"padding-box":1,"content-box":1},"background-origin":{"border-box":1,"padding-box":1,"content-box":1},border:{"solid $0":1,"dashed $0":1,"dotted $0":1,"#$0":1},"border-color":{"#$0":1},"border-style":{solid:2,dashed:2,dotted:2,"double":2,groove:2,hidden:2,inherit:2,inset:2,none:2,outset:2,ridged:2},"border-collapse":{collapse:1,separate:1},bottom:{px:1,em:1,"%":1},clear:{left:1,right:1,both:1,none:1},color:{"#$0":1,"rgb(#$00,0,0)":1},cursor:{"default":1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,"n-resize":1,"ne-resize":1,"e-resize":1,"se-resize":1,"s-resize":1,"sw-resize":1,"w-resize":1,"nw-resize":1},display:{none:1,block:1,inline:1,"inline-block":1,"table-cell":1},"empty-cells":{show:1,hide:1},"float":{left:1,right:1,none:1},"font-family":{Arial:2,"Comic Sans MS":2,Consolas:2,"Courier New":2,Courier:2,Georgia:2,Monospace:2,"Sans-Serif":2,"Segoe UI":2,Tahoma:2,"Times New Roman":2,"Trebuchet MS":2,Verdana:1},"font-size":{px:1,em:1,"%":1},"font-weight":{bold:1,normal:1},"font-style":{italic:1,normal:1},"font-variant":{normal:1,"small-caps":1},height:{px:1,em:1,"%":1},left:{px:1,em:1,"%":1},"letter-spacing":{normal:1},"line-height":{normal:1},"list-style-type":{none:1,disc:1,circle:1,square:1,decimal:1,"decimal-leading-zero":1,"lower-roman":1,"upper-roman":1,"lower-greek":1,"lower-latin":1,"upper-latin":1,georgian:1,"lower-alpha":1,"upper-alpha":1},margin:{px:1,em:1,"%":1},"margin-right":{px:1,em:1,"%":1},"margin-left":{px:1,em:1,"%":1},"margin-top":{px:1,em:1,"%":1},"margin-bottom":{px:1,em:1,"%":1},"max-height":{px:1,em:1,"%":1},"max-width":{px:1,em:1,"%":1},"min-height":{px:1,em:1,"%":1},"min-width":{px:1,em:1,"%":1},overflow:{hidden:1,visible:1,auto:1,scroll:1},"overflow-x":{hidden:1,visible:1,auto:1,scroll:1},"overflow-y":{hidden:1,visible:1,auto:1,scroll:1},padding:{px:1,em:1,"%":1},"padding-top":{px:1,em:1,"%":1},"padding-right":{px:1,em:1,"%":1},"padding-bottom":{px:1,em:1,"%":1},"padding-left":{px:1,em:1,"%":1},"page-break-after":{auto:1,always:1,avoid:1,left:1,right:1},"page-break-before":{auto:1,always:1,avoid:1,left:1,right:1},position:{absolute:1,relative:1,fixed:1,"static":1},right:{px:1,em:1,"%":1},"table-layout":{fixed:1,auto:1},"text-decoration":{none:1,underline:1,"line-through":1,blink:1},"text-align":{left:1,right:1,center:1,justify:1},"text-transform":{capitalize:1,uppercase:1,lowercase:1,none:1},top:{px:1,em:1,"%":1},"vertical-align":{top:1,bottom:1},visibility:{hidden:1,visible:1},"white-space":{nowrap:1,normal:1,pre:1,"pre-line":1,"pre-wrap":1},width:{px:1,em:1,"%":1},"word-spacing":{normal:1},filter:{"alpha(opacity=$0100)":1},"text-shadow":{"$02px 2px 2px #777":1},"text-overflow":{"ellipsis-word":1,clip:1,ellipsis:1},"-moz-border-radius":1,"-moz-border-radius-topright":1,"-moz-border-radius-bottomright":1,"-moz-border-radius-topleft":1,"-moz-border-radius-bottomleft":1,"-webkit-border-radius":1,"-webkit-border-top-right-radius":1,"-webkit-border-top-left-radius":1,"-webkit-border-bottom-right-radius":1,"-webkit-border-bottom-left-radius":1,"-moz-box-shadow":1,"-webkit-box-shadow":1,transform:{"rotate($00deg)":1,"skew($00deg)":1},"-moz-transform":{"rotate($00deg)":1,"skew($00deg)":1},"-webkit-transform":{"rotate($00deg)":1,"skew($00deg)":1}},r=function(){};(function(){this.completionsDefined=!1,this.defineCompletions=function(){if(document){var e=document.createElement("c").style;for(var t in e)if("string"==typeof e[t]){var n=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});i.hasOwnProperty(n)||(i[n]=1)}}this.completionsDefined=!0},this.getCompletions=function(e,t,n,i){this.completionsDefined||this.defineCompletions();var r=t.getTokenAt(n.row,n.column);if(!r)return[];if("ruleset"===e){var o=t.getLine(n.row).substr(0,n.column);return/:[^;]+$/.test(o)?(/([\w\-]+):[^:]*$/.test(o),this.getPropertyValueCompletions(e,t,n,i)):this.getPropertyCompletions(e,t,n,i)}return[]},this.getPropertyCompletions=function(e,t,n,r){var o=Object.keys(i);return o.map(function(e){return{caption:e,snippet:e+": $0",meta:"property",score:Number.MAX_VALUE}})},this.getPropertyValueCompletions=function(e,t,n,r){var o=t.getLine(n.row).substr(0,n.column),s=(/([\w\-]+):[^:]*$/.exec(o)||{})[1];if(!s)return[];var a=[];return s in i&&"object"==typeof i[s]&&(a=Object.keys(i[s])),a.map(function(e){return{caption:e,snippet:e,meta:"property value",score:Number.MAX_VALUE}})}}).call(r.prototype),t.CssCompletions=r}),ace.define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(e,t,n){"use strict";var i=e("../../lib/oop"),r=(e("../behaviour").Behaviour,e("./cstyle").CstyleBehaviour),o=e("../../token_iterator").TokenIterator,s=function(){this.inherit(r),this.add("colon","insertion",function(e,t,n,i,r){if(":"===r){var s=n.getCursorPosition(),a=new o(i,s.row,s.column),l=a.getCurrentToken();if(l&&l.value.match(/\s+/)&&(l=a.stepBackward()),l&&"support.type"===l.type){var u=i.doc.getLine(s.row),c=u.substring(s.column,s.column+1);if(":"===c)return{text:"",selection:[1,1]};if(!u.substring(s.column).match(/^\s*;/))return{text:":;",selection:[1,1]}}}}),this.add("colon","deletion",function(e,t,n,i,r){var s=i.doc.getTextRange(r);if(!r.isMultiLine()&&":"===s){var a=n.getCursorPosition(),l=new o(i,a.row,a.column),u=l.getCurrentToken();if(u&&u.value.match(/\s+/)&&(u=l.stepBackward()),u&&"support.type"===u.type){var c=i.doc.getLine(r.start.row),d=c.substring(r.end.column,r.end.column+1);if(";"===d)return r.end.column++,r}}}),this.add("semicolon","insertion",function(e,t,n,i,r){if(";"===r){var o=n.getCursorPosition(),s=i.doc.getLine(o.row),a=s.substring(o.column,o.column+1);if(";"===a)return{text:"",selection:[1,1]}}})};i.inherits(s,r),t.CssBehaviour=s}),ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/css_completions","ace/mode/behaviour/css","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text").Mode,o=e("./css_highlight_rules").CssHighlightRules,s=e("./matching_brace_outdent").MatchingBraceOutdent,a=e("../worker/worker_client").WorkerClient,l=e("./css_completions").CssCompletions,u=e("./behaviour/css").CssBehaviour,c=e("./folding/cstyle").FoldMode,d=function(){this.HighlightRules=o,this.$outdent=new s,this.$behaviour=new u,this.$completer=new l,this.foldingRules=new c};i.inherits(d,r),function(){this.foldingRules="cStyle",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),r=this.getTokenizer().getLineTokens(t,e).tokens;if(r.length&&"comment"==r[r.length-1].type)return i;var o=t.match(/^.*\{\s*$/);return o&&(i+=n),i},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.getCompletions=function(e,t,n,i){return this.$completer.getCompletions(e,t,n,i)},this.createWorker=function(e){var t=new a(["ace"],"ace/mode/css_worker","Worker");return t.attachToDocument(e.getDocument()),t.on("annotate",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t},this.$id="ace/mode/css"}.call(d.prototype),t.Mode=d}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,o=function(e){var t="[_:a-zA-ZÀ-￿][-_:.a-zA-Z0-9À-￿]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.xml-decl.xml","keyword.xml-decl.xml"],regex:"(<\\?)(xml)(?=[\\s])",next:"xml_decl",caseInsensitive:!0},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+t+")",next:"processing_instruction"},{token:"comment.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],xml_decl:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:"(?:"+t+":)?"+t},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],processing_instruction:[{token:"punctuation.instruction.xml",regex:"\\?>",next:"start"},{defaultToken:"instruction.xml"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+t+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+t+":)?"+t+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:"(?:"+t+":)?"+t},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===o&&this.normalizeRules()};(function(){this.embedTagRules=function(e,t,n){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(<)("+n+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:t+"start"}]}),this.$rules[n+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(e,t,n){return n.splice(0),this.token}}],this.embedRules(e,t,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(</)("+n+"(?=\\s|>|$))",next:n+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(r.prototype),i.inherits(o,r),t.XmlHighlightRules=o}),ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/lang"),o=e("./css_highlight_rules").CssHighlightRules,s=e("./javascript_highlight_rules").JavaScriptHighlightRules,a=e("./xml_highlight_rules").XmlHighlightRules,l=r.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"}),u=function(){a.call(this),this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:.]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(e,t){var n=l[t];return["meta.tag.punctuation."+("<"==e?"":"end-")+"tag-open.xml","meta.tag"+(n?"."+n:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:.]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}),this.embedTagRules(o,"css-","style"),this.embedTagRules(new s({noJSX:!0}).getRules(),"js-","script"),this.constructor===u&&this.normalizeRules()};i.inherits(u,a),t.HtmlHighlightRules=u}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";function i(e,t){return e.type.lastIndexOf(t+".xml")>-1}var r=e("../../lib/oop"),o=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=(e("../../lib/lang"),function(){this.add("string_dquotes","insertion",function(e,t,n,r,o){if('"'==o||"'"==o){var a=o,l=r.doc.getTextRange(n.getSelectionRange());if(""!==l&&"'"!==l&&'"'!=l&&n.getWrapBehavioursEnabled())return{text:a+l+a,selection:!1};var u=n.getCursorPosition(),c=r.doc.getLine(u.row),d=c.substring(u.column,u.column+1),h=new s(r,u.row,u.column),f=h.getCurrentToken();if(d==a&&(i(f,"attribute-value")||i(f,"string")))return{text:"",selection:[1,1]};if(f||(f=h.stepBackward()),!f)return;for(;i(f,"tag-whitespace")||i(f,"whitespace");)f=h.stepBackward();var p=!d||d.match(/\s/);if(i(f,"attribute-equals")&&(p||">"==d)||i(f,"decl-attribute-equals")&&(p||"?"==d))return{text:a+a,selection:[1,1]}}}),this.add("string_dquotes","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&('"'==o||"'"==o)){var s=i.doc.getLine(r.start.row),a=s.substring(r.start.column+1,r.start.column+2);if(a==o)return r.end.column++,r}}),this.add("autoclosing","insertion",function(e,t,n,r,o){if(">"==o){var a=n.getCursorPosition(),l=new s(r,a.row,a.column),u=l.getCurrentToken()||l.stepBackward();if(!u||!(i(u,"tag-name")||i(u,"tag-whitespace")||i(u,"attribute-name")||i(u,"attribute-equals")||i(u,"attribute-value")))return;if(i(u,"reference.attribute-value"))return;if(i(u,"attribute-value")){var c=u.value.charAt(0);if('"'==c||"'"==c){var d=u.value.charAt(u.value.length-1),h=l.getCurrentTokenColumn()+u.value.length;if(h>a.column||h==a.column&&c!=d)return}}for(;!i(u,"tag-name");)u=l.stepBackward();var f=l.getCurrentTokenRow(),p=l.getCurrentTokenColumn();if(i(l.stepBackward(),"end-tag-open"))return;var m=u.value;if(f==a.row&&(m=m.substring(0,a.column-p)),this.voidElements.hasOwnProperty(m.toLowerCase()))return;return{text:"></"+m+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(e,t,n,i,r){if("\n"==r){var o=n.getCursorPosition(),a=i.getLine(o.row),l=new s(i,o.row,o.column),u=l.getCurrentToken();if(u&&-1!==u.type.indexOf("tag-close")){if("/>"==u.value)return;for(;u&&-1===u.type.indexOf("tag-name");)u=l.stepBackward();if(!u)return;var c=u.value,d=l.getCurrentTokenRow();if(u=l.stepBackward(),!u||-1!==u.type.indexOf("end-tag"))return;if(this.voidElements&&!this.voidElements[c]){var h=i.getTokenAt(o.row,o.column+1),a=i.getLine(d),f=this.$getIndent(a),p=f+i.getTabString();return h&&"</"===h.value?{text:"\n"+p+"\n"+f,selection:[1,p.length,1,p.length]}:{text:"\n"+p}}}}})});r.inherits(a,o),t.XmlBehaviour=a}),ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("./fold_mode").FoldMode,o=t.FoldMode=function(e,t){this.defaultMode=e,this.subModes=t};i.inherits(o,r),function(){this.$getMode=function(e){"string"!=typeof e&&(e=e[0]);for(var t in this.subModes)if(0===e.indexOf(t))return this.subModes[t];return null},this.$tryMode=function(e,t,n,i){var r=this.$getMode(e);return r?r.getFoldWidget(t,n,i):""},this.getFoldWidget=function(e,t,n){return this.$tryMode(e.getState(n-1),e,t,n)||this.$tryMode(e.getState(n),e,t,n)||this.defaultMode.getFoldWidget(e,t,n)},this.getFoldWidgetRange=function(e,t,n){var i=this.$getMode(e.getState(n-1));return i&&i.getFoldWidget(e,t,n)||(i=this.$getMode(e.getState(n))),i&&i.getFoldWidget(e,t,n)||(i=this.defaultMode),i.getFoldWidgetRange(e,t,n)}}.call(o.prototype)}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(e,t,n){"use strict";function i(e,t){return e.type.lastIndexOf(t+".xml")>-1}var r=e("../../lib/oop"),o=(e("../../lib/lang"),e("../../range").Range),s=e("./fold_mode").FoldMode,a=e("../../token_iterator").TokenIterator,l=t.FoldMode=function(e,t){s.call(this),this.voidElements=e||{},this.optionalEndTags=r.mixin({},this.voidElements),t&&r.mixin(this.optionalEndTags,t)};r.inherits(l,s);var u=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};(function(){this.getFoldWidget=function(e,t,n){var i=this._getFirstTagInLine(e,n);return i?i.closing||!i.tagName&&i.selfClosing?"markbeginend"==t?"end":"":!i.tagName||i.selfClosing||this.voidElements.hasOwnProperty(i.tagName.toLowerCase())?"":this._findEndTagInLine(e,n,i.tagName,i.end.column)?"":"start":""},this._getFirstTagInLine=function(e,t){for(var n=e.getTokens(t),r=new u,o=0;o<n.length;o++){var s=n[o];if(i(s,"tag-open")){if(r.end.column=r.start.column+s.value.length,r.closing=i(s,"end-tag-open"),s=n[++o],!s)return null;for(r.tagName=s.value,r.end.column+=s.value.length,o++;o<n.length;o++)if(s=n[o],r.end.column+=s.value.length,i(s,"tag-close")){r.selfClosing="/>"==s.value;break}return r}if(i(s,"tag-close"))return r.selfClosing="/>"==s.value,r;r.start.column+=s.value.length}return null},this._findEndTagInLine=function(e,t,n,r){for(var o=e.getTokens(t),s=0,a=0;a<o.length;a++){var l=o[a];if(s+=l.value.length,!(r>s)&&i(l,"end-tag-open")&&(l=o[a+1],l&&l.value==n))return!0}return!1},this._readTagForward=function(e){var t=e.getCurrentToken();if(!t)return null;var n=new u;do if(i(t,"tag-open"))n.closing=i(t,"end-tag-open"),n.start.row=e.getCurrentTokenRow(),n.start.column=e.getCurrentTokenColumn();else if(i(t,"tag-name"))n.tagName=t.value;else if(i(t,"tag-close"))return n.selfClosing="/>"==t.value,n.end.row=e.getCurrentTokenRow(),n.end.column=e.getCurrentTokenColumn()+t.value.length,e.stepForward(),n;while(t=e.stepForward());return null},this._readTagBackward=function(e){var t=e.getCurrentToken();if(!t)return null;var n=new u;do{if(i(t,"tag-open"))return n.closing=i(t,"end-tag-open"),n.start.row=e.getCurrentTokenRow(),n.start.column=e.getCurrentTokenColumn(),e.stepBackward(),n;i(t,"tag-name")?n.tagName=t.value:i(t,"tag-close")&&(n.selfClosing="/>"==t.value,n.end.row=e.getCurrentTokenRow(),n.end.column=e.getCurrentTokenColumn()+t.value.length)}while(t=e.stepBackward());return null},this._pop=function(e,t){for(;e.length;){var n=e[e.length-1];if(t&&n.tagName!=t.tagName){if(this.optionalEndTags.hasOwnProperty(n.tagName)){e.pop();continue}return null}return e.pop()}},this.getFoldWidgetRange=function(e,t,n){var i=this._getFirstTagInLine(e,n);if(!i)return null;var r,s=i.closing||i.selfClosing,l=[];if(s)for(var u=new a(e,n,i.end.column),c={row:n,column:i.start.column};r=this._readTagBackward(u);){if(r.selfClosing){if(l.length)continue;return r.start.column+=r.tagName.length+2,r.end.column-=2,o.fromPoints(r.start,r.end)}if(r.closing)l.push(r);else if(this._pop(l,r),0==l.length)return r.start.column+=r.tagName.length+2,r.start.row==r.end.row&&r.start.column<r.end.column&&(r.start.column=r.end.column),o.fromPoints(r.start,c)}else{var u=new a(e,n,i.start.column),d={row:n,column:i.start.column+i.tagName.length+2};for(i.start.row==i.end.row&&(d.column=i.end.column);r=this._readTagForward(u);){if(r.selfClosing){if(l.length)continue;return r.start.column+=r.tagName.length+2,r.end.column-=2,o.fromPoints(r.start,r.end)}if(r.closing){if(this._pop(l,r),0==l.length)return o.fromPoints(d,r.start)}else l.push(r)}}}}).call(l.prototype)}),ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../../lib/oop"),r=e("./mixed").FoldMode,o=e("./xml").FoldMode,s=e("./cstyle").FoldMode,a=t.FoldMode=function(e,t){r.call(this,new o(e,t),{"js-":new s,"css-":new s})};i.inherits(a,r)}),ace.define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"],function(e,t,n){"use strict";function i(e,t){return e.type.lastIndexOf(t+".xml")>-1}function r(e,t){for(var n=new s(e,t.row,t.column),r=n.getCurrentToken();r&&!i(r,"tag-name");)r=n.stepBackward();return r?r.value:void 0}function o(e,t){for(var n=new s(e,t.row,t.column),r=n.getCurrentToken();r&&!i(r,"attribute-name");)r=n.stepBackward();return r?r.value:void 0}var s=e("../token_iterator").TokenIterator,a=["accesskey","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","inert","itemid","itemprop","itemref","itemscope","itemtype","lang","spellcheck","style","tabindex","title","translate"],l=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"],u=a.concat(l),c={html:{manifest:1},head:{},title:{},base:{href:1,target:1},link:{href:1,hreflang:1,rel:{stylesheet:1,icon:1},media:{all:1,screen:1,print:1},type:{"text/css":1,"image/png":1,"image/jpeg":1,"image/gif":1},sizes:1},meta:{"http-equiv":{"content-type":1},name:{description:1,keywords:1},content:{"text/html; charset=UTF-8":1},charset:1},style:{type:1,media:{all:1,screen:1,print:1},scoped:1},script:{charset:1,type:{"text/javascript":1},src:1,defer:1,async:1},noscript:{href:1},body:{onafterprint:1,onbeforeprint:1,onbeforeunload:1,onhashchange:1,onmessage:1,onoffline:1,onpopstate:1,onredo:1,onresize:1,onstorage:1,onundo:1,onunload:1},section:{},nav:{},article:{pubdate:1},aside:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},header:{},footer:{},address:{},main:{},p:{},hr:{},pre:{},blockquote:{cite:1},ol:{start:1,reversed:1},ul:{},li:{value:1},dl:{},dt:{},dd:{},figure:{},figcaption:{},div:{},a:{href:1,target:{_blank:1,top:1},ping:1,rel:{nofollow:1,alternate:1,author:1,bookmark:1,help:1,license:1,next:1,noreferrer:1,prefetch:1,prev:1,search:1,tag:1},media:1,hreflang:1,type:1},em:{},strong:{},small:{},s:{},cite:{},q:{cite:1},dfn:{},abbr:{},data:{},time:{datetime:1},code:{},"var":{},samp:{},kbd:{},sub:{},sup:{},i:{},b:{},u:{},mark:{},ruby:{},rt:{},rp:{},bdi:{},bdo:{},span:{},br:{},wbr:{},ins:{cite:1,datetime:1},del:{cite:1,datetime:1},img:{alt:1,src:1,height:1,width:1,usemap:1,ismap:1},iframe:{name:1,src:1,height:1,width:1,sandbox:{"allow-same-origin":1,"allow-top-navigation":1,"allow-forms":1,"allow-scripts":1},seamless:{seamless:1}},embed:{src:1,height:1,width:1,type:1},object:{param:1,data:1,type:1,height:1,width:1,usemap:1,name:1,form:1,classid:1},param:{name:1,value:1},video:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},width:1,height:1,poster:1,muted:{muted:1},preload:{auto:1,metadata:1,none:1}},audio:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},muted:{muted:1},preload:{auto:1,metadata:1,none:1}},source:{src:1,type:1,media:1},track:{kind:1,src:1,srclang:1,label:1,"default":1},canvas:{width:1,height:1},map:{name:1},area:{shape:1,coords:1,href:1,hreflang:1,alt:1,target:1,media:1,rel:1,ping:1,type:1},svg:{},math:{},table:{summary:1},caption:{},colgroup:{span:1},col:{span:1},tbody:{},thead:{},tfoot:{},tr:{},td:{headers:1,rowspan:1,colspan:1},th:{headers:1,rowspan:1,colspan:1,scope:1},form:{"accept-charset":1,action:1,autocomplete:1,enctype:{"multipart/form-data":1,"application/x-www-form-urlencoded":1},method:{get:1,post:1},name:1,novalidate:1,target:{_blank:1,top:1}},fieldset:{disabled:1,form:1,name:1},legend:{},label:{form:1,"for":1},input:{type:{text:1,password:1,hidden:1,checkbox:1,submit:1,radio:1,file:1,button:1,reset:1,image:31,color:1,date:1,datetime:1,"datetime-local":1,email:1,month:1,number:1,range:1,search:1,tel:1,time:1,url:1,week:1},accept:1,alt:1,autocomplete:{on:1,off:1},autofocus:{autofocus:1},checked:{checked:1},disabled:{disabled:1},form:1,formaction:1,formenctype:{"application/x-www-form-urlencoded":1,"multipart/form-data":1,"text/plain":1},formmethod:{get:1,post:1},formnovalidate:{formnovalidate:1},formtarget:{_blank:1,_self:1,_parent:1,_top:1},height:1,list:1,max:1,maxlength:1,min:1,multiple:{multiple:1},pattern:1,placeholder:1,readonly:{readonly:1},required:{required:1},size:1,src:1,step:1,width:1,files:1,value:1},button:{autofocus:1,disabled:{disabled:1},form:1,formaction:1,formenctype:1,formmethod:1,formnovalidate:1,formtarget:1,name:1,value:1,type:{button:1,submit:1}},select:{autofocus:1,disabled:1,form:1,multiple:{multiple:1},name:1,size:1,readonly:{readonly:1}},datalist:{},optgroup:{disabled:1,label:1},option:{disabled:1,selected:1,label:1,value:1},textarea:{autofocus:{autofocus:1},disabled:{disabled:1},form:1,maxlength:1,name:1,placeholder:1,readonly:{readonly:1},required:{required:1},rows:1,cols:1,wrap:{on:1,off:1,hard:1,soft:1}},keygen:{autofocus:1,challenge:{challenge:1},disabled:{disabled:1},form:1,keytype:{rsa:1,dsa:1,ec:1},name:1},output:{"for":1,form:1,name:1},progress:{value:1,max:1},meter:{value:1,min:1,max:1,low:1,high:1,optimum:1},details:{open:1},summary:{},command:{type:1,label:1,icon:1,disabled:1,checked:1,radiogroup:1,command:1},menu:{type:1,label:1},dialog:{open:1}},d=Object.keys(c),h=function(){};(function(){this.getCompletions=function(e,t,n,r){var o=t.getTokenAt(n.row,n.column);if(!o)return[];if(i(o,"tag-name")||i(o,"tag-open")||i(o,"end-tag-open"))return this.getTagCompletions(e,t,n,r);if(i(o,"tag-whitespace")||i(o,"attribute-name"))return this.getAttributeCompletions(e,t,n,r);if(i(o,"attribute-value"))return this.getAttributeValueCompletions(e,t,n,r);var s=t.getLine(n.row).substr(0,n.column);return/&[A-z]*$/i.test(s)?this.getHTMLEntityCompletions(e,t,n,r):[]},this.getTagCompletions=function(e,t,n,i){return d.map(function(e){return{value:e,meta:"tag",score:Number.MAX_VALUE}})},this.getAttributeCompletions=function(e,t,n,i){var o=r(t,n);if(!o)return[];var s=u;return o in c&&(s=s.concat(Object.keys(c[o]))),s.map(function(e){return{caption:e,snippet:e+'="$0"',meta:"attribute",score:Number.MAX_VALUE}})},this.getAttributeValueCompletions=function(e,t,n,i){var s=r(t,n),a=o(t,n);if(!s)return[];var l=[];return s in c&&a in c[s]&&"object"==typeof c[s][a]&&(l=Object.keys(c[s][a])),l.map(function(e){return{caption:e,snippet:e,meta:"attribute value",score:Number.MAX_VALUE}})},this.getHTMLEntityCompletions=function(e,t,n,i){var r=["&Aacute;","&aacute;","&Acirc;","&acirc;","&acute;","&AElig;","&aelig;","&Agrave;","&agrave;","&alefsym;","&Alpha;","&alpha;","&amp;","&and;","&ang;","&Aring;","&aring;","&asymp;","&Atilde;","&atilde;","&Auml;","&auml;","&bdquo;","&Beta;","&beta;","&brvbar;","&bull;","&cap;","&Ccedil;","&ccedil;","&cedil;","&cent;","&Chi;","&chi;","&circ;","&clubs;","&cong;","&copy;","&crarr;","&cup;","&curren;","&Dagger;","&dagger;","&dArr;","&darr;","&deg;","&Delta;","&delta;","&diams;","&divide;","&Eacute;","&eacute;","&Ecirc;","&ecirc;","&Egrave;","&egrave;","&empty;","&emsp;","&ensp;","&Epsilon;","&epsilon;","&equiv;","&Eta;","&eta;","&ETH;","&eth;","&Euml;","&euml;","&euro;","&exist;","&fnof;","&forall;","&frac12;","&frac14;","&frac34;","&frasl;","&Gamma;","&gamma;","&ge;","&gt;","&hArr;","&harr;","&hearts;","&hellip;","&Iacute;","&iacute;","&Icirc;","&icirc;","&iexcl;","&Igrave;","&igrave;","&image;","&infin;","&int;","&Iota;","&iota;","&iquest;","&isin;","&Iuml;","&iuml;","&Kappa;","&kappa;","&Lambda;","&lambda;","&lang;","&laquo;","&lArr;","&larr;","&lceil;","&ldquo;","&le;","&lfloor;","&lowast;","&loz;","&lrm;","&lsaquo;","&lsquo;","&lt;","&macr;","&mdash;","&micro;","&middot;","&minus;","&Mu;","&mu;","&nabla;","&nbsp;","&ndash;","&ne;","&ni;","&not;","&notin;","&nsub;","&Ntilde;","&ntilde;","&Nu;","&nu;","&Oacute;","&oacute;","&Ocirc;","&ocirc;","&OElig;","&oelig;","&Ograve;","&ograve;","&oline;","&Omega;","&omega;","&Omicron;","&omicron;","&oplus;","&or;","&ordf;","&ordm;","&Oslash;","&oslash;","&Otilde;","&otilde;","&otimes;","&Ouml;","&ouml;","&para;","&part;","&permil;","&perp;","&Phi;","&phi;","&Pi;","&pi;","&piv;","&plusmn;","&pound;","&Prime;","&prime;","&prod;","&prop;","&Psi;","&psi;","&quot;","&radic;","&rang;","&raquo;","&rArr;","&rarr;","&rceil;","&rdquo;","&real;","&reg;","&rfloor;","&Rho;","&rho;","&rlm;","&rsaquo;","&rsquo;","&sbquo;","&Scaron;","&scaron;","&sdot;","&sect;","&shy;","&Sigma;","&sigma;","&sigmaf;","&sim;","&spades;","&sub;","&sube;","&sum;","&sup;","&sup1;","&sup2;","&sup3;","&supe;","&szlig;","&Tau;","&tau;","&there4;","&Theta;","&theta;","&thetasym;","&thinsp;","&THORN;","&thorn;","&tilde;","&times;","&trade;","&Uacute;","&uacute;","&uArr;","&uarr;","&Ucirc;","&ucirc;","&Ugrave;","&ugrave;","&uml;","&upsih;","&Upsilon;","&upsilon;","&Uuml;","&uuml;","&weierp;","&Xi;","&xi;","&Yacute;","&yacute;","&yen;","&Yuml;","&yuml;","&Zeta;","&zeta;","&zwj;","&zwnj;"];return r.map(function(e){return{caption:e,snippet:e.substr(1),meta:"html entity",score:Number.MAX_VALUE}})}}).call(h.prototype),t.HtmlCompletions=h}),ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"],function(e,t,n){"use strict";var i=e("../lib/oop"),r=e("../lib/lang"),o=e("./text").Mode,s=e("./javascript").Mode,a=e("./css").Mode,l=e("./html_highlight_rules").HtmlHighlightRules,u=e("./behaviour/xml").XmlBehaviour,c=e("./folding/html").FoldMode,d=e("./html_completions").HtmlCompletions,h=e("../worker/worker_client").WorkerClient,f=["area","base","br","col","embed","hr","img","input","keygen","link","meta","menuitem","param","source","track","wbr"],p=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"],m=function(e){
this.fragmentContext=e&&e.fragmentContext,this.HighlightRules=l,this.$behaviour=new u,this.$completer=new d,this.createModeDelegates({"js-":s,"css-":a}),this.foldingRules=new c(this.voidElements,r.arrayToMap(p))};i.inherits(m,o),function(){this.blockComment={start:"<!--",end:"-->"},this.voidElements=r.arrayToMap(f),this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.getCompletions=function(e,t,n,i){return this.$completer.getCompletions(e,t,n,i)},this.createWorker=function(e){if(this.constructor==m){var t=new h(["ace"],"ace/mode/html_worker","Worker");return t.attachToDocument(e.getDocument()),this.fragmentContext&&t.call("setOptions",[{context:this.fragmentContext}]),t.on("error",function(t){e.setAnnotations(t.data)}),t.on("terminate",function(){e.clearAnnotations()}),t}},this.$id="ace/mode/html"}.call(m.prototype),t.Mode=m}),angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(e){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");var t=function(e,t,n){if(angular.isDefined(n.workerPath)){var i=window.ace.require("ace/config");i.set("workerPath",n.workerPath)}angular.isDefined(n.require)&&n.require.forEach(function(e){window.ace.require(e)}),angular.isDefined(n.showGutter)&&e.renderer.setShowGutter(n.showGutter),angular.isDefined(n.useWrapMode)&&t.setUseWrapMode(n.useWrapMode),angular.isDefined(n.showInvisibles)&&e.renderer.setShowInvisibles(n.showInvisibles),angular.isDefined(n.showIndentGuides)&&e.renderer.setDisplayIndentGuides(n.showIndentGuides),angular.isDefined(n.useSoftTabs)&&t.setUseSoftTabs(n.useSoftTabs),angular.isDefined(n.showPrintMargin)&&e.setShowPrintMargin(n.showPrintMargin),angular.isDefined(n.disableSearch)&&n.disableSearch&&e.commands.addCommands([{name:"unfind",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(){return!1},readOnly:!0}]),angular.isString(n.theme)&&e.setTheme("ace/theme/"+n.theme),angular.isString(n.mode)&&t.setMode("ace/mode/"+n.mode),angular.isDefined(n.firstLineNumber)&&(angular.isNumber(n.firstLineNumber)?t.setOption("firstLineNumber",n.firstLineNumber):angular.isFunction(n.firstLineNumber)&&t.setOption("firstLineNumber",n.firstLineNumber()));var r,o;if(angular.isDefined(n.advanced))for(r in n.advanced)o={name:r,value:n.advanced[r]},e.setOption(o.name,o.value);if(angular.isDefined(n.rendererOptions))for(r in n.rendererOptions)o={name:r,value:n.rendererOptions[r]},e.renderer.setOption(o.name,o.value);angular.forEach(n.callbacks,function(t){angular.isFunction(t)&&t(e)})};return{restrict:"EA",require:"?ngModel",link:function(n,i,r,o){var s,a,l=e.ace||{},u=angular.extend({},l,n.$eval(r.uiAce)),c=window.ace.edit(i[0]),d=c.getSession(),h=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);angular.isDefined(e)&&n.$evalAsync(function(){if(!angular.isFunction(e))throw new Error("ui-ace use a function as callback.");e(t)})},f={onChange:function(e){return function(t){var i=d.getValue();!o||i===o.$viewValue||n.$$phase||n.$root.$$phase||n.$evalAsync(function(){o.$setViewValue(i)}),h(e,t,c)}},onBlur:function(e){return function(){h(e,c)}}};r.$observe("readonly",function(e){c.setReadOnly(!!e||""===e)}),o&&(o.$formatters.push(function(e){if(angular.isUndefined(e)||null===e)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-ace cannot use an object or an array as a model");return e}),o.$render=function(){d.setValue(o.$viewValue)});var p=function(e,i){e!==i&&(u=angular.extend({},l,n.$eval(r.uiAce)),u.callbacks=[u.onLoad],u.onLoad!==l.onLoad&&u.callbacks.unshift(l.onLoad),d.removeListener("change",s),s=f.onChange(u.onChange),d.on("change",s),c.removeListener("blur",a),a=f.onBlur(u.onBlur),c.on("blur",a),t(c,d,u))};n.$watch(r.uiAce,p,!0),p(l),i.on("$destroy",function(){c.session.$stopWorker(),c.destroy()}),n.$watch(function(){return[i[0].offsetWidth,i[0].offsetHeight]},function(){c.resize(),c.renderer.updateFull()},!0)}}}]),function(){function e(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function t(e){return e.replace(/^\s+|\s+$/g,"")}function n(e){return e.replace(/^\s+/g,"")}function i(e,t){"use strict";var n=new r(e,t);return n.beautify()}function r(i,r){"use strict";function o(e,t){var n=0;e&&(n=e.indentation_level,!j.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var i={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:j.get_line_number(),ternary_depth:0};return i}function c(e){var t=e.newlines,n=te.keep_array_indentation&&b(Z.mode);if(n)for(i=0;t>i;i+=1)f(i>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){f();for(var i=1;t>i;i+=1)f(!0)}q=e,ee[q.type]()}function d(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function h(e){if(e=void 0===e?!1:e,!j.just_added_newline())if(te.preserve_newlines&&q.wanted_newline||e)f(!1,!0);else if(te.wrap_line_length){var t=j.current_line.get_character_count()+q.text.length+(j.space_before_token?1:0);t>=te.wrap_line_length&&f(!1,!0)}}function f(e,t){if(!t&&";"!==Z.last_text&&","!==Z.last_text&&"="!==Z.last_text&&"TK_OPERATOR"!==K)for(;Z.mode===u.Statement&&!Z.if_block&&!Z.do_block;)C();j.add_new_line(e)&&(Z.multiline_frame=!0)}function p(){j.just_added_newline()&&(te.keep_array_indentation&&b(Z.mode)&&q.wanted_newline?(j.current_line.push(q.whitespace_before),j.space_before_token=!1):j.set_indent(Z.indentation_level)&&(Z.line_indent_level=Z.indentation_level))}function m(e){return j.raw?void j.add_raw_token(q):(te.comma_first&&"TK_COMMA"===K&&j.just_added_newline()&&","===j.previous_line.last()&&(j.previous_line.pop(),p(),j.add_token(","),j.space_before_token=!0),e=e||q.text,p(),void j.add_token(e))}function g(){Z.indentation_level+=1}function v(){Z.indentation_level>0&&(!Z.parent||Z.indentation_level>Z.parent.indentation_level)&&(Z.indentation_level-=1)}function y(e){Z?(J.push(Z),X=Z):X=o(null,e),Z=o(X,e)}function b(e){return e===u.ArrayLiteral}function w(t){return e(t,[u.Expression,u.ForInitializer,u.Conditional])}function C(){J.length>0&&(X=Z,Z=J.pop(),X.mode===u.Statement&&j.remove_redundant_indentation(X))}function x(){return Z.parent.mode===u.ObjectLiteral&&Z.mode===u.Statement&&(":"===Z.last_text&&0===Z.ternary_depth||"TK_RESERVED"===K&&e(Z.last_text,["get","set"]))}function S(){return"TK_RESERVED"===K&&e(Z.last_text,["var","let","const"])&&"TK_WORD"===q.type||"TK_RESERVED"===K&&"do"===Z.last_text||"TK_RESERVED"===K&&"return"===Z.last_text&&!q.wanted_newline||"TK_RESERVED"===K&&"else"===Z.last_text&&("TK_RESERVED"!==q.type||"if"!==q.text)||"TK_END_EXPR"===K&&(X.mode===u.ForInitializer||X.mode===u.Conditional)||"TK_WORD"===K&&Z.mode===u.BlockStatement&&!Z.in_case&&"--"!==q.text&&"++"!==q.text&&"function"!==G&&"TK_WORD"!==q.type&&"TK_RESERVED"!==q.type||Z.mode===u.ObjectLiteral&&(":"===Z.last_text&&0===Z.ternary_depth||"TK_RESERVED"===K&&e(Z.last_text,["get","set"]))?(y(u.Statement),g(),"TK_RESERVED"===K&&e(Z.last_text,["var","let","const"])&&"TK_WORD"===q.type&&(Z.declaration_statement=!0),x()||h("TK_RESERVED"===q.type&&e(q.text,["do","for","if","while"])),!0):!1}function A(e,n){for(var i=0;i<e.length;i++){var r=t(e[i]);if(r.charAt(0)!==n)return!1}return!0}function _(e,t){for(var n,i=0,r=e.length;r>i;i++)if(n=e[i],n&&0!==n.indexOf(t))return!1;return!0}function E(t){return e(t,["case","return","do","if","throw","else"])}function $(e){var t=W+(e||0);return 0>t||t>=ne.length?null:ne[t]}function k(){S();var t=u.Expression;if("["===q.text){if("TK_WORD"===K||")"===Z.last_text)return"TK_RESERVED"===K&&e(Z.last_text,V.line_starters)&&(j.space_before_token=!0),y(t),m(),g(),void(te.space_in_paren&&(j.space_before_token=!0));t=u.ArrayLiteral,b(Z.mode)&&("["===Z.last_text||","===Z.last_text&&("]"===G||"}"===G))&&(te.keep_array_indentation||f())}else"TK_RESERVED"===K&&"for"===Z.last_text?t=u.ForInitializer:"TK_RESERVED"===K&&e(Z.last_text,["if","while"])&&(t=u.Conditional);";"===Z.last_text||"TK_START_BLOCK"===K?f():"TK_END_EXPR"===K||"TK_START_EXPR"===K||"TK_END_BLOCK"===K||"."===Z.last_text?h(q.wanted_newline):"TK_RESERVED"===K&&"("===q.text||"TK_WORD"===K||"TK_OPERATOR"===K?"TK_RESERVED"===K&&("function"===Z.last_word||"typeof"===Z.last_word)||"*"===Z.last_text&&"function"===G?te.space_after_anon_function&&(j.space_before_token=!0):"TK_RESERVED"!==K||!e(Z.last_text,V.line_starters)&&"catch"!==Z.last_text||te.space_before_conditional&&(j.space_before_token=!0):j.space_before_token=!0,"("===q.text&&"TK_RESERVED"===K&&"await"===Z.last_word&&(j.space_before_token=!0),"("===q.text&&("TK_EQUALS"===K||"TK_OPERATOR"===K)&&(x()||h()),y(t),m(),te.space_in_paren&&(j.space_before_token=!0),g()}function D(){for(;Z.mode===u.Statement;)C();Z.multiline_frame&&h("]"===q.text&&b(Z.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==K||te.space_in_empty_paren?j.space_before_token=!0:(j.trim(),j.space_before_token=!1)),"]"===q.text&&te.keep_array_indentation?(m(),C()):(C(),m()),j.remove_redundant_indentation(X),Z.do_while&&X.mode===u.Conditional&&(X.mode=u.Expression,Z.do_block=!1,Z.do_while=!1)}function T(){var t=$(1),n=$(2);y(n&&(":"===n.text&&e(t.type,["TK_STRING","TK_WORD","TK_RESERVED"])||e(t.text,["get","set"])&&e(n.type,["TK_WORD","TK_RESERVED"]))?e(G,["class","interface"])?u.BlockStatement:u.ObjectLiteral:u.BlockStatement);var i=!t.comments_before.length&&"}"===t.text,r=i&&"function"===Z.last_word&&"TK_END_EXPR"===K;"expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline?"TK_OPERATOR"!==K&&(r||"TK_EQUALS"===K||"TK_RESERVED"===K&&E(Z.last_text)&&"else"!==Z.last_text)?j.space_before_token=!0:f(!1,!0):"TK_OPERATOR"!==K&&"TK_START_EXPR"!==K?"TK_START_BLOCK"===K?f():j.space_before_token=!0:b(X.mode)&&","===Z.last_text&&("}"===G?j.space_before_token=!0:f()),m(),g()}function F(){for(;Z.mode===u.Statement;)C();var e="TK_START_BLOCK"===K;"expand"===te.brace_style?e||f():e||(b(Z.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,f(),te.keep_array_indentation=!0):f()),C(),m()}function L(){if("TK_RESERVED"===q.type&&Z.mode!==u.ObjectLiteral&&e(q.text,["set","get"])&&(q.type="TK_WORD"),"TK_RESERVED"===q.type&&Z.mode===u.ObjectLiteral){var t=$(1);":"==t.text&&(q.type="TK_WORD")}if(S()||!q.wanted_newline||w(Z.mode)||"TK_OPERATOR"===K&&"--"!==Z.last_text&&"++"!==Z.last_text||"TK_EQUALS"===K||!te.preserve_newlines&&"TK_RESERVED"===K&&e(Z.last_text,["var","let","const","set","get"])||f(),Z.do_block&&!Z.do_while){if("TK_RESERVED"===q.type&&"while"===q.text)return j.space_before_token=!0,m(),j.space_before_token=!0,void(Z.do_while=!0);f(),Z.do_block=!1}if(Z.if_block)if(Z.else_block||"TK_RESERVED"!==q.type||"else"!==q.text){for(;Z.mode===u.Statement;)C();Z.if_block=!1,Z.else_block=!1}else Z.else_block=!0;if("TK_RESERVED"===q.type&&("case"===q.text||"default"===q.text&&Z.in_case_statement))return f(),(Z.case_body||te.jslint_happy)&&(v(),Z.case_body=!1),m(),Z.in_case=!0,void(Z.in_case_statement=!0);if("TK_RESERVED"===q.type&&"function"===q.text&&((e(Z.last_text,["}",";"])||j.just_added_newline()&&!e(Z.last_text,["[","{",":","=",","]))&&(j.just_added_blankline()||q.comments_before.length||(f(),f(!0))),"TK_RESERVED"===K||"TK_WORD"===K?"TK_RESERVED"===K&&e(Z.last_text,["get","set","new","return","export","async"])?j.space_before_token=!0:"TK_RESERVED"===K&&"default"===Z.last_text&&"export"===G?j.space_before_token=!0:f():"TK_OPERATOR"===K||"="===Z.last_text?j.space_before_token=!0:(Z.multiline_frame||!w(Z.mode)&&!b(Z.mode))&&f()),("TK_COMMA"===K||"TK_START_EXPR"===K||"TK_EQUALS"===K||"TK_OPERATOR"===K)&&(x()||h()),"TK_RESERVED"===q.type&&e(q.text,["function","get","set"]))return m(),void(Z.last_word=q.text);if(Q="NONE","TK_END_BLOCK"===K?"TK_RESERVED"===q.type&&e(q.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline?Q="NEWLINE":(Q="SPACE",j.space_before_token=!0):Q="NEWLINE":"TK_SEMICOLON"===K&&Z.mode===u.BlockStatement?Q="NEWLINE":"TK_SEMICOLON"===K&&w(Z.mode)?Q="SPACE":"TK_STRING"===K?Q="NEWLINE":"TK_RESERVED"===K||"TK_WORD"===K||"*"===Z.last_text&&"function"===G?Q="SPACE":"TK_START_BLOCK"===K?Q="NEWLINE":"TK_END_EXPR"===K&&(j.space_before_token=!0,Q="NEWLINE"),"TK_RESERVED"===q.type&&e(q.text,V.line_starters)&&")"!==Z.last_text&&(Q="else"===Z.last_text||"export"===Z.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===q.type&&e(q.text,["else","catch","finally"]))if("TK_END_BLOCK"!==K||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&q.wanted_newline)f();else{j.trim(!0);var n=j.current_line;"}"!==n.last()&&f(),j.space_before_token=!0}else"NEWLINE"===Q?"TK_RESERVED"===K&&E(Z.last_text)?j.space_before_token=!0:"TK_END_EXPR"!==K?"TK_START_EXPR"===K&&"TK_RESERVED"===q.type&&e(q.text,["var","let","const"])||":"===Z.last_text||("TK_RESERVED"===q.type&&"if"===q.text&&"else"===Z.last_text?j.space_before_token=!0:f()):"TK_RESERVED"===q.type&&e(q.text,V.line_starters)&&")"!==Z.last_text&&f():Z.multiline_frame&&b(Z.mode)&&","===Z.last_text&&"}"===G?f():"SPACE"===Q&&(j.space_before_token=!0);m(),Z.last_word=q.text,"TK_RESERVED"===q.type&&"do"===q.text&&(Z.do_block=!0),"TK_RESERVED"===q.type&&"if"===q.text&&(Z.if_block=!0)}function O(){for(S()&&(j.space_before_token=!1);Z.mode===u.Statement&&!Z.if_block&&!Z.do_block;)C();m()}function N(){S()?j.space_before_token=!0:"TK_RESERVED"===K||"TK_WORD"===K?j.space_before_token=!0:"TK_COMMA"===K||"TK_START_EXPR"===K||"TK_EQUALS"===K||"TK_OPERATOR"===K?x()||h():f(),m()}function B(){S(),Z.declaration_statement&&(Z.declaration_assignment=!0),j.space_before_token=!0,m(),j.space_before_token=!0}function M(){return Z.declaration_statement?(w(Z.parent.mode)&&(Z.declaration_assignment=!1),m(),void(Z.declaration_assignment?(Z.declaration_assignment=!1,f(!1,!0)):(j.space_before_token=!0,te.comma_first&&h()))):(m(),void(Z.mode===u.ObjectLiteral||Z.mode===u.Statement&&Z.parent.mode===u.ObjectLiteral?(Z.mode===u.Statement&&C(),f()):(j.space_before_token=!0,te.comma_first&&h())))}function R(){if(S(),"TK_RESERVED"===K&&E(Z.last_text))return j.space_before_token=!0,void m();if("*"===q.text&&"TK_DOT"===K)return void m();if(":"===q.text&&Z.in_case)return Z.case_body=!0,g(),m(),f(),void(Z.in_case=!1);if("::"===q.text)return void m();"TK_OPERATOR"===K&&h();var t=!0,n=!0;e(q.text,["--","++","!","~"])||e(q.text,["-","+"])&&(e(K,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||e(Z.last_text,V.line_starters)||","===Z.last_text)?(t=!1,n=!1,!q.wanted_newline||"--"!==q.text&&"++"!==q.text||f(!1,!0),";"===Z.last_text&&w(Z.mode)&&(t=!0),"TK_RESERVED"===K?t=!0:"TK_END_EXPR"===K?t=!("]"===Z.last_text&&("--"===q.text||"++"===q.text)):"TK_OPERATOR"===K&&(t=e(q.text,["--","-","++","+"])&&e(Z.last_text,["--","-","++","+"]),e(q.text,["+","-"])&&e(Z.last_text,["--","++"])&&(n=!0)),Z.mode!==u.BlockStatement&&Z.mode!==u.Statement||"{"!==Z.last_text&&";"!==Z.last_text||f()):":"===q.text?0===Z.ternary_depth?t=!1:Z.ternary_depth-=1:"?"===q.text?Z.ternary_depth+=1:"*"===q.text&&"TK_RESERVED"===K&&"function"===Z.last_text&&(t=!1,n=!1),j.space_before_token=j.space_before_token||t,m(),j.space_before_token=n}function P(){if(j.raw)return j.add_raw_token(q),void(q.directives&&"end"===q.directives.preserve&&(te.test_output_raw||(j.raw=!1)));if(q.directives)return f(!1,!0),m(),"start"===q.directives.preserve&&(j.raw=!0),void f(!1,!0);if(!l.newline.test(q.text)&&!q.wanted_newline)return j.space_before_token=!0,m(),void(j.space_before_token=!0);var e,t=d(q.text),i=!1,r=!1,o=q.whitespace_before,s=o.length;for(f(!1,!0),t.length>1&&(A(t.slice(1),"*")?i=!0:_(t.slice(1),o)&&(r=!0)),m(t[0]),e=1;e<t.length;e++)f(!1,!0),i?m(" "+n(t[e])):r&&t[e].length>s?m(t[e].substring(s)):j.add_token(t[e]);f(!1,!0)}function I(){q.wanted_newline?f(!1,!0):j.trim(!0),j.space_before_token=!0,m(),f(!1,!0)}function U(){S(),"TK_RESERVED"===K&&E(Z.last_text)?j.space_before_token=!0:h(")"===Z.last_text&&te.break_chained_methods),m()}function H(){m(),"\n"===q.text[q.text.length-1]&&f()}function z(){for(;Z.mode===u.Statement;)C()}var j,W,V,q,K,G,Y,Z,X,J,Q,ee,te,ne=[],ie="";for(ee={TK_START_EXPR:k,TK_END_EXPR:D,TK_START_BLOCK:T,TK_END_BLOCK:F,TK_WORD:L,TK_RESERVED:L,TK_SEMICOLON:O,TK_STRING:N,TK_EQUALS:B,TK_OPERATOR:R,TK_COMMA:M,TK_BLOCK_COMMENT:P,TK_COMMENT:I,TK_DOT:U,TK_UNKNOWN:H,TK_EOF:z},r=r?r:{},te={},void 0!==r.braces_on_own_line&&(te.brace_style=r.braces_on_own_line?"expand":"collapse"),te.brace_style=r.brace_style?r.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=r.indent_size?parseInt(r.indent_size,10):4,te.indent_char=r.indent_char?r.indent_char:" ",te.eol=r.eol?r.eol:"\n",te.preserve_newlines=void 0===r.preserve_newlines?!0:r.preserve_newlines,te.break_chained_methods=void 0===r.break_chained_methods?!1:r.break_chained_methods,te.max_preserve_newlines=void 0===r.max_preserve_newlines?0:parseInt(r.max_preserve_newlines,10),te.space_in_paren=void 0===r.space_in_paren?!1:r.space_in_paren,te.space_in_empty_paren=void 0===r.space_in_empty_paren?!1:r.space_in_empty_paren,te.jslint_happy=void 0===r.jslint_happy?!1:r.jslint_happy,te.space_after_anon_function=void 0===r.space_after_anon_function?!1:r.space_after_anon_function,te.keep_array_indentation=void 0===r.keep_array_indentation?!1:r.keep_array_indentation,te.space_before_conditional=void 0===r.space_before_conditional?!0:r.space_before_conditional,te.unescape_strings=void 0===r.unescape_strings?!1:r.unescape_strings,te.wrap_line_length=void 0===r.wrap_line_length?0:parseInt(r.wrap_line_length,10),te.e4x=void 0===r.e4x?!1:r.e4x,te.end_with_newline=void 0===r.end_with_newline?!1:r.end_with_newline,te.comma_first=void 0===r.comma_first?!1:r.comma_first,te.test_output_raw=void 0===r.test_output_raw?!1:r.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),r.indent_with_tabs&&(te.indent_char="	",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),Y="";te.indent_size>0;)Y+=te.indent_char,te.indent_size-=1;var re=0;if(i&&i.length){for(;" "===i.charAt(re)||"	"===i.charAt(re);)ie+=i.charAt(re),re+=1;i=i.substring(re)}K="TK_START_BLOCK",G="",j=new s(Y,ie),j.raw=te.test_output_raw,J=[],y(u.BlockStatement),this.beautify=function(){var e,t;for(V=new a(i,te,Y),ne=V.tokenize(),W=0;e=$();){for(var n=0;n<e.comments_before.length;n++)c(e.comments_before[n]);c(e),G=Z.last_text,K=e.type,Z.last_text=e.text,W+=1}return t=j.get_code(),te.end_with_newline&&(t+="\n"),"\n"!=te.eol&&(t=t.replace(/[\n]/g,te.eol)),t}}function o(e){var t=0,n=-1,i=[],r=!0;this.set_indent=function(i){t=e.baseIndentLength+i*e.indent_length,n=i},this.get_character_count=function(){return t},this.is_empty=function(){return r},this.last=function(){return this._empty?null:i[i.length-1]},this.push=function(e){i.push(e),t+=e.length,r=!1},this.pop=function(){var e=null;return r||(e=i.pop(),t-=e.length,r=0===i.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();){i.pop();t-=1}r=0===i.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=i.join("")),t}}function s(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new o(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return 1===this.get_line_number()&&this.just_added_newline()?!1:e||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==u.ForInitializer&&e.mode!==u.Conditional)for(var t=e.start_line_index,i=n.length;i>t;)n[t].remove_indent(),t++},this.trim=function(i){for(i=void 0===i?!1:i,this.current_line.trim(e,t);i&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function a(n,i,r){function o(e){if(!e.match(S))return null;var t={};A.lastIndex=0;for(var n=A.exec(e);n;)t[n[1]]=n[2],n=A.exec(e);return t}function s(){var r,s=[];if(p=0,m="",y>=b)return["","TK_EOF"];var S;S=v.length?v[v.length-1]:new c("TK_START_BLOCK","{");var A=n.charAt(y);for(y+=1;e(A,u);){if(l.newline.test(A)?("\n"!==A||"\r"!==n.charAt(y-2))&&(p+=1,s=[]):s.push(A),y>=b)return["","TK_EOF"];A=n.charAt(y),y+=1}if(s.length&&(m=s.join("")),d.test(A)){var $=!0,k=!0,D=d;for("0"===A&&b>y&&/[Xx]/.test(n.charAt(y))?($=!1,k=!1,A+=n.charAt(y),y+=1,D=h):(A="",y-=1);b>y&&D.test(n.charAt(y));)A+=n.charAt(y),y+=1,$&&b>y&&"."===n.charAt(y)&&(A+=n.charAt(y),y+=1,$=!1),k&&b>y&&/[Ee]/.test(n.charAt(y))&&(A+=n.charAt(y),y+=1,b>y&&/[+-]/.test(n.charAt(y))&&(A+=n.charAt(y),y+=1),k=!1,$=!1);return[A,"TK_WORD"]}if(l.isIdentifierStart(n.charCodeAt(y-1))){if(b>y)for(;l.isIdentifierChar(n.charCodeAt(y))&&(A+=n.charAt(y),y+=1,y!==b););return"TK_DOT"===S.type||"TK_RESERVED"===S.type&&e(S.text,["set","get"])||!e(A,w)?[A,"TK_WORD"]:"in"===A?[A,"TK_OPERATOR"]:[A,"TK_RESERVED"]}if("("===A||"["===A)return[A,"TK_START_EXPR"];if(")"===A||"]"===A)return[A,"TK_END_EXPR"];if("{"===A)return[A,"TK_START_BLOCK"];if("}"===A)return[A,"TK_END_BLOCK"];if(";"===A)return[A,"TK_SEMICOLON"];if("/"===A){var T="";if("*"===n.charAt(y)){y+=1,C.lastIndex=y;var F=C.exec(n);T="/*"+F[0],y+=F[0].length;var L=o(T);return L&&"start"===L.ignore&&(_.lastIndex=y,F=_.exec(n),T+=F[0],y+=F[0].length),T=T.replace(l.lineBreak,"\n"),[T,"TK_BLOCK_COMMENT",L]}if("/"===n.charAt(y)){y+=1,x.lastIndex=y;var F=x.exec(n);return T="//"+F[0],y+=F[0].length,[T,"TK_COMMENT"]}}if("`"===A||"'"===A||'"'===A||("/"===A||i.e4x&&"<"===A&&n.slice(y-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===S.type&&e(S.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===S.type&&")"===S.text&&S.parent&&"TK_RESERVED"===S.parent.type&&e(S.parent.text,["if","while","for"])||e(S.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var O=A,N=!1,B=!1;if(r=A,"/"===O)for(var M=!1;b>y&&(N||M||n.charAt(y)!==O)&&!l.newline.test(n.charAt(y));)r+=n.charAt(y),N?N=!1:(N="\\"===n.charAt(y),"["===n.charAt(y)?M=!0:"]"===n.charAt(y)&&(M=!1)),y+=1;else if(i.e4x&&"<"===O){var R=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,P=n.slice(y-1),I=R.exec(P);if(I&&0===I.index){for(var U=I[2],H=0;I;){var z=!!I[1],j=I[2],W=!!I[I.length-1]||"![CDATA["===j.slice(0,8);if(j!==U||W||(z?--H:++H),0>=H)break;I=R.exec(P)}var V=I?I.index+I[0].length:P.length;return P=P.slice(0,V),y+=V-1,P=P.replace(l.lineBreak,"\n"),[P,"TK_STRING"]}}else for(;b>y&&(N||n.charAt(y)!==O&&("`"===O||!l.newline.test(n.charAt(y))));)(N||"`"===O)&&l.newline.test(n.charAt(y))?("\r"===n.charAt(y)&&"\n"===n.charAt(y+1)&&(y+=1),r+="\n"):r+=n.charAt(y),N?(("x"===n.charAt(y)||"u"===n.charAt(y))&&(B=!0),N=!1):N="\\"===n.charAt(y),y+=1;if(B&&i.unescape_strings&&(r=a(r)),b>y&&n.charAt(y)===O&&(r+=O,y+=1,"/"===O))for(;b>y&&l.isIdentifierStart(n.charCodeAt(y));)r+=n.charAt(y),y+=1;return[r,"TK_STRING"]}if("#"===A){if(0===v.length&&"!"===n.charAt(y)){for(r=A;b>y&&"\n"!==A;)A=n.charAt(y),r+=A,y+=1;return[t(r)+"\n","TK_UNKNOWN"]}var q="#";if(b>y&&d.test(n.charAt(y))){do A=n.charAt(y),q+=A,y+=1;while(b>y&&"#"!==A&&"="!==A);return"#"===A||("["===n.charAt(y)&&"]"===n.charAt(y+1)?(q+="[]",y+=2):"{"===n.charAt(y)&&"}"===n.charAt(y+1)&&(q+="{}",y+=2)),[q,"TK_WORD"]}}if("<"===A&&("?"===n.charAt(y)||"%"===n.charAt(y))){E.lastIndex=y-1;var K=E.exec(n);if(K)return A=K[0],y+=A.length-1,A=A.replace(l.lineBreak,"\n"),[A,"TK_STRING"]}if("<"===A&&"<!--"===n.substring(y-1,y+3)){for(y+=3,A="<!--";!l.newline.test(n.charAt(y))&&b>y;)A+=n.charAt(y),y++;return g=!0,[A,"TK_COMMENT"]}if("-"===A&&g&&"-->"===n.substring(y-1,y+2))return g=!1,y+=2,["-->","TK_COMMENT"];if("."===A)return[A,"TK_DOT"];if(e(A,f)){for(;b>y&&e(A+n.charAt(y),f)&&(A+=n.charAt(y),y+=1,!(y>=b)););return","===A?[A,"TK_COMMA"]:"="===A?[A,"TK_EQUALS"]:[A,"TK_OPERATOR"]}return[A,"TK_UNKNOWN"]}function a(e){for(var t,n=!1,i="",r=0,o="",s=0;n||r<e.length;)if(t=e.charAt(r),r++,n){if(n=!1,"x"===t)o=e.substr(r,2),r+=2;else{if("u"!==t){i+="\\"+t;continue}o=e.substr(r,4),r+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if(s=parseInt(o,16),s>=0&&32>s){i+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===s||39===s||92===s)i+="\\"+String.fromCharCode(s);else{if("x"===t&&s>126&&255>=s)return e;i+=String.fromCharCode(s)}}else"\\"===t?n=!0:i+=t;return i}var u="\n\r	 ".split(""),d=/[0-9]/,h=/[0123456789abcdefABCDEF]/,f="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: => <%= <% %> <?= <? ?>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var p,m,g,v,y,b,w=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),C=/([\s\S]*?)((?:\*\/)|$)/g,x=/([^\n\r\u2028\u2029]*)/g,S=/\/\* beautify( \w+[:]\w+)+ \*\//g,A=/ (\w+)[:](\w+)/g,_=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,E=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){b=n.length,y=0,g=!1,v=[];for(var e,t,i,r=null,o=[],a=[];!t||"TK_EOF"!==t.type;){for(i=s(),e=new c(i[1],i[0],p,m);"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)"TK_BLOCK_COMMENT"===e.type&&(e.directives=i[2]),a.push(e),i=s(),e=new c(i[1],i[0],p,m);a.length&&(e.comments_before=a,a=[]),"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=t,o.push(r),r=e):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&r&&("]"===e.text&&"["===r.text||")"===e.text&&"("===r.text||"}"===e.text&&"{"===r.text)&&(e.parent=r.parent,r=o.pop()),v.push(e),t=e}return v}}var l={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",i=new RegExp("["+t+"]"),r=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=/\r\n|[\n\r\u2028\u2029]/g,e.isIdentifierStart=function(e){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&i.test(String.fromCharCode(e))},e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&r.test(String.fromCharCode(e))}}(l);var u={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},c=function(e,t,n,i,r,o){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=i||"",this.parent=null,this.directives=null};"function"==typeof define&&define.amd?define([],function(){return{js_beautify:i}}):"undefined"!=typeof exports?exports.js_beautify=i:"undefined"!=typeof window?window.js_beautify=i:"undefined"!=typeof global&&(global.js_beautify=i)}(),function(){function e(t,n){function i(){return w=t.charAt(++x),w||""}function r(e){var n="",r=x;return e&&a(),n=t.charAt(x+1)||"",x=r-1,i(),n}function o(e){for(var n=x;i();)if("\\"===w)i();else{if(-1!==e.indexOf(w))break;if("\n"===w)break}return t.substring(n,x+1)}function s(e){var t=x,n=o(e);return x=t-1,i(),n}function a(){for(var e="";C.test(r());)i(),e+=w;return e}function l(){var e="";for(w&&C.test(w)&&(e=w);C.test(i());)e+=w;return e}function u(e){var n=x;for(e="/"===r(),i();i();){if(!e&&"*"===w&&"/"===r()){i();break}if(e&&"\n"===w)return t.substring(n,x)}return t.substring(n,x)+w}function c(e){return t.substring(x-e.length,x).toLowerCase()===e}function d(){for(var e=0,n=x+1;n<t.length;n++){var i=t.charAt(n);if("{"===i)return!0;if("("===i)e+=1;else if(")"===i){if(0==e)return!1;e-=1}else if(";"===i||"}"===i)return!1}return!1}function h(){E++,A+=_}function f(){E--,A=A.slice(0,-p)}n=n||{},t=t||"",t=t.replace(/\r\n|[\r\u2028\u2029]/g,"\n");var p=n.indent_size||4,m=n.indent_char||" ",g=void 0===n.selector_separator_newline?!0:n.selector_separator_newline,v=void 0===n.end_with_newline?!1:n.end_with_newline,y=void 0===n.newline_between_rules?!0:n.newline_between_rules,b=n.eol?n.eol:"\n";"string"==typeof p&&(p=parseInt(p,10)),n.indent_with_tabs&&(m="	",p=1),b=b.replace(/\\r/,"\r").replace(/\\n/,"\n");var w,C=/^\s+$/,x=-1,S=0,A=t.match(/^[\t ]*/)[0],_=new Array(p+1).join(m),E=0,$=0,k={};k["{"]=function(e){k.singleSpace(),D.push(e),k.newLine()},k["}"]=function(e){k.newLine(),D.push(e),k.newLine()},k._lastCharWhitespace=function(){return C.test(D[D.length-1])},k.newLine=function(e){D.length&&(e||"\n"===D[D.length-1]||k.trim(),D.push("\n"),A&&D.push(A))},k.singleSpace=function(){D.length&&!k._lastCharWhitespace()&&D.push(" ")},k.preserveSingleSpace=function(){M&&k.singleSpace()},k.trim=function(){for(;k._lastCharWhitespace();)D.pop()};for(var D=[],T=!1,F=!1,L=!1,O="",N="";;){var B=l(),M=""!==B,R=-1!==B.indexOf("\n");if(N=O,O=w,!w)break;if("/"===w&&"*"===r()){var P=0===E;(R||P)&&k.newLine(),D.push(u()),k.newLine(),P&&k.newLine(!0)}else if("/"===w&&"/"===r())R||"{"===N||k.trim(),
k.singleSpace(),D.push(u()),k.newLine();else if("@"===w){k.preserveSingleSpace(),D.push(w);var I=s(": ,;{}()[]/='\"");I.match(/[ :]$/)&&(i(),I=o(": ").replace(/\s$/,""),D.push(I),k.singleSpace()),I=I.replace(/\s$/,""),I in e.NESTED_AT_RULE&&($+=1,I in e.CONDITIONAL_GROUP_RULE&&(L=!0))}else"#"===w&&"{"===r()?(k.preserveSingleSpace(),D.push(o("}"))):"{"===w?"}"===r(!0)?(a(),i(),k.singleSpace(),D.push("{}"),k.newLine(),y&&0===E&&k.newLine(!0)):(h(),k["{"](w),L?(L=!1,T=E>$):T=E>=$):"}"===w?(f(),k["}"](w),T=!1,F=!1,$&&$--,y&&0===E&&k.newLine(!0)):":"===w?(a(),!T&&!L||c("&")||d()?":"===r()?(i(),D.push("::")):D.push(":"):(F=!0,D.push(":"),k.singleSpace())):'"'===w||"'"===w?(k.preserveSingleSpace(),D.push(o(w))):";"===w?(F=!1,D.push(w),k.newLine()):"("===w?c("url")?(D.push(w),a(),i()&&(")"!==w&&'"'!==w&&"'"!==w?D.push(o(")")):x--)):(S++,k.preserveSingleSpace(),D.push(w),a()):")"===w?(D.push(w),S--):","===w?(D.push(w),a(),g&&!F&&1>S?k.newLine():k.singleSpace()):"]"===w?D.push(w):"["===w?(k.preserveSingleSpace(),D.push(w)):"="===w?(a(),w="=",D.push(w)):(k.preserveSingleSpace(),D.push(w))}var U="";return A&&(U+=A),U+=D.join("").replace(/[\r\n\t ]+$/,""),v&&(U+="\n"),"\n"!=b&&(U=U.replace(/[\n]/g,b)),U}e.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},e.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof define&&define.amd?define([],function(){return{css_beautify:e}}):"undefined"!=typeof exports?exports.css_beautify=e:"undefined"!=typeof window?window.css_beautify=e:"undefined"!=typeof global&&(global.css_beautify=e)}(),function(){function e(e){return e.replace(/^\s+/g,"")}function t(e){return e.replace(/\s+$/g,"")}function n(n,i,r,o){function s(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=l,this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:w,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;e++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)p&&"\n"===e&&this.newlines<=m&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(g){var n=this.input.substr(this.pos,3);if("{{#"===n||"{{/"===n)break;if("{{!"===n)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos===this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),r=i?i.index:this.input.length;return this.pos<r&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,i,r="",o=[],s="",a=!1,l=!0,u=this.pos,d=this.line_char_count;e=void 0!==e?e:!1;do{if(this.pos>=this.input.length)return e&&(this.pos=u,this.line_char_count=d),o.length?o.join(""):["","TK_EOF"];if(r=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(r,this.Utils.whitespace))a=!0;else{if(("'"===r||'"'===r)&&(r+=this.get_unformatted(r),a=!0),"="===r&&(a=!1),o.length&&"="!==o[o.length-1]&&">"!==r&&a){if(this.space_or_wrap(o),a=!1,!l&&"force"===v&&"/"!==r){this.print_newline(!0,o),this.print_indentation(o);for(var h=0;y>h;h++)o.push(c)}for(var p=0;p<o.length;p++)if(" "===o[p]){l=!1;break}}if(g&&"<"===i&&r+this.input.charAt(this.pos)==="{{"&&(r+=this.get_unformatted("}}"),o.length&&" "!==o[o.length-1]&&"<"!==o[o.length-1]&&(r=" "+r),a=!0),"<"!==r||i||(t=this.pos-1,i="<"),g&&!i&&o.length>=2&&"{"===o[o.length-1]&&"{"===o[o.length-2]&&(t="#"===r||"/"===r||"!"===r?this.pos-3:this.pos-2,i="{"),this.line_char_count++,o.push(r),o[1]&&("!"===o[1]||"?"===o[1]||"%"===o[1])){o=[this.get_comment(t)];break}if(g&&o[1]&&"{"===o[1]&&o[2]&&"!"===o[2]){o=[this.get_comment(t)];break}if(g&&"{"===i&&o.length>2&&"}"===o[o.length-2]&&"}"===o[o.length-1])break}}while(">"!==r);var m,b,w=o.join("");m=-1!==w.indexOf(" ")?w.indexOf(" "):"{"===w.charAt(0)?w.indexOf("}"):w.indexOf(">"),b="<"!==w.charAt(0)&&g?"#"===w.charAt(2)?3:2:1;var C=w.substring(b,m).toLowerCase();return"/"===w.charAt(w.length-2)||this.Utils.in_array(C,this.Utils.single_token)?e||(this.tag_type="SINGLE"):g&&"{"===w.charAt(0)&&"else"===C?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(C,f)?(s=this.get_unformatted("</"+C+">",w),o.push(s),n=this.pos-1,this.tag_type="SINGLE"):"script"===C&&(-1===w.search("type")||w.search("type")>-1&&w.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?e||(this.record_tag(C),this.tag_type="SCRIPT"):"style"===C&&(-1===w.search("type")||w.search("type")>-1&&w.search("text/css")>-1)?e||(this.record_tag(C),this.tag_type="STYLE"):"!"===C.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"===C.charAt(0)?(this.retrieve_tag(C.substring(1)),this.tag_type="END"):(this.record_tag(C),"html"!==C.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(o),this.Utils.in_array(C,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=u,this.line_char_count=d),o.join("")},this.get_comment=function(e){var t="",n=">",i=!1;for(this.pos=e,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length&&(t+=input_char,t.charAt(t.length-1)!==n.charAt(n.length-1)||-1===t.indexOf(n));)!i&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",i=!0):0===t.indexOf("<![cdata[")?(n="]]>",i=!0):0===t.indexOf("<![")?(n="]>",i=!0):0===t.indexOf("<!--")?(n="-->",i=!0):0===t.indexOf("{{!")?(n="}}",i=!0):0===t.indexOf("<?")?(n="?>",i=!0):0===t.indexOf("<%")&&(n="%>",i=!0)),input_char=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!==t.toLowerCase().indexOf(e))return"";var n="",i="",r=0,o=!0;do{if(this.pos>=this.input.length)return i;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"===n||"\r"===n){i+="\n",this.line_char_count=0;continue}}i+=n,this.line_char_count++,o=!0,g&&"{"===n&&i.length&&"{"===i.charAt(i.length-2)&&(i+=this.get_unformatted("}}"),r=i.length)}while(-1===i.toLowerCase().indexOf(e,r));return i},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"===this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,1>e?"":Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!==e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=this.get_tag(!0),i=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!i||this.Utils.in_array(i,t)?!0:!1},this.printer=function(n,i,r,o,s){this.input=n||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=i,this.indent_string="",this.indent_size=r,this.brace_style=s,this.indent_level=0,this.wrap_line_length=o,this.line_char_count=0;for(var a=0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(e,n){this.line_char_count=0,n&&n.length&&(e||"\n"!==n[n.length-1])&&("\n"!==n[n.length-1]&&(n[n.length-1]=t(n[n.length-1])),n.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(t){(!this.is_whitespace(t)||this.output.length)&&((t||""!==t)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),t=e(t)),this.print_token_raw(t))},this.print_token_raw=function(e){this.newlines>0&&(e=t(e)),e&&""!==e&&(e.length>1&&"\n"===e.charAt(e.length-1)?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var n=0;n<this.newlines;n++)this.print_newline(n>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var a,l,u,c,d,h,f,p,m,g,v,y,b,w,C;for(i=i||{},void 0!==i.wrap_line_length&&0!==parseInt(i.wrap_line_length,10)||void 0===i.max_char||0===parseInt(i.max_char,10)||(i.wrap_line_length=i.max_char),l=void 0===i.indent_inner_html?!1:i.indent_inner_html,u=void 0===i.indent_size?4:parseInt(i.indent_size,10),c=void 0===i.indent_char?" ":i.indent_char,h=void 0===i.brace_style?"collapse":i.brace_style,d=0===parseInt(i.wrap_line_length,10)?32786:parseInt(i.wrap_line_length||250,10),f=i.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],p=void 0===i.preserve_newlines?!0:i.preserve_newlines,m=p?isNaN(parseInt(i.max_preserve_newlines,10))?32786:parseInt(i.max_preserve_newlines,10):0,g=void 0===i.indent_handlebars?!1:i.indent_handlebars,v=void 0===i.wrap_attributes?"auto":i.wrap_attributes,y=void 0===i.wrap_attributes_indent_size?u:parseInt(i.wrap_attributes_indent_size,10)||u,b=void 0===i.end_with_newline?!1:i.end_with_newline,w="object"==typeof i.extra_liners&&i.extra_liners?i.extra_liners.concat():"string"==typeof i.extra_liners?i.extra_liners.split(","):"head,body,/html".split(","),C=i.eol?i.eol:"\n",i.indent_with_tabs&&(c="	",u=1),C=C.replace(/\\r/,"\r").replace(/\\n/,"\n"),a=new s,a.printer(n,c,u,d,h);;){var x=a.get_token();if(a.token_text=x[0],a.token_type=x[1],"TK_EOF"===a.token_type)break;switch(a.token_type){case"TK_TAG_START":a.print_newline(!1,a.output),a.print_token(a.token_text),a.indent_content&&(a.indent(),a.indent_content=!1),a.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":a.print_newline(!1,a.output),a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===a.last_token&&""===a.last_text){var S=a.token_text.match(/\w+/)[0],A=null;a.output.length&&(A=a.output[a.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===A||A[1]!==S&&!a.Utils.in_array(A[1],f))&&a.print_newline(!1,a.output)}a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var _=a.token_text.match(/^\s*<([a-z-]+)/i);_&&a.Utils.in_array(_[1],f)||a.print_newline(!1,a.output),a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":a.print_token(a.token_text),a.indent_content&&(a.indent(),a.indent_content=!1),a.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":a.print_token(a.token_text),a.current_mode="TAG";break;case"TK_CONTENT":a.print_token(a.token_text),a.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==a.token_text){a.print_newline(!1,a.output);var E,$=a.token_text,k=1;"TK_SCRIPT"===a.token_type?E="function"==typeof r&&r:"TK_STYLE"===a.token_type&&(E="function"==typeof o&&o),"keep"===i.indent_scripts?k=0:"separate"===i.indent_scripts&&(k=-a.indent_level);var D=a.get_full_indent(k);if(E){var T=function(){this.eol="\n"};T.prototype=i;var F=new T;$=E($.replace(/^\s*/,D),F)}else{var L=$.match(/^\s*/)[0],O=L.match(/[^\n\r]*$/)[0].split(a.indent_string).length-1,N=a.get_full_indent(k-O);$=$.replace(/^\s*/,D).replace(/\r\n|\r|\n/g,"\n"+N).replace(/\s+$/,"")}$&&(a.print_token_raw($),a.print_newline(!0,a.output))}a.current_mode="TAG";break;default:""!==a.token_text&&a.print_token(a.token_text)}a.last_token=a.token_type,a.last_text=a.token_text}var B=a.output.join("").replace(/[\r\n\t ]+$/,"");return b&&(B+="\n"),"\n"!=C&&(B=B.replace(/[\n]/g,C)),B}if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(e){var t=e("./beautify"),i=e("./beautify-css");return{html_beautify:function(e,r){return n(e,r,t.js_beautify,i.css_beautify)}}});else if("undefined"!=typeof exports){var i=require("./beautify.js"),r=require("./beautify-css.js");exports.html_beautify=function(e,t){return n(e,t,i.js_beautify,r.css_beautify)}}else"undefined"!=typeof window?window.html_beautify=function(e,t){return n(e,t,window.js_beautify,window.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(e,t){return n(e,t,global.js_beautify,global.css_beautify)})}(),function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){angular.module("nemLogging",[]),angular.module("nemLogging").provider("nemDebug",function(){var t=null;return t=e("debug"),this.$get=function(){return t},this.debug=t,this});var i=function(e,t){return function(){return e.apply(t,arguments)}};angular.module("nemLogging").provider("nemSimpleLogger",["nemDebugProvider",function(e){var t,n,r,o,s,a,l,u,c,d,h;for(d=e.debug,r=["debug","info","warn","error","log"],t={},u=l=0,c=r.length;c>l;u=++l)h=r[u],t[h]=u;return s=function(e,t,n){return e>=t?n():void 0},o=function(e){var t,n,i;if(t=!1,!e)return t;for(n=0,i=r.length;i>n&&(h=r[n],t=null!=e[h]&&"function"==typeof e[h],t);n++);return t},a=function(e,t){var n,i,o,s;for(n=d(e),s={},i=0,o=r.length;o>i;i++)h=r[i],s[h]="debug"===h?n:t[h];return s},n=function(){function e(e){var n,a,l,u,c;if(this.$log=e,this.spawn=i(this.spawn,this),!this.$log)throw"internalLogger undefined";if(!o(this.$log))throw"@$log is invalid";for(this.doLog=!0,c={},n=function(e){return function(n){return c[n]=function(i){return e.doLog?s(t[n],e.currentLevel,function(){return e.$log[n](i)}):void 0},e[n]=c[n]}}(this),a=0,l=r.length;l>a;a++)u=r[a],n(u);this.LEVELS=t,this.currentLevel=t.error}return e.prototype.spawn=function(t){if("string"==typeof t){if(!o(this.$log))throw"@$log is invalid";if(!d)throw"nemDebug is undefined this is probably the light version of this library sep debug logggers is not supported!";return a(t,this.$log)}return new e(t||this.$log)},e}(),this.decorator=["$log",function(e){var i;return i=new n(e),i.currentLevel=t.debug,i}],this.$get=["$log",function(e){return new n(e)}],this}])},{debug:2}],2:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return e}function l(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=o,n.formatArgs=r,n.save=s,n.load=a,n.useColors=i,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":3}],3:[function(e,t,n){function i(){return n.colors[c++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;a++;var r=n.formatters[i];if("function"==typeof r){var o=s[a];t=r.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var l=r.log||n.log||console.log.bind(console);l.apply(e,s)}t.enabled=!1,r.enabled=!0;var o=n.enabled(e)?r:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,r=0;i>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,i;for(t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=l,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,c=0},{ms:4}],4:[function(e,t,n){function i(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*l;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=l?Math.round(e/l)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,c,"day")||s(e,u,"hour")||s(e,l,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,l=60*a,u=60*l,c=24*u,d=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t["long"]?o(e):r(e)}},{}]},{},[1]),function(e,t,n){var i=e.L,r={};r.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=r:"function"==typeof define&&define.amd&&define(r),r.noConflict=function(){return e.L=i,this},e.L=r,r.Util={extend:function(e){var t,n,i,r,o=Array.prototype.slice.call(arguments,1);for(n=0,i=o.length;i>n;n++){r=o[n]||{};for(t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e},bind:function(e,t){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,n||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(n){return n[t]=n[t]||++e,n[t]}}(),invokeEach:function(e,t,n){var i,r;if("object"==typeof e){r=Array.prototype.slice.call(arguments,3);for(i in e)t.apply(n,[i,e[i]].concat(r));return!0}return!1},limitExecByInterval:function(e,t,n){var i,r;return function o(){var s=arguments;return i?void(r=!0):(i=!0,setTimeout(function(){i=!1,r&&(o.apply(n,s),r=!1)},t),void e.apply(n,s))}},falseFn:function(){return!1},formatNum:function(e,t){var n=Math.pow(10,t||5);return Math.round(e*n)/n},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return r.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=r.extend({},e.options,t),e.options},getParamString:function(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,i){var r=t[i];if(r===n)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r})},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var n,i,r=["webkit","moz","o","ms"];for(n=0;n<r.length&&!i;n++)i=e[r[n]+t];return i}function n(t){var n=+new Date,r=Math.max(0,16-(n-i));return i=n+r,e.setTimeout(t,r)}var i=0,o=e.requestAnimationFrame||t("RequestAnimationFrame")||n,s=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};r.Util.requestAnimFrame=function(t,i,s,a){return t=r.bind(t,i),s&&o===n?void t():o.call(e,t,a)},r.Util.cancelAnimFrame=function(t){t&&s.call(e,t)}}(),r.extend=r.Util.extend,r.bind=r.Util.bind,r.stamp=r.Util.stamp,r.setOptions=r.Util.setOptions,r.Class=function(){},r.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;i.constructor=t,t.prototype=i;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(t[o]=this[o]);e.statics&&(r.extend(t,e.statics),delete e.statics),e.includes&&(r.Util.extend.apply(null,[i].concat(e.includes)),delete e.includes),e.options&&i.options&&(e.options=r.extend({},i.options,e.options)),r.extend(i,e),i._initHooks=[];var s=this;return t.__super__=s.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=i._initHooks.length;t>e;e++)i._initHooks[e].call(this)}},t},r.Class.include=function(e){r.extend(this.prototype,e)},r.Class.mergeOptions=function(e){r.extend(this.prototype.options,e)},r.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var o="_leaflet_events";r.Mixin={},r.Mixin.Events={addEventListener:function(e,t,n){if(r.Util.invokeEach(e,this.addEventListener,this,t,n))return this;var i,s,a,l,u,c,d,h=this[o]=this[o]||{},f=n&&n!==this&&r.stamp(n);for(e=r.Util.splitWords(e),i=0,s=e.length;s>i;i++)a={action:t,context:n||this},l=e[i],f?(u=l+"_idx",c=u+"_len",d=h[u]=h[u]||{},d[f]||(d[f]=[],h[c]=(h[c]||0)+1),d[f].push(a)):(h[l]=h[l]||[],h[l].push(a));return this},hasEventListeners:function(e){var t=this[o];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,n){if(!this[o])return this;if(!e)return this.clearAllEventListeners();if(r.Util.invokeEach(e,this.removeEventListener,this,t,n))return this;var i,s,a,l,u,c,d,h,f,p=this[o],m=n&&n!==this&&r.stamp(n);for(e=r.Util.splitWords(e),i=0,s=e.length;s>i;i++)if(a=e[i],c=a+"_idx",d=c+"_len",h=p[c],t){if(l=m&&h?h[m]:p[a]){for(u=l.length-1;u>=0;u--)l[u].action!==t||n&&l[u].context!==n||(f=l.splice(u,1),f[0].action=r.Util.falseFn);n&&h&&0===l.length&&(delete h[m],p[d]--)}}else delete p[a],delete p[c],delete p[d];return this},clearAllEventListeners:function(){return delete this[o],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var n,i,s,a,l,u=r.Util.extend({},t,{type:e,target:this}),c=this[o];if(c[e])for(n=c[e].slice(),i=0,s=n.length;s>i;i++)n[i].action.call(n[i].context,u);a=c[e+"_idx"];for(l in a)if(n=a[l].slice())for(i=0,s=n.length;s>i;i++)n[i].action.call(n[i].context,u);return this},addOneTimeEventListener:function(e,t,n){if(r.Util.invokeEach(e,this.addOneTimeEventListener,this,t,n))return this;var i=r.bind(function(){this.removeEventListener(e,t,n).removeEventListener(e,i,n)},this);return this.addEventListener(e,t,n).addEventListener(e,i,n)}},r.Mixin.Events.on=r.Mixin.Events.addEventListener,r.Mixin.Events.off=r.Mixin.Events.removeEventListener,r.Mixin.Events.once=r.Mixin.Events.addOneTimeEventListener,r.Mixin.Events.fire=r.Mixin.Events.fireEvent,function(){var i="ActiveXObject"in e,o=i&&!t.addEventListener,s=navigator.userAgent.toLowerCase(),a=-1!==s.indexOf("webkit"),l=-1!==s.indexOf("chrome"),u=-1!==s.indexOf("phantom"),c=-1!==s.indexOf("android"),d=-1!==s.search("android [23]"),h=-1!==s.indexOf("gecko"),f=typeof orientation!=n+"",p=!e.PointerEvent&&e.MSPointerEvent,m=e.PointerEvent&&e.navigator.pointerEnabled||p,g="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,v=t.documentElement,y=i&&"transition"in v.style,b="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!d,w="MozPerspective"in v.style,C="OTransition"in v.style,x=!e.L_DISABLE_3D&&(y||b||w||C)&&!u,S=!e.L_NO_TOUCH&&!u&&(m||"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch);r.Browser={ie:i,ielt9:o,webkit:a,gecko:h&&!a&&!e.opera&&!i,android:c,android23:d,chrome:l,ie3d:y,webkit3d:b,gecko3d:w,opera3d:C,any3d:x,mobile:f,mobileWebkit:f&&a,mobileWebkit3d:f&&b,mobileOpera:f&&e.opera,touch:S,msPointer:p,pointer:m,retina:g}}(),r.Point=function(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t},r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},add:function(e){return this.clone()._add(r.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(r.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=r.point(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=r.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=r.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+r.Util.formatNum(this.x)+", "+r.Util.formatNum(this.y)+")"}},r.point=function(e,t,i){return e instanceof r.Point?e:r.Util.isArray(e)?new r.Point(e[0],e[1]):e===n||null===e?e:new r.Point(e,t,i)},r.Bounds=function(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;r>i;i++)this.extend(n[i])},r.Bounds.prototype={extend:function(e){return e=r.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new r.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new r.Point(this.min.x,this.max.y)},getTopRight:function(){return new r.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e="number"==typeof e[0]||e instanceof r.Point?r.point(e):r.bounds(e),e instanceof r.Bounds?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=r.bounds(e);var t=this.min,n=this.max,i=e.min,o=e.max,s=o.x>=t.x&&i.x<=n.x,a=o.y>=t.y&&i.y<=n.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},r.bounds=function(e,t){return!e||e instanceof r.Bounds?e:new r.Bounds(e,t)},r.Transformation=function(e,t,n,i){this._a=e,this._b=t,this._c=n,this._d=i},r.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new r.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},r.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,n){var i=e.style[n];if(!i&&e.currentStyle&&(i=e.currentStyle[n]),(!i||"auto"===i)&&t.defaultView){var r=t.defaultView.getComputedStyle(e,null);i=r?r[n]:null}return"auto"===i?null:i},getViewportOffset:function(e){var n,i=0,o=0,s=e,a=t.body,l=t.documentElement;do{if(i+=s.offsetTop||0,o+=s.offsetLeft||0,i+=parseInt(r.DomUtil.getStyle(s,"borderTopWidth"),10)||0,o+=parseInt(r.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,n=r.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===n)break;if("fixed"===n){i+=a.scrollTop||l.scrollTop||0,o+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===n&&!s.offsetLeft){var u=r.DomUtil.getStyle(s,"width"),c=r.DomUtil.getStyle(s,"max-width"),d=s.getBoundingClientRect();("none"!==u||"none"!==c)&&(o+=d.left+s.clientLeft),i+=d.top+(a.scrollTop||l.scrollTop||0);break}s=s.offsetParent}while(s);s=e;do{if(s===a)break;i-=s.scrollTop||0,o-=s.scrollLeft||0,s=s.parentNode}while(s);return new r.Point(o,i)},documentIsLtr:function(){return r.DomUtil._docIsLtrCached||(r.DomUtil._docIsLtrCached=!0,r.DomUtil._docIsLtr="ltr"===r.DomUtil.getStyle(t.body,"direction")),r.DomUtil._docIsLtr},create:function(e,n,i){var r=t.createElement(e);return r.className=n,i&&i.appendChild(r),r},hasClass:function(e,t){if(e.classList!==n)return e.classList.contains(t);var i=r.DomUtil._getClass(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)},addClass:function(e,t){if(e.classList!==n)for(var i=r.Util.splitWords(t),o=0,s=i.length;s>o;o++)e.classList.add(i[o]);else if(!r.DomUtil.hasClass(e,t)){var a=r.DomUtil._getClass(e);r.DomUtil._setClass(e,(a?a+" ":"")+t)}},removeClass:function(e,t){e.classList!==n?e.classList.remove(t):r.DomUtil._setClass(e,r.Util.trim((" "+r.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){e.className.baseVal===n?e.className=t:e.className.baseVal=t},_getClass:function(e){return e.className.baseVal===n?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}},
testProp:function(e){for(var n=t.documentElement.style,i=0;i<e.length;i++)if(e[i]in n)return e[i];return!1},getTranslateString:function(e){var t=r.Browser.webkit3d,n="translate"+(t?"3d":"")+"(",i=(t?",0":"")+")";return n+e.x+"px,"+e.y+"px"+i},getScaleString:function(e,t){var n=r.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),i=" scale("+e+") ";return n+i},setPosition:function(e,t,n){e._leaflet_pos=t,!n&&r.Browser.any3d?e.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},r.DomUtil.TRANSFORM=r.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),r.DomUtil.TRANSITION=r.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),r.DomUtil.TRANSITION_END="webkitTransition"===r.DomUtil.TRANSITION||"OTransition"===r.DomUtil.TRANSITION?r.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in t)r.extend(r.DomUtil,{disableTextSelection:function(){r.DomEvent.on(e,"selectstart",r.DomEvent.preventDefault)},enableTextSelection:function(){r.DomEvent.off(e,"selectstart",r.DomEvent.preventDefault)}});else{var n=r.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);r.extend(r.DomUtil,{disableTextSelection:function(){if(n){var e=t.documentElement.style;this._userSelect=e[n],e[n]="none"}},enableTextSelection:function(){n&&(t.documentElement.style[n]=this._userSelect,delete this._userSelect)}})}r.extend(r.DomUtil,{disableImageDrag:function(){r.DomEvent.on(e,"dragstart",r.DomEvent.preventDefault)},enableImageDrag:function(){r.DomEvent.off(e,"dragstart",r.DomEvent.preventDefault)}})}(),r.LatLng=function(e,t,i){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,i!==n&&(this.alt=parseFloat(i))},r.extend(r.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),r.LatLng.prototype={equals:function(e){if(!e)return!1;e=r.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=r.LatLng.MAX_MARGIN},toString:function(e){return"LatLng("+r.Util.formatNum(this.lat,e)+", "+r.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=r.latLng(e);var t=6378137,n=r.LatLng.DEG_TO_RAD,i=(e.lat-this.lat)*n,o=(e.lng-this.lng)*n,s=this.lat*n,a=e.lat*n,l=Math.sin(i/2),u=Math.sin(o/2),c=l*l+u*u*Math.cos(s)*Math.cos(a);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(e,t){var n=this.lng;return e=e||-180,t=t||180,n=(n+t)%(t-e)+(e>n||n===t?t:e),new r.LatLng(this.lat,n)}},r.latLng=function(e,t){return e instanceof r.LatLng?e:r.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new r.LatLng(e[0],e[1],e[2]):null:e===n||null===e?e:"object"==typeof e&&"lat"in e?new r.LatLng(e.lat,"lng"in e?e.lng:e.lon):t===n?null:new r.LatLng(e,t)},r.LatLngBounds=function(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;r>i;i++)this.extend(n[i])},r.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=r.latLng(e);return e=null!==t?t:r.latLngBounds(e),e instanceof r.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new r.LatLng(e.lat,e.lng),this._northEast=new r.LatLng(e.lat,e.lng)):e instanceof r.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,o=Math.abs(t.lng-n.lng)*e;return new r.LatLngBounds(new r.LatLng(t.lat-i,t.lng-o),new r.LatLng(n.lat+i,n.lng+o))},getCenter:function(){return new r.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new r.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new r.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof r.LatLng?r.latLng(e):r.latLngBounds(e);var t,n,i=this._southWest,o=this._northEast;return e instanceof r.LatLngBounds?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=o.lat&&t.lng>=i.lng&&n.lng<=o.lng},intersects:function(e){e=r.latLngBounds(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),o=e.getNorthEast(),s=o.lat>=t.lat&&i.lat<=n.lat,a=o.lng>=t.lng&&i.lng<=n.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=r.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},r.latLngBounds=function(e,t){return!e||e instanceof r.LatLngBounds?e:new r.LatLngBounds(e,t)},r.Projection={},r.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=r.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),o=e.lng*t,s=i*t;return s=Math.log(Math.tan(Math.PI/4+s/2)),new r.Point(o,s)},unproject:function(e){var t=r.LatLng.RAD_TO_DEG,n=e.x*t,i=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new r.LatLng(i,n)}},r.Projection.LonLat={project:function(e){return new r.Point(e.lng,e.lat)},unproject:function(e){return new r.LatLng(e.y,e.x)}},r.CRS={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return r.point(t,t)}},r.CRS.Simple=r.extend({},r.CRS,{projection:r.Projection.LonLat,transformation:new r.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),r.CRS.EPSG3857=r.extend({},r.CRS,{code:"EPSG:3857",projection:r.Projection.SphericalMercator,transformation:new r.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),n=6378137;return t.multiplyBy(n)}}),r.CRS.EPSG900913=r.extend({},r.CRS.EPSG3857,{code:"EPSG:900913"}),r.CRS.EPSG4326=r.extend({},r.CRS,{code:"EPSG:4326",projection:r.Projection.LonLat,transformation:new r.Transformation(1/360,.5,-1/360,.5)}),r.Map=r.Class.extend({includes:r.Mixin.Events,options:{crs:r.CRS.EPSG3857,fadeAnimation:r.DomUtil.TRANSITION&&!r.Browser.android23,trackResize:!0,markerZoomAnimation:r.DomUtil.TRANSITION&&r.Browser.any3d},initialize:function(e,t){t=r.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=r.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==n&&this.setView(r.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=t===n?this.getZoom():t,this._resetView(r.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),o=this.getSize().divideBy(2),s=e instanceof r.Point?e:this.latLngToContainerPoint(e),a=s.subtract(o).multiplyBy(1-1/i),l=this.containerPointToLatLng(o.add(a));return this.setView(l,t,{zoom:n})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():r.latLngBounds(e);var n=r.point(t.paddingTopLeft||t.padding||[0,0]),i=r.point(t.paddingBottomRight||t.padding||[0,0]),o=this.getBoundsZoom(e,!1,n.add(i));o=t.maxZoom?Math.min(t.maxZoom,o):o;var s=i.subtract(n).divideBy(2),a=this.project(e.getSouthWest(),o),l=this.project(e.getNorthEast(),o),u=this.unproject(a.add(l).divideBy(2).add(s),o);return this.setView(u,o,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(r.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=r.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,e);return n.equals(i)?this:this.panTo(i,t)},addLayer:function(e){var t=r.stamp(e);return this._layers[t]?this:(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&e instanceof r.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e),this)},removeLayer:function(e){var t=r.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&e instanceof r.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return e?r.stamp(e)in this._layers:!1},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=r.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var n=this.getSize(),i=t.divideBy(2).round(),o=n.divideBy(2).round(),s=i.subtract(o);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:n})):this},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=n}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),n=this.unproject(e.getTopRight());return new r.LatLngBounds(t,n)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom===n?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=r.latLngBounds(e);var i,o=this.getMinZoom()-(t?1:0),s=this.getMaxZoom(),a=this.getSize(),l=e.getNorthWest(),u=e.getSouthEast(),c=!0;n=r.point(n||[0,0]);do o++,i=this.project(u,o).subtract(this.project(l,o)).add(n),c=t?i.x<a.x||i.y<a.y:a.contains(i);while(c&&s>=o);return c&&t?null:t?o:o-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new r.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new r.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===n?this._zoom:t,this.options.crs.latLngToPoint(r.latLng(e),t)},unproject:function(e,t){return t=t===n?this._zoom:t,this.options.crs.pointToLatLng(r.point(e),t)},layerPointToLatLng:function(e){var t=r.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(r.latLng(e))._round();return t._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return r.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return r.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(r.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(e)))},mouseEventToContainerPoint:function(e){return r.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=r.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;r.DomUtil.addClass(e,"leaflet-container"+(r.Browser.touch?" leaflet-touch":"")+(r.Browser.retina?" leaflet-retina":"")+(r.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=r.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(r.DomUtil.addClass(e.markerPane,t),r.DomUtil.addClass(e.shadowPane,t),r.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return r.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){e=e?r.Util.isArray(e)?e:[e]:[];for(var t=0,n=e.length;n>t;t++)this.addLayer(e[t])},_resetView:function(e,t,n,i){var o=this._zoom!==t;i||(this.fire("movestart"),o&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),n?this._initialTopLeftPoint._add(this._getMapPanePos()):r.DomUtil.setPosition(this._mapPane,new r.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!n}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(o||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(e){r.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,i=-(1/0),r=this._getZoomSpan();for(e in this._zoomBoundLayers){var o=this._zoomBoundLayers[e];isNaN(o.options.minZoom)||(t=Math.min(t,o.options.minZoom)),isNaN(o.options.maxZoom)||(i=Math.max(i,o.options.maxZoom))}e===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=i,this._layersMinZoom=t),r!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(r.DomEvent){t=t||"on",r.DomEvent[t](this._container,"click",this._onMouseClick,this);var n,i,o=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=o.length;i>n;n++)r.DomEvent[t](this._container,o[n],this._fireMouseEvent,this);this.options.trackResize&&r.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){r.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=r.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||r.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!r.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&r.DomEvent.preventDefault(e);var n=this.mouseEventToContainerPoint(e),i=this.containerPointToLayerPoint(n),o=this.layerPointToLatLng(i);this.fire(t,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return r.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewTopLeftPoint(n,t).add(this._getMapPanePos());return this.project(e,t)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),o=this.getSize().divideBy(2),s=new r.Bounds(i.subtract(o),i.add(o)),a=this._getBoundsOffset(s,n,t);return this.unproject(i.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new r.Bounds(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=this.project(t.getNorthWest(),n).subtract(e.min),o=this.project(t.getSouthEast(),n).subtract(e.max),s=this._rebound(i.x,-o.x),a=this._rebound(i.y,-o.y);return new r.Point(s,a)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom();return Math.max(t,Math.min(n,e))}}),r.map=function(e,t){return new r.Map(e,t)},r.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=r.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),o=this.R_MAJOR,s=this.R_MINOR,a=e.lng*t*o,l=i*t,u=s/o,c=Math.sqrt(1-u*u),d=c*Math.sin(l);d=Math.pow((1-d)/(1+d),.5*c);var h=Math.tan(.5*(.5*Math.PI-l))/d;return l=-o*Math.log(h),new r.Point(a,l)},unproject:function(e){for(var t,n=r.LatLng.RAD_TO_DEG,i=this.R_MAJOR,o=this.R_MINOR,s=e.x*n/i,a=o/i,l=Math.sqrt(1-a*a),u=Math.exp(-e.y/i),c=Math.PI/2-2*Math.atan(u),d=15,h=1e-7,f=d,p=.1;Math.abs(p)>h&&--f>0;)t=l*Math.sin(c),p=Math.PI/2-2*Math.atan(u*Math.pow((1-t)/(1+t),.5*l))-c,c+=p;return new r.LatLng(c*n,s)}},r.CRS.EPSG3395=r.extend({},r.CRS,{code:"EPSG:3395",projection:r.Projection.Mercator,transformation:function(){var e=r.Projection.Mercator,t=e.R_MAJOR,n=.5/(Math.PI*t);return new r.Transformation(n,.5,-n,.5)}()}),r.TileLayer=r.Class.extend({includes:r.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:r.Browser.mobile,updateWhenIdle:r.Browser.mobile},initialize:function(e,t){t=r.setOptions(this,t),t.detectRetina&&r.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=r.latLngBounds(t.bounds)),this._url=e;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=r.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var n,i,r,o=e.children,s=-t(1/0,-(1/0));for(i=0,r=o.length;r>i;i++)o[i]!==this._container&&(n=parseInt(o[i].style.zIndex,10),isNaN(n)||(s=t(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(r.Browser.ielt9)for(e in t)r.DomUtil.setOpacity(t[e],this.options.opacity);else r.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=r.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var t="leaflet-tile-container";this._bgBuffer=r.DomUtil.create("div",t,this._container),this._tileContainer=r.DomUtil.create("div",t,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&t>n&&(i=Math.round(e.getZoomScale(t)/e.getZoomScale(n)*i)),i},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),n=e.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var o=r.bounds(t.min.divideBy(i)._floor(),t.max.divideBy(i)._floor());this._addTilesFromCenterOut(o),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(o)}}},_addTilesFromCenterOut:function(e){var n,i,o,s=[],a=e.getCenter();for(n=e.min.y;n<=e.max.y;n++)for(i=e.min.x;i<=e.max.x;i++)o=new r.Point(i,n),this._tileShouldBeLoaded(o)&&s.push(o);var l=s.length;if(0!==l){s.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)});var u=t.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,i=0;l>i;i++)this._addTile(s[i],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var n=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=n.x)||e.y<0||e.y>=n.y)return!1}if(t.bounds){var i=this._getTileSize(),r=e.multiplyBy(i),o=r.add([i,i]),s=this._map.unproject(r),a=this._map.unproject(o);if(t.continuousWorld||t.noWrap||(s=s.wrap(),a=a.wrap()),!t.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(e){var t,n,i,r;for(r in this._tiles)t=r.split(":"),n=parseInt(t[0],10),i=parseInt(t[1],10),(n<e.min.x||n>e.max.x||i<e.min.y||i>e.max.y)&&this._removeTile(r)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(r.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),r.Browser.android||(t.onload=null,t.src=r.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var n=this._getTilePos(e),i=this._getTile();r.DomUtil.setPosition(i,n,r.Browser.chrome),this._tiles[e.x+":"+e.y]=i,this._loadTile(i,e),i.parentNode!==this._tileContainer&&t.appendChild(i)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),n=this._getTileSize();return e.multiplyBy(n).subtract(t)},getTileUrl:function(e){return r.Util.template(this._url,r.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){var e=this._map.options.crs,t=e.getSize(this._map.getZoom());return t.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=r.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=r.Util.falseFn,r.Browser.ielt9&&this.options.opacity!==n&&r.DomUtil.setOpacity(e,this.options.opacity),r.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&r.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(r.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==r.Util.emptyImageUrl&&(r.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),r.tileLayer=function(e,t){return new r.TileLayer(e,t)},r.TileLayer.WMS=r.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var n=r.extend({},this.defaultWmsParams),i=t.tileSize||this.options.tileSize;t.detectRetina&&r.Browser.retina?n.width=n.height=2*i:n.width=n.height=i;for(var o in t)this.options.hasOwnProperty(o)||"crs"===o||(n[o]=t[o]);this.wmsParams=n,r.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,r.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,n=this.options.tileSize,i=e.multiplyBy(n),o=i.add([n,n]),s=this._crs.project(t.unproject(i,e.z)),a=this._crs.project(t.unproject(o,e.z)),l=this._wmsVersion>=1.3&&this._crs===r.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),u=r.Util.template(this._url,{s:this._getSubdomain(e)});return u+r.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+l},setParams:function(e,t){return r.extend(this.wmsParams,e),t||this.redraw(),this}}),r.tileLayer.wms=function(e,t){return new r.TileLayer.WMS(e,t)},r.TileLayer.Canvas=r.TileLayer.extend({options:{async:!1},initialize:function(e){r.setOptions(this,e)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var e in this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=r.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=r.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),r.tileLayer.canvas=function(e){return new r.TileLayer.Canvas(e)},r.ImageOverlay=r.Class.extend({includes:r.Mixin.Events,options:{opacity:1},initialize:function(e,t,n){this._url=e,this._bounds=r.latLngBounds(t),r.setOptions(this,n)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&r.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=r.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&r.Browser.any3d?r.DomUtil.addClass(this._image,"leaflet-zoom-animated"):r.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),r.extend(this._image,{galleryimg:"no",onselectstart:r.Util.falseFn,onmousemove:r.Util.falseFn,onload:r.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,n=this._image,i=t.getZoomScale(e.zoom),o=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=t._latLngToNewLayerPoint(o,e.zoom,e.center),l=t._latLngToNewLayerPoint(s,e.zoom,e.center)._subtract(a),u=a._add(l._multiplyBy(.5*(1-1/i)));n.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(u)+" scale("+i+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);
r.DomUtil.setPosition(e,t),e.style.width=n.x+"px",e.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){r.DomUtil.setOpacity(this._image,this.options.opacity)}}),r.imageOverlay=function(e,t,n){return new r.ImageOverlay(e,t,n)},r.Icon=r.Class.extend({options:{className:""},initialize:function(e){r.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i;return i=t&&"IMG"===t.tagName?this._createImg(n,t):this._createImg(n),this._setIconStyles(i,e),i},_setIconStyles:function(e,t){var n,i=this.options,o=r.point(i[t+"Size"]);n="shadow"===t?r.point(i.shadowAnchor||i.iconAnchor):r.point(i.iconAnchor),!n&&o&&(n=o.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+i.className,n&&(e.style.marginLeft=-n.x+"px",e.style.marginTop=-n.y+"px"),o&&(e.style.width=o.x+"px",e.style.height=o.y+"px")},_createImg:function(e,n){return n=n||t.createElement("img"),n.src=e,n},_getIconUrl:function(e){return r.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),r.icon=function(e){return new r.Icon(e)},r.Icon.Default=r.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];r.Browser.retina&&"icon"===e&&(e+="-2x");var n=r.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+e+".png"}}),r.Icon.Default.imagePath=function(){var e,n,i,r,o,s=t.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,n=s.length;n>e;e++)if(i=s[e].src,r=i.match(a))return o=i.split(a)[0],(o?o+"/":"")+"images"}(),r.Marker=r.Class.extend({includes:r.Mixin.Events,options:{icon:new r.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){r.setOptions(this,t),this._latlng=r.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=r.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var e=this.options,t=this._map,n=t.options.zoomAnimation&&t.options.markerZoomAnimation,i=n?"leaflet-zoom-animated":"leaflet-zoom-hide",o=e.icon.createIcon(this._icon),s=!1;o!==this._icon&&(this._icon&&this._removeIcon(),s=!0,e.title&&(o.title=e.title),e.alt&&(o.alt=e.alt)),r.DomUtil.addClass(o,i),e.keyboard&&(o.tabIndex="0"),this._icon=o,this._initInteraction(),e.riseOnHover&&r.DomEvent.on(o,"mouseover",this._bringToFront,this).on(o,"mouseout",this._resetZIndex,this);var a=e.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&r.DomUtil.addClass(a,i),this._shadow=a,e.opacity<1&&this._updateOpacity();var u=this._map._panes;s&&u.markerPane.appendChild(this._icon),a&&l&&u.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&r.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){r.DomUtil.setPosition(this._icon,e),this._shadow&&r.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];r.DomUtil.addClass(e,"leaflet-clickable"),r.DomEvent.on(e,"click",this._onMouseClick,this),r.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var n=0;n<t.length;n++)r.DomEvent.on(e,t[n],this._fireMouseEvent,this);r.Handler.MarkerDrag&&(this.dragging=new r.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&r.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&r.DomEvent.preventDefault(e),"mousedown"!==e.type?r.DomEvent.stopPropagation(e):r.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){r.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&r.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),r.marker=function(e,t){return new r.Marker(e,t)},r.DivIcon=r.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var n=e&&"DIV"===e.tagName?e:t.createElement("div"),i=this.options;return i.html!==!1?n.innerHTML=i.html:n.innerHTML="",i.bgPos&&(n.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),r.divIcon=function(e){return new r.DivIcon(e)},r.Map.mergeOptions({closePopupOnClick:!0}),r.Popup=r.Class.extend({includes:r.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){r.setOptions(this,e),this._source=t,this._animated=r.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&r.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&r.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),r.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&r.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=r.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",n=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=r.DomUtil.create("div",n);this.options.closeButton&&(e=this._closeButton=r.DomUtil.create("a",t+"-close-button",i),e.href="#close",e.innerHTML="&#215;",r.DomEvent.disableClickPropagation(e),r.DomEvent.on(e,"click",this._onCloseButtonClick,this));var o=this._wrapper=r.DomUtil.create("div",t+"-content-wrapper",i);r.DomEvent.disableClickPropagation(o),this._contentNode=r.DomUtil.create("div",t+"-content",o),r.DomEvent.disableScrollPropagation(this._contentNode),r.DomEvent.on(o,"contextmenu",r.DomEvent.stopPropagation),this._tipContainer=r.DomUtil.create("div",t+"-tip-container",i),this._tip=r.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&i>o?(t.height=o+"px",r.DomUtil.addClass(e,s)):r.DomUtil.removeClass(e,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,n=r.point(this.options.offset);t&&r.DomUtil.setPosition(this._container,e),this._containerBottom=-n.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);r.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,n=this._containerWidth,i=new r.Point(this._containerLeft,-t-this._containerBottom);this._animated&&i._add(r.DomUtil.getPosition(this._container));var o=e.layerPointToContainerPoint(i),s=r.point(this.options.autoPanPadding),a=r.point(this.options.autoPanPaddingTopLeft||s),l=r.point(this.options.autoPanPaddingBottomRight||s),u=e.getSize(),c=0,d=0;o.x+n+l.x>u.x&&(c=o.x+n-u.x+l.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+t+l.y>u.y&&(d=o.y+t-u.y+l.y),o.y-d-a.y<0&&(d=o.y-a.y),(c||d)&&e.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(e){this._close(),r.DomEvent.stop(e)}}),r.popup=function(e,t){return new r.Popup(e,t)},r.Map.include({openPopup:function(e,t,n){if(this.closePopup(),!(e instanceof r.Popup)){var i=e;e=new r.Popup(n).setLatLng(t).setContent(i)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),r.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var n=r.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(r.Popup.prototype.options.offset),t&&t.offset&&(n=n.add(t.offset)),t=r.extend({offset:n},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof r.Popup?(r.setOptions(e,t),this._popup=e,e._source=this):this._popup=new r.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),r.LayerGroup=r.Class.extend({initialize:function(e){this._layers={};var t,n;if(e)for(t=0,n=e.length;n>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return e?e in this._layers||this.getLayerId(e)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)n=this._layers[t],n[e]&&n[e].apply(n,i);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return r.stamp(e)}}),r.layerGroup=function(e){return new r.LayerGroup(e)},r.FeatureGroup=r.LayerGroup.extend({includes:r.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),"off"in e&&e.off(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new r.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof r.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(e){e=r.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),r.featureGroup=function(e){return new r.FeatureGroup(e)},r.Path=r.Class.extend({includes:[r.Mixin.Events],statics:{CLIP_PADDING:function(){var t=r.Browser.mobile?1280:2e3,n=(t/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,n))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){r.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,r.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return r.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),r.Map.include({_updatePathViewport:function(){var e=r.Path.CLIP_PADDING,t=this.getSize(),n=r.DomUtil.getPosition(this._mapPane),i=n.multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),o=i.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new r.Bounds(i,o)}}),r.Path.SVG_NS="http://www.w3.org/2000/svg",r.Browser.svg=!(!t.createElementNS||!t.createElementNS(r.Path.SVG_NS,"svg").createSVGRect),r.Path=r.Path.extend({statics:{SVG:r.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,n=e.firstChild;return t&&n!==t&&e.insertBefore(t,n),this},getPathString:function(){},_createElement:function(e){return t.createElementNS(r.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&r.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(r.Browser.svg||!r.Browser.vml)&&r.DomUtil.addClass(this._path,"leaflet-clickable"),r.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)r.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this._map&&this.hasEventListeners(e.type)){var t=this._map,n=t.mouseEventToContainerPoint(e),i=t.containerPointToLayerPoint(n),o=t.layerPointToLatLng(i);this.fire(e.type,{latlng:o,layerPoint:i,containerPoint:n,originalEvent:e}),"contextmenu"===e.type&&r.DomEvent.preventDefault(e),"mousemove"!==e.type&&r.DomEvent.stopPropagation(e)}}}),r.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=r.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&r.Browser.any3d?(r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),n=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(n)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max,i=n.x-t.x,o=n.y-t.y,s=this._pathRoot,a=this._panes.overlayPane;r.Browser.mobileWebkit&&a.removeChild(s),r.DomUtil.setPosition(s,t),s.setAttribute("width",i),s.setAttribute("height",o),s.setAttribute("viewBox",[t.x,t.y,i,o].join(" ")),r.Browser.mobileWebkit&&a.appendChild(s)}}}),r.Path.include({bindPopup:function(e,t){return e instanceof r.Popup?this._popup=e:((!this._popup||t)&&(this._popup=new r.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),r.Browser.vml=!r.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var n=e.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(i){return!1}}(),r.Path=r.Browser.svg||!r.Browser.vml?r.Path:r.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");r.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&r.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",i.appendChild(e)),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=r.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",n.lineCap&&(e.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(e.joinstyle=n.lineJoin)):e&&(i.removeChild(e),this._stroke=null),n.fill?(t||(t=this._fill=this._createElement("fill"),i.appendChild(t)),t.color=n.fillColor||n.color,t.opacity=n.fillOpacity):t&&(i.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),r.Map.include(r.Browser.svg||!r.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=t.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),r.Browser.canvas=function(){return!!t.createElement("canvas").getContext}(),r.Path=r.Path.SVG&&!e.L_PREFER_CANVAS||!r.Browser.canvas?r.Path:r.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return r.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!r.Path._updateRequest&&(r.Path._updateRequest=r.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){r.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color),e.lineCap&&(this._ctx.lineCap=e.lineCap),e.lineJoin&&(this._ctx.lineJoin=e.lineJoin)},_drawPath:function(){var e,t,n,i,o,s;for(this._ctx.beginPath(),e=0,n=this._parts.length;n>e;e++){for(t=0,i=this._parts[e].length;i>t;t++)o=this._parts[e][t],s=(0===t?"move":"line")+"To",this._ctx[s](o.x,o.y);this instanceof r.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill(t.fillRule||"evenodd")),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e){this._containsPoint(e.layerPoint)&&this.fire(e.type,e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),r.Map.include(r.Path.SVG&&!e.L_PREFER_CANVAS||!r.Browser.canvas?{}:{_initPathRoot:function(){var e,n=this._pathRoot;n||(n=this._pathRoot=t.createElement("canvas"),n.style.position="absolute",e=this._canvasCtx=n.getContext("2d"),e.lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,n=e.max.subtract(t),i=this._pathRoot;r.DomUtil.setPosition(i,t),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-t.x,-t.y)}}}),r.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=this._reducePoints(e,n),e=this._simplifyDP(e,n)},pointToSegmentDistance:function(e,t,n){return Math.sqrt(this._sqClosestPointOnSegment(e,t,n,!0))},closestPointOnSegment:function(e,t,n){return this._sqClosestPointOnSegment(e,t,n)},_simplifyDP:function(e,t){var i=e.length,r=typeof Uint8Array!=n+""?Uint8Array:Array,o=new r(i);o[0]=o[i-1]=1,this._simplifyDPStep(e,o,t,0,i-1);var s,a=[];for(s=0;i>s;s++)o[s]&&a.push(e[s]);return a},_simplifyDPStep:function(e,t,n,i,r){var o,s,a,l=0;for(s=i+1;r-1>=s;s++)a=this._sqClosestPointOnSegment(e[s],e[i],e[r],!0),a>l&&(o=s,l=a);l>n&&(t[o]=1,this._simplifyDPStep(e,t,n,i,o),this._simplifyDPStep(e,t,n,o,r))},_reducePoints:function(e,t){for(var n=[e[0]],i=1,r=0,o=e.length;o>i;i++)this._sqDist(e[i],e[r])>t&&(n.push(e[i]),r=i);return o-1>r&&n.push(e[o-1]),n},clipSegment:function(e,t,n,i){var r,o,s,a=i?this._lastCode:this._getBitCode(e,n),l=this._getBitCode(t,n);for(this._lastCode=l;;){if(!(a|l))return[e,t];if(a&l)return!1;r=a||l,o=this._getEdgeIntersection(e,t,r,n),s=this._getBitCode(o,n),r===a?(e=o,a=s):(t=o,l=s)}},_getEdgeIntersection:function(e,t,n,i){var o=t.x-e.x,s=t.y-e.y,a=i.min,l=i.max;return 8&n?new r.Point(e.x+o*(l.y-e.y)/s,l.y):4&n?new r.Point(e.x+o*(a.y-e.y)/s,a.y):2&n?new r.Point(l.x,e.y+s*(l.x-e.x)/o):1&n?new r.Point(a.x,e.y+s*(a.x-e.x)/o):void 0},_getBitCode:function(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},_sqClosestPointOnSegment:function(e,t,n,i){var o,s=t.x,a=t.y,l=n.x-s,u=n.y-a,c=l*l+u*u;return c>0&&(o=((e.x-s)*l+(e.y-a)*u)/c,o>1?(s=n.x,a=n.y):o>0&&(s+=l*o,a+=u*o)),l=e.x-s,u=e.y-a,i?l*l+u*u:new r.Point(s,a)}},r.Polyline=r.Path.extend({initialize:function(e,t){r.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;t>e;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,n="";t>e;e++)n+=this._getPathPartStr(this._parts[e]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(r.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,n,i=1/0,o=this._parts,s=null,a=0,l=o.length;l>a;a++)for(var u=o[a],c=1,d=u.length;d>c;c++){t=u[c-1],n=u[c];var h=r.LineUtil._sqClosestPointOnSegment(e,t,n,!0);i>h&&(i=h,s=r.LineUtil._sqClosestPointOnSegment(e,t,n))}return s&&(s.distance=Math.sqrt(i)),s},getBounds:function(){return new r.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var n,i,o=t?e:[];for(n=0,i=e.length;i>n;n++){if(r.Util.isArray(e[n])&&"number"!=typeof e[n][0])return;o[n]=r.latLng(e[n])}return o},_initEvents:function(){r.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,n=r.Path.VML,i=0,o=e.length,s="";o>i;i++)t=e[i],n&&t._round(),s+=(i?"L":"M")+t.x+" "+t.y;return s},_clipPoints:function(){var e,t,n,i=this._originalPoints,o=i.length;if(this.options.noClip)return void(this._parts=[i]);this._parts=[];var s=this._parts,a=this._map._pathViewport,l=r.LineUtil;for(e=0,t=0;o-1>e;e++)n=l.clipSegment(i[e],i[e+1],a,e),n&&(s[t]=s[t]||[],s[t].push(n[0]),(n[1]!==i[e+1]||e===o-2)&&(s[t].push(n[1]),t++))},_simplifyPoints:function(){for(var e=this._parts,t=r.LineUtil,n=0,i=e.length;i>n;n++)e[n]=t.simplify(e[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),r.Path.prototype._updatePath.call(this))}}),r.polyline=function(e,t){return new r.Polyline(e,t)},r.PolyUtil={},r.PolyUtil.clipPolygon=function(e,t){var n,i,o,s,a,l,u,c,d,h=[1,4,2,8],f=r.LineUtil;for(i=0,u=e.length;u>i;i++)e[i]._code=f._getBitCode(e[i],t);for(s=0;4>s;s++){for(c=h[s],n=[],i=0,u=e.length,o=u-1;u>i;o=i++)a=e[i],l=e[o],a._code&c?l._code&c||(d=f._getEdgeIntersection(l,a,c,t),d._code=f._getBitCode(d,t),n.push(d)):(l._code&c&&(d=f._getEdgeIntersection(l,a,c,t),d._code=f._getBitCode(d,t),n.push(d)),n.push(a));e=n}return e},r.Polygon=r.Polyline.extend({options:{fill:!0},initialize:function(e,t){r.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,n,i;if(e&&r.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,n=this._holes.length;n>t;t++)i=this._holes[t]=this._convertLatLngs(this._holes[t]),i[0].equals(i[i.length-1])&&i.pop();e=this._latlngs,e.length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){if(r.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var e,t,n,i;
for(e=0,n=this._holes.length;n>e;e++)for(this._holePoints[e]=[],t=0,i=this._holes[e].length;i>t;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])}},setLatLngs:function(e){return e&&r.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):r.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;i>n;n++){var o=r.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);o.length&&t.push(o)}this._parts=t}},_getPathPartStr:function(e){var t=r.Polyline.prototype._getPathPartStr.call(this,e);return t+(r.Browser.svg?"z":"x")}}),r.polygon=function(e,t){return new r.Polygon(e,t)},function(){function e(e){return r.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var n=0,i=t.length;for(this.eachLayer(function(e){i>n?e.setLatLngs(t[n++]):this.removeLayer(e)},this);i>n;)this.addLayer(new e(t[n++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}r.MultiPolyline=e(r.Polyline),r.MultiPolygon=e(r.Polygon),r.multiPolyline=function(e,t){return new r.MultiPolyline(e,t)},r.multiPolygon=function(e,t){return new r.MultiPolygon(e,t)}}(),r.Rectangle=r.Polygon.extend({initialize:function(e,t){r.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=r.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),r.rectangle=function(e,t){return new r.Rectangle(e,t)},r.Circle=r.Path.extend({initialize:function(e,t,n){r.Path.prototype.initialize.call(this,n),this._latlng=r.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=r.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,n=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var e=this._getLngRadius(),t=this._mRadius/40075017*360,n=this._latlng;return new r.LatLngBounds([n.lat-t,n.lng-e],[n.lat+t,n.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":r.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(r.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,n=this._point;return n.x-t>e.max.x||n.y-t>e.max.y||n.x+t<e.min.x||n.y+t<e.min.y}}),r.circle=function(e,t,n){return new r.Circle(e,t,n)},r.CircleMarker=r.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){r.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){r.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return r.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),r.circleMarker=function(e,t){return new r.CircleMarker(e,t)},r.Polyline.include(r.Path.CANVAS?{_containsPoint:function(e,t){var n,i,o,s,a,l,u,c=this.options.weight/2;for(r.Browser.touch&&(c+=10),n=0,s=this._parts.length;s>n;n++)for(u=this._parts[n],i=0,a=u.length,o=a-1;a>i;o=i++)if((t||0!==i)&&(l=r.LineUtil.pointToSegmentDistance(e,u[o],u[i]),c>=l))return!0;return!1}}:{}),r.Polygon.include(r.Path.CANVAS?{_containsPoint:function(e){var t,n,i,o,s,a,l,u,c=!1;if(r.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(o=0,l=this._parts.length;l>o;o++)for(t=this._parts[o],s=0,u=t.length,a=u-1;u>s;a=s++)n=t[s],i=t[a],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(c=!c);return c}}:{}),r.Circle.include(r.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,n=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+n}}:{}),r.CircleMarker.include(r.Path.CANVAS?{_updateStyle:function(){r.Path.prototype._updateStyle.call(this)}}:{}),r.GeoJSON=r.FeatureGroup.extend({initialize:function(e,t){r.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,o=r.Util.isArray(e)?e:e.features;if(o){for(t=0,n=o.length;n>t;t++)i=o[t],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(o[t]);return this}var s=this.options;if(!s.filter||s.filter(e)){var a=r.GeoJSON.geometryToLayer(e,s.pointToLayer,s.coordsToLatLng,s);return a.feature=r.GeoJSON.asFeature(e),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(e,a),this.addLayer(a)}},resetStyle:function(e){var t=this.options.style;t&&(r.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),r.extend(r.GeoJSON,{geometryToLayer:function(e,t,n,i){var o,s,a,l,u="Feature"===e.type?e.geometry:e,c=u.coordinates,d=[];switch(n=n||this.coordsToLatLng,u.type){case"Point":return o=n(c),t?t(e,o):new r.Marker(o);case"MultiPoint":for(a=0,l=c.length;l>a;a++)o=n(c[a]),d.push(t?t(e,o):new r.Marker(o));return new r.FeatureGroup(d);case"LineString":return s=this.coordsToLatLngs(c,0,n),new r.Polyline(s,i);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(c,1,n),new r.Polygon(s,i);case"MultiLineString":return s=this.coordsToLatLngs(c,1,n),new r.MultiPolyline(s,i);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,n),new r.MultiPolygon(s,i);case"GeometryCollection":for(a=0,l=u.geometries.length;l>a;a++)d.push(this.geometryToLayer({geometry:u.geometries[a],type:"Feature",properties:e.properties},t,n,i));return new r.FeatureGroup(d);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new r.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,n){var i,r,o,s=[];for(r=0,o=e.length;o>r;r++)i=t?this.coordsToLatLngs(e[r],t-1,n):(n||this.coordsToLatLng)(e[r]),s.push(i);return s},latLngToCoords:function(e){var t=[e.lng,e.lat];return e.alt!==n&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(r.GeoJSON.latLngToCoords(e[n]));return t},getFeature:function(e,t){return e.feature?r.extend({},e.feature,{geometry:t}):r.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var s={toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"Point",coordinates:r.GeoJSON.latLngToCoords(this.getLatLng())})}};r.Marker.include(s),r.Circle.include(s),r.CircleMarker.include(s),r.Polyline.include({toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"LineString",coordinates:r.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),r.Polygon.include({toGeoJSON:function(){var e,t,n,i=[r.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(e=0,t=this._holes.length;t>e;e++)n=r.GeoJSON.latLngsToCoords(this._holes[e]),n.push(n[0]),i.push(n);return r.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function e(e){return function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),r.GeoJSON.getFeature(this,{type:e,coordinates:t})}}r.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),r.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),r.LayerGroup.include({toGeoJSON:function(){var t,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return e("MultiPoint").call(this);var o=n&&"GeometryCollection"===n.type;return this.eachLayer(function(e){e.toGeoJSON&&(t=e.toGeoJSON(),i.push(o?t.geometry:r.GeoJSON.asFeature(t)))}),o?r.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),r.geoJson=function(e,t){return new r.GeoJSON(e,t)},r.DomEvent={addListener:function(e,t,n,i){var o,s,a,l=r.stamp(n),u="_leaflet_"+t+l;return e[u]?this:(o=function(t){return n.call(i||e,t||r.DomEvent._getEvent())},r.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,o,l):(r.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,o,l),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",o,!1),e.addEventListener(t,o,!1)):"mouseenter"===t||"mouseleave"===t?(s=o,a="mouseenter"===t?"mouseover":"mouseout",o=function(t){return r.DomEvent._checkMouse(e,t)?s(t):void 0},e.addEventListener(a,o,!1)):"click"===t&&r.Browser.android?(s=o,o=function(e){return r.DomEvent._filterClick(e,s)},e.addEventListener(t,o,!1)):e.addEventListener(t,o,!1):"attachEvent"in e&&e.attachEvent("on"+t,o),e[u]=o,this))},removeListener:function(e,t,n){var i=r.stamp(n),o="_leaflet_"+t+i,s=e[o];return s?(r.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,i):r.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,i):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",s,!1),e.removeEventListener(t,s,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",s,!1):e.removeEventListener(t,s,!1):"detachEvent"in e&&e.detachEvent("on"+t,s),e[o]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,r.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=r.DomEvent.stopPropagation;return r.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=r.DomEvent.stopPropagation,n=r.Draggable.START.length-1;n>=0;n--)r.DomEvent.on(e,r.Draggable.START[n],t);return r.DomEvent.on(e,"click",r.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return r.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new r.Point(e.clientX,e.clientY);var n=t.getBoundingClientRect();return new r.Point(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){r.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e},_getEvent:function(){var t=e.event;if(!t)for(var n=arguments.callee.caller;n&&(t=n.arguments[0],!t||e.Event!==t.constructor);)n=n.caller;return t},_filterClick:function(e,t){var n=e.timeStamp||e.originalEvent.timeStamp,i=r.DomEvent._lastClick&&n-r.DomEvent._lastClick;return i&&i>100&&500>i||e.target._simulatedClick&&!e._simulated?void r.DomEvent.stop(e):(r.DomEvent._lastClick=n,t(e))}},r.DomEvent.on=r.DomEvent.addListener,r.DomEvent.off=r.DomEvent.removeListener,r.Draggable=r.Class.extend({includes:r.Mixin.Events,statics:{START:r.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=r.Draggable.START.length-1;e>=0;e--)r.DomEvent.on(this._dragStartTarget,r.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=r.Draggable.START.length-1;e>=0;e--)r.DomEvent.off(this._dragStartTarget,r.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!e.shiftKey&&(1===e.which||1===e.button||e.touches)&&(r.DomEvent.stopPropagation(e),!r.Draggable._disabled&&(r.DomUtil.disableImageDrag(),r.DomUtil.disableTextSelection(),!this._moving))){var n=e.touches?e.touches[0]:e;this._startPoint=new r.Point(n.clientX,n.clientY),this._startPos=this._newPos=r.DomUtil.getPosition(this._element),r.DomEvent.on(t,r.Draggable.MOVE[e.type],this._onMove,this).on(t,r.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var n=e.touches&&1===e.touches.length?e.touches[0]:e,i=new r.Point(n.clientX,n.clientY),o=i.subtract(this._startPoint);(o.x||o.y)&&(r.Browser.touch&&Math.abs(o.x)+Math.abs(o.y)<3||(r.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=r.DomUtil.getPosition(this._element).subtract(o),r.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,r.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),r.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){r.DomUtil.removeClass(t.body,"leaflet-dragging"),this._lastTarget&&(r.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in r.Draggable.MOVE)r.DomEvent.off(t,r.Draggable.MOVE[e],this._onMove).off(t,r.Draggable.END[e],this._onUp);r.DomUtil.enableImageDrag(),r.DomUtil.enableTextSelection(),this._moved&&this._moving&&(r.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),r.Handler=r.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),r.Map.mergeOptions({dragging:!0,inertia:!r.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:r.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),r.Map.Drag=r.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new r.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,o=(i+t+n)%e-t-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,n=t.options,i=+new Date-this._lastTime,o=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),o)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,l=n.easeLinearity,u=s.multiplyBy(l/a),c=u.distanceTo([0,0]),d=Math.min(n.inertiaMaxSpeed,c),h=u.multiplyBy(d/c),f=d/(n.inertiaDeceleration*l),p=h.multiplyBy(-f/2).round();p.x&&p.y?(p=t._limitOffset(p,t.options.maxBounds),r.Util.requestAnimFrame(function(){t.panBy(p,{duration:f,easeLinearity:l,noMoveStart:!0})})):t.fire("moveend")}}}),r.Map.addInitHook("addHandler","dragging",r.Map.Drag),r.Map.mergeOptions({doubleClickZoom:!0}),r.Map.DoubleClickZoom=r.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(n):t.setZoomAround(e.containerPoint,n)}}),r.Map.addInitHook("addHandler","doubleClickZoom",r.Map.DoubleClickZoom),r.Map.mergeOptions({scrollWheelZoom:!0}),r.Map.ScrollWheelZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),r.DomEvent.on(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault),this._delta=0},removeHooks:function(){r.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),r.DomEvent.off(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=r.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r.bind(this._performZoom,this),n),r.DomEvent.preventDefault(e),r.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,n=e.getZoom();t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(n+t)-n,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(n+t):e.setZoomAround(this._lastMousePos,n+t))}}),r.Map.addInitHook("addHandler","scrollWheelZoom",r.Map.ScrollWheelZoom),r.extend(r.DomEvent,{_touchstart:r.Browser.msPointer?"MSPointerDown":r.Browser.pointer?"pointerdown":"touchstart",_touchend:r.Browser.msPointer?"MSPointerUp":r.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,n,i){function o(e){var t;if(r.Browser.pointer?(p.push(e.pointerId),t=p.length):t=e.touches.length,!(t>1)){var n=Date.now(),i=n-(a||n);l=e.touches?e.touches[0]:e,u=i>0&&c>=i,a=n}}function s(e){if(r.Browser.pointer){var t=p.indexOf(e.pointerId);if(-1===t)return;p.splice(t,1)}if(u){if(r.Browser.pointer){var i,o={};for(var s in l)i=l[s],"function"==typeof i?o[s]=i.bind(l):o[s]=i;l=o}l.type="dblclick",n(l),a=null}}var a,l,u=!1,c=250,d="_leaflet_",h=this._touchstart,f=this._touchend,p=[];e[d+h+i]=o,e[d+f+i]=s;var m=r.Browser.pointer?t.documentElement:e;return e.addEventListener(h,o,!1),m.addEventListener(f,s,!1),r.Browser.pointer&&m.addEventListener(r.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(e,n){var i="_leaflet_";return e.removeEventListener(this._touchstart,e[i+this._touchstart+n],!1),(r.Browser.pointer?t.documentElement:e).removeEventListener(this._touchend,e[i+this._touchend+n],!1),r.Browser.pointer&&t.documentElement.removeEventListener(r.DomEvent.POINTER_CANCEL,e[i+this._touchend+n],!1),this}}),r.extend(r.DomEvent,{POINTER_DOWN:r.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:r.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:r.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:r.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,n,i){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,n,i);case"touchend":return this.addPointerListenerEnd(e,t,n,i);case"touchmove":return this.addPointerListenerMove(e,t,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,n,i,o){var s="_leaflet_",a=this._pointers,l=function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&r.DomEvent.preventDefault(e);for(var t=!1,n=0;n<a.length;n++)if(a[n].pointerId===e.pointerId){t=!0;break}t||a.push(e),e.touches=a.slice(),e.changedTouches=[e],i(e)};if(e[s+"touchstart"+o]=l,e.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var u=function(e){for(var t=0;t<a.length;t++)if(a[t].pointerId===e.pointerId){a.splice(t,1);break}};t.documentElement.addEventListener(this.POINTER_UP,u,!1),t.documentElement.addEventListener(this.POINTER_CANCEL,u,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,n,i){function r(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<s.length;t++)if(s[t].pointerId===e.pointerId){s[t]=e;break}e.touches=s.slice(),e.changedTouches=[e],n(e)}}var o="_leaflet_",s=this._pointers;return e[o+"touchmove"+i]=r,e.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(e,t,n,i){var r="_leaflet_",o=this._pointers,s=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}e.touches=o.slice(),e.changedTouches=[e],n(e)};return e[r+"touchend"+i]=s,e.addEventListener(this.POINTER_UP,s,!1),e.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(e,t,n){var i="_leaflet_",r=e[i+t+n];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,r,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,r,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,r,!1),e.removeEventListener(this.POINTER_CANCEL,r,!1)}return this}}),r.Map.mergeOptions({touchZoom:r.Browser.touch&&!r.Browser.android23,bounceAtZoomLimits:!0}),r.Map.TouchZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var n=this._map;if(e.touches&&2===e.touches.length&&!n._animatingZoom&&!this._zooming){var i=n.mouseEventToLayerPoint(e.touches[0]),o=n.mouseEventToLayerPoint(e.touches[1]),s=n._getCenterLayerPoint();this._startCenter=i.add(o)._divideBy(2),this._startDist=i.distanceTo(o),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),n._panAnim&&n._panAnim.stop(),r.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),r.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var n=t.mouseEventToLayerPoint(e.touches[0]),i=t.mouseEventToLayerPoint(e.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(t.options.bounceAtZoomLimits||!(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1))&&(this._moved||(r.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),r.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),n=e.layerPointToLatLng(t),i=e.getScaleZoom(this._scale);e._animateZoom(n,i,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var e=this._map;this._zooming=!1,r.DomUtil.removeClass(e._mapPane,"leaflet-touching"),r.Util.cancelAnimFrame(this._animRequest),r.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var n=this._getScaleOrigin(),i=e.layerPointToLatLng(n),o=e.getZoom(),s=e.getScaleZoom(this._scale)-o,a=s>0?Math.ceil(s):Math.floor(s),l=e._limitZoom(o+a),u=e.getZoomScale(l)/this._scale;e._animateZoom(i,l,n,u)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),r.Map.addInitHook("addHandler","touchZoom",r.Map.TouchZoom),r.Map.mergeOptions({tap:!0,tapTolerance:15}),r.Map.Tap=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(r.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var n=e.touches[0],i=n.target;this._startPos=this._newPos=new r.Point(n.clientX,n.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&r.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(r.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),r.DomEvent.on(t,"touchmove",this._onMove,this).on(t,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),r.DomEvent.off(t,"touchmove",this._onMove,this).off(t,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var n=e.changedTouches[0],i=n.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&r.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new r.Point(t.clientX,t.clientY)},_simulateEvent:function(n,i){var r=t.createEvent("MouseEvents");r._simulated=!0,i.target._simulatedClick=!0,r.initMouseEvent(n,!0,!0,e,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(r)}}),r.Browser.touch&&!r.Browser.pointer&&r.Map.addInitHook("addHandler","tap",r.Map.Tap),r.Map.mergeOptions({boxZoom:!0}),r.Map.BoxZoom=r.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){r.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){r.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button?!1:(r.DomUtil.disableTextSelection(),r.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void r.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).on(t,"keydown",this._onKeyDown,this))},_onMouseMove:function(e){this._moved||(this._box=r.DomUtil.create("div","leaflet-zoom-box",this._pane),r.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(e),o=i.subtract(t),s=new r.Point(Math.min(i.x,t.x),Math.min(i.y,t.y));r.DomUtil.setPosition(n,s),this._moved=!0,n.style.width=Math.max(0,Math.abs(o.x)-4)+"px",n.style.height=Math.max(0,Math.abs(o.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),r.DomUtil.enableTextSelection(),r.DomUtil.enableImageDrag(),r.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp).off(t,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,n=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(n)){var i=new r.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(n));t.fitBounds(i),t.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),r.Map.addInitHook("addHandler","boxZoom",r.Map.BoxZoom),r.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),r.Map.Keyboard=r.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),r.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;r.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var n=t.body,i=t.documentElement,r=n.scrollTop||i.scrollTop,o=n.scrollLeft||i.scrollLeft;this._map._container.focus(),e.scrollTo(o,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;n>t;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;n>t;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;n>t;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;n>t;t++)i[r.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;n>t;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;n>t;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){r.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){r.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,n=this._map;if(t in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[t]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(t in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[t])}r.DomEvent.stop(e)}}),r.Map.addInitHook("addHandler","keyboard",r.Map.Keyboard),r.Handler.MarkerDrag=r.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new r.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),r.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),r.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,n=r.DomUtil.getPosition(e._icon),i=e._map.layerPointToLatLng(n);t&&r.DomUtil.setPosition(t,n),e._latlng=i,e.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),r.Control=r.Class.extend({options:{position:"topright"},initialize:function(e){r.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return r.DomUtil.addClass(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),n=e._controlCorners[t];return n.removeChild(this._container),this._map=null,
this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),r.control=function(e){return new r.Control(e)},r.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,o){var s=n+e+" "+n+o;t[e+o]=r.DomUtil.create("div",s,i)}var t=this._controlCorners={},n="leaflet-",i=this._controlContainer=r.DomUtil.create("div",n+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),r.Control.Zoom=r.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=r.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",n,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,n,i,o,s){var a=r.DomUtil.create("a",n,i);a.innerHTML=e,a.href="#",a.title=t;var l=r.DomEvent.stopPropagation;return r.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",r.DomEvent.preventDefault).on(a,"click",o,s).on(a,"click",this._refocusOnMap,s),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";r.DomUtil.removeClass(this._zoomInButton,t),r.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&r.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&r.DomUtil.addClass(this._zoomInButton,t)}}),r.Map.mergeOptions({zoomControl:!0}),r.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new r.Control.Zoom,this.addControl(this.zoomControl))}),r.control.zoom=function(e){return new r.Control.Zoom(e)},r.Control.Attribution=r.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){r.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=r.DomUtil.create("div","leaflet-control-attribution"),r.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):void 0},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):void 0},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),r.Map.mergeOptions({attributionControl:!0}),r.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new r.Control.Attribution).addTo(this))}),r.control.attribution=function(e){return new r.Control.Attribution(e)},r.Control.Scale=r.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",n=r.DomUtil.create("div",t),i=this.options;return this._addScales(i,t,n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=r.DomUtil.create("div",t+"-line",n)),e.imperial&&(this._iScale=r.DomUtil.create("div",t+"-line",n))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,n=6378137*Math.PI*Math.cos(t*Math.PI/180),i=n*(e.getNorthEast().lng-e.getSouthWest().lng)/180,r=this._map.getSize(),o=this.options,s=0;r.x>0&&(s=i*(o.maxWidth/r.x)),this._updateScales(o,s)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=1e3>t?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,n,i,r=3.2808399*e,o=this._iScale;r>5280?(t=r/5280,n=this._getRoundNum(t),o.style.width=this._getScaleWidth(n/t)+"px",o.innerHTML=n+" mi"):(i=this._getRoundNum(r),o.style.width=this._getScaleWidth(i/r)+"px",o.innerHTML=i+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),r.control.scale=function(e){return new r.Control.Scale(e)},r.Control.Layers=r.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,n){r.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var i in e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=r.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=r.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),r.Browser.touch?r.DomEvent.on(t,"click",r.DomEvent.stopPropagation):r.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var n=this._form=r.DomUtil.create("form",e+"-list");if(this.options.collapsed){r.Browser.android||r.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._layersLink=r.DomUtil.create("a",e+"-toggle",t);i.href="#",i.title="Layers",r.Browser.touch?r.DomEvent.on(i,"click",r.DomEvent.stop).on(i,"click",this._expand,this):r.DomEvent.on(i,"focus",this._expand,this),r.DomEvent.on(n,"click",function(){setTimeout(r.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=r.DomUtil.create("div",e+"-base",n),this._separator=r.DomUtil.create("div",e+"-separator",n),this._overlaysList=r.DomUtil.create("div",e+"-overlays",n),t.appendChild(n)},_addLayer:function(e,t,n){var i=r.stamp(e);this._layers[i]={layer:e,name:t,overlay:n},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,n=!1,i=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),i=i||t.overlay,n=n||!t.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(e){var t=this._layers[r.stamp(e.layer)];if(t){this._handlingClick||this._update();var n=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)}},_createRadioElement:function(e,n){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';n&&(i+=' checked="checked"'),i+="/>";var r=t.createElement("div");return r.innerHTML=i,r.firstChild},_addItem:function(e){var n,i=t.createElement("label"),o=this._map.hasLayer(e.layer);e.overlay?(n=t.createElement("input"),n.type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=o):n=this._createRadioElement("leaflet-base-layers",o),n.layerId=r.stamp(e.layer),r.DomEvent.on(n,"click",this._onInputClick,this);var s=t.createElement("span");s.innerHTML=" "+e.name,i.appendChild(n),i.appendChild(s);var a=e.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(i),i},_onInputClick:function(){var e,t,n,i=this._form.getElementsByTagName("input"),r=i.length;for(this._handlingClick=!0,e=0;r>e;e++)t=i[e],n=this._layers[t.layerId],t.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!t.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),r.control.layers=function(e,t,n){return new r.Control.Layers(e,t,n)},r.PosAnimation=r.Class.extend({includes:r.Mixin.Events,run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[r.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",r.DomEvent.on(e,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),r.DomUtil.setPosition(e,t),r.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(r.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(r.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),r.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();return e?(this._el._leaflet_pos=e,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,n,i,o=this._el,s=e.getComputedStyle(o);if(r.Browser.any3d){if(i=s[r.DomUtil.TRANSFORM].match(this._transformRe),!i)return;t=parseFloat(i[1]),n=parseFloat(i[2])}else t=parseFloat(s.left),n=parseFloat(s.top);return new r.Point(t,n,!0)},_onTransitionEnd:function(){r.DomEvent.off(this._el,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[r.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),r.Map.include({setView:function(e,t,i){if(t=t===n?this._zoom:this._limitZoom(t),e=this._limitCenter(r.latLng(e),t,this.options.maxBounds),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==n&&(i.zoom=r.extend({animate:i.animate},i.zoom),i.pan=r.extend({animate:i.animate},i.pan));var o=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=r.point(e).round(),t=t||{},!e.x&&!e.y)return this;if(this._panAnim||(this._panAnim=new r.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){r.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){r.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._floor();return(t&&t.animate)===!0||this.getSize().contains(n)?(this.panBy(n,t),!0):!1}}),r.PosAnimation=r.DomUtil.TRANSITION?r.PosAnimation:r.PosAnimation.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=r.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=r.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;t>e?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));r.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){r.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),r.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),r.DomUtil.TRANSITION&&r.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&r.DomUtil.TRANSITION&&r.Browser.any3d&&!r.Browser.android23&&!r.Browser.mobileOpera,this._zoomAnimated&&r.DomEvent.on(this._mapPane,r.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),r.Map.include(r.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i),o=this._getCenterLayerPoint()._add(r);return n.animate===!0||this.getSize().contains(r)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,o,i,null,!0),!0):!1},_animateZoom:function(e,t,n,i,o,s,a){a||(this._animatingZoom=!0),r.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,r.Draggable&&(r.Draggable._disabled=!0),r.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:e,zoom:t,origin:n,scale:i,delta:o,backwards:s}),setTimeout(r.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,r.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),r.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),r.Draggable&&(r.Draggable._disabled=!1)},this))}}:{}),r.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,n=r.DomUtil.TRANSFORM,i=e.delta?r.DomUtil.getTranslateString(e.delta):t.style[n],o=r.DomUtil.getScaleString(e.scale,e.origin);t.style[n]=e.backwards?o+" "+i:i+" "+o},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),r.Util.falseFn(t.offsetWidth);var n=this._map.getZoom();(n>this.options.maxZoom||n<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[r.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,n=this._getLoadedTilesPercentage(t),i=this._getLoadedTilesPercentage(e);return t&&n>.5&&.5>i?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[r.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,n,i=e.getElementsByTagName("img"),r=0;for(t=0,n=i.length;n>t;t++)i[t].complete&&r++;return r/n},_stopLoadingImages:function(e){var t,n,i,o=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,n=o.length;n>t;t++)i=o[t],i.complete||(i.onload=r.Util.falseFn,i.onerror=r.Util.falseFn,i.src=r.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),r.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=r.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r.bind(this._handleGeolocationResponse,this),n=r.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,n,e):navigator.geolocation.getCurrentPosition(t,n,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,n=e.coords.longitude,i=new r.LatLng(t,n),o=180*e.coords.accuracy/40075017,s=o/Math.cos(r.LatLng.DEG_TO_RAD*t),a=r.latLngBounds([t-o,n-s],[t+o,n+s]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(i,u)}var c={latlng:i,bounds:a,timestamp:e.timestamp};for(var d in e.coords)"number"==typeof e.coords[d]&&(c[d]=e.coords[d]);this.fire("locationfound",c)}})}(window,document),function(e,t,n){L.labelVersion="0.2.1",L.Label=L.Class.extend({includes:L.Mixin.Events,options:{className:"",clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(e,t){L.setOptions(this,e),this._source=t,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._pane=this._source instanceof L.Marker?e._panes.markerPane:e._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),e.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&e.on("zoomanim",this._zoomAnimation,this),L.Browser.touch&&!this.options.noHide&&L.DomEvent.on(this._container,"click",this.close,this)},onRemove:function(e){this._pane.removeChild(this._container),e.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(e){return this._latlng=L.latLng(e),this._map&&this._updatePosition(),this},setContent:function(e){return this._previousContent=this._content,this._content=e,this._updateContent(),this},close:function(){var e=this._map;e&&(L.Browser.touch&&!this.options.noHide&&L.DomEvent.off(this._container,"click",this.close),e.removeLayer(this))},updateZIndex:function(e){this._zIndex=e,this._container&&this._zIndex&&(this._container.style.zIndex=e)},setOpacity:function(e){this.options.opacity=e,this._container&&L.DomUtil.setOpacity(this._container,e)},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},_setPosition:function(e){var t=this._map,n=this._container,i=t.latLngToContainerPoint(t.getCenter()),r=t.layerPointToContainerPoint(e),o=this.options.direction,s=this._labelWidth,a=L.point(this.options.offset);"right"===o||"auto"===o&&r.x<i.x?(L.DomUtil.addClass(n,"leaflet-label-right"),L.DomUtil.removeClass(n,"leaflet-label-left"),e=e.add(a)):(L.DomUtil.addClass(n,"leaflet-label-left"),L.DomUtil.removeClass(n,"leaflet-label-right"),e=e.add(L.point(-a.x-s,a.y))),L.DomUtil.setPosition(n,e)},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPosition(t)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(e){e&&e.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var e=this._container,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(e,"leaflet-clickable"),L.DomEvent.on(e,"click",this._onMouseClick,this);for(var n=0;n<t.length;n++)L.DomEvent.on(e,t[n],this._fireMouseEvent,this)}},_removeInteraction:function(){if(this.options.clickable){var e=this._container,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.removeClass(e,"leaflet-clickable"),L.DomEvent.off(e,"click",this._onMouseClick,this);for(var n=0;n<t.length;n++)L.DomEvent.off(e,t[n],this._fireMouseEvent,this)}},_onMouseClick:function(e){this.hasEventListeners(e.type)&&L.DomEvent.stopPropagation(e),this.fire(e.type,{originalEvent:e})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&L.DomEvent.preventDefault(e),"mousedown"!==e.type?L.DomEvent.stopPropagation(e):L.DomEvent.preventDefault(e)}}),L.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(e){this._labelNoHide!==e&&(this._labelNoHide=e,e?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(e,t){var n=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,i=L.point(n)||L.point(0,0);return i=i.add(L.Label.prototype.options.offset),t&&t.offset&&(i=i.add(t.offset)),t=L.Util.extend({offset:i},t),this._labelNoHide=t.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new L.Label(t,this).setContent(e),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(e){this.label&&this.label.setContent(e)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),L.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),L.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(e){this.label.setLatLng(e.latlng)}},L.Icon.Default.mergeOptions({labelAnchor:new L.Point(9,-20)}),L.Marker.mergeOptions({icon:new L.Icon.Default}),L.Marker.include(L.BaseMarkerMethods),L.Marker.include({_originalUpdateZIndex:L.Marker.prototype._updateZIndex,_updateZIndex:function(e){var t=this._zIndex+e;this._originalUpdateZIndex(e),this.label&&this.label.updateZIndex(t)},_originalSetOpacity:L.Marker.prototype.setOpacity,setOpacity:function(e,t){this.options.labelHasSemiTransparency=t,this._originalSetOpacity(e)},_originalUpdateOpacity:L.Marker.prototype._updateOpacity,_updateOpacity:function(){var e=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:e)},_originalSetLatLng:L.Marker.prototype.setLatLng,setLatLng:function(e){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(e)}}),L.CircleMarker.mergeOptions({labelAnchor:new L.Point(0,0)}),L.CircleMarker.include(L.BaseMarkerMethods),L.Path.include({bindLabel:function(e,t){return this.label&&this.label.options===t||(this.label=new L.Label(t,this)),this.label.setContent(e),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),L.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(e){this.label&&this.label.setContent(e)},_showLabel:function(e){this.label.setLatLng(e.latlng),this._map.showLabel(this.label)},_moveLabel:function(e){this.label.setLatLng(e.latlng)},_hideLabel:function(){this.label.close()}}),L.Map.include({showLabel:function(e){return this.addLayer(e)}}),L.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(e,t){return this.invoke("bindLabel",e,t)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(e){this.invoke("updateLabelContent",e)}})}(this,document),function(angular){"use strict";angular.module("leaflet-directive",["nemLogging"]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletMapEvents",function(e,t,n,i,r){return{restrict:"EA",replace:!0,scope:{center:"=",lfCenter:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude></div></div>',controller:["$scope",function(t){this._leafletMap=e.defer(),this.getMap=function(){return this._leafletMap.promise},this.getLeafletScope=function(){return t}}],link:function(e,o,s,a){function l(){isNaN(s.width)?o.css("width",s.width):o.css("width",s.width+"px")}function u(){isNaN(s.height)?o.css("height",s.height):o.css("height",s.height+"px")}var c=i.isDefined,d=n.setDefaults(e.defaults,s.id),h=r.getAvailableMapEvents(),f=r.addEvents;e.mapId=s.id,t.setDirectiveControls({},s.id),c(s.width)&&(l(),e.$watch(function(){return o[0].getAttribute("width")},function(){l(),p.invalidateSize()})),c(s.height)&&(u(),e.$watch(function(){return o[0].getAttribute("height")},function(){u(),p.invalidateSize()}));var p=new L.Map(o[0],n.getMapCreationDefaults(s.id));if(a._leafletMap.resolve(p),c(s.center)||c(s.lfCenter)||p.setView([d.center.lat,d.center.lng],d.center.zoom),!c(s.tiles)&&!c(s.layers)){var m=L.tileLayer(d.tileLayer,d.tileLayerOptions);m.addTo(p),t.setTiles(m,s.id)}if(c(p.zoomControl)&&c(d.zoomControlPosition)&&p.zoomControl.setPosition(d.zoomControlPosition),c(p.zoomControl)&&d.zoomControl===!1&&p.zoomControl.removeFrom(p),c(p.zoomsliderControl)&&c(d.zoomsliderControl)&&d.zoomsliderControl===!1&&p.zoomsliderControl.removeFrom(p),!c(s.eventBroadcast)){var g="broadcast";f(p,h,"eventName",e,g)}p.whenReady(function(){t.setMap(p,s.id)}),e.$on("$destroy",function(){n.reset(),p.remove(),t.unresolveMap(s.id)}),e.$on("invalidateSize",function(){p.invalidateSize()})}}}]),angular.module("leaflet-directive").factory("leafletBoundsHelpers",["leafletLogger","leafletHelpers",function(e,t){function n(e){return angular.isDefined(e)&&angular.isDefined(e.southWest)&&angular.isDefined(e.northEast)&&angular.isNumber(e.southWest.lat)&&angular.isNumber(e.southWest.lng)&&angular.isNumber(e.northEast.lat)&&angular.isNumber(e.northEast.lng)}var i=t.isArray,r=t.isNumber,o=t.isFunction,s=t.isDefined,a=e;return{createLeafletBounds:function(e){return n(e)?L.latLngBounds([e.southWest.lat,e.southWest.lng],[e.northEast.lat,e.northEast.lng]):void 0},isValidBounds:n,createBoundsFromArray:function(e){return i(e)&&2===e.length&&i(e[0])&&i(e[1])&&2===e[0].length&&2===e[1].length&&r(e[0][0])&&r(e[0][1])&&r(e[1][0])&&r(e[1][1])?{northEast:{lat:e[0][0],lng:e[0][1]},southWest:{lat:e[1][0],lng:e[1][1]}}:void a.error("[AngularJS - Leaflet] The bounds array is not valid.")},createBoundsFromLeaflet:function(e){if(!(s(e)&&o(e.getNorthEast)&&o(e.getSouthWest)))return void a.error("[AngularJS - Leaflet] The leaflet bounds is not valid object.");var t=e.getNorthEast(),n=e.getSouthWest();return{northEast:{lat:t.lat,lng:t.lng},southWest:{lat:n.lat,lng:n.lng}}}}}]),angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","leafletLogger","leafletHelpers","leafletLayerHelpers","leafletMapDefaults",function(e,t,n,i,r){var o=n.isDefined,s=n.isObject,a=i.createLayer,l={},u=n.errorHeader+" [Controls] ",c=t,d=function(e,t,n){var i=r.getDefaults(n);if(!i.controls.layers.visible)return!1;var a=!1;return s(e)&&Object.keys(e).forEach(function(t){var n=e[t];o(n.layerOptions)&&n.layerOptions.showOnSelector===!1||(a=!0)}),s(t)&&Object.keys(t).forEach(function(e){var n=t[e];o(n.layerParams)&&n.layerParams.showOnSelector===!1||(a=!0)}),a},h=function(e){var t=r.getDefaults(e),n={collapsed:t.controls.layers.collapsed,position:t.controls.layers.position,autoZIndex:!1};angular.extend(n,t.controls.layers.options);var i;return i=t.controls.layers&&o(t.controls.layers.control)?t.controls.layers.control.apply(this,[[],[],n]):new L.control.layers([],[],n)},f={draw:{isPluginLoaded:function(){return angular.isDefined(L.Control.Draw)?!0:(c.error(u+" Draw plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Draw(e)}},scale:{isPluginLoaded:function(){return!0},checkValidParams:function(){return!0},createControl:function(e){return new L.control.scale(e)}},fullscreen:{isPluginLoaded:function(){return angular.isDefined(L.Control.Fullscreen)?!0:(c.error(u+" Fullscreen plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Fullscreen(e)}},search:{isPluginLoaded:function(){return angular.isDefined(L.Control.Search)?!0:(c.error(u+" Search plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(e){return new L.Control.Search(e)}},custom:{},minimap:{isPluginLoaded:function(){return angular.isDefined(L.Control.MiniMap)?!0:(c.error(u+" Minimap plugin is not loaded."),!1)},checkValidParams:function(e){return o(e.layer)?!0:(c.warn(u+' minimap "layer" option should be defined.'),!1)},createControl:function(e){var t=a(e.layer);return o(t)?new L.Control.MiniMap(t,e):void c.warn(u+' minimap control "layer" could not be created.')}}};return{layersControlMustBeVisible:d,isValidControlType:function(e){return-1!==Object.keys(f).indexOf(e)},createControl:function(e,t){return f[e].checkValidParams(t)?f[e].createControl(t):void 0},updateLayersControl:function(e,t,n,i,r,s){var a,u=l[t],c=d(i,r,t);if(o(u)&&n){for(a in s.baselayers)u.removeLayer(s.baselayers[a]);for(a in s.overlays)u.removeLayer(s.overlays[a]);e.removeControl(u),delete l[t]}if(c){u=h(t),l[t]=u;for(a in i){var f=o(i[a].layerOptions)&&i[a].layerOptions.showOnSelector===!1;!f&&o(s.baselayers[a])&&u.addBaseLayer(s.baselayers[a],i[a].name)}for(a in r){var p=o(r[a].layerParams)&&r[a].layerParams.showOnSelector===!1;!p&&o(s.overlays[a])&&u.addOverlay(s.overlays[a],r[a].name)}e.addControl(u)}return c}}}]),angular.module("leaflet-directive").service("leafletData",["leafletLogger","$q","leafletHelpers",function(e,t,n){var i=n.getDefer,r=n.getUnresolvedDefer,o=n.setResolvedDefer,s={},a=this,l=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},u=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];
u.forEach(function(e){s[e]={}}),this.unresolveMap=function(e){var t=n.obtainEffectiveMapId(s.map,e);u.forEach(function(e){s[e][t]=void 0})},u.forEach(function(e){var t=l(e);a["set"+t]=function(t,n){var i=r(s[e],n);i.resolve(t),o(s[e],n)},a["get"+t]=function(t){var n=i(s[e],t);return n.promise}})}]),angular.module("leaflet-directive").service("leafletDirectiveControlsHelpers",["leafletLogger","leafletData","leafletHelpers",function(e,t,n){var i=n.isDefined,r=n.isString,o=n.isObject,s=n.errorHeader,a=e,l=s+"[leafletDirectiveControlsHelpers",u=function(e,n,s,u){var c=l+".extend] ",d={};if(!i(n))return void a.error(c+"thingToAddName cannot be undefined");if(r(n)&&i(s)&&i(u))d[n]={create:s,clean:u};else{if(!o(n)||i(s)||i(u))return void a.error(c+"incorrect arguments");d=n}t.getDirectiveControls().then(function(n){angular.extend(n,d),t.setDirectiveControls(n,e)})};return{extend:u}}]),angular.module("leaflet-directive").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(e,t){var n=e,i=t,r=function(e,t){return this.lat=e,this.lng=t,this},o=function(e){return Array.isArray(e)&&2===e.length?e[1]:n.isDefined(e.type)&&"Point"===e.type?+e.coordinates[1]:+e.lat},s=function(e){return Array.isArray(e)&&2===e.length?e[0]:n.isDefined(e.type)&&"Point"===e.type?+e.coordinates[0]:+e.lng},a=function(e){if(n.isUndefined(e))return!1;if(n.isArray(e)){if(2===e.length&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0}else if(n.isDefined(e.type)&&"Point"===e.type&&n.isArray(e.coordinates)&&2===e.coordinates.length&&n.isNumber(e.coordinates[0])&&n.isNumber(e.coordinates[1]))return!0;var t=i.all(["lat","lng"],function(t){return n.isDefined(e[t])&&n.isNumber(e[t])});return t},l=function(e){if(e&&a(e)){var t=null;if(Array.isArray(e)&&2===e.length)t=new r(e[1],e[0]);else{if(!n.isDefined(e.type)||"Point"!==e.type)return e;t=new r(e.coordinates[1],e.coordinates[0])}return angular.extend(e,t)}};return{getLat:o,getLng:s,validateCoords:a,getCoords:l}}]),angular.module("leaflet-directive").service("leafletHelpers",["$q","$log",function(e,t){function n(e,n){var i,o;if(angular.isDefined(n))i=n;else if(0===Object.keys(e).length)i="main";else if(Object.keys(e).length>=1)for(o in e)e.hasOwnProperty(o)&&(i=o);else t.error(r+"- You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return i}function i(t,i){var r,o=n(t,i);return angular.isDefined(t[o])&&t[o].resolvedDefer!==!0?r=t[o].defer:(r=e.defer(),t[o]={defer:r,resolvedDefer:!1}),r}var r="[AngularJS - Leaflet] ",o=angular.copy,s=o,a=function(e,t){var n;if(e&&angular.isObject(e))return null!==t&&angular.isString(t)?(n=e,t.split(".").forEach(function(e){n&&(n=n[e])}),n):t},l=function(e){return e.split(".").reduce(function(e,t){return e+'["'+t+'"]'})},u=function(e){return e.reduce(function(e,t){return e+"."+t})},c=function(e){return angular.isDefined(e)&&null!==e},d=function(e){return!c(e)},h=/([\:\-\_]+(.))/g,f=/^moz([A-Z])/,p=/^((?:x|data)[\:\-_])/i,m=function(e){return e.replace(h,function(e,t,n,i){return i?n.toUpperCase():n}).replace(f,"Moz$1")},g=function(e){return m(e.replace(p,""))};return{camelCase:m,directiveNormalize:g,copy:o,clone:s,errorHeader:r,getObjectValue:a,getObjectArrayPath:l,getObjectDotPath:u,defaultTo:function(e,t){return c(e)?e:t},isTruthy:function(e){return"true"===e||e===!0},isEmpty:function(e){return 0===Object.keys(e).length},isUndefinedOrEmpty:function(e){return angular.isUndefined(e)||null===e||0===Object.keys(e).length},isDefined:c,isUndefined:d,isNumber:angular.isNumber,isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isFunction:angular.isFunction,equals:angular.equals,isValidCenter:function(e){return angular.isDefined(e)&&angular.isNumber(e.lat)&&angular.isNumber(e.lng)&&angular.isNumber(e.zoom)},isValidPoint:function(e){return angular.isDefined(e)?angular.isArray(e)?2===e.length&&angular.isNumber(e[0])&&angular.isNumber(e[1]):angular.isNumber(e.lat)&&angular.isNumber(e.lng):!1},isSameCenterOnMap:function(e,t){var n=t.getCenter(),i=t.getZoom();return e.lat&&e.lng&&n.lat.toFixed(4)===e.lat.toFixed(4)&&n.lng.toFixed(4)===e.lng.toFixed(4)&&i===e.zoom?!0:!1},safeApply:function(e,t){var n=e.$root.$$phase;"$apply"===n||"$digest"===n?e.$eval(t):e.$evalAsync(t)},obtainEffectiveMapId:n,getDefer:function(e,t){var r,o=n(e,t);return r=angular.isDefined(e[o])&&e[o].resolvedDefer!==!1?e[o].defer:i(e,t)},getUnresolvedDefer:i,setResolvedDefer:function(e,t){var i=n(e,t);e[i].resolvedDefer=!0},rangeIsSupported:function(){var e=document.createElement("input");return e.setAttribute("type","range"),"range"===e.type},FullScreenControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.Fullscreen)}},MiniMapControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.MiniMap)}},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)},is:function(e){return this.isLoaded()?e instanceof L.AwesomeMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},VectorMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.VectorMarkers)&&angular.isDefined(L.VectorMarkers.Icon)},is:function(e){return this.isLoaded()?e instanceof L.VectorMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},DomMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.DomMarkers)&&angular.isDefined(L.DomMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.DomMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},PolylineDecoratorPlugin:{isLoaded:function(){return angular.isDefined(L.PolylineDecorator)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.PolylineDecorator:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},MakiMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.MakiMarkers)&&angular.isDefined(L.MakiMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.MakiMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},ExtraMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.ExtraMarkers)&&angular.isDefined(L.ExtraMarkers.Icon)?!0:!1},is:function(e){return this.isLoaded()?e instanceof L.ExtraMarkers.Icon:!1},equal:function(e,t){return this.isLoaded()&&this.is(e)?angular.equals(e,t):!1}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(e){return this.isLoaded()?e instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(e){return this.isLoaded()?e instanceof L.Google:!1}},LeafletProviderPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.Provider)},is:function(e){return this.isLoaded()?e instanceof L.TileLayer.Provider:!1}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return angular.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(e){return this.isLoaded()?e instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(e){return this.isLoaded()?e instanceof L.GeoJSON.WFS:!1}},AGSBaseLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.basemapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.basemapLayer:!1}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(e){return this.isLoaded()?e instanceof lvector.AGS:!1}},AGSFeatureLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.featureLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.featureLayer:!1}},AGSTiledMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.tiledMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.tiledMapLayer:!1}},AGSDynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.dynamicMapLayer:!1}},AGSImageMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.imageMapLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.imageMapLayer:!1}},AGSClusteredLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.clusteredFeatureLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.clusteredFeatureLayer:!1}},AGSHeatmapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.heatmapFeatureLayer},is:function(e){return this.isLoaded()?e instanceof L.esri.heatmapFeatureLayer:!1}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(e){return this.isLoaded()?e instanceof L.Yandex:!1}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(e){return this.isLoaded()?e instanceof L.TileLayer.GeoJSON:!1}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(e){return this.isLoaded()?e instanceof L.UtfGrid:(t.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(e){return e instanceof L.DivIcon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}},Icon:{is:function(e){return e instanceof L.Icon},equal:function(e,t){return this.is(e)?angular.equals(e,t):!1}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]),angular.module("leaflet-directive").service("leafletIterators",["leafletLogger","leafletHelpers",function(e,t){var n,i=t,r=t.errorHeader+"leafletIterators: ",o=Object.keys,s=i.isFunction,a=i.isObject,l=e,u=Math.pow(2,53)-1,c=function(e){var t=null!==e&&e.length;return i.isNumber(t)&&t>=0&&u>=t},d=function(e){return e},h=function(e){return function(t){return null===t?void 0:t[e]}},f=function(e,t,n){if(void 0===t)return e;switch(null===n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},p=function(e,t){return function(n){var i=arguments.length;if(2>i||null===n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],s=e(o),a=s.length,l=0;a>l;l++){var u=s[l];t&&void 0!==n[u]||(n[u]=o[u])}return n}},m=null;n=m=p(o);var g,v=function(e,t){var n=o(t),i=n.length;if(null===e)return!i;for(var r=Object(e),s=0;i>s;s++){var a=n[s];if(t[a]!==r[a]||!(a in r))return!1}return!0},y=null;g=y=function(e){return e=n({},e),function(t){return v(t,e)}};var b,w=function(e,t,n){return null===e?d:s(e)?f(e,t,n):a(e)?g(e):h(e)},C=null;b=C=function(e,t,n){t=w(t,n);for(var i=!c(e)&&o(e),r=(i||e).length,s=0;r>s;s++){var a=i?i[s]:s;if(!t(e[a],a,e))return!1}return!0};var x=function(e,t,n,o){return n||i.isDefined(e)&&i.isDefined(t)?i.isFunction(t)?!1:(o=i.defaultTo(t,"cb"),l.error(r+o+" is not a function"),!0):!0},S=function(e,t,n){if(!x(void 0,n,!0,"internalCb")&&!x(e,t))for(var i in e)e.hasOwnProperty(i)&&n(e[i],i)},A=function(e,t){S(e,t,function(e,n){t(e,n)})};return{each:A,forEach:A,every:b,all:C}}]),angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$q","leafletLogger","leafletHelpers","leafletIterators",function($rootScope,$q,leafletLogger,leafletHelpers,leafletIterators){function isValidLayerType(e){return isString(e.type)?-1===Object.keys(layerTypes).indexOf(e.type)?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[e.type].mustHaveUrl&&!isString(e.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[e.type].mustHaveData&&!isDefined(e.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[e.type].mustHaveLayer&&!isDefined(e.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have an layer defined"),!1):layerTypes[e.type].mustHaveBounds&&!isDefined(e.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have bounds defined"),!1):layerTypes[e.type].mustHaveKey&&!isDefined(e.key)?($log.error("[AngularJS - Leaflet] The type of layer "+e.type+" must have key defined"),!1):!0:($log.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function createLayer(e){if(isValidLayerType(e)){if(!isString(e.name))return void $log.error("[AngularJS - Leaflet] A base layer must have a name");isObject(e.layerParams)||(e.layerParams={}),isObject(e.layerOptions)||(e.layerOptions={});for(var t in e.layerParams)e.layerOptions[t]=e.layerParams[t];var n={url:e.url,data:e.data,options:e.layerOptions,layer:e.layer,icon:e.icon,type:e.layerType,bounds:e.bounds,key:e.key,apiKey:e.apiKey,pluginOptions:e.pluginOptions,user:e.user};return layerTypes[e.type].createLayer(n)}}function safeAddLayer(e,t){t&&"function"==typeof t.addTo?t.addTo(e):e.addLayer(t)}function safeRemoveLayer(e,t,n){if(isDefined(n)&&isDefined(n.loadedDefer))if(angular.isFunction(n.loadedDefer)){var i=n.loadedDefer();$log.debug("Loaded Deferred",i);var r=i.length;if(r>0)for(var o=function(){r--,0===r&&e.removeLayer(t)},s=0;s<i.length;s++)i[s].promise.then(o);else e.removeLayer(t)}else n.loadedDefer.promise.then(function(){e.removeLayer(t)});else e.removeLayer(t)}var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isArray=leafletHelpers.isArray,isDefined=leafletHelpers.isDefined,errorHeader=leafletHelpers.errorHeader,$it=leafletIterators,$log=leafletLogger,utfGridCreateLayer=function(e){if(!Helpers.UTFGridPlugin.isLoaded())return void $log.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");var t=new L.UtfGrid(e.url,e.pluginOptions);return t.on("mouseover",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseover",e)}),t.on("mouseout",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseout",e)}),t.on("click",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridClick",e)}),t.on("mousemove",function(e){$rootScope.$broadcast("leafletDirectiveMap.utfgridMousemove",e)}),t},layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer(e.url,e.options)}},mapbox:{mustHaveKey:!0,createLayer:function(e){var t=3;isDefined(e.options.version)&&4===e.options.version&&(t=e.options.version);var n=3===t?"//{s}.tiles.mapbox.com/v3/"+e.key+"/{z}/{x}/{y}.png":"//api.tiles.mapbox.com/v4/"+e.key+"/{z}/{x}/{y}.png?access_token="+e.apiKey;return L.tileLayer(n,e.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(e){return Helpers.GeoJSONPlugin.isLoaded()?new L.TileLayer.GeoJSON(e.url,e.pluginOptions,e.options):void 0}},geoJSONShape:{mustHaveUrl:!1,createLayer:function(e){return new L.GeoJSON(e.data,e.options)}},geoJSONAwesomeMarker:{mustHaveUrl:!1,createLayer:function(e){return new L.geoJson(e.data,{pointToLayer:function(t,n){return L.marker(n,{icon:L.AwesomeMarkers.icon(e.icon)})}})}},geoJSONVectorMarker:{mustHaveUrl:!1,createLayer:function(e){return new L.geoJson(e.data,{pointToLayer:function(t,n){return L.marker(n,{icon:L.VectorMarkers.icon(e.icon)})}})}},utfGrid:{mustHaveUrl:!0,createLayer:utfGridCreateLayer},cartodbTiles:{mustHaveKey:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,e.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){return e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json",utfGridCreateLayer(e)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(e){var t="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/{z}/{x}/{y}.png",n=L.tileLayer(t,e.options);e.url="//"+e.user+".cartodb.com/api/v1/map/"+e.key+"/"+e.layer+"/{z}/{x}/{y}.grid.json";var i=utfGridCreateLayer(e);return L.layerGroup([n,i])}},wms:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wms(e.url,e.options)}},wmts:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.wmts(e.url,e.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(e){var t=[];return $it.each(e.options.layers,function(e){t.push(createLayer(e))}),e.options.loadedDefer=function(){var t=[];if(isDefined(e.options.layers))for(var n=0;n<e.options.layers.length;n++){var i=e.options.layers[n].layerOptions.loadedDefer;isDefined(i)&&t.push(i)}return t},L.layerGroup(t)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"SATELLITE";if(Helpers.GoogleLayerPlugin.isLoaded())return new L.Google(t,e.options)}},here:{mustHaveUrl:!1,createLayer:function(e){var t=e.provider||"HERE.terrainDay";if(Helpers.LeafletProviderPlugin.isLoaded())return new L.TileLayer.Provider(t,e.options)}},china:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"";if(Helpers.ChinaLayerPlugin.isLoaded())return L.tileLayer.chinaProvider(t,e.options)}},agsBase:{mustHaveLayer:!0,createLayer:function(e){return Helpers.AGSBaseLayerPlugin.isLoaded()?L.esri.basemapLayer(e.layer,e.options):void 0}},ags:{mustHaveUrl:!0,createLayer:function(e){if(Helpers.AGSLayerPlugin.isLoaded()){var t=angular.copy(e.options);angular.extend(t,{url:e.url});var n=new lvector.AGS(t);return n.onAdd=function(e){this.setMap(e)},n.onRemove=function(){this.setMap(null)},n}}},agsFeature:{mustHaveUrl:!0,createLayer:function(e){if(!Helpers.AGSFeatureLayerPlugin.isLoaded())return void $log.warn(errorHeader+" The esri plugin is not loaded.");e.options.url=e.url;var t=L.esri.featureLayer(e.options),n=function(){isDefined(e.options.loadedDefer)&&e.options.loadedDefer.resolve()};return t.on("loading",function(){e.options.loadedDefer=$q.defer(),t.off("load",n),t.on("load",n)}),t}},agsTiled:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSTiledMapLayerPlugin.isLoaded()?(e.options.url=e.url,L.esri.tiledMapLayer(e.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsDynamic:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSDynamicMapLayerPlugin.isLoaded()?(e.options.url=e.url,L.esri.dynamicMapLayer(e.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsImage:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSImageMapLayerPlugin.isLoaded()?(e.options.url=e.url,L.esri.imageMapLayer(e.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsClustered:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSClusteredLayerPlugin.isLoaded()?Helpers.MarkerClusterPlugin.isLoaded()?L.esri.clusteredFeatureLayer(e.url,e.options):void $log.warn(errorHeader+" The markercluster plugin is not loaded."):void $log.warn(errorHeader+" The esri clustered layer plugin is not loaded.")}},agsHeatmap:{mustHaveUrl:!0,createLayer:function(e){return Helpers.AGSHeatmapLayerPlugin.isLoaded()?Helpers.HeatLayerPlugin.isLoaded()?L.esri.heatmapFeatureLayer(e.url,e.options):void $log.warn(errorHeader+" The heatlayer plugin is not loaded."):void $log.warn(errorHeader+" The esri heatmap layer plugin is not loaded.")}},markercluster:{mustHaveUrl:!1,createLayer:function(e){return Helpers.MarkerClusterPlugin.isLoaded()?new L.MarkerClusterGroup(e.options):void $log.warn(errorHeader+" The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(e){return Helpers.BingLayerPlugin.isLoaded()?new L.BingLayer(e.key,e.options):void 0}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.WebGLHeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(e.options);return isDefined(e.data)&&t.setData(e.data),t}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(e){if(Helpers.HeatLayerPlugin.isLoaded()){var t=new L.heatLayer;return isArray(e.data)&&t.setLatLngs(e.data),isObject(e.options)&&t.setOptions(e.options),t}}},yandex:{mustHaveUrl:!1,createLayer:function(e){var t=e.type||"map";if(Helpers.YandexLayerPlugin.isLoaded())return new L.Yandex(t,e.options)}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(e){return L.imageOverlay(e.url,e.bounds,e.options)}},iip:{mustHaveUrl:!0,createLayer:function(e){return L.tileLayer.iip(e.url,e.options)}},custom:{createLayer:function(e){return e.layer instanceof L.Class?angular.copy(e.layer):void $log.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(e){return cartodb.createLayer(e.map,e.url)}}};return{createLayer:createLayer,safeAddLayer:safeAddLayer,safeRemoveLayer:safeRemoveLayer}}]),angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var e=function(e,t,n,i){if(e.innerHTML="",t.error)e.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"</div>";else if("arcgis"===n)for(var r=0;r<t.layers.length;r++){var o=t.layers[r];e.innerHTML+='<div class="info-title" data-layerid="'+o.layerId+'">'+o.layerName+"</div>";for(var s=0;s<o.legend.length;s++){var a=o.legend[s];e.innerHTML+='<div class="inline" data-layerid="'+o.layerId+'"><img src="data:'+a.contentType+";base64,"+a.imageData+'" /></div><div class="info-label" data-layerid="'+o.layerId+'">'+a.label+"</div>"}}else"image"===n&&(e.innerHTML='<img src="'+i+'"/>')},t=function(t,n,i,r){return function(){var o=L.DomUtil.create("div",n);return L.Browser.touch?L.DomEvent.on(o,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(o),L.DomEvent.on(o,"mousewheel",L.DomEvent.stopPropagation)),e(o,t,i,r),o}},n=function(e,t){return function(){for(var n=L.DomUtil.create("div",t),i=0;i<e.colors.length;i++)n.innerHTML+='<div class="outline"><i style="background:'+e.colors[i]+'"></i></div><div class="info-label">'+e.labels[i]+"</div>";return L.Browser.touch?L.DomEvent.on(n,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(n),L.DomEvent.on(n,"mousewheel",L.DomEvent.stopPropagation)),n}};return{getOnAddLegend:t,getOnAddArrayLegend:n,updateLegend:e}}),angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(e,t){function n(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},nominatim:{server:" http://nominatim.openstreetmap.org/search"},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var i=t.isDefined,r=t.isObject,o=t.obtainEffectiveMapId,s={};return{reset:function(){s={}},getDefaults:function(e){var t=o(s,e);return s[t]},getMapCreationDefaults:function(e){var t=o(s,e),n=s[t],r={maxZoom:n.maxZoom,keyboard:n.keyboard,dragging:n.dragging,zoomControl:n.zoomControl,doubleClickZoom:n.doubleClickZoom,scrollWheelZoom:n.scrollWheelZoom,tap:n.tap,touchZoom:n.touchZoom,attributionControl:n.attributionControl,worldCopyJump:n.worldCopyJump,crs:n.crs};if(i(n.minZoom)&&(r.minZoom=n.minZoom),i(n.zoomAnimation)&&(r.zoomAnimation=n.zoomAnimation),i(n.fadeAnimation)&&(r.fadeAnimation=n.fadeAnimation),i(n.markerZoomAnimation)&&(r.markerZoomAnimation=n.markerZoomAnimation),n.map)for(var a in n.map)r[a]=n.map[a];return r},setDefaults:function(e,t){var a=n();i(e)&&(a.doubleClickZoom=i(e.doubleClickZoom)?e.doubleClickZoom:a.doubleClickZoom,a.scrollWheelZoom=i(e.scrollWheelZoom)?e.scrollWheelZoom:a.doubleClickZoom,a.tap=i(e.tap)?e.tap:a.tap,a.touchZoom=i(e.touchZoom)?e.touchZoom:a.doubleClickZoom,a.zoomControl=i(e.zoomControl)?e.zoomControl:a.zoomControl,a.zoomsliderControl=i(e.zoomsliderControl)?e.zoomsliderControl:a.zoomsliderControl,a.attributionControl=i(e.attributionControl)?e.attributionControl:a.attributionControl,a.tileLayer=i(e.tileLayer)?e.tileLayer:a.tileLayer,a.zoomControlPosition=i(e.zoomControlPosition)?e.zoomControlPosition:a.zoomControlPosition,a.keyboard=i(e.keyboard)?e.keyboard:a.keyboard,a.dragging=i(e.dragging)?e.dragging:a.dragging,i(e.controls)&&angular.extend(a.controls,e.controls),r(e.crs)?a.crs=e.crs:i(L.CRS[e.crs])&&(a.crs=L.CRS[e.crs]),i(e.center)&&angular.copy(e.center,a.center),i(e.tileLayerOptions)&&angular.copy(e.tileLayerOptions,a.tileLayerOptions),i(e.maxZoom)&&(a.maxZoom=e.maxZoom),i(e.minZoom)&&(a.minZoom=e.minZoom),i(e.zoomAnimation)&&(a.zoomAnimation=e.zoomAnimation),i(e.fadeAnimation)&&(a.fadeAnimation=e.fadeAnimation),i(e.markerZoomAnimation)&&(a.markerZoomAnimation=e.markerZoomAnimation),i(e.worldCopyJump)&&(a.worldCopyJump=e.worldCopyJump),i(e.map)&&(a.map=e.map),i(e.path)&&(a.path=e.path));var l=o(s,t);return s[l]=a,a}}}]),angular.module("leaflet-directive").service("leafletMarkersHelpers",["$rootScope","$timeout","leafletHelpers","leafletLogger","$compile","leafletGeoJsonHelpers",function(e,t,n,i,r,o){var s=n.isDefined,a=n.defaultTo,l=n.MarkerClusterPlugin,u=n.AwesomeMarkersPlugin,c=n.VectorMarkersPlugin,d=n.MakiMarkersPlugin,h=n.ExtraMarkersPlugin,f=n.DomMarkersPlugin,p=n.safeApply,m=n,g=n.isString,v=n.isNumber,y=n.isObject,b={},w=o,C=n.errorHeader,x=i,S=function(e){var t="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach(function(n){t+=n+": "+a(e[n],"undefined")+" \n"}),"[leafletMarker] : \n"+t},A=function(e,t){var n=t?console:x;n.debug(S(e))},_=function(t){if(s(t)&&s(t.type)&&"awesomeMarker"===t.type)return u.isLoaded()||x.error(C+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(t);if(s(t)&&s(t.type)&&"vectorMarker"===t.type)return c.isLoaded()||x.error(C+" The VectorMarkers Plugin is not loaded."),new L.VectorMarkers.icon(t);if(s(t)&&s(t.type)&&"makiMarker"===t.type)return d.isLoaded()||x.error(C+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(t);if(s(t)&&s(t.type)&&"extraMarker"===t.type)return h.isLoaded()||x.error(C+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(t);if(s(t)&&s(t.type)&&"div"===t.type)return new L.divIcon(t);if(s(t)&&s(t.type)&&"dom"===t.type){f.isLoaded()||x.error(C+"The DomMarkers Plugin is not loaded.");var n=angular.isFunction(t.getMarkerScope)?t.getMarkerScope():e,i=r(t.template)(n),o=angular.copy(t);return o.element=i[0],new L.DomMarkers.icon(o)}if(s(t)&&s(t.type)&&"icon"===t.type)return t.icon;var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";return s(t)&&s(t.iconUrl)?new L.Icon(t):new L.Icon.Default({iconUrl:a,shadowUrl:l,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},E=function(e){s(b[e])&&b.splice(e,1)},$=function(){b={}},k=function(e,t,n){if(e.closePopup(),s(n)&&s(n.overlays))for(var i in n.overlays)if((n.overlays[i]instanceof L.LayerGroup||n.overlays[i]instanceof L.FeatureGroup)&&n.overlays[i].hasLayer(e))return void n.overlays[i].removeLayer(e);if(s(b))for(var r in b)b[r].hasLayer(e)&&b[r].removeLayer(e);t.hasLayer(e)&&t.removeLayer(e)},D=function(e,t){var n=e._popup._container.offsetHeight,i=new L.Point(e._popup._containerLeft,-n-e._popup._containerBottom),r=t.layerPointToContainerPoint(i);null!==r&&e._popup._adjustPan()},T=function(e,t){r(e._popup._contentNode)(t)},F=function(e,n,i){var r=e._popup._contentNode.innerText||e._popup._contentNode.textContent;r.length<1&&t(function(){F(e,n,i)});var o=e._popup._contentNode.offsetWidth;return e._popup._updateLayout(),e._popup._updatePosition(),e._popup.options.autoPan&&D(e,i),o},O=function(t,n,i){var r=angular.isFunction(n.getMessageScope)?n.getMessageScope():e,o=s(n.compileMessage)?n.compileMessage:!0;if(o){if(!s(t._popup)||!s(t._popup._contentNode))return x.error(C+"Popup is invalid or does not have any content."),!1;T(t,r),F(t,n,i)}},N=function(t,n){var i=angular.isFunction(n.getMessageScope)?n.getMessageScope():e,o=angular.isFunction(n.getLabelScope)?n.getLabelScope():i,a=s(n.compileMessage)?n.compileMessage:!0;
m.LabelPlugin.isLoaded()&&s(n.label)&&(s(n.label.options)&&n.label.options.noHide===!0&&t.showLabel(),a&&s(t.label)&&r(t.label._container)(o))},B=function(e,t,n,i,r,o,a){if(s(t)){if(!w.validateCoords(e))return x.warn("There are problems with lat-lng data, please verify your marker model"),void k(n,a,o);var l=e===t;if(s(e.iconAngle)&&t.iconAngle!==e.iconAngle&&n.setIconAngle(e.iconAngle),g(e.layer)||g(t.layer)&&(s(o.overlays[t.layer])&&o.overlays[t.layer].hasLayer(n)&&(o.overlays[t.layer].removeLayer(n),n.closePopup()),a.hasLayer(n)||a.addLayer(n)),(v(e.opacity)||v(parseFloat(e.opacity)))&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),g(e.layer)&&t.layer!==e.layer){if(g(t.layer)&&s(o.overlays[t.layer])&&o.overlays[t.layer].hasLayer(n)&&o.overlays[t.layer].removeLayer(n),n.closePopup(),a.hasLayer(n)&&a.removeLayer(n),!s(o.overlays[e.layer]))return void x.error(C+"You must use a name of an existing layer");var u=o.overlays[e.layer];if(!(u instanceof L.LayerGroup||u instanceof L.FeatureGroup))return void x.error(C+'A marker can only be added to a layer of type "group" or "featureGroup"');u.addLayer(n),a.hasLayer(n)&&e.focus===!0&&n.openPopup()}if(e.draggable!==!0&&t.draggable===!0&&s(n.dragging)&&n.dragging.disable(),e.draggable===!0&&t.draggable!==!0&&(n.dragging?n.dragging.enable():L.Handler.MarkerDrag&&(n.dragging=new L.Handler.MarkerDrag(n),n.options.draggable=!0,n.dragging.enable())),y(e.icon)||y(t.icon)&&(n.setIcon(_()),n.closePopup(),n.unbindPopup(),g(e.message)&&n.bindPopup(e.message,e.popupOptions)),y(e.icon)&&y(t.icon)&&!angular.equals(e.icon,t.icon)){var c=!1;n.dragging&&(c=n.dragging.enabled()),n.setIcon(_(e.icon)),c&&n.dragging.enable(),n.closePopup(),n.unbindPopup(),g(e.message)&&n.bindPopup(e.message,e.popupOptions)}!g(e.message)&&g(t.message)&&(n.closePopup(),n.unbindPopup()),m.LabelPlugin.isLoaded()&&(s(e.label)&&s(e.label.message)?"label"in t&&"message"in t.label&&!angular.equals(e.label.message,t.label.message)?n.updateLabelContent(e.label.message):!angular.isFunction(n.getLabel)||angular.isFunction(n.getLabel)&&!s(n.getLabel())?(n.bindLabel(e.label.message,e.label.options),N(n,e)):N(n,e):(!("label"in e)||"message"in e.label)&&angular.isFunction(n.unbindLabel)&&n.unbindLabel()),g(e.message)&&!g(t.message)&&n.bindPopup(e.message,e.popupOptions),g(e.message)&&g(t.message)&&e.message!==t.message&&n.setPopupContent(e.message);var d=!1;e.focus!==!0&&t.focus===!0&&(n.closePopup(),d=!0),(e.focus===!0&&(!s(t.focus)||t.focus===!1)||l&&e.focus===!0)&&(n.openPopup(),d=!0),t.zIndexOffset!==e.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset);var h=n.getLatLng(),f=g(e.layer)&&m.MarkerClusterPlugin.is(o.overlays[e.layer]);f?d?(e.lat!==t.lat||e.lng!==t.lng)&&(o.overlays[e.layer].removeLayer(n),n.setLatLng([e.lat,e.lng]),o.overlays[e.layer].addLayer(n)):h.lat!==e.lat||h.lng!==e.lng?(o.overlays[e.layer].removeLayer(n),n.setLatLng([e.lat,e.lng]),o.overlays[e.layer].addLayer(n)):e.lat!==t.lat||e.lng!==t.lng?(o.overlays[e.layer].removeLayer(n),n.setLatLng([e.lat,e.lng]),o.overlays[e.layer].addLayer(n)):y(e.icon)&&y(t.icon)&&!angular.equals(e.icon,t.icon)&&(o.overlays[e.layer].removeLayer(n),o.overlays[e.layer].addLayer(n)):(h.lat!==e.lat||h.lng!==e.lng)&&n.setLatLng([e.lat,e.lng])}};return{resetMarkerGroup:E,resetMarkerGroups:$,deleteMarker:k,manageOpenPopup:O,manageOpenLabel:N,createMarker:function(e){if(!s(e)||!w.validateCoords(e))return void x.error(C+"The marker definition is not valid.");var t=w.getCoords(e);if(!s(t))return void x.error(C+"Unable to get coordinates from markerData.");var n={icon:_(e.icon),title:s(e.title)?e.title:"",draggable:s(e.draggable)?e.draggable:!1,clickable:s(e.clickable)?e.clickable:!0,riseOnHover:s(e.riseOnHover)?e.riseOnHover:!1,zIndexOffset:s(e.zIndexOffset)?e.zIndexOffset:0,iconAngle:s(e.iconAngle)?e.iconAngle:0};for(var i in e)e.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(n[i]=e[i]);var r=new L.marker(t,n);return g(e.message)||r.unbindPopup(),r},addMarkerToGroup:function(e,t,n,i){return g(t)?l.isLoaded()?(s(b[t])||(b[t]=new L.MarkerClusterGroup(n),i.addLayer(b[t])),void b[t].addLayer(e)):void x.error(C+"The MarkerCluster plugin is not loaded."):void x.error(C+"The marker group you have specified is invalid.")},listenMarkerEvents:function(e,t,n,i,r){e.on("popupopen",function(){p(n,function(){(s(e._popup)||s(e._popup._contentNode))&&(t.focus=!0,O(e,t,r))})}),e.on("popupclose",function(){p(n,function(){t.focus=!1})}),e.on("add",function(){p(n,function(){"label"in t&&N(e,t)})})},updateMarker:B,addMarkerWatcher:function(e,t,n,i,r,o){var l=m.getObjectArrayPath("markers."+t);o=a(o,!0);var u=n.$watch(l,function(o,a){return s(o)?void B(o,a,e,t,n,i,r):(k(e,r,i),void u())},o)},string:S,log:A}}]),angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","leafletLogger","leafletHelpers",function(e,t,n){function i(e){return e.filter(function(e){return c(e)}).map(function(e){return r(e)})}function r(e){return l(e)?new L.LatLng(e[0],e[1]):new L.LatLng(e.lat,e.lng)}function o(e){return e.map(function(e){return i(e)})}function s(e,t){for(var n={},i=0;i<h.length;i++){var r=h[i];a(e[r])?n[r]=e[r]:a(t.path[r])&&(n[r]=t.path[r])}return n}var a=n.isDefined,l=n.isArray,u=n.isNumber,c=n.isValidPoint,d=t,h=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],f=function(e,t){for(var n={},i=0;i<h.length;i++){var r=h[i];a(t[r])&&(n[r]=t[r])}e.setStyle(t)},p=function(e){if(!l(e))return!1;for(var t=0;t<e.length;t++){var n=e[t];if(!c(n))return!1}return!0},m={polyline:{isValid:function(e){var t=e.latlngs;return p(t)},createPath:function(e){return new L.Polyline([],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),f(e,t)}},multiPolyline:{isValid:function(e){var t=e.latlngs;if(!l(t))return!1;for(var n in t){var i=t[n];if(!p(i))return!1}return!0},createPath:function(e){return new L.multiPolyline([[[0,0],[1,1]]],e)},setPath:function(e,t){e.setLatLngs(o(t.latlngs)),f(e,t)}},polygon:{isValid:function(e){var t=e.latlngs;return p(t)},createPath:function(e){return new L.Polygon([],e)},setPath:function(e,t){e.setLatLngs(i(t.latlngs)),f(e,t)}},multiPolygon:{isValid:function(e){var t=e.latlngs;if(!l(t))return!1;for(var n in t){var i=t[n];if(!p(i))return!1}return!0},createPath:function(e){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],e)},setPath:function(e,t){e.setLatLngs(o(t.latlngs)),f(e,t)}},rectangle:{isValid:function(e){var t=e.latlngs;if(!l(t)||2!==t.length)return!1;for(var n in t){var i=t[n];if(!c(i))return!1}return!0},createPath:function(e){return new L.Rectangle([[0,0],[1,1]],e)},setPath:function(e,t){e.setBounds(new L.LatLngBounds(i(t.latlngs))),f(e,t)}},circle:{isValid:function(e){var t=e.latlngs;return c(t)&&u(e.radius)},createPath:function(e){return new L.Circle([0,0],1,e)},setPath:function(e,t){e.setLatLng(r(t.latlngs)),a(t.radius)&&e.setRadius(t.radius),f(e,t)}},circleMarker:{isValid:function(e){var t=e.latlngs;return c(t)&&u(e.radius)},createPath:function(e){return new L.CircleMarker([0,0],e)},setPath:function(e,t){e.setLatLng(r(t.latlngs)),a(t.radius)&&e.setRadius(t.radius),f(e,t)}}},g=function(e){var t={};return e.latlngs&&(t.latlngs=e.latlngs),e.radius&&(t.radius=e.radius),t};return{setPathOptions:function(e,t,n){a(t)||(t="polyline"),m[t].setPath(e,n)},createPath:function(e,t,n){a(t.type)||(t.type="polyline");var i=s(t,n),r=g(t);return m[t.type].isValid(r)?m[t.type].createPath(i):void d.error("[AngularJS - Leaflet] Invalid data passed to the "+t.type+" path")}}}]),angular.module("leaflet-directive").service("leafletWatchHelpers",function(){var e=function(e,t,n,i,r){var o=e[t](n,function(e,t){r(e,t),i.doWatch||o()},i.isDeep);return o},t=function(t,n,i,r){return e(t,"$watch",n,i,r)},n=function(t,n,i,r){return e(t,"$watchCollection",n,i,r)};return{maybeWatch:t,maybeWatchCollection:n}}),angular.module("leaflet-directive").service("leafletLogger",["nemSimpleLogger",function(e){return e.spawn()}]),angular.module("leaflet-directive").factory("nominatimService",["$q","$http","leafletHelpers","leafletMapDefaults",function(e,t,n,i){var r=n.isDefined;return{query:function(n,o){var s=i.getDefaults(o),a=s.nominatim.server,l=e.defer();return t.get(a,{params:{format:"json",limit:1,q:n}}).success(function(e){e.length>0&&r(e[0].boundingbox)?l.resolve(e[0]):l.reject("[Nominatim] Invalid address")}),l.promise}}}]),angular.module("leaflet-directive").directive("bounds",["leafletLogger","$timeout","$http","leafletHelpers","nominatimService","leafletBoundsHelpers",function(e,t,n,i,r,o){var s=e;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(e,n,a,l){var u=i.isDefined,c=o.createLeafletBounds,d=l[0].getLeafletScope(),h=l[0],f=i.errorHeader+" [Bounds] ",p=function(e){return 0===e._southWest.lat&&0===e._southWest.lng&&0===e._northEast.lat&&0===e._northEast.lng};h.getMap().then(function(n){d.$on("boundsChanged",function(e){var i=e.currentScope,r=n.getBounds();if(!p(r)&&!i.settingBoundsFromScope){i.settingBoundsFromLeaflet=!0;var o={northEast:{lat:r._northEast.lat,lng:r._northEast.lng},southWest:{lat:r._southWest.lat,lng:r._southWest.lng},options:r.options};angular.equals(i.bounds,o)||(i.bounds=o),t(function(){i.settingBoundsFromLeaflet=!1})}});var i;d.$watch("bounds",function(o){if(!e.settingBoundsFromLeaflet){if(u(o.address)&&o.address!==i)return e.settingBoundsFromScope=!0,r.query(o.address,a.id).then(function(e){var t=e.boundingbox,i=[[t[0],t[2]],[t[1],t[3]]];n.fitBounds(i)},function(e){s.error(f+" "+e+".")}),i=o.address,void t(function(){e.settingBoundsFromScope=!1});var l=c(o);l&&!n.getBounds().equals(l)&&(e.settingBoundsFromScope=!0,n.fitBounds(l,o.options),t(function(){e.settingBoundsFromScope=!1}))}},!0)})}}}]);var centerDirectiveTypes=["center","lfCenter"],centerDirectives={};centerDirectiveTypes.forEach(function(e){centerDirectives[e]=["leafletLogger","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletMapEvents",function(t,n,i,r,o,s,a,l){var u,c=s.isDefined,d=s.isNumber,h=s.isSameCenterOnMap,f=s.safeApply,p=s.isValidCenter,m=a.isValidBounds,g=s.isUndefinedOrEmpty,v=s.errorHeader,y=t,b=function(e,t){return c(e)&&m(e)&&g(t)};return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){u=n.defer(),this.getCenter=function(){return u.promise}},link:function(t,n,s,m){var g=m.getLeafletScope(),w=g[e];m.getMap().then(function(t){var n=o.getDefaults(s.id);if(-1!==s[e].search("-"))return y.error(v+' The "center" variable can\'t use a "-" on its key name: "'+s[e]+'".'),void t.setView([n.center.lat,n.center.lng],n.center.zoom);if(b(g.bounds,w))t.fitBounds(a.createLeafletBounds(g.bounds),g.bounds.options),w=t.getCenter(),f(g,function(n){angular.extend(n[e],{lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom(),autoDiscover:!1})}),f(g,function(e){var n=t.getBounds();e.bounds={northEast:{lat:n._northEast.lat,lng:n._northEast.lng},southWest:{lat:n._southWest.lat,lng:n._southWest.lng}}});else{if(!c(w))return y.error(v+' The "center" property is not defined in the main scope'),void t.setView([n.center.lat,n.center.lng],n.center.zoom);c(w.lat)&&c(w.lng)||c(w.autoDiscover)||angular.copy(n.center,w)}var m,C;if("yes"===s.urlHashCenter){var x=function(){var e,t=i.search();if(c(t.c)){var n=t.c.split(":");3===n.length&&(e={lat:parseFloat(n[0]),lng:parseFloat(n[1]),zoom:parseInt(n[2],10)})}return e};m=x(),g.$on("$locationChangeSuccess",function(n){var i=n.currentScope,r=x();c(r)&&!h(r,t)&&angular.extend(i[e],{lat:r.lat,lng:r.lng,zoom:r.zoom})})}g.$watch(e,function(e){return g.settingCenterFromLeaflet?void 0:(c(m)&&(angular.copy(m,e),m=void 0),p(e)||e.autoDiscover===!0?e.autoDiscover===!0?(d(e.zoom)||t.setView([n.center.lat,n.center.lng],n.center.zoom),void(d(e.zoom)&&e.zoom>n.center.zoom?t.locate({setView:!0,maxZoom:e.zoom}):c(n.maxZoom)?t.locate({setView:!0,maxZoom:n.maxZoom}):t.locate({setView:!0}))):void(C&&h(e,t)||(g.settingCenterFromScope=!0,t.setView([e.lat,e.lng],e.zoom),l.notifyCenterChangedToBounds(g,t),r(function(){g.settingCenterFromScope=!1}))):void y.warn(v+" invalid 'center'"))},!0),t.whenReady(function(){C=!0}),t.on("moveend",function(){u.resolve(),l.notifyCenterUrlHashChanged(g,t,s,i.search()),h(w,t)||g.settingCenterFromScope||(g.settingCenterFromLeaflet=!0,f(g,function(n){g.settingCenterFromScope||angular.extend(n[e],{lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom(),autoDiscover:!1}),l.notifyCenterChangedToBounds(g,t),r(function(){g.settingCenterFromLeaflet=!1})}))}),w.autoDiscover===!0&&t.on("locationerror",function(){y.warn(v+" The Geolocation API is unauthorized on this page."),p(w)?(t.setView([w.lat,w.lng],w.zoom),l.notifyCenterChangedToBounds(g,t)):(t.setView([n.center.lat,n.center.lng],n.center.zoom),l.notifyCenterChangedToBounds(g,t))})})}}}]}),centerDirectiveTypes.forEach(function(e){angular.module("leaflet-directive").directive(e,centerDirectives[e])}),angular.module("leaflet-directive").directive("controls",["leafletLogger","leafletHelpers","leafletControlHelpers",function(e,t,n){var i=e;return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(e,r,o,s){if(s){var a=n.createControl,l=n.isValidControlType,u=s.getLeafletScope(),c=t.isDefined,d=t.isArray,h={},f=t.errorHeader+" [Controls] ";s.getMap().then(function(e){u.$watchCollection("controls",function(t){for(var n in h)c(t[n])||(e.hasControl(h[n])&&e.removeControl(h[n]),delete h[n]);for(var r in t){var o,s=c(t[r].type)?t[r].type:r;if(!l(s))return void i.error(f+" Invalid control type: "+s+".");if("custom"!==s)o=a(s,t[r]),e.addControl(o),h[r]=o;else{var u=t[r];if(d(u))for(var p in u){var m=u[p];e.addControl(m),h[r]=c(h[r])?h[r].concat([m]):[m]}else e.addControl(u),h[r]=u}}})})}}}}]),angular.module("leaflet-directive").directive("decorations",["leafletLogger","leafletHelpers",function(e,t){var n=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,i,r,o){function s(e){return c(e)&&c(e.coordinates)&&(u.isLoaded()||n.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(e.coordinates)}function a(e,t){return c(e)&&c(t)&&c(t.coordinates)&&c(t.patterns)?(e.setPaths(t.coordinates),e.setPatterns(t.patterns),e):void 0}var l=o.getLeafletScope(),u=t.PolylineDecoratorPlugin,c=t.isDefined,d={};o.getMap().then(function(e){l.$watch("decorations",function(t){for(var n in d)c(t[n])&&angular.equals(t[n],d)||(e.removeLayer(d[n]),delete d[n]);for(var i in t){var r=t[i],o=s(r);c(o)&&(d[i]=o,e.addLayer(o),a(o,r))}},!0)})}}}]),angular.module("leaflet-directive").directive("eventBroadcast",["leafletLogger","$rootScope","leafletHelpers","leafletMapEvents","leafletIterators",function(e,t,n,i,r){var o=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,s,a){var l=n.isObject,u=n.isDefined,c=a.getLeafletScope(),d=c.eventBroadcast,h=i.getAvailableMapEvents(),f=i.addEvents;a.getMap().then(function(e){var t=[],n="broadcast";u(d.map)?l(d.map)?("emit"!==d.map.logic&&"broadcast"!==d.map.logic?o.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):n=d.map.logic,l(d.map.enable)&&d.map.enable.length>=0?r.each(d.map.enable,function(e){-1===t.indexOf(e)&&-1!==h.indexOf(e)&&t.push(e)}):o.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.")):o.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model."):t=h,f(e,t,"eventName",c,n)})}}}]),angular.module("leaflet-directive").directive("geojson",["leafletLogger","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators","leafletGeoJsonEvents",function(e,t,n,i,r,o,s,a){var l=r.maybeWatch,u=i.watchOptions,c=o.extend,d=i,h=s;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,r,o){var s=i.isDefined,f=o.getLeafletScope(),p={},m=!1;o.getMap().then(function(e){var t=f.geojsonWatchOptions||u,o=function(e,t){var n;return n=angular.isFunction(e.onEachFeature)?e.onEachFeature:function(n,o){i.LabelPlugin.isLoaded()&&s(n.properties.description)&&o.bindLabel(n.properties.description),a.bindEvents(r.id,o,null,n,f,t,{resetStyleOnMouseout:e.resetStyleOnMouseout,mapId:r.id})}},g=d.isDefined(r.geojsonNested)&&d.isTruthy(r.geojsonNested),v=function(){if(p){var t=function(t){s(t)&&e.hasLayer(t)&&e.removeLayer(t)};return g?void h.each(p,function(e){t(e)}):void t(p)}},y=function(t,i){var a=angular.copy(t);if(s(a)&&s(a.data)){var l=o(a,i);s(a.options)||(a.options={style:a.style,filter:a.filter,onEachFeature:l,pointToLayer:a.pointToLayer});var u=L.geoJson(a.data,a.options);i&&d.isString(i)?p[i]=u:p=u,u.addTo(e),m||(m=!0,n.setGeoJSON(p,r.id))}},b=function(e){if(v(),g){if(!e||!Object.keys(e).length)return;return void h.each(e,function(e,t){y(e,t)})}y(e)};c(r.id,"geojson",b,v),l(f,"geojson",t,function(e){b(e)})})}}}]),angular.module("leaflet-directive").directive("layercontrol",["$filter","leafletLogger","leafletData","leafletHelpers",function(e,t,n,i){var r=t;return{restrict:"E",scope:{icons:"=?",autoHideOpacity:"=?",showGroups:"=?",title:"@",baseTitle:"@",overlaysTitle:"@"},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(e,t,o){r.debug("[Angular Directive - Layers] layers",e,t);var s=i.safeApply,a=i.isDefined;angular.extend(e,{baselayer:"",oldGroup:"",layerProperties:{},groupProperties:{},rangeIsSupported:i.rangeIsSupported(),changeBaseLayer:function(t,r){i.safeApply(e,function(i){i.baselayer=t,n.getMap().then(function(r){n.getLayers().then(function(n){if(!r.hasLayer(n.baselayers[t])){for(var o in i.layers.baselayers)i.layers.baselayers[o].icon=i.icons.unradio,r.hasLayer(n.baselayers[o])&&r.removeLayer(n.baselayers[o]);r.addLayer(n.baselayers[t]),i.layers.baselayers[t].icon=e.icons.radio}})})}),r.preventDefault()},moveLayer:function(t,n,i){var r=Object.keys(e.layers.baselayers).length;if(n>=1+r&&n<=e.overlaysArray.length+r){var o;for(var a in e.layers.overlays)if(e.layers.overlays[a].index===n){o=e.layers.overlays[a];break}o&&s(e,function(){o.index=t.index,t.index=n})}i.stopPropagation(),i.preventDefault()},initIndex:function(t,n){var i=Object.keys(e.layers.baselayers).length;t.index=a(t.index)?t.index:n+i+1},initGroup:function(t){e.groupProperties[t]=e.groupProperties[t]?e.groupProperties[t]:{}},toggleOpacity:function(t,n){if(n.visible){if(e.autoHideOpacity&&!e.layerProperties[n.name].opacityControl)for(var i in e.layerProperties)e.layerProperties[i].opacityControl=!1;e.layerProperties[n.name].opacityControl=!e.layerProperties[n.name].opacityControl}t.stopPropagation(),t.preventDefault()},toggleLegend:function(t){e.layerProperties[t.name].showLegend=!e.layerProperties[t.name].showLegend},showLegend:function(t){return t.legend&&e.layerProperties[t.name].showLegend},unsafeHTML:function(e){return o.trustAsHtml(e)},getOpacityIcon:function(t){return t.visible&&e.layerProperties[t.name].opacityControl?e.icons.close:e.icons.open},getGroupIcon:function(t){return t.visible?e.icons.check:e.icons.uncheck},changeOpacity:function(t){var i=e.layerProperties[t.name].opacity;n.getMap().then(function(r){n.getLayers().then(function(n){var o;for(var s in e.layers.overlays)if(e.layers.overlays[s]===t){o=n.overlays[s];break}r.hasLayer(o)&&(o.setOpacity&&o.setOpacity(i/100),o.getLayers&&o.eachLayer&&o.eachLayer(function(e){e.setOpacity&&e.setOpacity(i/100)}))})})},changeGroupVisibility:function(t){if(a(e.groupProperties[t])){var n=e.groupProperties[t].visible;for(var i in e.layers.overlays){var r=e.layers.overlays[i];r.group===t&&(r.visible=n)}}}});var l=t.get(0);L.Browser.touch?L.DomEvent.on(l,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(l),L.DomEvent.on(l,"mousewheel",L.DomEvent.stopPropagation))}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><h4 ng-if="title">{{ title }}</h4><div class="lf-baselayers"><h5 class="lf-title" ng-if="baseTitle">{{ baseTitle }}</h5><div class="lf-row" ng-repeat="(key, layer) in baselayersArray"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label></div></div><div class="lf-overlays"><h5 class="lf-title" ng-if="overlaysTitle">{{ overlaysTitle }}</h5><div class="lf-container"><div class="lf-row" ng-repeat="layer in (o = (overlaysArray | orderBy:\'index\':order))" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol-group" ng-if="showGroups &amp;&amp; layer.group &amp;&amp; layer.group != o[$index-1].group"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-change="changeGroupVisibility(layer.group)" ng-model="groupProperties[layer.group].visible"/> <i class="lf-icon lf-icon-check" ng-class="getGroupIcon(groupProperties[layer.group])"></i><div class="lf-text">{{ layer.group }}</div></label><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"></i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"></i> <i class="lf-icon lf-toggle-legend" ng-class="icons.toggleLegend" ng-if="layer.legend" ng-click="toggleLegend(layer)"></i> <i class="lf-icon lf-open" ng-class="getOpacityIcon(layer)" ng-click="toggleOpacity($event, layer)"></i></div><div class="lf-legend" ng-if="showLegend(layer)" ng-bind-html="unsafeHTML(layer.legend)"></div><div class="lf-opacity clearfix" ng-if="layer.visible &amp;&amp; layerProperties[layer.name].opacityControl"><label ng-if="rangeIsSupported" class="pull-left" style="width: 50%">0</label><label ng-if="rangeIsSupported" class="pull-left text-right" style="width: 50%">100</label><input ng-if="rangeIsSupported" class="clearfix" type="range" min="0" max="100" class="lf-opacity-control" ng-model="layerProperties[layer.name].opacity" ng-change="changeOpacity(layer)"/><h6 ng-if="!rangeIsSupported">Range is not supported in this browser</h6></div></div></div></div></div>',link:function(e,t,r,o){var s=i.isDefined,a=o.getLeafletScope(),l=a.layers;e.$watch("icons",function(){var t={uncheck:"fa fa-square-o",check:"fa fa-check-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up",toggleLegend:"fa fa-pencil-square-o"};s(e.icons)?(angular.extend(t,e.icons),angular.extend(e.icons,t)):e.icons=t}),r.order=!s(r.order)||"normal"!==r.order&&"reverse"!==r.order?"normal":r.order,e.order="normal"===r.order,e.orderNumber="normal"===r.order?-1:1,e.layers=l,o.getMap().then(function(t){a.$watch("layers.baselayers",function(i){var r={};n.getLayers().then(function(n){var o;for(o in i){var s=i[o];s.icon=e.icons[t.hasLayer(n.baselayers[o])?"radio":"unradio"],r[o]=s}e.baselayersArray=r})}),a.$watch("layers.overlays",function(t){var i=[],r={};n.getLayers().then(function(n){var o;for(o in t){var a=t[o];a.icon=e.icons[a.visible?"check":"uncheck"],i.push(a),s(e.layerProperties[a.name])||(e.layerProperties[a.name]={opacity:s(a.layerOptions.opacity)?100*a.layerOptions.opacity:100,opacityControl:!1,showLegend:!0}),s(a.group)&&(s(e.groupProperties[a.group])||(e.groupProperties[a.group]={visible:!1}),r[a.group]=s(r[a.group])?r[a.group]:{count:0,visibles:0},r[a.group].count++,a.visible&&r[a.group].visibles++),s(a.index)&&n.overlays[o].setZIndex&&n.overlays[o].setZIndex(t[o].index)}for(o in r)e.groupProperties[o].visible=r[o].visibles===r[o].count;e.overlaysArray=i})},!0)})}}}]),angular.module("leaflet-directive").directive("layers",["leafletLogger","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(e,t,n,i,r,o){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(e){e._leafletLayers=t.defer(),this.getLayers=function(){return e._leafletLayers.promise}}],link:function(e,t,s,a){var l=i.isDefined,u={},c=a.getLeafletScope(),d=c.layers,h=r.createLayer,f=r.safeAddLayer,p=r.safeRemoveLayer,m=o.updateLayersControl,g=!1;a.getMap().then(function(t){e._leafletLayers.resolve(u),n.setLayers(u,s.id),u.baselayers={},u.overlays={};var i=s.id,r=!1;for(var o in d.baselayers){var a=h(d.baselayers[o]);l(a)?(u.baselayers[o]=a,d.baselayers[o].top===!0&&(f(t,u.baselayers[o]),r=!0)):delete d.baselayers[o]}!r&&Object.keys(u.baselayers).length>0&&f(t,u.baselayers[Object.keys(d.baselayers)[0]]);for(o in d.overlays){"cartodb"===d.overlays[o].type;var v=h(d.overlays[o]);l(v)?(u.overlays[o]=v,d.overlays[o].visible===!0&&f(t,u.overlays[o])):delete d.overlays[o]}c.$watch("layers.baselayers",function(e,n){if(angular.equals(e,n))return g=m(t,i,g,e,d.overlays,u),!0;for(var r in u.baselayers)(!l(e[r])||e[r].doRefresh)&&(t.hasLayer(u.baselayers[r])&&t.removeLayer(u.baselayers[r]),delete u.baselayers[r],e[r]&&e[r].doRefresh&&(e[r].doRefresh=!1));for(var o in e)if(l(u.baselayers[o]))e[o].top!==!0||t.hasLayer(u.baselayers[o])?e[o].top===!1&&t.hasLayer(u.baselayers[o])&&t.removeLayer(u.baselayers[o]):f(t,u.baselayers[o]);else{var s=h(e[o]);l(s)&&(u.baselayers[o]=s,e[o].top===!0&&f(t,u.baselayers[o]))}var a=!1;for(var c in u.baselayers)if(t.hasLayer(u.baselayers[c])){a=!0;break}!a&&Object.keys(u.baselayers).length>0&&f(t,u.baselayers[Object.keys(u.baselayers)[0]]),g=m(t,i,g,e,d.overlays,u)},!0),c.$watch("layers.overlays",function(e,n){if(angular.equals(e,n))return g=m(t,i,g,d.baselayers,e,u),!0;for(var r in u.overlays)if(!l(e[r])||e[r].doRefresh){if(t.hasLayer(u.overlays[r])){var o=l(e[r])?e[r].layerOptions:null;p(t,u.overlays[r],o)}delete u.overlays[r],e[r]&&e[r].doRefresh&&(e[r].doRefresh=!1)}for(var s in e){if(l(u.overlays[s]))e[s].visible&&!t.hasLayer(u.overlays[s])?f(t,u.overlays[s]):e[s].visible===!1&&t.hasLayer(u.overlays[s])&&p(t,u.overlays[s],e[s].layerOptions);else{var a=h(e[s]);if(!l(a))continue;u.overlays[s]=a,e[s].visible===!0&&f(t,u.overlays[s])}e[s].visible&&t._loaded&&e[s].data&&"heatmap"===e[s].type&&(u.overlays[s].setData(e[s].data),u.overlays[s].update())}g=m(t,i,g,d.baselayers,e,u)},!0)})}}}]),angular.module("leaflet-directive").directive("legend",["leafletLogger","$http","leafletHelpers","leafletLegendHelpers",function(e,t,n,i){var r=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,o,s,a){var l,u,c,d,h=n.isArray,f=n.isDefined,p=n.isFunction,m=a.getLeafletScope(),g=m.legend;m.$watch("legend",function(e){f(e)&&(l=e.legendClass?e.legendClass:"legend",u=e.position||"bottomright",d=e.type||"arcgis")},!0),a.getMap().then(function(e){m.$watch("legend",function(t){return f(t)?f(t.url)||"arcgis"!==d||h(t.colors)&&h(t.labels)&&t.colors.length===t.labels.length?f(t.url)?void r.info("[AngularJS - Leaflet] loading legend service."):(f(c)&&(c.removeFrom(e),c=null),c=L.control({position:u}),"arcgis"===d&&(c.onAdd=i.getOnAddArrayLegend(t,l)),void c.addTo(e)):void r.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set."):void(f(c)&&(c.removeFrom(e),c=null))}),m.$watch("legend.url",function(n){f(n)&&t.get(n).success(function(t){f(c)?i.updateLegend(c.getContainer(),t,d,n):(c=L.control({position:u}),c.onAdd=i.getOnAddLegend(t,l,d,n),c.addTo(e)),f(g.loadedData)&&p(g.loadedData)&&g.loadedData()}).error(function(){r.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]),angular.module("leaflet-directive").directive("markers",["leafletLogger","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletMarkerEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(e,t,n,i,r,o,s,a,l,u,c){var d=r.isDefined,h=r.errorHeader,f=r,p=r.isString,m=s.addMarkerWatcher,g=s.updateMarker,v=s.listenMarkerEvents,y=s.addMarkerToGroup,b=s.createMarker,w=s.deleteMarker,C=l,x=r.watchOptions,S=u.maybeWatch,A=c.extend,_=e,E=function(e,t,n){if(Object.keys(e).length){if(n&&p(n)){if(!e[n]||!Object.keys(e[n]).length)return;return e[n][t]}return e[t]}},$=function(e,t,n,i){return i&&p(i)?(d(t[i])||(t[i]={}),t[i][n]=e):t[n]=e,e},k=function(e,t,n,i,r,o){if(!p(e))return _.error(h+" A layername must be a string"),!1;if(!d(t))return _.error(h+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!d(t.overlays)||!d(t.overlays[e]))return _.error(h+' A marker can only be added to a layer of type "group"'),!1;var s=t.overlays[e];return s instanceof L.LayerGroup||s instanceof L.FeatureGroup?(s.addLayer(i),!r&&o.hasLayer(i)&&n.focus===!0&&i.openPopup(),!0):(_.error(h+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},D=function(e,t,n,i,r,o,s,l,u,c){for(var p in t)if(!c[p])if(-1===p.search("-")){var w=f.copy(t[p]),C=f.getObjectDotPath(u?[u,p]:[p]),x=E(o,p,u);if(d(x)){var S=d(S)?n[p]:void 0;g(w,S,x,C,s,r,i)}else{var A=b(w),D=(w?w.layer:void 0)||u;if(!d(A)){_.error(h+" Received invalid data on the marker "+p+".");continue}if($(A,o,p,u),d(w.message)&&A.bindPopup(w.message,w.popupOptions),d(w.group)){var T=d(w.groupOption)?w.groupOption:null;y(A,w.group,T,i)}if(f.LabelPlugin.isLoaded()&&d(w.label)&&d(w.label.message)&&A.bindLabel(w.label.message,w.label.options),d(w)&&(d(w.layer)||d(u))){var F=k(D,r,w,A,l.individual.doWatch,i);if(!F)continue}else d(w.group)||(i.addLayer(A),l.individual.doWatch||w.focus!==!0||A.openPopup());l.individual.doWatch&&m(A,C,s,r,i,l.individual.isDeep),v(A,w,s,l.individual.doWatch,i),a.bindEvents(e,A,C,w,s,D)}}else _.error('The marker can\'t use a "-" on his key name: "'+p+'".')},T=function(e,t,n,i,r){var o,s,a=!1,l=!1,u=d(t);for(var c in n)a||(_.debug(h+"[markers] destroy: "),a=!0),u&&(s=e[c],o=t[c],l=angular.equals(s,o)&&i),d(e)&&Object.keys(e).length&&d(e[c])&&Object.keys(e[c]).length&&!l||r&&f.isFunction(r)&&r(s,o,c)},F=function(e,t,n,i,r){T(e,t,n,!1,function(e,t,o){_.debug(h+"[marker] is deleting marker: "+o),w(n[o],i,r),delete n[o]})},O=function(e,t,n){var i={};return T(e,t,n,!0,function(e,t,n){_.debug(h+"[marker] is already rendered, marker: "+n),i[n]=e}),i};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(e,t,r,o){var s=o[0],a=s.getLeafletScope();s.getMap().then(function(e){var t,s={};t=d(o[1])?o[1].getLayers:function(){var e=n.defer();return e.resolve(),e.promise};var l=a.markersWatchOptions||x;d(r.watchMarkers)&&(l.doWatch=l.individual.doWatch=!d(r.watchMarkers)||f.isTruthy(r.watchMarkers));var u=d(r.markersNested)&&f.isTruthy(r.markersNested);t().then(function(t){var n=function(n,i){return u?void C.each(n,function(n,r){var o=d(o)?i[r]:void 0;F(n,o,s[r],e,t)}):void F(n,i,s,e,t)},o=function(i,o){n(i,o);var c=null;return u?void C.each(i,function(n,u){var h=d(h)?o[u]:void 0;c=O(i[u],h,s[u]),D(r.id,n,o,e,t,s,a,l,u,c)}):(c=O(i,o,s),void D(r.id,i,o,e,t,s,a,l,void 0,c))};A(r.id,"markers",o,n),i.setMarkers(s,r.id),S(a,"markers",l,function(e,t){o(e,t)})})})}}}]),angular.module("leaflet-directive").directive("maxbounds",["leafletLogger","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(e,t,n,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,t,r,o){var s=o.getLeafletScope(),a=n.isValidBounds,l=i.isNumber;o.getMap().then(function(e){s.$watch("maxbounds",function(t){if(!a(t))return void e.setMaxBounds();var i=n.createLeafletBounds(t);l(t.pad)&&(i=i.pad(t.pad)),e.setMaxBounds(i),r.center||r.lfCenter||e.fitBounds(i)})})}}}]),angular.module("leaflet-directive").directive("paths",["leafletLogger","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletPathEvents",function(e,t,n,i,r,o,s){var a=e;return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],
link:function(e,l,u,c){var d=c[0],h=r.isDefined,f=r.isString,p=d.getLeafletScope(),m=p.paths,g=o.createPath,v=s.bindPathEvents,y=o.setPathOptions;d.getMap().then(function(e){var o,s=i.getDefaults(u.id);o=h(c[1])?c[1].getLayers:function(){var e=t.defer();return e.resolve(),e.promise},h(m)&&o().then(function(t){var i={};n.setPaths(i,u.id);var o=!h(u.watchPaths)||"true"===u.watchPaths,l=function(n,i){var r=p.$watch('paths["'+i+'"]',function(i,o){if(!h(i)){if(h(o.layer))for(var s in t.overlays){var a=t.overlays[s];a.removeLayer(n)}return e.removeLayer(n),void r()}y(n,i.type,i)},!0)};p.$watchCollection("paths",function(n){for(var c in i)h(n[c])||(e.removeLayer(i[c]),delete i[c]);for(var d in n)if(0!==d.search("\\$"))if(-1===d.search("-")){if(!h(i[d])){var m=n[d],b=g(d,n[d],s);if(h(b)&&h(m.message)&&b.bindPopup(m.message,m.popupOptions),r.LabelPlugin.isLoaded()&&h(m.label)&&h(m.label.message)&&b.bindLabel(m.label.message,m.label.options),h(m)&&h(m.layer)){if(!f(m.layer)){a.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!h(t)){a.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!h(t.overlays)||!h(t.overlays[m.layer])){a.error('[AngularJS - Leaflet] A path can only be added to a layer of type "group"');continue}var w=t.overlays[m.layer];if(!(w instanceof L.LayerGroup||w instanceof L.FeatureGroup)){a.error('[AngularJS - Leaflet] Adding a path to an overlay needs a overlay of the type "group" or "featureGroup"');continue}i[d]=b,w.addLayer(b),o?l(b,d):y(b,m.type,m)}else h(b)&&(i[d]=b,e.addLayer(b),o?l(b,d):y(b,m.type,m));v(u.id,b,d,m,p)}}else a.error('[AngularJS - Leaflet] The path name "'+d+'" is not valid. It must not include "-" and a number.')})})})}}}]),angular.module("leaflet-directive").directive("tiles",["leafletLogger","leafletData","leafletMapDefaults","leafletHelpers",function(e,t,n,i){var r=e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,o,s,a){var l=i.isDefined,u=a.getLeafletScope(),c=u.tiles;return l(c)&&l(c.url)?void a.getMap().then(function(e){var i,r=n.getDefaults(s.id);u.$watch("tiles",function(n){var o=r.tileLayerOptions,a=r.tileLayer;return!l(n.url)&&l(i)?void e.removeLayer(i):l(i)?l(n.url)&&l(n.options)&&!angular.equals(n.options,o)?(e.removeLayer(i),o=r.tileLayerOptions,angular.copy(n.options,o),a=n.url,i=L.tileLayer(a,o),i.addTo(e),void t.setTiles(i,s.id)):void(l(n.url)&&i.setUrl(n.url)):(l(n.options)&&angular.copy(n.options,o),l(n.url)&&(a=n.url),i=L.tileLayer(a,o),i.addTo(e),void t.setTiles(i,s.id))},!0)}):void r.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),["markers","geojson"].forEach(function(e){angular.module("leaflet-directive").directive(e+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(t,n,i,r,o){var s=o.isDefined,a=o.errorHeader,l=o.isObject,u=o.watchOptions,c=t;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(t,n,i,r){var o=r[0],d=o.getLeafletScope();o.getMap().then(function(){s(t[e+"WatchOptions"])&&(l(t[e+"WatchOptions"])?angular.extend(u,t[e+"WatchOptions"]):c.error(a+"["+e+"WatchOptions] is not an object"),d[e+"WatchOptions"]=u)})}}}])}),angular.module("leaflet-directive").factory("leafletEventsHelpersFactory",["$rootScope","$q","leafletLogger","leafletHelpers",function(e,t,n,i){var r=i.safeApply,o=i.isDefined,s=i.isObject,a=i.isArray,l=i.errorHeader,u=n,c=function(e,t){this.rootBroadcastName=e,u.debug("leafletEventsHelpersFactory: lObjectType: "+t+"rootBroadcastName: "+e),this.lObjectType=t};return c.prototype.getAvailableEvents=function(){return[]},c.prototype.genDispatchEvent=function(e,t,n,i,r,o,s,a,l){var c=this;return e=e||"",e&&(e="."+e),function(d){var h=c.rootBroadcastName+e+"."+t;u.debug(h),c.fire(i,h,n,d,d.target||r,s,o,a,l)}},c.prototype.fire=function(t,n,i,s,a,l,u,c,d){r(t,function(){var r={leafletEvent:s,leafletObject:a,modelName:u,model:l};o(c)&&angular.extend(r,{layerName:c}),"emit"===i?t.$emit(n,r):e.$broadcast(n,r)})},c.prototype.bindEvents=function(e,t,n,i,r,c,d){var h=[],f="emit",p=this;if(o(r.eventBroadcast))if(s(r.eventBroadcast))if(o(r.eventBroadcast[p.lObjectType]))if(s(r.eventBroadcast[p.lObjectType])){o(r.eventBroadcast[this.lObjectType].logic)&&"emit"!==r.eventBroadcast[p.lObjectType].logic&&"broadcast"!==r.eventBroadcast[p.lObjectType].logic&&u.warn(l+"Available event propagation logic are: 'emit' or 'broadcast'.");var m=!1,g=!1;o(r.eventBroadcast[p.lObjectType].enable)&&a(r.eventBroadcast[p.lObjectType].enable)&&(m=!0),o(r.eventBroadcast[p.lObjectType].disable)&&a(r.eventBroadcast[p.lObjectType].disable)&&(g=!0),m&&g?u.warn(l+"can not enable and disable events at the same time"):m||g?m?r.eventBroadcast[this.lObjectType].enable.forEach(function(e){-1!==h.indexOf(e)?u.warn(l+"This event "+e+" is already enabled"):-1===p.getAvailableEvents().indexOf(e)?u.warn(l+"This event "+e+" does not exist"):h.push(e)}):(h=this.getAvailableEvents(),r.eventBroadcast[p.lObjectType].disable.forEach(function(e){var t=h.indexOf(e);-1===t?u.warn(l+"This event "+e+" does not exist or has been already disabled"):h.splice(t,1)})):u.warn(l+"must enable or disable events")}else u.warn(l+"event-broadcast."+[p.lObjectType]+" must be an object check your model.");else h=this.getAvailableEvents();else u.error(l+"event-broadcast must be an object check your model.");else h=this.getAvailableEvents();return h.forEach(function(o){t.on(o,p.genDispatchEvent(e,o,f,r,t,n,i,c,d))}),f},c}]).service("leafletEventsHelpers",["leafletEventsHelpersFactory",function(e){return new e}]),angular.module("leaflet-directive").factory("leafletGeoJsonEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory","leafletData",function(e,t,n,i,r,o){var s=i.safeApply,a=r,l=function(){a.call(this,"leafletDirectiveGeoJson","geojson")};return l.prototype=new a,l.prototype.genDispatchEvent=function(t,n,i,r,l,u,c,d,h){var f=a.prototype.genDispatchEvent.call(this,t,n,i,r,l,u,c,d),p=this;return function(t){"mouseout"===n&&(h.resetStyleOnMouseout&&o.getGeoJSON(h.mapId).then(function(e){var n=d?e[d]:e;n.resetStyle(t.target)}),s(r,function(){e.$broadcast(p.rootBroadcastName+".mouseout",t)})),f(t)}},l.prototype.getAvailableEvents=function(){return["click","dblclick","mouseover","mouseout"]},new l}]),angular.module("leaflet-directive").factory("leafletLabelEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory",function(e,t,n,i,r){var o=i,s=r,a=function(){s.call(this,"leafletDirectiveLabel","markers")};return a.prototype=new s,a.prototype.genDispatchEvent=function(e,t,n,i,r,o,a,l){var u=o.replace("markers.","");return s.prototype.genDispatchEvent.call(this,e,t,n,i,r,u,a,l)},a.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},a.prototype.genEvents=function(e,t,n,i,r,s,a,l){var u=this,c=this.getAvailableEvents(),d=o.getObjectArrayPath("markers."+s);c.forEach(function(t){r.label.on(t,u.genDispatchEvent(e,t,n,i,r.label,d,a,l))})},a.prototype.bindEvents=function(e,t,n,i,r,o){},new a}]),angular.module("leaflet-directive").factory("leafletMapEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpers","leafletIterators",function(e,t,n,i,r,o){var s=i.isDefined,a=r.fire,l=function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomanim","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},u=function(e,t,i,r){return r&&(r+="."),function(o){var s="leafletDirectiveMap."+r+t;n.debug(s),a(e,s,i,o,o.target,e)}},c=function(e){e.$broadcast("boundsChanged")},d=function(e,t,n,i){if(s(n.urlHashCenter)){var r=t.getCenter(),o=r.lat.toFixed(4)+":"+r.lng.toFixed(4)+":"+t.getZoom();s(i.c)&&i.c===o||e.$emit("centerUrlHash",o)}},h=function(e,t,n,i,r){o.each(t,function(t){var o={};o[n]=t,e.on(t,u(i,t,r,e._container.id||""),o)})};return{getAvailableMapEvents:l,genDispatchMapEvent:u,notifyCenterChangedToBounds:c,notifyCenterUrlHashChanged:d,addEvents:h}}]),angular.module("leaflet-directive").factory("leafletMarkerEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletEventsHelpersFactory","leafletLabelEvents",function(e,t,n,i,r,o){var s=i.safeApply,a=i.isDefined,l=i,u=o,c=r,d=function(){c.call(this,"leafletDirectiveMarker","markers")};return d.prototype=new c,d.prototype.genDispatchEvent=function(t,n,i,r,o,a,l,u){var d=c.prototype.genDispatchEvent.call(this,t,n,i,r,o,a,l,u);return function(t){"click"===n?s(r,function(){e.$broadcast("leafletDirectiveMarkersClick",a)}):"dragend"===n&&(s(r,function(){l.lat=o.getLatLng().lat,l.lng=o.getLatLng().lng}),l.message&&l.focus===!0&&o.openPopup()),d(t)}},d.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose","touchend","touchstart","touchmove","touchcancel","touchleave"]},d.prototype.bindEvents=function(e,t,n,i,r,o){var s=c.prototype.bindEvents.call(this,e,t,n,i,r,o);l.LabelPlugin.isLoaded()&&a(t.label)&&u.genEvents(e,n,s,r,t,i,o)},new d}]),angular.module("leaflet-directive").factory("leafletPathEvents",["$rootScope","$q","leafletLogger","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(e,t,n,i,r,o){var s=i.isDefined,a=i.isObject,l=i,u=i.errorHeader,c=r,d=o.fire,h=n,f=function(e,t,n,i,r,o,s,a){return e=e||"",e&&(e="."+e),function(l){var u="leafletDirectivePath"+e+"."+t;h.debug(u),d(i,u,n,l,l.target||r,s,o,a)}},p=function(e,t,n,i,r){var o,d,p=[],g="broadcast";if(s(r.eventBroadcast))if(a(r.eventBroadcast))if(s(r.eventBroadcast.path))if(a(r.eventBroadcast.paths))h.warn(u+"event-broadcast.path must be an object check your model.");else{void 0!==r.eventBroadcast.path.logic&&null!==r.eventBroadcast.path.logic&&("emit"!==r.eventBroadcast.path.logic&&"broadcast"!==r.eventBroadcast.path.logic?h.warn(u+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===r.eventBroadcast.path.logic&&(g="emit"));var v=!1,y=!1;if(void 0!==r.eventBroadcast.path.enable&&null!==r.eventBroadcast.path.enable&&"object"==typeof r.eventBroadcast.path.enable&&(v=!0),void 0!==r.eventBroadcast.path.disable&&null!==r.eventBroadcast.path.disable&&"object"==typeof r.eventBroadcast.path.disable&&(y=!0),v&&y)h.warn(u+"can not enable and disable events at the same time");else if(v||y)if(v)for(o=0;o<r.eventBroadcast.path.enable.length;o++)d=r.eventBroadcast.path.enable[o],-1!==p.indexOf(d)?h.warn(u+"This event "+d+" is already enabled"):-1===m().indexOf(d)?h.warn(u+"This event "+d+" does not exist"):p.push(d);else for(p=m(),o=0;o<r.eventBroadcast.path.disable.length;o++){d=r.eventBroadcast.path.disable[o];var b=p.indexOf(d);-1===b?h.warn(u+"This event "+d+" does not exist or has been already disabled"):p.splice(b,1)}else h.warn(u+"must enable or disable events")}else p=m();else h.error(u+"event-broadcast must be an object check your model.");else p=m();for(o=0;o<p.length;o++)d=p[o],t.on(d,f(e,d,g,r,p,n));l.LabelPlugin.isLoaded()&&s(t.label)&&c.genEvents(e,n,g,r,t,i)},m=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:m,bindPathEvents:p}}])}(angular),function(e,t){"use strict";angular.module("toaster",[]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(e,t){this.pop=function(t,n,i,r,o,s,a,l,u,c){if(angular.isObject(t)){var d=t;this.toast={type:d.type,title:d.title,body:d.body,timeout:d.timeout,bodyOutputType:d.bodyOutputType,clickHandler:d.clickHandler,showCloseButton:d.showCloseButton,uid:d.toastId,onHideCallback:d.onHideCallback},u=d.toastId,a=d.toasterId}else this.toast={type:t,title:n,body:i,timeout:r,bodyOutputType:o,clickHandler:s,showCloseButton:l,uid:u,onHideCallback:c};e.$emit("toaster-newToast",a,u)},this.clear=function(t,n){e.$emit("toaster-clearToasts",t,n)};for(var n in t["icon-classes"])this[n]=function(e){return function(t,n,i,r,o,s,a,l,u){angular.isString(t)?this.pop(e,t,n,i,r,o,s,a,l,u):this.pop(angular.extend(t,{type:e}))}}(n)}]).factory("toasterEventRegistry",["$rootScope",function(e){var t,n=null,i=null,r=[],o=[];return t={setup:function(){n||(n=e.$on("toaster-newToast",function(e,t,n){for(var i=0,o=r.length;o>i;i++)r[i](e,t,n)})),i||(i=e.$on("toaster-clearToasts",function(e,t,n){for(var i=0,r=o.length;r>i;i++)o[i](e,t,n)}))},subscribeToNewToastEvent:function(e){r.push(e)},subscribeToClearToastsEvent:function(e){o.push(e)},unsubscribeToNewToastEvent:function(e){var t=r.indexOf(e);t>=0&&r.splice(t,1),0===r.length&&(n(),n=null)},unsubscribeToClearToastsEvent:function(e){var t=o.indexOf(e);t>=0&&o.splice(t,1),0===o.length&&(i(),i=null)}},{setup:t.setup,subscribeToNewToastEvent:t.subscribeToNewToastEvent,subscribeToClearToastsEvent:t.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:t.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:t.unsubscribeToClearToastsEvent}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(e,t,n,i,r,o,s){return{replace:!0,restrict:"EA",scope:!0,link:function(t,a,l){function u(e,i){e.timeoutPromise=n(function(){t.removeToast(e.id)},i,1)}function c(n,r){if(n.type=p["icon-classes"][n.type],n.type||(n.type=p["icon-class"]),p["prevent-duplicates"]===!0)if(f(r)){if(t.toasters.length>0&&t.toasters[t.toasters.length-1].body===n.body)return}else{var o,s;for(o=0,s=t.toasters.length;s>o;o++)t.toasters[o].uid===r&&(d(o),o--,s=t.toasters.length)}n.id=++m,f(r)||(n.uid=r);var a=p["close-button"];if("boolean"==typeof n.showCloseButton);else if("boolean"==typeof a)n.showCloseButton=a;else if("object"==typeof a){var l=a[n.type];"undefined"!=typeof l&&null!==l&&(n.showCloseButton=l)}else n.showCloseButton=!1;switch(n.bodyOutputType=n.bodyOutputType||p["body-output-type"],n.bodyOutputType){case"trustedHtml":n.html=i.trustAsHtml(n.body);break;case"template":n.bodyTemplate=n.body||p["body-template"];break;case"templateWithData":var u=e(n.body||p["body-template"]),c=u(t);n.bodyTemplate=c.template,n.data=c.data}t.configureTimer(n),p["newest-on-top"]===!0?(t.toasters.unshift(n),p.limit>0&&t.toasters.length>p.limit&&t.toasters.pop()):(t.toasters.push(n),p.limit>0&&t.toasters.length>p.limit&&t.toasters.shift())}function d(e){var i=t.toasters[e];i&&(i.timeoutPromise&&n.cancel(i.timeoutPromise),t.toasters.splice(e,1),angular.isFunction(i.onHideCallback)&&i.onHideCallback())}function h(e){for(var n=t.toasters.length-1;n>=0;n--)f(e)?d(n):t.toasters[n].uid==e&&d(n)}function f(e){return angular.isUndefined(e)||null===e}var p,m=0;p=angular.extend({},r,t.$eval(l.toasterOptions)),t.config={toasterId:p["toaster-id"],position:p["position-class"],title:p["title-class"],message:p["message-class"],tap:p["tap-to-dismiss"],closeButton:p["close-button"],animation:p["animation-class"],mouseoverTimer:p["mouseover-timer-stop"]},t.$on("$destroy",function(){s.unsubscribeToNewToastEvent(t._onNewToast),s.unsubscribeToClearToastsEvent(t._onClearToasts)}),t.configureTimer=function(e){var t=angular.isNumber(e.timeout)?e.timeout:p["time-out"];"object"==typeof t&&(t=t[e.type]),t>0&&u(e,t)},t.removeToast=function(e){var n,i;for(n=0,i=t.toasters.length;i>n;n++)if(t.toasters[n].id===e){d(n);break}},t.toasters=[],t._onNewToast=function(e,n,i){(f(t.config.toasterId)&&f(n)||!f(t.config.toasterId)&&!f(n)&&t.config.toasterId==n)&&c(o.toast,i)},t._onClearToasts=function(e,n,i){("*"==n||f(t.config.toasterId)&&f(n)||!f(t.config.toasterId)&&!f(n)&&t.config.toasterId==n)&&h(i)},s.setup(),s.subscribeToNewToastEvent(t._onNewToast),s.subscribeToClearToastsEvent(t._onClearToasts)},controller:["$scope","$element","$attrs",function(e,t,i){e.stopTimer=function(t){e.config.mouseoverTimer===!0&&t.timeoutPromise&&(n.cancel(t.timeoutPromise),t.timeoutPromise=null)},e.restartTimer=function(t){e.config.mouseoverTimer===!0?t.timeoutPromise||e.configureTimer(t):null===t.timeoutPromise&&e.removeToast(t.id)},e.click=function(t,n){if(e.config.tap===!0||t.showCloseButton===!0&&n===!0){var i=!0;t.clickHandler&&(angular.isFunction(t.clickHandler)?i=t.clickHandler(t,n):angular.isFunction(e.$parent.$eval(t.clickHandler))?i=e.$parent.$eval(t.clickHandler)(t,n):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),i&&e.removeToast(t.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),function(){function e(){}function t(e){return e}function n(e){return!!e}function i(e){return!e}function r(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function o(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function s(e){return M(e)||"number"==typeof e.length&&e.length>=0&&e.length%1===0}function a(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function l(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function u(e){return l(Array(e),function(e,t){return t})}function c(e,t,n){return a(e,function(e,i,r){n=t(n,e,i,r)}),n}function d(e,t){a(P(e),function(n){t(e[n],n)})}function h(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function f(e){var t,n,i=-1;return s(e)?(t=e.length,function(){return i++,t>i?i:null}):(n=P(e),t=n.length,function(){return i++,t>i?n[i]:null})}function p(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;n>r;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i)}}}function m(e){return function(t,n,i){return e(t,i)}}function g(t){return function(n,i,s){s=o(s||e),n=n||[];var a=f(n);if(0>=t)return s(null);var l=!1,u=0,c=!1;!function d(){if(l&&0>=u)return s(null);for(;t>u&&!c;){var e=a();if(null===e)return l=!0,void(0>=u&&s(null));u+=1,i(n[e],e,r(function(e){u-=1,e?(s(e),c=!0):d()}))}}()}}function v(e){return function(t,n,i){return e(O.eachOf,t,n,i)}}function y(e){return function(t,n,i,r){return e(g(n),t,i,r)}}function b(e){return function(t,n,i){return e(O.eachOfSeries,t,n,i)}}function w(t,n,i,r){r=o(r||e),n=n||[];var a=s(n)?[]:{};t(n,function(e,t,n){i(e,function(e,i){a[t]=i,n(e)})},function(e){r(e,a)})}function C(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(n){n&&r.push({index:t,value:e}),i()})},function(){i(l(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function x(e,t,n,i){C(e,t,function(e,t){n(e,function(e){t(!e)})},i)}function S(e,t,n){return function(i,r,o,s){function a(){s&&s(n(!1,void 0))}function l(e,i,r){return s?void o(e,function(i){s&&t(i)&&(s(n(!0,e)),s=o=!1),r()}):r()}arguments.length>3?e(i,r,l,a):(s=o,o=r,e(i,l,a))}}function A(e,t){return t}function _(t,n,i){i=i||e;var r=s(n)?[]:{};t(n,function(e,t,n){e(p(function(e,i){i.length<=1&&(i=i[0]),r[t]=i,n(e)}))},function(e){i(e,r)})}function E(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(e,t){r=r.concat(t||[]),i(e)})},function(e){i(e,r)})}function $(t,n,i){function o(t,n,i,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,M(n)||(n=[n]),0===n.length&&t.idle()?O.setImmediate(function(){t.drain()}):(a(n,function(n){var o={data:n,callback:r||e};i?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void O.setImmediate(t.process))}function s(e,t){return function(){u-=1;var n=!1,i=arguments;a(t,function(e){a(c,function(t,i){t!==e||n||(c.splice(i,1),n=!0)}),e.callback.apply(e,i)}),e.tasks.length+u===0&&e.drain(),e.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var u=0,c=[],d={tasks:[],concurrency:n,payload:i,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(e,t){o(d,e,!1,t)},kill:function(){d.drain=e,d.tasks=[]},unshift:function(e,t){o(d,e,!0,t)},process:function(){if(!d.paused&&u<d.concurrency&&d.tasks.length)for(;u<d.concurrency&&d.tasks.length;){var e=d.payload?d.tasks.splice(0,d.payload):d.tasks.splice(0,d.tasks.length),n=l(e,function(e){return e.data});0===d.tasks.length&&d.empty(),u+=1,c.push(e[0]);var i=r(s(d,e));t(n,i)}},length:function(){return d.tasks.length},running:function(){return u},workersList:function(){return c},idle:function(){return d.tasks.length+u===0},pause:function(){d.paused=!0},resume:function(){if(d.paused!==!1){d.paused=!1;for(var e=Math.min(d.concurrency,d.tasks.length),t=1;e>=t;t++)O.setImmediate(d.process)}}};return d}function k(e){return p(function(t,n){t.apply(null,n.concat([p(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&a(n,function(t){console[e](t)}))})]))})}function D(e){return function(t,n,i){e(u(t),n,i)}}function T(e){return p(function(t,n){var i=p(function(n){var i=this,r=n.pop();return e(t,function(e,t,r){e.apply(i,n.concat([r]))},r)});return n.length?i.apply(this,n):i})}function F(e){return p(function(t){var n=t.pop();t.push(function(){var e=arguments;i?O.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}var L,O={},N="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=N&&(L=N.async),O.noConflict=function(){return N.async=L,O};var B=Object.prototype.toString,M=Array.isArray||function(e){return"[object Array]"===B.call(e)},R=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},P=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},I="function"==typeof setImmediate&&setImmediate,U=I?function(e){I(e)}:function(e){setTimeout(e,0)};"object"==typeof process&&"function"==typeof process.nextTick?O.nextTick=process.nextTick:O.nextTick=U,O.setImmediate=I?U:O.nextTick,O.forEach=O.each=function(e,t,n){return O.eachOf(e,m(t),n)},O.forEachSeries=O.eachSeries=function(e,t,n){return O.eachOfSeries(e,m(t),n)},O.forEachLimit=O.eachLimit=function(e,t,n,i){return g(t)(e,m(n),i)},O.forEachOf=O.eachOf=function(t,n,i){function s(e){u--,e?i(e):null===a&&0>=u&&i(null)}i=o(i||e),t=t||[];for(var a,l=f(t),u=0;null!=(a=l());)u+=1,n(t[a],a,r(s));0===u&&i(null)},O.forEachOfSeries=O.eachOfSeries=function(t,n,i){function s(){var e=!0;return null===l?i(null):(n(t[l],l,r(function(t){if(t)i(t);else{if(l=a(),null===l)return i(null);e?O.setImmediate(s):s()}})),void(e=!1))}i=o(i||e),t=t||[];var a=f(t),l=a();s()},O.forEachOfLimit=O.eachOfLimit=function(e,t,n,i){g(t)(e,n,i)},O.map=v(w),O.mapSeries=b(w),O.mapLimit=y(w),O.inject=O.foldl=O.reduce=function(e,t,n,i){O.eachOfSeries(e,function(e,i,r){n(t,e,function(e,n){t=n,r(e)})},function(e){i(e,t)})},O.foldr=O.reduceRight=function(e,n,i,r){var o=l(e,t).reverse();O.reduce(o,n,i,r)},O.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=M(e)?[]:{}),O.eachOf(e,function(e,i,r){n(t,e,i,r)},function(e){i(e,t)})},O.select=O.filter=v(C),O.selectLimit=O.filterLimit=y(C),O.selectSeries=O.filterSeries=b(C),O.reject=v(x),O.rejectLimit=y(x),O.rejectSeries=b(x),O.any=O.some=S(O.eachOf,n,t),O.someLimit=S(O.eachOfLimit,n,t),O.all=O.every=S(O.eachOf,i,i),O.everyLimit=S(O.eachOfLimit,i,i),O.detect=S(O.eachOf,t,A),O.detectSeries=S(O.eachOfSeries,t,A),O.detectLimit=S(O.eachOfLimit,t,A),O.sortBy=function(e,t,n){function i(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0}O.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){return e?n(e):void n(null,l(t.sort(i),function(e){return e.value}))})},O.auto=function(t,n,i){function r(e){v.unshift(e)}function s(e){var t=h(v,e);t>=0&&v.splice(t,1)}function l(){f--,a(v.slice(0),function(e){e()})}i||(i=n,n=null),i=o(i||e);var u=P(t),f=u.length;if(!f)return i(null);n||(n=f);var m={},g=0,v=[];r(function(){f||i(null,m)}),a(u,function(e){function o(){return n>g&&c(y,function(e,t){return e&&m.hasOwnProperty(t)},!0)&&!m.hasOwnProperty(e)}function a(){o()&&(g++,s(a),f[f.length-1](v,m))}for(var u,f=M(t[e])?t[e]:[t[e]],v=p(function(t,n){if(g--,n.length<=1&&(n=n[0]),t){var r={};d(m,function(e,t){r[t]=e}),r[e]=n,i(t,r)}else m[e]=n,O.setImmediate(l)}),y=f.slice(0,f.length-1),b=y.length;b--;){if(!(u=t[y[b]]))throw new Error("Has inexistant dependency");if(M(u)&&h(u,e)>=0)throw new Error("Has cyclic dependencies")}o()?(g++,f[f.length-1](v,m)):r(a)})},O.retry=function(e,t,n){function i(e,t){if("number"==typeof t)e.times=parseInt(t,10)||o;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||o,e.interval=parseInt(t.interval,10)||s}}function r(e,t){function n(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}function i(e){return function(t){setTimeout(function(){t(null)},e)}}for(;l.times;){var r=!(l.times-=1);a.push(n(l.task,r)),!r&&l.interval>0&&a.push(i(l.interval))}O.series(a,function(t,n){n=n[n.length-1],(e||l.callback)(n.err,n.result)})}var o=5,s=0,a=[],l={times:o,interval:s},u=arguments.length;if(1>u||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=u&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&i(l,e),l.callback=n,l.task=t,l.callback?r():r},O.waterfall=function(t,n){function i(e){return p(function(t,r){if(t)n.apply(null,[t].concat(r));else{var o=e.next();o?r.push(i(o)):r.push(n),F(e).apply(null,r)}})}if(n=o(n||e),!M(t)){var r=new Error("First argument to waterfall must be an array of functions");return n(r)}return t.length?void i(O.iterator(t))():n()},O.parallel=function(e,t){_(O.eachOf,e,t)},O.parallelLimit=function(e,t,n){_(g(t),e,n)},O.series=function(e,t){_(O.eachOfSeries,e,t)},O.iterator=function(e){function t(n){function i(){return e.length&&e[n].apply(null,arguments),i.next()}return i.next=function(){return n<e.length-1?t(n+1):null},i}return t(0)},O.apply=p(function(e,t){return p(function(n){return e.apply(null,t.concat(n))})}),O.concat=v(E),O.concatSeries=b(E),O.whilst=function(t,n,i){if(i=i||e,t()){var r=p(function(e,o){e?i(e):t.apply(this,o)?n(r):i(null)});n(r)}else i(null)},O.doWhilst=function(e,t,n){var i=0;return O.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},O.until=function(e,t,n){return O.whilst(function(){return!e.apply(this,arguments)},t,n)},O.doUntil=function(e,t,n){return O.doWhilst(e,function(){return!t.apply(this,arguments)},n)},O.during=function(t,n,i){i=i||e;var r=p(function(e,n){e?i(e):(n.push(o),t.apply(this,n))}),o=function(e,t){e?i(e):t?n(r):i(null)};t(o)},O.doDuring=function(e,t,n){var i=0;O.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)},O.queue=function(e,t){var n=$(function(t,n){e(t[0],n)},t,1);return n},O.priorityQueue=function(t,n){function i(e,t){return e.priority-t.priority}function r(e,t,n){for(var i=-1,r=e.length-1;r>i;){var o=i+(r-i+1>>>1);n(t,e[o])>=0?i=o:r=o-1}return i}function o(t,n,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,M(n)||(n=[n]),0===n.length?O.setImmediate(function(){t.drain()}):void a(n,function(n){var a={data:n,priority:o,callback:"function"==typeof s?s:e};t.tasks.splice(r(t.tasks,a,i)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),O.setImmediate(t.process)})}var s=O.queue(t,n);return s.push=function(e,t,n){o(s,e,t,n)},delete s.unshift,s},O.cargo=function(e,t){return $(e,1,t)},O.log=k("log"),O.dir=k("dir"),O.memoize=function(e,n){var i={},r={};n=n||t;var o=p(function(t){var o=t.pop(),s=n.apply(null,t);s in i?O.setImmediate(function(){o.apply(null,i[s])}):s in r?r[s].push(o):(r[s]=[o],e.apply(null,t.concat([p(function(e){i[s]=e;var t=r[s];delete r[s];for(var n=0,o=t.length;o>n;n++)t[n].apply(null,e)})])))});return o.memo=i,o.unmemoized=e,o},O.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},O.times=D(O.map),O.timesSeries=D(O.mapSeries),O.timesLimit=function(e,t,n,i){return O.mapLimit(u(e),t,n,i)},O.seq=function(){var t=arguments;return p(function(n){var i=this,r=n[n.length-1];"function"==typeof r?n.pop():r=e,O.reduce(t,n,function(e,t,n){t.apply(i,e.concat([p(function(e,t){n(e,t)})]))},function(e,t){r.apply(i,[e].concat(t))})})},O.compose=function(){return O.seq.apply(null,Array.prototype.reverse.call(arguments))},O.applyEach=T(O.eachOf),O.applyEachSeries=T(O.eachOfSeries),O.forever=function(t,n){function i(e){return e?o(e):void s(i)}var o=r(n||e),s=F(t);i()},O.ensureAsync=F,O.constant=p(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),O.wrapSync=O.asyncify=function(e){return p(function(t){var n,i=t.pop();try{n=e.apply(this,t)}catch(r){return i(r)}R(n)&&"function"==typeof n.then?n.then(function(e){i(null,e)})["catch"](function(e){i(e.message?e:new Error(e))}):i(null,n)})},"object"==typeof module&&module.exports?module.exports=O:"function"==typeof define&&define.amd?define([],function(){return O}):N.async=O}(),function(){"use strict";angular.module("angular-filters",[])}(),function(){"use strict";angular.module("angular-filters").filter("bytes",[function(){return function(e,t){if("number"!=typeof e&&(e=parseFloat(e)),0===e)return"0 B";if(isNaN(e)||!isFinite(e))return"-";var n=0>e;n&&(e=-e),"number"!=typeof t&&(t=parseFloat(t)),(isNaN(t)||!isFinite(t))&&(t=1);var i=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),i.length-1),o=(e/Math.pow(1024,Math.floor(r))).toFixed(t);return(n?"-":"")+o+" "+i[r]}}])}(),function(){"use strict";angular.module("angular-filters").filter("join",[function(){return function(e,t){if(!Array.isArray(e))return e;var n=[];return e.forEach(function(e){e&&n.push(e)}),n.join(t||",")}}])}(),function(){"use strict";angular.module("angular-filters").filter("replace",[function(){function e(e){return"string"==typeof e||e instanceof String}return function(t,n,i){return e(t)&&e(n)&&e(i)?t.split(n).join(i):t}}])}(),function(){"use strict";angular.module("angular-filters").filter("reverse",[function(){function e(e){return e.slice().reverse()}function t(e){for(var t="",n=0;n<e.length;n++)t=e.charAt(n)+t;return t}return function(n){return Array.isArray(n)?e(n):"string"==typeof n||n instanceof String?t(n):n}}])}(),function(){"use strict";angular.module("angular-filters").filter("toSpacedWords",[function(){function e(e){return e.match(/\d+|__/g)||(e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e=e.length>1?e.charAt(0).toUpperCase()+e.slice(1):e),e}return function(t){return t&&("string"==typeof t||t instanceof String)?e(t):t;
}}])}(),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["angular-file-upload"]=t():e["angular-file-upload"]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=i(n(1)),o=i(n(2)),s=i(n(3)),a=i(n(4)),l=i(n(5)),u=i(n(6)),c=i(n(7)),d=i(n(8)),h=i(n(9)),f=i(n(10)),p=i(n(11)),m=i(n(12));angular.module(r.name,[]).value("fileUploaderOptions",o).factory("FileUploader",s).factory("FileLikeObject",a).factory("FileItem",l).factory("FileDirective",u).factory("FileSelect",c).factory("FileDrop",d).factory("FileOver",h).directive("nvFileSelect",f).directive("nvFileDrop",p).directive("nvFileOver",m).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver",function(e,t,n,i,r,o,s){e.FileLikeObject=t,e.FileItem=n,e.FileDirective=i,e.FileSelect=r,e.FileDrop=o,e.FileOver=s}])},function(e,t){e.exports={name:"angularFileUpload"}},function(e,t){"use strict";e.exports={url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(i(n(1)),angular.copy),a=angular.extend,l=angular.forEach,u=angular.isObject,c=angular.isNumber,d=angular.isDefined,h=angular.isArray,f=angular.element;e.exports=function(e,t,n,i,p,m){var g=i.File,v=i.FormData,y=function(){function i(t){o(this,i);var n=s(e);a(this,n,t,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return r(i,{addToQueue:{value:function(e,t,n){var i=this,r=this.isArrayLikeObject(e)?e:[e],o=this._getFilters(n),s=this.queue.length,a=[];l(r,function(e){var n=new p(e);if(i._isValidFile(n,o,t)){var r=new m(i,e,t);a.push(r),i.queue.push(r),i._onAfterAddingFile(r)}else{var s=o[i._failFilterIndex];i._onWhenAddingFileFailed(n,s,t)}}),this.queue.length!==s&&(this._onAfterAddingAll(a),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()}},removeFromQueue:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),n._destroy(),this.progress=this._getTotalProgress()}},clearQueue:{value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},uploadItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],i=this.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[i](n))}},cancelItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],i=this.isHTML5?"_xhr":"_form";n&&n.isUploading&&n[i].abort()}},uploadAll:{value:function(){var e=this.getNotUploadedItems().filter(function(e){return!e.isUploading});e.length&&(l(e,function(e){return e._prepareToUploading()}),e[0].upload())}},cancelAll:{value:function(){var e=this.getNotUploadedItems();l(e,function(e){return e.cancel()})}},isFile:{value:function(e){return this.constructor.isFile(e)}},isFileLikeObject:{value:function(e){return this.constructor.isFileLikeObject(e)}},isArrayLikeObject:{value:function(e){return this.constructor.isArrayLikeObject(e)}},getIndexOfItem:{value:function(e){return c(e)?e:this.queue.indexOf(e)}},getNotUploadedItems:{value:function(){return this.queue.filter(function(e){return!e.isUploaded})}},getReadyItems:{value:function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})}},destroy:{value:function(){var e=this;l(this._directives,function(t){l(e._directives[t],function(e){e.destroy()})})}},onAfterAddingAll:{value:function(e){}},onAfterAddingFile:{value:function(e){}},onWhenAddingFileFailed:{value:function(e,t,n){}},onBeforeUploadItem:{value:function(e){}},onProgressItem:{value:function(e,t){}},onProgressAll:{value:function(e){}},onSuccessItem:{value:function(e,t,n,i){}},onErrorItem:{value:function(e,t,n,i){}},onCancelItem:{value:function(e,t,n,i){}},onCompleteItem:{value:function(e,t,n,i){}},onCompleteAll:{value:function(){}},_getTotalProgress:{value:function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,n=t?this.queue.length-t:this.queue.length,i=100/this.queue.length,r=(e||0)*i/100;return Math.round(n*i+r)}},_getFilters:{value:function(e){if(!e)return this.filters;if(h(e))return e;var t=e.match(/[^\s,]+/g);return this.filters.filter(function(e){return-1!==t.indexOf(e.name)})}},_render:{value:function(){t.$$phase||t.$apply()}},_folderFilter:{value:function(e){return!(!e.size&&!e.type)}},_queueLimitFilter:{value:function(){return this.queue.length<this.queueLimit}},_isValidFile:{value:function(e,t,n){var i=this;return this._failFilterIndex=-1,t.length?t.every(function(t){return i._failFilterIndex++,t.fn.call(i,e,n)}):!0}},_isSuccessCode:{value:function(e){return e>=200&&300>e||304===e}},_transformResponse:{value:function(e,t){var i=this._headersGetter(t);return l(n.defaults.transformResponse,function(t){e=t(e,i)}),e}},_parseHeaders:{value:function(e){var t,n,i,r={};return e?(l(e.split("\n"),function(e){i=e.indexOf(":"),t=e.slice(0,i).trim().toLowerCase(),n=e.slice(i+1).trim(),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}},_headersGetter:{value:function(e){return function(t){return t?e[t.toLowerCase()]||null:e}}},_xhrTransport:{value:function(e){var t=this,n=e._xhr=new XMLHttpRequest,i=new v;if(this._onBeforeUploadItem(e),l(e.formData,function(e){l(e,function(e,t){i.append(t,e)})}),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");i.append(e.alias,e._file,e.file.name),n.upload.onprogress=function(n){var i=Math.round(n.lengthComputable?100*n.loaded/n.total:0);t._onProgressItem(e,i)},n.onload=function(){var i=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,i),o=t._isSuccessCode(n.status)?"Success":"Error",s="_on"+o+"Item";t[s](e,r,n.status,i),t._onCompleteItem(e,r,n.status,i)},n.onerror=function(){var i=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,i);t._onErrorItem(e,r,n.status,i),t._onCompleteItem(e,r,n.status,i)},n.onabort=function(){var i=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,i);t._onCancelItem(e,r,n.status,i),t._onCompleteItem(e,r,n.status,i)},n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials,l(e.headers,function(e,t){n.setRequestHeader(t,e)}),n.send(i),this._render()}},_iframeTransport:{value:function(e){var t=this,n=f('<form style="display: none;" />'),i=f('<iframe name="iframeTransport'+Date.now()+'">'),r=e._input;e._form&&e._form.replaceWith(r),e._form=n,this._onBeforeUploadItem(e),r.prop("name",e.alias),l(e.formData,function(e){l(e,function(e,t){var i=f('<input type="hidden" name="'+t+'" />');i.val(e),n.append(i)})}),n.prop({action:e.url,method:"POST",target:i.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),i.bind("load",function(){var n="",r=200;try{n=i[0].contentDocument.body.innerHTML}catch(o){r=500}var s={response:n,status:r,dummy:!0},a={},l=t._transformResponse(s.response,a);t._onSuccessItem(e,l,s.status,a),t._onCompleteItem(e,l,s.status,a)}),n.abort=function(){var o,s={status:0,dummy:!0},a={};i.unbind("load").prop("src","javascript:false;"),n.replaceWith(r),t._onCancelItem(e,o,s.status,a),t._onCompleteItem(e,o,s.status,a)},r.after(n),n.append(r).append(i),n[0].submit(),this._render()}},_onWhenAddingFileFailed:{value:function(e,t,n){this.onWhenAddingFileFailed(e,t,n)}},_onAfterAddingFile:{value:function(e){this.onAfterAddingFile(e)}},_onAfterAddingAll:{value:function(e){this.onAfterAddingAll(e)}},_onBeforeUploadItem:{value:function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}},_onProgressItem:{value:function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}},_onSuccessItem:{value:function(e,t,n,i){e._onSuccess(t,n,i),this.onSuccessItem(e,t,n,i)}},_onErrorItem:{value:function(e,t,n,i){e._onError(t,n,i),this.onErrorItem(e,t,n,i)}},_onCancelItem:{value:function(e,t,n,i){e._onCancel(t,n,i),this.onCancelItem(e,t,n,i)}},_onCompleteItem:{value:function(e,t,n,i){e._onComplete(t,n,i),this.onCompleteItem(e,t,n,i);var r=this.getReadyItems()[0];return this.isUploading=!1,d(r)?void r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())}}},{isFile:{value:function(e){return g&&e instanceof g}},isFileLikeObject:{value:function(e){return e instanceof p}},isArrayLikeObject:{value:function(e){return u(e)&&"length"in e}},inherit:{value:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t}}}),i}();return y.prototype.isHTML5=!(!g||!v),y.isHTML5=y.prototype.isHTML5,y},e.exports.$inject=["fileUploaderOptions","$rootScope","$http","$window","FileLikeObject","FileItem"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(i(n(1)),angular.copy),a=angular.isElement,l=angular.isString;e.exports=function(){var e=function(){function e(t){o(this,e);var n=a(t),i=n?t.value:t,r=l(i)?"FakePath":"Object",s="_createFrom"+r;this[s](i)}return r(e,{_createFromFakePath:{value:function(e){this.lastModifiedDate=null,this.size=null,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}},_createFromObject:{value:function(e){this.lastModifiedDate=s(e.lastModifiedDate),this.size=e.size,this.type=e.type,this.name=e.name}}}),e}();return e},e.exports.$inject=[]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(i(n(1)),angular.copy),a=angular.extend,l=angular.element,u=angular.isElement;e.exports=function(e,t){var n=function(){function n(e,i,r){o(this,n);var c=u(i),d=c?l(i):null,h=c?null:i;a(this,{url:e.url,alias:e.alias,headers:s(e.headers),formData:s(e.formData),removeAfterUpload:e.removeAfterUpload,withCredentials:e.withCredentials,method:e.method},r,{uploader:e,file:new t(i),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:h,_input:d}),d&&this._replaceNode(d)}return r(n,{upload:{value:function(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,[]),this.uploader._onErrorItem(this,"",0,[])}}},cancel:{value:function(){this.uploader.cancelItem(this)}},remove:{value:function(){this.uploader.removeFromQueue(this)}},onBeforeUpload:{value:function(){}},onProgress:{value:function(e){}},onSuccess:{value:function(e,t,n){}},onError:{value:function(e,t,n){}},onCancel:{value:function(e,t,n){}},onComplete:{value:function(e,t,n){}},_onBeforeUpload:{value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},_onProgress:{value:function(e){this.progress=e,this.onProgress(e)}},_onSuccess:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,n)}},_onError:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,n)}},_onCancel:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,n)}},_onComplete:{value:function(e,t,n){this.onComplete(e,t,n),this.removeAfterUpload&&this.remove()}},_destroy:{value:function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input}},_prepareToUploading:{value:function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}},_replaceNode:{value:function(t){var n=e(t.clone())(t.scope());n.prop("value",null),t.css("display","none"),t.after(n)}}}),n}();return n},e.exports.$inject=["$compile","FileLikeObject"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(i(n(1)),angular.extend);e.exports=function(){var e=function(){function e(t){o(this,e),s(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return r(e,{bind:{value:function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}}},unbind:{value:function(){for(var e in this.events)this.element.unbind(e,this.events[e])}},destroy:{value:function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()}},_saveLinks:{value:function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}}}}),e}();return e.prototype.events={},e},e.exports.$inject=[]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function u(e,t,n){var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:u(r,t,n)}if("value"in i&&i.writable)return i.value;var o=i.get;return void 0===o?void 0:o.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=(i(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=l(e,{events:{$destroy:"destroy",change:"onChange"},prop:"select"});o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},isEmptyAfterSelection:{value:function(){return!!this.element.attr("multiple")}},onChange:{value:function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,n),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith(this.element=this.element.clone(!0)))}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function c(e,t,n){var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in i&&i.writable)return i.value;var o=i.get;return void 0===o?void 0:o.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=(i(n(1)),angular.extend),u=angular.forEach;e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=l(e,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},onDrop:{value:function(e){var t=this._getTransfer(e);if(t){var n=this.getOptions(),i=this.getFilters();this._preventAndStop(e),u(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(t.files,n,i)}}},onDragOver:{value:function(e){var t=this._getTransfer(e);this._haveFiles(t.types)&&(t.dropEffect="copy",this._preventAndStop(e),u(this.uploader._directives.over,this._addOverClass,this))}},onDragLeave:{value:function(e){e.currentTarget!==this.element[0]&&(this._preventAndStop(e),u(this.uploader._directives.over,this._removeOverClass,this))}},_getTransfer:{value:function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer}},_preventAndStop:{value:function(e){e.preventDefault(),e.stopPropagation()}},_haveFiles:{value:function(e){return e?e.indexOf?-1!==e.indexOf("Files"):e.contains?e.contains("Files"):!1:!1}},_addOverClass:{value:function(e){e.addOverClass()}},_removeOverClass:{value:function(e){e.removeOverClass()}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var i=t[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(e,t)}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function u(e,t,n){var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:u(r,t,n)}if("value"in i&&i.writable)return i.value;var o=i.get;return void 0===o?void 0:o.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},l=(i(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=l(e,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{addOverClass:{value:function(){this.element.addClass(this.getOverClass())}},removeOverClass:{value:function(){this.element.removeClass(this.getOverClass())}},getOverClass:{value:function(){return this.overClass}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e};i(n(1)),e.exports=function(e,t,n){return{link:function(i,r,o){var s=i.$eval(o.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new n({uploader:s,element:r});a.getOptions=e(o.options).bind(a,i),a.getFilters=function(){return o.filters}}}},e.exports.$inject=["$parse","FileUploader","FileSelect"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e};i(n(1)),e.exports=function(e,t,n){return{link:function(i,r,o){var s=i.$eval(o.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(s.isHTML5){var a=new n({uploader:s,element:r});a.getOptions=e(o.options).bind(a,i),a.getFilters=function(){return o.filters}}}}},e.exports.$inject=["$parse","FileUploader","FileDrop"]},function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e["default"]:e};i(n(1)),e.exports=function(e,t){return{link:function(n,i,r){var o=n.$eval(r.uploader);if(!(o instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var s=new t({uploader:o,element:i});s.getOverClass=function(){return r.overClass||s.overClass}}}},e.exports.$inject=["FileUploader","FileOver"]}])}),angular.module("ngDraggable",[]).service("ngDraggable",[function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:e}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(e,t,n,i,r){return{restrict:"A",link:function(o,s,a){o.value=a.ngDrag;var l,u,c,d,h,f,p,m,g=!1,v="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,y="touchstart mousedown",b="touchmove mousemove",w="touchend mouseup",C=o.$id,x=null,S=null,A=!1,_=null,E=t(a.ngDragSuccess)||null,$=angular.isDefined(a.allowTransform)?o.$eval(a.allowTransform):!0,k=t(a.ngDragData),D=angular.noop,T=function(){s.attr("draggable","false");var e=s.find("[ng-drag-handle]");e.length&&(m=e),F(!0)},F=function(e){e&&(o.$on("$destroy",L),o.$watch(a.ngDrag,O),o.$watch(a.ngCenterAnchor,N),m?m.on(y,M):s.on(y,M),v||"img"!=s[0].nodeName.toLowerCase()||s.on("mousedown",function(){return!1}))},L=function(e){F(!1)},O=function(e,t){A=e},N=function(e,t){angular.isDefined(e)&&(g=e||"true")},B=function(e){return angular.isDefined(angular.element(e.target).attr("ng-cancel-drag"))},M=function(e){A&&(B(e)||("mousedown"!=e.type||0==e.button)&&(v?(R(),_=setTimeout(function(){R(),P(e)},100),n.on(b,R),n.on(w,R)):P(e)))},R=function(){clearTimeout(_),n.off(b,R),n.off(w,R)},P=function(t){A&&(t.preventDefault(),l=s[0].getBoundingClientRect(),S=$?l:{left:document.body.scrollLeft,top:document.body.scrollTop},s.centerX=s[0].offsetWidth/2,s.centerY=s[0].offsetHeight/2,u=r.inputEvent(t).pageX,c=r.inputEvent(t).pageY,f=u-l.left,p=c-l.top,g?(d=u-s.centerX-i.pageXOffset,h=c-s.centerY-i.pageYOffset):(d=u-f-i.pageXOffset,h=c-p-i.pageYOffset),n.on(b,I),n.on(w,U),D=e.$on("draggable:_triggerHandlerMove",function(e,t){I(t)}))},I=function(t){A&&(t.preventDefault(),s.hasClass("dragging")||(x=k(o),s.addClass("dragging"),e.$broadcast("draggable:start",{x:u,y:c,tx:d,ty:h,event:t,element:s,data:x})),u=r.inputEvent(t).pageX,c=r.inputEvent(t).pageY,g?(d=u-s.centerX-S.left,h=c-s.centerY-S.top):(d=u-f-S.left,h=c-p-S.top),j(d,h),e.$broadcast("draggable:move",{x:u,y:c,tx:d,ty:h,event:t,element:s,data:x,uid:C}))},U=function(t){A&&(t.preventDefault(),e.$broadcast("draggable:end",{x:u,y:c,tx:d,ty:h,event:t,element:s,data:x,callback:H,uid:C}),s.removeClass("dragging"),s.parent().find(".drag-enter").removeClass("drag-enter"),z(),n.off(b,I),n.off(w,U),D())},H=function(e){E&&o.$apply(function(){E(o,{$data:x,$event:e})})},z=function(){$?s.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):s.css({position:"",top:"",left:""})},j=function(e,t){$?s.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+t+")"}):s.css({left:e+"px",top:t+"px",position:"fixed"})};T()}}}]).directive("ngDrop",["$parse","$timeout","$window","$document","ngDraggable",function(e,t,n,i,r){return{restrict:"A",link:function(n,r,o){n.value=o.ngDrop,n.isTouching=!1;var s=null,a=n.$id,l=!1,u=e(o.ngDropSuccess),c=e(o.ngDragStart),d=e(o.ngDragStop),h=e(o.ngDragMove),f=function(){p(!0)},p=function(e){e&&(n.$watch(o.ngDrop,g),n.$on("$destroy",m),n.$on("draggable:start",v),n.$on("draggable:move",y),n.$on("draggable:end",b))},m=function(e){p(!1)},g=function(e,t){l=e},v=function(e,i){l&&(w(i.x,i.y,i.element),o.ngDragStart&&t(function(){c(n,{$data:i.data,$event:i})}))},y=function(e,i){l&&(w(i.x,i.y,i.element),o.ngDragMove&&t(function(){h(n,{$data:i.data,$event:i})}))},b=function(e,i){return l&&a!==i.uid?(w(i.x,i.y,i.element)&&(i.callback&&i.callback(i),o.ngDropSuccess&&t(function(){u(n,{$data:i.data,$event:i,$target:n.$eval(n.value)})})),o.ngDragStop&&t(function(){d(n,{$data:i.data,$event:i})}),void C(!1,i.element)):void C(!1,i.element)},w=function(e,t,i){var o=x(e,t);return n.isTouching=o,o&&(s=r),C(o,i),o},C=function(e,t){e?(r.addClass("drag-enter"),t.addClass("drag-over")):s==r&&(s=null,r.removeClass("drag-enter"),t.removeClass("drag-over"))},x=function(e,t){var n=r[0].getBoundingClientRect();return e-=i[0].body.scrollLeft+i[0].documentElement.scrollLeft,t-=i[0].body.scrollTop+i[0].documentElement.scrollTop,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top};f()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(e,t,n){return{restrict:"A",link:function(e,t,n){var i,r=!0,o=null;e.clonedData={};var s=function(){i=t.find("img"),t.attr("draggable","false"),i.attr("draggable","false"),h(),a(!0)},a=function(t){t&&(e.$on("draggable:start",u),e.$on("draggable:move",c),e.$on("draggable:end",d),l())},l=function(){i.off("mousedown touchstart touchmove touchend touchcancel",p),i.on("mousedown touchstart touchmove touchend touchcancel",p)},u=function(n,i,s){r=!0,angular.isDefined(i.data.allowClone)&&(r=i.data.allowClone),r&&(e.$apply(function(){e.clonedData=i.data}),t.css("width",i.element[0].offsetWidth),t.css("height",i.element[0].offsetHeight),f(i.tx,i.ty)),o=t[0].getBoundingClientRect()},c=function(e,t){r&&(_tx=t.tx+o.left,_ty=t.ty+o.top,f(_tx,_ty))},d=function(e,t){r&&h()},h=function(){t.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},f=function(e,n){t.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+n+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+n+")"})},p=function(e){var t=e;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};s()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(e,t,n){var i=function(){t.attr("draggable","false"),r(!0)},r=function(e){e&&t.on("mousedown touchstart touchmove touchend touchcancel",o)},o=function(e){var t=e.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};i()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(e,t,n){t.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(e,t,n,i,r){return{restrict:"A",link:function(o,s,a){var l=null,u=null,c={verticalScroll:a.verticalScroll||!0,horizontalScroll:a.horizontalScroll||!0,activationDistance:a.activationDistance||75,scrollDistance:a.scrollDistance||50,scrollInterval:a.scrollInterval||250},d=function(){l=t(function(){if(u){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=0,l=0;if(c.horizontalScroll&&(u.clientX<c.activationDistance?a=-c.scrollDistance:u.clientX>t-c.activationDistance&&(a=c.scrollDistance)),c.verticalScroll&&(u.clientY<c.activationDistance?l=-c.scrollDistance:u.clientY>o-c.activationDistance&&(l=c.scrollDistance)),0!==a||0!==l){var d=i[0].documentElement.scrollLeft,h=i[0].documentElement.scrollTop,f=s.css("transform");s.css("transform","initial"),e.scrollBy(a,l);var p=i[0].documentElement.scrollLeft-d,m=i[0].documentElement.scrollTop-h;s.css("transform",f),n(function(){u.pageX+=p,u.pageY+=m,r.$emit("draggable:_triggerHandlerMove",u)})}}},c.scrollInterval)},h=function(){t.cancel(l),l=null};o.$on("draggable:start",function(e,t){t.element[0]===s[0]&&(l||d())}),o.$on("draggable:end",function(e,t){t.element[0]===s[0]&&l&&h()}),o.$on("draggable:move",function(e,t){t.element[0]===s[0]&&(u=t.event)})}}}]),angular.module("toggle-switch",["ng"]).directive("toggleSwitch",["$compile",function(e){return{restrict:"EA",replace:!0,require:"ngModel",scope:{isDisabled:"=",onLabel:"@",offLabel:"@",knobLabel:"@",html:"=",onChange:"&"},template:'<div class="ats-switch" ng-click="toggle()" ng-keypress="onKeyPress($event)" ng-class="{ \'disabled\': isDisabled }" role="switch" aria-checked="{{!!model}}"><div class="switch-animate" ng-class="{\'switch-off\': !model, \'switch-on\': model}"><span class="switch-left"></span><span class="knob"></span><span class="switch-right"></span></div></div>',compile:function(t,n){return angular.isUndefined(n.onLabel)&&(n.onLabel="On"),angular.isUndefined(n.offLabel)&&(n.offLabel="Off"),angular.isUndefined(n.knobLabel)&&(n.knobLabel=" "),angular.isUndefined(n.isDisabled)&&(n.isDisabled=!1),angular.isUndefined(n.html)&&(n.html=!1),angular.isUndefined(n.tabindex)&&(n.tabindex=0),function(t,i,r,o){i.attr("tabindex",n.tabindex),t.toggle=function(){t.isDisabled||(t.model=!t.model,o.$setViewValue(t.model)),t.onChange()};var s=32;t.onKeyPress=function(e){e.charCode!=s||e.altKey||e.ctrlKey||e.metaKey||t.toggle()},o.$formatters.push(function(e){return e}),o.$parsers.push(function(e){return e}),o.$viewChangeListeners.push(function(){t.$eval(n.ngChange)}),o.$render=function(){t.model=o.$viewValue};var a=function(n,i){n=angular.element(n);var r=i===!0?"ng-bind-html":"ng-bind";n.removeAttr("ng-bind-html"),n.removeAttr("ng-bind"),angular.element(n).hasClass("switch-left")&&n.attr(r,"onLabel"),n.hasClass("knob")&&n.attr(r,"knobLabel"),n.hasClass("switch-right")&&n.attr(r,"offLabel"),e(n)(t,function(e,t){n.replaceWith(e)})},l=function(e,t){angular.forEach(e[0].children[0].children,function(e,n){a(e,t)})};t.$watch("html",function(e){l(i,e)})}}}}]),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),o=i.source,u=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",o),n=s(o,t)):(l[u]||(a("new io instance for %s",o),l[u]=s(o,t)),n=l[u]),n.socket(i.path)}var r=e("./url"),o=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=n=i;var l=n.managers={};n.protocol=o.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(e,t,n){function i(e,t){return this instanceof i?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),
this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new i(e,t)}var r=(e("./url"),e("engine.io-client")),o=e("./socket"),s=e("component-emitter"),a=e("socket.io-parser"),l=e("./on"),u=e("component-bind"),c=(e("object-component"),e("debug")("socket.io-client:manager")),d=e("indexof"),h=e("backo2");t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},i.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},s(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=l(t,"open",function(){n.onopen(),e&&e()}),o=l(t,"error",function(t){if(c("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var a=setTimeout(function(){c("connect attempt timed out after %d",s),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},i.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",u(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded"))),this.subs.push(l(e,"error",u(this,"onerror"))),this.subs.push(l(e,"close",u(this,"onclose")))},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~d(n.connected,t)||n.connected.push(t)})}return t},i.prototype.destroy=function(e){var t=d(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},i.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){c("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(e,t,n){function i(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=i},{}],5:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var r=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),l=e("component-bind"),u=e("debug")("socket.io-client:socket"),c=e("has-binary");t.exports=n=i;var d={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},h=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",l(this,"onopen")),a(e,"packet",l(this,"onpacket")),a(e,"close",l(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(d.hasOwnProperty(e))return h.apply(this,arguments),this;var t=s(arguments),n=r.EVENT;c(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=s(arguments);u("sending ack %j",i);var o=c(i)?r.BINARY_ACK:r.ACK;t.packet({type:o,id:e,data:i})}}},i.prototype.onack=function(e){u("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(e,t,n){(function(n){function i(e,t){var i=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),i=r(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var r=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(e,t,n){function i(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(e){this.ms=e},i.prototype.setMax=function(e){this.max=e},i.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t,n){var i=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}},{}],9:[function(e,t,n){function i(e){return e?r(e):void 0}function r(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===t||i.fn===t){n.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t,n){function i(e){return i.enabled(e)?function(t){t=r(t);var n=new Date,o=n-(i[e]||n);i[e]=n,t=e+" "+t+" +"+i.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function r(e){return e instanceof Error?e.stack||e.message:e}t.exports=i,i.names=[],i.skips=[],i.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;r>o;o++)e=n[o].replace("*",".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$"))},i.disable=function(){i.enable("")},i.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},i.enabled=function(e){for(var t=0,n=i.skips.length;n>t;t++)if(i.skips[t].test(e))return!1;for(var t=0,n=i.names.length;n>t;t++)if(i.names[t].test(e))return!0;return!1};try{window.localStorage&&i.enable(localStorage.debug)}catch(o){}},{}],11:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(e,t,n){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=c(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length?t.port=r.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),l=e("indexof"),u=e("engine.io-parser"),c=e("parseuri"),d=e("parsejson"),h=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,s(i.prototype),i.protocol=u.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=r(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;d=d||t}d||(a('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",c),!c)return;i.priorWebsocketSuccess="websocket"==c.name,a('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){d||"closed"!=h.readyState&&(a("changing transport and sending upgrade packet"),u(),h.setTransport(c),c.send([{type:"upgrade"}]),h.emit("upgrade",c),c=null,h.upgrading=!1,h.flush())})}else{a('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,h.emit("upgradeError",n)}}))}function n(){d||(d=!0,u(),c.close(),c=null)}function r(t){var i=new Error("probe error: "+t);i.transport=c.name,n(),a('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",i)}function o(){r("transport closed")}function s(){r("socket closed")}function l(e){c&&e.name!=c.name&&(a('"%s" works - aborting "%s"',e.name,c.name),n())}function u(){c.removeListener("open",t),c.removeListener("error",r),c.removeListener("close",o),h.removeListener("close",s),h.removeListener("upgrading",l)}a('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),d=!1,h=this;i.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",r),c.once("close",o),this.once("close",s),this.once("upgrading",l),c.open()},i.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),a("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){a("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;i>n;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}var r=e("engine.io-parser"),o=e("component-emitter");t.exports=i,o(i.prototype),i.timestamps=0,i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(e,t,n){(function(t){function i(e){var n,i=!1,a=!1,l=!1!==e.jsonp;if(t.location){var u="https:"==location.protocol,c=location.port;c||(c=u?443:80),i=e.hostname!=location.hostname||c!=e.port,a=e.secure!=u}if(e.xdomain=i,e.xscheme=a,n=new r(e),"open"in n&&!e.forceJSONP)return new o(e);if(!l)throw new Error("JSONP disabled");return new s(e)}var r=e("xmlhttprequest"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");n.polling=i,n.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t,n){(function(n){function i(){}function r(e){o.call(this,e),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=r;var a,l=/\n/g,u=/\\n/g;s(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(u,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(e,t,n){(function(n){function i(){}function r(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest"),l=e("./polling"),u=e("component-emitter"),c=e("component-inherit"),d=e("debug")("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=o,c(r,l),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new o(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=i},r.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(o.prototype),o.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),i=this;try{if(d("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},d("xhr data %s",this.data),t.send(this.data)}catch(r){return void setTimeout(function(){i.onError(r)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},o.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,e)try{this.xhr.abort()}catch(t){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",s):n.addEventListener&&n.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,n){function i(e){var t=e&&e.forceBase64;(!u||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("parseqs"),s=e("engine.io-parser"),a=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=i;var u=function(){var t=e("xmlhttprequest"),n=new t({xdomain:!1});return null!=n.responseType}();a(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,i){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),
this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(e,t,n){function i(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("engine.io-parser"),s=e("parseqs"),a=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),u=e("ws");t.exports=i,a(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new u(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,r=e.length;r>i;i++)o.encodePacket(e[i],this.supportsBinary,function(e){try{n.ws.send(e)}catch(t){l("websocket closed before onclose event")}});setTimeout(t,0)},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},i.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===i.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":38}],21:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i),e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function a(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=o,n.formatArgs=r,n.save=s,n.load=a,n.useColors=i,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":23}],23:[function(e,t,n){function i(){return n.colors[c++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,i){if("%%"===t)return t;a++;var r=n.formatters[i];if("function"==typeof r){var o=s[a];t=r.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var l=r.log||n.log||console.log.bind(console);l.apply(e,s)}t.enabled=!1,r.enabled=!0;var o=n.enabled(e)?r:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,r=0;i>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,i;for(t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=l,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,c=0},{ms:24}],24:[function(e,t,n){function i(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return n*d;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"h":return n*u;case"minutes":case"minute":case"m":return n*l;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=l?Math.round(e/l)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,c,"day")||s(e,u,"hour")||s(e,l,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,l=60*a,u=60*l,c=24*u,d=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t["long"]?o(e):r(e)}},{}],25:[function(e,t,n){(function(t){function i(e,t){var i="b"+n.packets[e.type]+e.data.data;return t(i)}function r(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=v[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){e.data=r.result,n.encodePacket(e,t,!0,i)},r.readAsArrayBuffer(e.data)}function s(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(g)return o(e,t,i);var r=new Uint8Array(1);r[0]=v[e.type];var s=new w([r.buffer,e.data]);return i(s)}function a(e,t,n){for(var i=new Array(e.length),r=h(e.length,n),o=function(e,n,r){t(n,function(t,n){i[e]=n,r(t,i)})},s=0;s<e.length;s++)o(s,e[s],r)}var l=e("./keys"),u=e("has-binary"),c=e("arraybuffer.slice"),d=e("base64-arraybuffer"),h=e("after"),f=e("utf8"),p=navigator.userAgent.match(/Android/i),m=/PhantomJS/i.test(navigator.userAgent),g=p||m;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},y=l(v),b={type:"error",data:"parser error"},w=e("blob");n.encodePacket=function(e,n,o,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof o&&(a=o,o=null);var l=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&l instanceof ArrayBuffer)return r(e,n,a);if(w&&l instanceof t.Blob)return s(e,n,a);if(l&&l.base64)return i(e,a);var u=v[e.type];return void 0!==e.data&&(u+=o?f.encode(String(e.data)):String(e.data)),a(""+u)},n.encodeBase64Packet=function(e,i){var r="b"+n.packets[e.type];if(w&&e.data instanceof w){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];i(r+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var l=new Uint8Array(e.data),u=new Array(l.length),c=0;c<l.length;c++)u[c]=l[c];s=String.fromCharCode.apply(null,u)}return r+=t.btoa(s),i(r)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=f.decode(e)}catch(r){return b}var o=e.charAt(0);return Number(o)==o&&y[o]?e.length>1?{type:y[o],data:e.substring(1)}:{type:y[o]}:b}var s=new Uint8Array(e),o=s[0],a=c(e,1);return w&&"blob"===t&&(a=new w([a])),{type:y[o],data:a}},n.decodeBase64Packet=function(e,n){var i=y[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var r=d.decode(e.substr(1));return"blob"===n&&w&&(r=new w([r])),{type:i,data:r}},n.encodePayload=function(e,t,i){function r(e){return e.length+":"+e}function o(e,i){n.encodePacket(e,s?t:!1,!0,function(e){i(null,r(e))})}"function"==typeof t&&(i=t,t=null);var s=u(e);return t&&s?w&&!g?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void a(e,o,function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var r;if(""==e)return i(b,0,1);for(var o,s,a="",l=0,u=e.length;u>l;l++){var c=e.charAt(l);if(":"!=c)a+=c;else{if(""==a||a!=(o=Number(a)))return i(b,0,1);if(s=e.substr(l+1,o),a!=s.length)return i(b,0,1);if(s.length){if(r=n.decodePacket(s,t,!0),b.type==r.type&&b.data==r.data)return i(b,0,1);var d=i(r,l+o,u);if(!1===d)return}l+=o,a=""}}return""!=a?i(b,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void a(e,i,function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),r=new Uint8Array(i),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}t?r[o++]=0:r[o++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)r[o++]=parseInt(a[s]);r[o++]=255;for(var i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]}),t(r.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),r=0;r<s.length;r++)a[r]=parseInt(s[r]);if(a[s.length]=255,w){var l=new w([n.buffer,a.buffer,e]);t(null,l)}})}a(e,i,function(e,n){return t(new w(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var r=e,o=[],s=!1;r.byteLength>0;){for(var a=new Uint8Array(r),l=0===a[0],u="",d=1;255!=a[d];d++){if(u.length>310){s=!0;break}u+=a[d]}if(s)return i(b,0,1);r=c(r,2+u.length),u=parseInt(u);var h=c(r,0,u);if(l)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(f){var p=new Uint8Array(h);h="";for(var d=0;d<p.length;d++)h+=String.fromCharCode(p[d])}o.push(h),r=c(r,u)}var m=o.length;o.forEach(function(e,r){i(n.decodePacket(e,t,!0),r,m)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],27:[function(e,t,n){function i(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}t.exports=i},{}],28:[function(e,t,n){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(0>t&&(t+=i),0>n&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;n>s;s++,a++)o[a]=r[s];return o.buffer}},{}],29:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;r>n;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,i,r,o,s,a=.75*t.length,l=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),d=new Uint8Array(c);for(n=0;l>n;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[u++]=i<<2|r>>4,d[u++]=(15&r)<<4|o>>2,d[u++]=(3&o)<<6|63&s;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,t,n){(function(e){function n(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var i=n.buffer;if(n.byteLength!==i.byteLength){var r=new Uint8Array(n.byteLength);r.set(new Uint8Array(i,n.byteOffset,n.byteLength)),i=r.buffer}e[t]=i}}}function i(e,t){t=t||{};var i=new o;n(e);for(var r=0;r<e.length;r++)i.append(e[r]);return t.type?i.getBlob(t.type):i.getBlob()}function r(e,t){return n(e),new Blob(e,t||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=s&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),l=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return s?a?e.Blob:r:l?i:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(t,n,i){(function(t){!function(r){function o(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function s(e){for(var t,n=e.length,i=-1,r="";++i<n;)t=e[i],t>65535&&(t-=65536,r+=w(t>>>10&1023|55296),t=56320|1023&t),r+=w(t);return r}function a(e){if(e>=55296&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function l(e,t){return w(e>>t&63|128)}function u(e){if(0==(4294967168&e))return w(e);var t="";return 0==(4294965248&e)?t=w(e>>6&31|192):0==(4294901760&e)?(a(e),t=w(e>>12&15|224),t+=l(e,6)):0==(4292870144&e)&&(t=w(e>>18&7|240),t+=l(e,12),t+=l(e,6)),t+=w(63&e|128)}function c(e){for(var t,n=o(e),i=n.length,r=-1,s="";++r<i;)t=n[r],s+=u(t);return s}function d(){if(b>=y)throw Error("Invalid byte index");var e=255&v[b];if(b++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function h(){var e,t,n,i,r;if(b>y)throw Error("Invalid byte index");if(b==y)return!1;if(e=255&v[b],b++,0==(128&e))return e;if(192==(224&e)){var t=d();if(r=(31&e)<<6|t,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=d(),n=d(),r=(15&e)<<12|t<<6|n,r>=2048)return a(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=d(),n=d(),i=d(),r=(15&e)<<18|t<<12|n<<6|i,r>=65536&&1114111>=r))return r;throw Error("Invalid UTF-8 detected")}function f(e){v=o(e),y=v.length,b=0;for(var t,n=[];(t=h())!==!1;)n.push(t);return s(n)}var p="object"==typeof i&&i,m="object"==typeof n&&n&&n.exports==p&&n,g="object"==typeof t&&t;(g.global===g||g.window===g)&&(r=g);var v,y,b,w=String.fromCharCode,C={version:"2.0.0",encode:c,decode:f};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return C});else if(p&&!p.nodeType)if(m)m.exports=C;else{var x={},S=x.hasOwnProperty;for(var A in C)S.call(C,A)&&(p[A]=C[A])}else r.utf8=C}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;r>i;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],34:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=i.exec(e||""),a={},l=14;l--;)a[r[l]]=s[l]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],35:[function(e,t,n){function i(e,t,n){var i;return i=t?new o(e,t):new o(e)}var r=function(){return this}(),o=r.WebSocket||r.MozWebSocket;t.exports=o?i:null,o&&(i.prototype=o.prototype)},{}],36:[function(e,t,n){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&t(e[o]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],38:[function(e,t,n){var i=e("global");try{t.exports="XMLHttpRequest"in i&&"withCredentials"in new i.XMLHttpRequest}catch(r){t.exports=!1}},{global:39}],39:[function(e,t,n){t.exports=function(){return this}()},{}],40:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],41:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],42:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=i.exec(e||""),n={},o=14;o--;)n[r[o]]=t[o]||"";return n}},{}],43:[function(e,t,n){(function(t){var i=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var l in e)s[l]=t(e[l]);return s}return e}var n=[],o=e.data,s=e;return s.data=t(o),s.attachments=n.length,{packet:s,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=n(e[s]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,l,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var c=new FileReader;c.onload=function(){u?u[l]=this.result:a=this.result,--s||n(a)},c.readAsArrayBuffer(e)}else if(i(e))for(var d=0;d<e.length;d++)o(e[d],d,e);else if(e&&"object"==typeof e&&!r(e))for(var h in e)o(e[h],h,e)}var s=0,a=e;o(a),s||n(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(e,t,n){function i(){}function r(e){var t="",i=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=d.stringify(e.data)),c("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=f.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}f.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return u();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var r="";"-"!=e.charAt(++i)&&(r+=e.charAt(i),i!=e.length););if(r!=Number(r)||"-"!=e.charAt(i))throw new Error("Illegal attachments");t.attachments=Number(r)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var o=e.charAt(i);if(","==o)break;if(t.nsp+=o,i==e.length)break}else t.nsp="/";var s=e.charAt(i+1);if(""!==s&&Number(s)==s){for(t.id="";++i;){var o=e.charAt(i);if(null==o||Number(o)!=o){--i;break}if(t.id+=e.charAt(i),i==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=d.parse(e.substr(i))}catch(a){return u()}return c("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:n.ERROR,data:"parser error"}}var c=e("debug")("socket.io-parser"),d=e("json3"),h=(e("isarray"),e("component-emitter")),f=e("./binary"),p=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=s,i.prototype.encode=function(e,t){if(c("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var i=r(e);t([i])}},h(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){t.exports=e(37)},{}],47:[function(t,n,i){!function(t){function n(e){if(n[e]!==s)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,l="function"==typeof o&&d;if(l){(i=function(){return 1}).toJSON=i;try{l="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(a)===s&&o(s)===s&&o()===s&&"1"===o(i)&&"[1]"==o([i])&&"[null]"==o([s])&&"null"==o(null)&&"[null,null,null]"==o([s,a,null])&&o({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==r&&"1"===o(null,i)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new Date(-1))}catch(u){l=!1}}t=l}if("json-parse"==e){var h=c.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){i=h(r);var f=5==i.a.length&&1===i.a[0];if(f){try{f=!h('"	"')}catch(u){}if(f)try{f=1!==h("01")}catch(u){}if(f)try{f=1!==h("1.")}catch(u){}}}}catch(u){f=!1}t=f}}return n[e]=!!t}var r,o,s,a={}.toString,l="function"==typeof e&&e.amd,u="object"==typeof JSON&&JSON,c="object"==typeof i&&i&&!i.nodeType&&i;c&&u?(c.stringify=u.stringify,c.parse=u.parse):c=t.JSON=u||{};var d=new Date(-0xc782b5b800cec);try{d=-109252==d.getUTCFullYear()&&0===d.getUTCMonth()&&1===d.getUTCDate()&&10==d.getUTCHours()&&37==d.getUTCMinutes()&&6==d.getUTCSeconds()&&708==d.getUTCMilliseconds()}catch(h){}if(!n("json")){var f="[object Function]",p="[object Date]",m="[object Number]",g="[object String]",v="[object Array]",y="[object Boolean]",b=n("bug-string-char-index");if(!d)var w=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return C[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};(r={}.hasOwnProperty)||(r=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=a?r=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,r=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,r.call(this,e)});var S={"boolean":1,number:1,string:1,undefined:1},A=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!S[n]};if(o=function(e,t){var n,i,s,l=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(s in i)r.call(i,s)&&l++;return n=i=null,l?o=2==l?function(e,t){var n,i={},o=a.call(e)==f;for(n in e)o&&"prototype"==n||r.call(i,n)||!(i[n]=1)||!r.call(e,n)||t(n)}:function(e,t){var n,i,o=a.call(e)==f;for(n in e)o&&"prototype"==n||!r.call(e,n)||(i="constructor"===n)||t(n);(i||r.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var n,o,s=a.call(e)==f,l=!s&&"function"!=typeof e.constructor&&A(e,"hasOwnProperty")?e.hasOwnProperty:r;for(n in e)s&&"prototype"==n||!l.call(e,n)||t(n);for(o=i.length;n=i[--o];l.call(e,n)&&t(n));}),o(e,t)},!n("json-stringify")){var _={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E="000000",$=function(e,t){return(E+(t||0)).slice(-e)},k="\\u00",D=function(e){var t,n='"',i=0,r=e.length,o=r>10&&b;for(o&&(t=e.split(""));r>i;i++){var s=e.charCodeAt(i);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=_[s];break;default:if(32>s){n+=k+$(2,s.toString(16));break}n+=o?t[i]:b?e.charAt(i):e[i]}}return n+'"'},T=function(e,t,n,i,l,u,c){var d,h,f,b,C,S,A,_,E,k,F,L,O,N,B,M;try{d=t[e]}catch(R){}if("object"==typeof d&&d)if(h=a.call(d),h!=p||r.call(d,"toJSON"))"function"==typeof d.toJSON&&(h!=m&&h!=g&&h!=v||r.call(d,"toJSON"))&&(d=d.toJSON(e));else if(d>-1/0&&1/0>d){if(x){for(C=w(d/864e5),f=w(C/365.2425)+1970-1;x(f+1,0)<=C;f++);for(b=w((C-x(f,0))/30.42);x(f,b+1)<=C;b++);C=1+C-x(f,b),S=(d%864e5+864e5)%864e5,A=w(S/36e5)%24,_=w(S/6e4)%60,E=w(S/1e3)%60,k=S%1e3}else f=d.getUTCFullYear(),b=d.getUTCMonth(),C=d.getUTCDate(),A=d.getUTCHours(),_=d.getUTCMinutes(),E=d.getUTCSeconds(),k=d.getUTCMilliseconds();d=(0>=f||f>=1e4?(0>f?"-":"+")+$(6,0>f?-f:f):$(4,f))+"-"+$(2,b+1)+"-"+$(2,C)+"T"+$(2,A)+":"+$(2,_)+":"+$(2,E)+"."+$(3,k)+"Z"}else d=null;if(n&&(d=n.call(t,e,d)),null===d)return"null";if(h=a.call(d),h==y)return""+d;if(h==m)return d>-1/0&&1/0>d?""+d:"null";if(h==g)return D(""+d);if("object"==typeof d){for(N=c.length;N--;)if(c[N]===d)throw TypeError();if(c.push(d),F=[],B=u,u+=l,h==v){for(O=0,N=d.length;N>O;O++)L=T(O,d,n,i,l,u,c),F.push(L===s?"null":L);M=F.length?l?"[\n"+u+F.join(",\n"+u)+"\n"+B+"]":"["+F.join(",")+"]":"[]"}else o(i||d,function(e){var t=T(e,d,n,i,l,u,c);t!==s&&F.push(D(e)+":"+(l?" ":"")+t)}),M=F.length?l?"{\n"+u+F.join(",\n"+u)+"\n"+B+"}":"{"+F.join(",")+"}":"{}";return c.pop(),M}};c.stringify=function(e,t,n){var i,r,o,s;if("function"==typeof t||"object"==typeof t&&t)if((s=a.call(t))==f)r=t;else if(s==v){o={};for(var l,u=0,c=t.length;c>u;l=t[u++],s=a.call(l),(s==g||s==m)&&(o[l]=1));}if(n)if((s=a.call(n))==m){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else s==g&&(i=n.length<=10?n:n.slice(0,10));return T("",(l={},l[""]=e,l),r,o,i,"",[])}}if(!n("json-parse")){var F,L,O=String.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},B=function(){throw F=L=null,SyntaxError()},M=function(){for(var e,t,n,i,r,o=L,s=o.length;s>F;)switch(r=o.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?o.charAt(F):o[F],F++,e;case 34:for(e="@",F++;s>F;)if(r=o.charCodeAt(F),32>r)B();else if(92==r)switch(r=o.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=N[r],F++;break;case 117:for(t=++F,n=F+4;n>F;F++)r=o.charCodeAt(F),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||B();e+=O("0x"+o.slice(t,F));break;default:B()}else{if(34==r)break;for(r=o.charCodeAt(F),t=F;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++F);e+=o.slice(t,F)}if(34==o.charCodeAt(F))return F++,e;B();default:if(t=F,45==r&&(i=!0,r=o.charCodeAt(++F)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt(F+1),r>=48&&57>=r)&&B(),i=!1;s>F&&(r=o.charCodeAt(F),r>=48&&57>=r);F++);if(46==o.charCodeAt(F)){for(n=++F;s>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==F&&B(),F=n}if(r=o.charCodeAt(F),101==r||69==r){for(r=o.charCodeAt(++F),(43==r||45==r)&&F++,n=F;s>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==F&&B(),F=n}return+o.slice(t,F)}if(i&&B(),"true"==o.slice(F,F+4))return F+=4,!0;if("false"==o.slice(F,F+5))return F+=5,!1;if("null"==o.slice(F,F+4))return F+=4,null;B()}return"$"},R=function(e){var t,n;if("$"==e&&B(),"string"==typeof e){if("@"==(b?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=M(),"]"!=e;n||(n=!0))n&&(","==e?(e=M(),"]"==e&&B()):B()),","==e&&B(),t.push(R(e));return t}if("{"==e){for(t={};e=M(),"}"!=e;n||(n=!0))n&&(","==e?(e=M(),"}"==e&&B()):B()),(","==e||"string"!=typeof e||"@"!=(b?e.charAt(0):e[0])||":"!=M())&&B(),t[e.slice(1)]=R(M());return t}B()}return e},P=function(e,t,n){var i=I(e,t,n);i===s?delete e[t]:e[t]=i},I=function(e,t,n){var i,r=e[t];if("object"==typeof r&&r)if(a.call(r)==v)for(i=r.length;i--;)P(r,i,n);else o(r,function(e){P(r,e,n)});return n.call(e,t,r)};c.parse=function(e,t){var n,i;return F=0,L=""+e,n=R(M()),"$"!=M()&&B(),F=L=null,t&&a.call(t)==f?I((i={},i[""]=n,i),"",t):n}}}l&&e(function(){return c})}(this)},{}],48:[function(e,t,n){function i(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}t.exports=i},{}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}(function(){var e;return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}
};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),o=i.source,u=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",o),n=s(o,t)):(l[u]||(a("new io instance for %s",o),l[u]=s(o,t)),n=l[u]),n.socket(i.path)}var r=e("./url"),o=e("socket.io-parser"),s=e("./manager"),a=e("debug")("socket.io-client");t.exports=n=i;var l=n.managers={};n.protocol=o.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:9,"socket.io-parser":43}],3:[function(e,t,n){function i(e,t){return this instanceof i?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.attempts=0,this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new i(e,t)}var r=(e("./url"),e("engine.io-client")),o=e("./socket"),s=e("component-emitter"),a=e("socket.io-parser"),l=e("./on"),u=e("component-bind"),c=(e("object-component"),e("debug")("socket.io-client:manager")),d=e("indexof");t.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},s(i.prototype),i.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},i.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this):this._reconnectionDelay},i.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this):this._reconnectionDelayMax},i.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){this.openReconnect||this.reconnecting||!this._reconnection||0!==this.attempts||(this.openReconnect=!0,this.reconnect())},i.prototype.open=i.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=l(t,"open",function(){n.onopen(),e&&e()}),o=l(t,"error",function(t){if(c("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var i=new Error("Connection error");i.data=t,e(i)}n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s);var a=setTimeout(function(){c("connect attempt timed out after %d",s),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},i.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",u(this,"ondata"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded"))),this.subs.push(l(e,"error",u(this,"onerror"))),this.subs.push(l(e,"close",u(this,"onclose")))},i.prototype.ondata=function(e){this.decoder.add(e)},i.prototype.ondecoded=function(e){this.emit("packet",e)},i.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},i.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){~d(n.connected,t)||n.connected.push(t)})}return t},i.prototype.destroy=function(e){var t=d(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},i.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},i.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){this.skipReconnect=!0,this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(e){c("close"),this.cleanup(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.attempts++,this.attempts>this._reconnectionAttempts)c("reconnect failed"),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.attempts*this.reconnectionDelay();t=Math.min(t,this.reconnectionDelayMax()),c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.attempts),e.emitAll("reconnecting",e.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var e=this.attempts;this.attempts=0,this.reconnecting=!1,this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,"component-bind":7,"component-emitter":8,debug:9,"engine.io-client":10,indexof:39,"object-component":40,"socket.io-parser":43}],4:[function(e,t,n){function i(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}t.exports=i},{}],5:[function(e,t,n){function i(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var r=e("socket.io-parser"),o=e("component-emitter"),s=e("to-array"),a=e("./on"),l=e("component-bind"),u=e("debug")("socket.io-client:socket"),c=e("has-binary");t.exports=n=i;var d={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},h=o.prototype.emit;o(i.prototype),i.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",l(this,"onopen")),a(e,"packet",l(this,"onpacket")),a(e,"close",l(this,"onclose"))]}},i.prototype.open=i.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},i.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},i.prototype.emit=function(e){if(d.hasOwnProperty(e))return h.apply(this,arguments),this;var t=s(arguments),n=r.EVENT;c(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},i.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},i.prototype.onopen=function(){u("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},i.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,this.emit("disconnect",e)},i.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:this.onevent(e);break;case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:this.onack(e);break;case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},i.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},i.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=s(arguments);u("sending ack %j",i);var o=c(i)?r.BINARY_ACK:r.ACK;t.packet({type:o,id:e,data:i})}}},i.prototype.onack=function(e){u("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},i.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},i.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},i.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},i.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},i.prototype.close=i.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":7,"component-emitter":8,debug:9,"has-binary":35,"socket.io-parser":43,"to-array":47}],6:[function(e,t,n){(function(n){function i(e,t){var i=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.hostname),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),i=r(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",i.id=i.protocol+"://"+i.host+":"+i.port,i.href=i.protocol+"://"+i.host+(t&&t.port==i.port?"":":"+i.port),i}var r=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:9,parseuri:41}],7:[function(e,t,n){var i=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}},{}],8:[function(e,t,n){function i(e){return e?r(e):void 0}function r(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===t||i.fn===t){n.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],9:[function(e,t,n){function i(e){return i.enabled(e)?function(t){t=r(t);var n=new Date,o=n-(i[e]||n);i[e]=n,t=e+" "+t+" +"+i.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function r(e){return e instanceof Error?e.stack||e.message:e}t.exports=i,i.names=[],i.skips=[],i.enable=function(e){try{localStorage.debug=e}catch(t){}for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;r>o;o++)e=n[o].replace("*",".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$"))},i.disable=function(){i.enable("")},i.humanize=function(e){var t=1e3,n=6e4,i=60*n;return e>=i?(e/i).toFixed(1)+"h":e>=n?(e/n).toFixed(1)+"m":e>=t?(e/t|0)+"s":e+"ms"},i.enabled=function(e){for(var t=0,n=i.skips.length;n>t;t++)if(i.skips[t].test(e))return!1;for(var t=0,n=i.names.length;n>t;t++)if(i.names[t].test(e))return!0;return!1};try{window.localStorage&&i.enable(localStorage.debug)}catch(o){}},{}],10:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":11}],11:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":12,"engine.io-parser":24}],12:[function(e,t,n){(function(n){function i(e,t){if(!(this instanceof i))return new i(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=c(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length&&(t.port=r.pop())}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.open(),this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=e("./transports"),s=e("component-emitter"),a=e("debug")("engine.io-client:socket"),l=e("indexof"),u=e("engine.io-parser"),c=e("parseuri"),d=e("parsejson"),h=e("parseqs");t.exports=i,i.priorWebsocketSuccess=!1,s(i.prototype),i.protocol=u.protocol,i.Socket=i,i.Transport=e("./transport"),i.transports=e("./transports"),i.parser=e("engine.io-parser"),i.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=r(this.query);t.EIO=u.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new o[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this});return n},i.prototype.open=function(){var e;if(this.rememberUpgrade&&i.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},i.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},i.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;d=d||t}d||(a('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!d)if("pong"==t.type&&"probe"==t.data){if(a('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",c),!c)return;i.priorWebsocketSuccess="websocket"==c.name,a('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){d||"closed"!=h.readyState&&(a("changing transport and sending upgrade packet"),u(),h.setTransport(c),c.send([{type:"upgrade"}]),h.emit("upgrade",c),c=null,h.upgrading=!1,h.flush())})}else{a('probe transport "%s" failed',e);var n=new Error("probe error");n.transport=c.name,h.emit("upgradeError",n)}}))}function n(){d||(d=!0,u(),c.close(),c=null)}function r(t){var i=new Error("probe error: "+t);i.transport=c.name,n(),a('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",i)}function o(){r("transport closed")}function s(){r("socket closed")}function l(e){c&&e.name!=c.name&&(a('"%s" works - aborting "%s"',e.name,c.name),n())}function u(){c.removeListener("open",t),c.removeListener("error",r),c.removeListener("close",o),h.removeListener("close",s),h.removeListener("upgrading",l)}a('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),d=!1,h=this;i.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",r),c.once("close",o),this.once("close",s),this.once("upgrading",l),c.open()},i.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",i.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},i.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(d(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},i.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},i.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},i.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},i.prototype.ping=function(){this.sendPacket("ping")},i.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},i.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},i.prototype.write=i.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},i.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var i={type:e,data:t};this.emit("packetCreate",i),this.writeBuffer.push(i),this.callbackBuffer.push(n),this.flush()}},i.prototype.close=function(){function e(){i.onClose("forced close"),a("socket closing - telling transport to close"),i.transport.close()}function t(){i.removeListener("upgrade",t),i.removeListener("upgradeError",t),e()}function n(){i.once("upgrade",t),i.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var i=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}return this},i.prototype.onError=function(e){a("socket error %j",e),i.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},i.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},i.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;i>n;n++)~l(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":8,debug:21,"engine.io-parser":24,indexof:39,parsejson:31,parseqs:32,parseuri:33}],13:[function(e,t,n){function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR}var r=e("engine.io-parser"),o=e("component-emitter");t.exports=i,o(i.prototype),i.timestamps=0,i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":8,"engine.io-parser":24}],14:[function(e,t,n){(function(t){function i(e){var n,i=!1,a=!1,l=!1!==e.jsonp;if(t.location){var u="https:"==location.protocol,c=location.port;c||(c=u?443:80),i=e.hostname!=location.hostname||c!=e.port,a=e.secure!=u}if(e.xdomain=i,e.xscheme=a,n=new r(e),"open"in n&&!e.forceJSONP)return new o(e);if(!l)throw new Error("JSONP disabled");return new s(e)}var r=e("xmlhttprequest"),o=e("./polling-xhr"),s=e("./polling-jsonp"),a=e("./websocket");n.polling=i,n.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(e,t,n){(function(n){function i(){}function r(e){o.call(this,e),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var t=this;a.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}var o=e("./polling"),s=e("component-inherit");t.exports=r;var a,l=/\n/g,u=/\\n/g;s(r,o),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function n(){i(),t()}function i(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';o=document.createElement(t)}catch(e){o=document.createElement("iframe"),o.name=r.iframeId,o.src="javascript:0"}o.id=r.iframeId,r.form.appendChild(o),r.iframe=o}var r=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),i(),e=e.replace(u,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==r.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":20}],16:[function(e,t,n){(function(n){function i(){}function r(e){if(l.call(this,e),n.location){var t="https:"==location.protocol,i=location.port;i||(i=t?443:80),this.xd=e.hostname!=n.location.hostname||i!=e.port,this.xs=e.secure!=t}}function o(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.create()}function s(){for(var e in o.requests)o.requests.hasOwnProperty(e)&&o.requests[e].abort()}var a=e("xmlhttprequest"),l=e("./polling"),u=e("component-emitter"),c=e("component-inherit"),d=e("debug")("engine.io-client:polling-xhr");t.exports=r,t.exports.Request=o,c(r,l),r.prototype.supportsBinary=!0,r.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,new o(e)},r.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),r=this;i.on("success",t),i.on("error",function(e){r.onError("xhr post error",e)}),this.sendXhr=i},r.prototype.doPoll=function(){d("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},u(o.prototype),o.prototype.create=function(){var e=this.xhr=new a({agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}),t=this;try{if(d("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){t.onLoad()},e.onerror=function(){t.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?t.onLoad():setTimeout(function(){t.onError(e.status)},0))},d("xhr data %s",this.data),e.send(this.data)}catch(i){return void setTimeout(function(){t.onError(i)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},o.prototype.onError=function(e){this.emit("error",e),this.cleanup()},o.prototype.cleanup=function(){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i;try{this.xhr.abort()}catch(e){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(n){this.onError(n)}null!=e&&this.onData(e)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",s):n.addEventListener&&n.addEventListener("beforeunload",s,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":8,"component-inherit":20,debug:21,xmlhttprequest:19}],17:[function(e,t,n){function i(e){var t=e&&e.forceBase64;(!u||t)&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("parseqs"),s=e("engine.io-parser"),a=e("component-inherit"),l=e("debug")("engine.io-client:polling");t.exports=i;var u=function(){var t=e("xmlhttprequest"),n=new t({xdomain:!1});return null!=n.responseType}();a(i,r),i.prototype.name="polling",i.prototype.doOpen=function(){this.poll()},i.prototype.pause=function(e){function t(){l("paused"),n.readyState="paused",e()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(l("we are currently polling - waiting to pause"),i++,this.once("pollComplete",function(){l("pre-pause polling complete"),--i||t()})),this.writable||(l("we are currently writing - waiting to pause"),i++,this.once("drain",function(){l("pre-pause writing complete"),--i||t()}))}else t()},i.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},i.prototype.onData=function(e){var t=this;l("polling got data %s",e);var n=function(e,n,i){return"opening"==t.readyState&&t.onOpen(),"close"==e.type?(t.onClose(),!1):void t.onPacket(e)};s.decodePayload(e,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},i.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"==this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},i.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;s.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":13,"component-inherit":20,debug:21,"engine.io-parser":24,parseqs:32,xmlhttprequest:19}],18:[function(e,t,n){function i(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),r.call(this,e)}var r=e("../transport"),o=e("engine.io-parser"),s=e("parseqs"),a=e("component-inherit"),l=e("debug")("engine.io-client:websocket"),u=e("ws");t.exports=i,a(i,r),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=void 0,n={
agent:this.agent};this.ws=new u(e,t,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),i.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var i=0,r=e.length;r>i;i++)o.encodePacket(e[i],this.supportsBinary,function(e){try{n.ws.send(e)}catch(t){l("websocket closed before onclose event")}});setTimeout(t,0)},i.prototype.onClose=function(){r.prototype.onClose.call(this)},i.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},i.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),e=s.encode(e),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},i.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===i.prototype.name)}},{"../transport":13,"component-inherit":20,debug:21,"engine.io-parser":24,parseqs:32,ws:34}],19:[function(e,t,n){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(o){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":37}],20:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],21:[function(e,t,n){function i(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var i="color: "+this.color;e=[e[0],i,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,i),e}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(t){}}function a(){var e;try{e=localStorage.debug}catch(t){}return e}n=t.exports=e("./debug"),n.log=o,n.formatArgs=r,n.save=s,n.load=a,n.useColors=i,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())},{"./debug":22}],22:[function(e,t,n){function i(){return n.colors[c++%n.colors.length]}function r(e){function t(){}function r(){var e=r,t=+new Date,o=t-(u||t);e.diff=o,e.prev=u,e.curr=t,u=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=i());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,i){if("%"===t)return t;a++;var r=n.formatters[i];if("function"==typeof r){var o=s[a];t=r.call(e,o),s.splice(a,1),a--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var l=r.log||n.log||console.log.bind(console);l.apply(e,s)}t.enabled=!1,r.enabled=!0;var o=n.enabled(e)?r:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),i=t.length,r=0;i>r;r++)t[r]&&(e=t[r].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function a(e){var t,i;for(t=0,i=n.skips.length;i>t;t++)if(n.skips[t].test(e))return!1;for(t=0,i=n.names.length;i>t;t++)if(n.names[t].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=r,n.coerce=l,n.disable=s,n.enable=o,n.enabled=a,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var u,c=0},{ms:23}],23:[function(e,t,n){function i(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"y":return n*d;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"h":return n*u;case"minutes":case"minute":case"m":return n*l;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function r(e){return e>=c?Math.round(e/c)+"d":e>=u?Math.round(e/u)+"h":e>=l?Math.round(e/l)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function o(e){return s(e,c,"day")||s(e,u,"hour")||s(e,l,"minute")||s(e,a,"second")||e+" ms"}function s(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,l=60*a,u=60*l,c=24*u,d=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?i(e):t["long"]?o(e):r(e)}},{}],24:[function(e,t,n){(function(t){function i(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=e.data,o=new Uint8Array(r),s=new Uint8Array(1+r.byteLength);s[0]=f[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return i(s.buffer)}function r(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var r=new FileReader;return r.onload=function(){e.data=r.result,n.encodePacket(e,t,!0,i)},r.readAsArrayBuffer(e.data)}function o(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(h)return r(e,t,i);var o=new Uint8Array(1);o[0]=f[e.type];var s=new g([o.buffer,e.data]);return i(s)}function s(e,t,n){for(var i=new Array(e.length),r=c(e.length,n),o=function(e,n,r){t(n,function(t,n){i[e]=n,r(t,i)})},s=0;s<e.length;s++)o(s,e[s],r)}var a=e("./keys"),l=e("arraybuffer.slice"),u=e("base64-arraybuffer"),c=e("after"),d=e("utf8"),h=navigator.userAgent.match(/Android/i);n.protocol=3;var f=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=a(f),m={type:"error",data:"parser error"},g=e("blob");n.encodePacket=function(e,n,r,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof r&&(s=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return i(e,n,s);if(g&&a instanceof t.Blob)return o(e,n,s);var l=f[e.type];return void 0!==e.data&&(l+=r?d.encode(String(e.data)):String(e.data)),s(""+l)},n.encodeBase64Packet=function(e,i){var r="b"+n.packets[e.type];if(g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];i(r+e)},o.readAsDataURL(e.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var l=new Uint8Array(e.data),u=new Array(l.length),c=0;c<l.length;c++)u[c]=l[c];s=String.fromCharCode.apply(null,u)}return r+=t.btoa(s),i(r)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=d.decode(e)}catch(r){return m}var o=e.charAt(0);return Number(o)==o&&p[o]?e.length>1?{type:p[o],data:e.substring(1)}:{type:p[o]}:m}var s=new Uint8Array(e),o=s[0],a=l(e,1);return g&&"blob"===t&&(a=new g([a])),{type:p[o],data:a}},n.decodeBase64Packet=function(e,n){var i=p[e.charAt(0)];if(!t.ArrayBuffer)return{type:i,data:{base64:!0,data:e.substr(1)}};var r=u.decode(e.substr(1));return"blob"===n&&g&&(r=new g([r])),{type:i,data:r}},n.encodePayload=function(e,t,i){function r(e){return e.length+":"+e}function o(e,i){n.encodePacket(e,t,!0,function(e){i(null,r(e))})}return"function"==typeof t&&(i=t,t=null),t?g&&!h?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void s(e,o,function(e,t){return i(t.join(""))}):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);"function"==typeof t&&(i=t,t=null);var r;if(""==e)return i(m,0,1);for(var o,s,a="",l=0,u=e.length;u>l;l++){var c=e.charAt(l);if(":"!=c)a+=c;else{if(""==a||a!=(o=Number(a)))return i(m,0,1);if(s=e.substr(l+1,o),a!=s.length)return i(m,0,1);if(s.length){if(r=n.decodePacket(s,t,!0),m.type==r.type&&m.data==r.data)return i(m,0,1);var d=i(r,l+o,u);if(!1===d)return}l+=o,a=""}}return""!=a?i(m,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})}return e.length?void s(e,i,function(e,n){var i=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),r=new Uint8Array(i),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);n=i.buffer}t?r[o++]=0:r[o++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)r[o++]=parseInt(a[s]);r[o++]=255;for(var i=new Uint8Array(n),s=0;s<i.length;s++)r[o++]=i[s]}),t(r.buffer)}):t(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(e,t){function i(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);e=i.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,s=o.toString(),a=new Uint8Array(s.length+1),r=0;r<s.length;r++)a[r]=parseInt(s[r]);if(a[s.length]=255,g){var l=new g([n.buffer,a.buffer,e]);t(null,l)}})}s(e,i,function(e,n){return t(new g(n))})},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var r=e,o=[],s=!1;r.byteLength>0;){for(var a=new Uint8Array(r),u=0===a[0],c="",d=1;255!=a[d];d++){if(c.length>310){s=!0;break}c+=a[d]}if(s)return i(m,0,1);r=l(r,2+c.length),c=parseInt(c);var h=l(r,0,c);if(u)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(f){var p=new Uint8Array(h);h="";for(var d=0;d<p.length;d++)h+=String.fromCharCode(p[d])}o.push(h),r=l(r,c)}var g=o.length;o.forEach(function(e,r){i(n.decodePacket(e,t,!0),r,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":25,after:26,"arraybuffer.slice":27,"base64-arraybuffer":28,blob:29,utf8:30}],25:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},{}],26:[function(e,t,n){function i(e,t,n){function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}var o=!1;return n=n||r,i.count=e,0===e?t():i}function r(){}t.exports=i},{}],27:[function(e,t,n){t.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(0>t&&(t+=i),0>n&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var r=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;n>s;s++,a++)o[a]=r[s];return o.buffer}},{}],28:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,i=new Uint8Array(t),r=i.length,o="";for(n=0;r>n;n+=3)o+=e[i[n]>>2],o+=e[(3&i[n])<<4|i[n+1]>>4],o+=e[(15&i[n+1])<<2|i[n+2]>>6],o+=e[63&i[n+2]];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,i,r,o,s,a=.75*t.length,l=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),d=new Uint8Array(c);for(n=0;l>n;n+=4)i=e.indexOf(t[n]),r=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),d[u++]=i<<2|r>>4,d[u++]=(15&r)<<4|o>>2,d[u++]=(3&o)<<6|63&s;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],29:[function(e,t,n){(function(e){function n(e,t){t=t||{};for(var n=new i,r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(t){return!1}}(),o=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return r?e.Blob:o?n:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(t,n,i){(function(t){!function(r){function o(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function s(e){for(var t,n=e.length,i=-1,r="";++i<n;)t=e[i],t>65535&&(t-=65536,r+=b(t>>>10&1023|55296),t=56320|1023&t),r+=b(t);return r}function a(e,t){return b(e>>t&63|128)}function l(e){if(0==(4294967168&e))return b(e);var t="";return 0==(4294965248&e)?t=b(e>>6&31|192):0==(4294901760&e)?(t=b(e>>12&15|224),t+=a(e,6)):0==(4292870144&e)&&(t=b(e>>18&7|240),t+=a(e,12),t+=a(e,6)),t+=b(63&e|128)}function u(e){for(var t,n=o(e),i=n.length,r=-1,s="";++r<i;)t=n[r],s+=l(t);return s}function c(){if(y>=v)throw Error("Invalid byte index");var e=255&g[y];if(y++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(){var e,t,n,i,r;if(y>v)throw Error("Invalid byte index");if(y==v)return!1;if(e=255&g[y],y++,0==(128&e))return e;if(192==(224&e)){var t=c();if(r=(31&e)<<6|t,r>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(t=c(),n=c(),r=(15&e)<<12|t<<6|n,r>=2048)return r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=c(),n=c(),i=c(),r=(15&e)<<18|t<<12|n<<6|i,r>=65536&&1114111>=r))return r;throw Error("Invalid UTF-8 detected")}function h(e){g=o(e),v=g.length,y=0;for(var t,n=[];(t=d())!==!1;)n.push(t);return s(n)}var f="object"==typeof i&&i,p="object"==typeof n&&n&&n.exports==f&&n,m="object"==typeof t&&t;(m.global===m||m.window===m)&&(r=m);var g,v,y,b=String.fromCharCode,w={version:"2.0.0",encode:u,decode:h};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return w});else if(f&&!f.nodeType)if(p)p.exports=w;else{var C={},x=C.hasOwnProperty;for(var S in w)x.call(w,S)&&(f[S]=w[S])}else r.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),i=0,r=n.length;r>i;i++){var o=n[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],33:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=i.exec(e||""),a={},l=14;l--;)a[r[l]]=s[l]||"";return-1!=n&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],34:[function(e,t,n){function i(e,t,n){var i;return i=t?new o(e,t):new o(e)}var r=function(){return this}(),o=r.WebSocket||r.MozWebSocket;t.exports=o?i:null,o&&(i.prototype=o.prototype)},{}],35:[function(e,t,n){(function(n){function i(e){function t(e){if(!e)return!1;if(n.Buffer&&n.Buffer.isBuffer(e)||n.ArrayBuffer&&e instanceof ArrayBuffer||n.Blob&&e instanceof Blob||n.File&&e instanceof File)return!0;if(r(e)){for(var i=0;i<e.length;i++)if(t(e[i]))return!0}else if(e&&"object"==typeof e){e.toJSON&&(e=e.toJSON());for(var o in e)if(e.hasOwnProperty(o)&&t(e[o]))return!0}return!1}return t(e)}var r=e("isarray");t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:36}],36:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],37:[function(e,t,n){var i=e("global");try{t.exports="XMLHttpRequest"in i&&"withCredentials"in new i.XMLHttpRequest}catch(r){t.exports=!1}},{global:38}],38:[function(e,t,n){t.exports=function(){return this}()},{}],39:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],40:[function(e,t,n){var i=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],41:[function(e,t,n){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=i.exec(e||""),n={},o=14;o--;)n[r[o]]=t[o]||"";return n}},{}],42:[function(e,t,n){(function(t){var i=e("isarray"),r=e("./is-buffer");n.deconstructPacket=function(e){function t(e){if(!e)return e;if(r(e)){var o={_placeholder:!0,num:n.length};return n.push(e),o}if(i(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a]);return s}if("object"==typeof e&&!(e instanceof Date)){var s={};for(var l in e)s[l]=t(e[l]);return s}return e}var n=[],o=e.data,s=e;return s.data=t(o),s.attachments=n.length,{packet:s,buffers:n}},n.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var r=t[e.num];return r}if(i(e)){for(var o=0;o<e.length;o++)e[o]=n(e[o]);return e}if(e&&"object"==typeof e){for(var s in e)e[s]=n(e[s]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){function o(e,l,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){s++;var c=new FileReader;c.onload=function(){u?u[l]=this.result:a=this.result,--s||n(a)},c.readAsArrayBuffer(e)}else if(i(e))for(var d=0;d<e.length;d++)o(e[d],d,e);else if(e&&"object"==typeof e&&!r(e))for(var h in e)o(e[h],h,e)}var s=0,a=e;o(a),s||n(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":44,isarray:45}],43:[function(e,t,n){function i(){}function r(e){var t="",i=!1;return t+=e.type,(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)&&(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(i=!0,t+=e.nsp),null!=e.id&&(i&&(t+=",",i=!1),t+=e.id),null!=e.data&&(i&&(t+=","),t+=d.stringify(e.data)),c("encoded %j as %s",e,t),t}function o(e,t){function n(e){var n=f.deconstructPacket(e),i=r(n.packet),o=n.buffers;o.unshift(i),t(o)}f.removeBlobs(e,n)}function s(){this.reconstructor=null}function a(e){var t={},i=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return u();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(t.attachments="";"-"!=e.charAt(++i);)t.attachments+=e.charAt(i);t.attachments=Number(t.attachments)}if("/"==e.charAt(i+1))for(t.nsp="";++i;){var r=e.charAt(i);if(","==r)break;if(t.nsp+=r,i+1==e.length)break}else t.nsp="/";var o=e.charAt(i+1);if(""!=o&&Number(o)==o){for(t.id="";++i;){var r=e.charAt(i);if(null==r||Number(r)!=r){--i;break}if(t.id+=e.charAt(i),i+1==e.length)break}t.id=Number(t.id)}if(e.charAt(++i))try{t.data=d.parse(e.substr(i))}catch(s){return u()}return c("decoded %s as %j",e,t),t}function l(e){this.reconPack=e,this.buffers=[]}function u(e){return{type:n.ERROR,data:"parser error"}}var c=e("debug")("socket.io-parser"),d=e("json3"),h=(e("isarray"),e("component-emitter")),f=e("./binary"),p=e("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=i,n.Decoder=s,i.prototype.encode=function(e,t){if(c("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)o(e,t);else{var i=r(e);t([i])}},h(s.prototype),s.prototype.add=function(e){var t;if("string"==typeof e)t=a(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new l(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!p(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,this.emit("decoded",t))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=f.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":42,"./is-buffer":44,"component-emitter":8,debug:9,isarray:45,json3:46}],44:[function(e,t,n){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){t.exports=e(36)},{}],46:[function(t,n,i){!function(t){function n(e){if(n[e]!==s)return n[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=n("json-stringify")&&n("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,l="function"==typeof o&&d;if(l){(i=function(){return 1}).toJSON=i;try{l="0"===o(0)&&"0"===o(new Number)&&'""'==o(new String)&&o(a)===s&&o(s)===s&&o()===s&&"1"===o(i)&&"[1]"==o([i])&&"[null]"==o([s])&&"null"==o(null)&&"[null,null,null]"==o([s,a,null])&&o({a:[i,!0,!1,null,"\x00\b\n\f\r  "]})==r&&"1"===o(null,i)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new Date(-1))}catch(u){l=!1}}t=l}if("json-parse"==e){var h=c.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){i=h(r);var f=5==i.a.length&&1===i.a[0];if(f){try{f=!h('"  "')}catch(u){}if(f)try{f=1!==h("01")}catch(u){}if(f)try{f=1!==h("1.")}catch(u){}}}}catch(u){f=!1}t=f}}return n[e]=!!t}var r,o,s,a={}.toString,l="function"==typeof e&&e.amd,u="object"==typeof JSON&&JSON,c="object"==typeof i&&i&&!i.nodeType&&i;c&&u?(c.stringify=u.stringify,c.parse=u.parse):c=t.JSON=u||{};var d=new Date(-0xc782b5b800cec);try{d=-109252==d.getUTCFullYear()&&0===d.getUTCMonth()&&1===d.getUTCDate()&&10==d.getUTCHours()&&37==d.getUTCMinutes()&&6==d.getUTCSeconds()&&708==d.getUTCMilliseconds()}catch(h){}if(!n("json")){var f="[object Function]",p="[object Date]",m="[object Number]",g="[object String]",v="[object Array]",y="[object Boolean]",b=n("bug-string-char-index");if(!d)var w=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return C[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};(r={}.hasOwnProperty)||(r=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=a?r=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,r=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,r.call(this,e)});var S={"boolean":1,number:1,string:1,undefined:1},A=function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!S[n]};if(o=function(e,t){var n,i,s,l=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(s in i)r.call(i,s)&&l++;return n=i=null,l?o=2==l?function(e,t){var n,i={},o=a.call(e)==f;for(n in e)o&&"prototype"==n||r.call(i,n)||!(i[n]=1)||!r.call(e,n)||t(n)}:function(e,t){var n,i,o=a.call(e)==f;for(n in e)o&&"prototype"==n||!r.call(e,n)||(i="constructor"===n)||t(n);(i||r.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(e,t){var n,o,s=a.call(e)==f,l=!s&&"function"!=typeof e.constructor&&A(e,"hasOwnProperty")?e.hasOwnProperty:r;for(n in e)s&&"prototype"==n||!l.call(e,n)||t(n);for(o=i.length;n=i[--o];l.call(e,n)&&t(n));}),o(e,t)},!n("json-stringify")){var _={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},E="000000",$=function(e,t){return(E+(t||0)).slice(-e)},k="\\u00",D=function(e){var t,n='"',i=0,r=e.length,o=r>10&&b;for(o&&(t=e.split(""));r>i;i++){var s=e.charCodeAt(i);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=_[s];break;default:if(32>s){n+=k+$(2,s.toString(16));break}n+=o?t[i]:b?e.charAt(i):e[i]}}return n+'"'},T=function(e,t,n,i,l,u,c){var d,h,f,b,C,S,A,_,E,k,F,L,O,N,B,M;try{d=t[e]}catch(R){}if("object"==typeof d&&d)if(h=a.call(d),h!=p||r.call(d,"toJSON"))"function"==typeof d.toJSON&&(h!=m&&h!=g&&h!=v||r.call(d,"toJSON"))&&(d=d.toJSON(e));else if(d>-1/0&&1/0>d){if(x){for(C=w(d/864e5),f=w(C/365.2425)+1970-1;x(f+1,0)<=C;f++);for(b=w((C-x(f,0))/30.42);x(f,b+1)<=C;b++);C=1+C-x(f,b),S=(d%864e5+864e5)%864e5,A=w(S/36e5)%24,_=w(S/6e4)%60,E=w(S/1e3)%60,k=S%1e3}else f=d.getUTCFullYear(),b=d.getUTCMonth(),C=d.getUTCDate(),A=d.getUTCHours(),_=d.getUTCMinutes(),E=d.getUTCSeconds(),k=d.getUTCMilliseconds();d=(0>=f||f>=1e4?(0>f?"-":"+")+$(6,0>f?-f:f):$(4,f))+"-"+$(2,b+1)+"-"+$(2,C)+"T"+$(2,A)+":"+$(2,_)+":"+$(2,E)+"."+$(3,k)+"Z"}else d=null;if(n&&(d=n.call(t,e,d)),null===d)return"null";if(h=a.call(d),h==y)return""+d;if(h==m)return d>-1/0&&1/0>d?""+d:"null";if(h==g)return D(""+d);if("object"==typeof d){for(N=c.length;N--;)if(c[N]===d)throw TypeError();if(c.push(d),F=[],B=u,u+=l,h==v){for(O=0,N=d.length;N>O;O++)L=T(O,d,n,i,l,u,c),F.push(L===s?"null":L);M=F.length?l?"[\n"+u+F.join(",\n"+u)+"\n"+B+"]":"["+F.join(",")+"]":"[]"}else o(i||d,function(e){var t=T(e,d,n,i,l,u,c);t!==s&&F.push(D(e)+":"+(l?" ":"")+t)}),M=F.length?l?"{\n"+u+F.join(",\n"+u)+"\n"+B+"}":"{"+F.join(",")+"}":"{}";return c.pop(),M}};c.stringify=function(e,t,n){var i,r,o,s;if("function"==typeof t||"object"==typeof t&&t)if((s=a.call(t))==f)r=t;else if(s==v){o={};for(var l,u=0,c=t.length;c>u;l=t[u++],s=a.call(l),(s==g||s==m)&&(o[l]=1));}if(n)if((s=a.call(n))==m){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else s==g&&(i=n.length<=10?n:n.slice(0,10));return T("",(l={},l[""]=e,l),r,o,i,"",[])}}if(!n("json-parse")){var F,L,O=String.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"  ",110:"\n",102:"\f",114:"\r"},B=function(){throw F=L=null,SyntaxError()},M=function(){for(var e,t,n,i,r,o=L,s=o.length;s>F;)switch(r=o.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=b?o.charAt(F):o[F],F++,e;case 34:for(e="@",F++;s>F;)if(r=o.charCodeAt(F),32>r)B();else if(92==r)switch(r=o.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=N[r],F++;break;case 117:for(t=++F,n=F+4;n>F;F++)r=o.charCodeAt(F),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||B();e+=O("0x"+o.slice(t,F));break;default:B()}else{if(34==r)break;for(r=o.charCodeAt(F),t=F;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++F);e+=o.slice(t,F)}if(34==o.charCodeAt(F))return F++,e;B();default:if(t=F,45==r&&(i=!0,r=o.charCodeAt(++F)),r>=48&&57>=r){for(48==r&&(r=o.charCodeAt(F+1),r>=48&&57>=r)&&B(),i=!1;s>F&&(r=o.charCodeAt(F),r>=48&&57>=r);F++);if(46==o.charCodeAt(F)){for(n=++F;s>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==F&&B(),F=n}if(r=o.charCodeAt(F),101==r||69==r){for(r=o.charCodeAt(++F),(43==r||45==r)&&F++,n=F;s>n&&(r=o.charCodeAt(n),r>=48&&57>=r);n++);n==F&&B(),F=n}return+o.slice(t,F)}if(i&&B(),"true"==o.slice(F,F+4))return F+=4,!0;if("false"==o.slice(F,F+5))return F+=5,!1;if("null"==o.slice(F,F+4))return F+=4,null;B()}return"$"},R=function(e){var t,n;if("$"==e&&B(),"string"==typeof e){if("@"==(b?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=M(),"]"!=e;n||(n=!0))n&&(","==e?(e=M(),"]"==e&&B()):B()),","==e&&B(),t.push(R(e));return t}if("{"==e){for(t={};e=M(),"}"!=e;n||(n=!0))n&&(","==e?(e=M(),"}"==e&&B()):B()),(","==e||"string"!=typeof e||"@"!=(b?e.charAt(0):e[0])||":"!=M())&&B(),t[e.slice(1)]=R(M());return t}B()}return e},P=function(e,t,n){var i=I(e,t,n);i===s?delete e[t]:e[t]=i},I=function(e,t,n){var i,r=e[t];if("object"==typeof r&&r)if(a.call(r)==v)for(i=r.length;i--;)P(r,i,n);else o(r,function(e){P(r,e,n)});return n.call(e,t,r)};c.parse=function(e,t){var n,i;return F=0,L=""+e,n=R(M()),"$"!=M()&&B(),F=L=null,t&&a.call(t)==f?I((i={},i[""]=n,i),"",t):n}}}l&&e(function(){return c})}(this)},{}],47:[function(e,t,n){function i(e,t){var n=[];t=t||0;for(var i=t||0;i<e.length;i++)n[i-t]=e[i];return n}t.exports=i},{}]},{},[1])(1)}),function(){function e(e){function n(t){return t=t||{prefix:!0},"object"!=typeof console||"function"!=typeof console.log||"function"!=typeof console.log.bind?function(){}:function(){var n=Array.prototype.slice.call(arguments);if("production"!==e.sails.environment){var i="";t.prefix&&n.unshift(i),console.log.bind(console).apply(this,n)}}}function o(e){var t=e.requestQueue;if(t){for(var n in t){var i={}.hasOwnProperty.call(t,n);i&&l(e,t[n])}t=null}}function s(e,t){if(e=e||{},"undefined"==typeof window)return t();var n=document.createElement("script");window._sailsIoJSConnect=function(e){n.parentNode.removeChild(n),t(e)},n.src=e.url,document.getElementsByTagName("head")[0].appendChild(n)}function a(e){this.body=e.body||{},this.headers=e.headers||{},this.statusCode=e.statusCode||200,(this.statusCode<200||this.statusCode>=400)&&(this.error=this.body||this.statusCode)}function l(e,t){if(!e._raw)throw new Error("Failed to emit from socket- raw SIO socket is missing.");var n=t.cb;delete t.cb;var i=t.method;e._raw.emit(i,t,function(e){n&&n(e.body,new a(e))})}function u(e){var t=this;e=e||{},t.useCORSRouteToGetCookie=e.useCORSRouteToGetCookie,t.url=e.url,t.multiplex=e.multiplex,t.transports=e.transports,t.eventQueue={},t.on("sails:parseError",function(e){c("Sails encountered an error parsing a socket message sent from this client, and did not have access to a callback function to respond with."),c("Error details:",e)})}if(e||(e=r),!e)throw new Error("`sails.io.js` requires a socket.io client, but `io` was not passed in.");var c=n();return c.noPrefix=n({prefix:!1}),a.prototype.toString=function(){return"[ResponseFromSails]  -- Status: "+this.statusCode+"  -- Headers: "+this.headers+"  -- Body: "+this.body},a.prototype.toPOJO=function(){return{body:this.body,headers:this.headers,statusCode:this.statusCode}},a.prototype.pipe=function(){return new Error("Client-side streaming support not implemented yet.")},u.prototype._connect=function(){var t=this;t.useCORSRouteToGetCookie=t.useCORSRouteToGetCookie||e.sails.useCORSRouteToGetCookie,t.url=t.url||e.sails.url,t.transports=t.transports||e.sails.transports,t.url=t.url?t.url.replace(/(\/)$/,""):void 0,"string"!=typeof t.query?t.query=i.versionString:t.query+="&"+i.versionString;var n=function(){if("undefined"==typeof window||"undefined"==typeof window.location)return!1;if("string"!=typeof t.url)return!1;var e=function(){try{e=t.url.match(/^([a-z]+:\/\/)/i)[1].toLowerCase()}catch(n){}return e=e||"http://"}(),n=!!t.url.match("^https"),i=function(){try{return t.url.match(/^[a-z]+:\/\/[^:]*:([0-9]*)/i)[1];
}catch(e){}return n?"443":"80"}(),r=t.url.replace(/^([a-z]+:\/\/)/i,"");if(e.replace(/[:\/]/g,"")!==window.location.protocol.replace(/[:\/]/g,""))return!0;var o=0===r.search(window.location.hostname);if(!o)return!0;var s=window.location.protocol.match(/https/i),a=window.location.port+""||(s?"443":"80");return i!==a?!0:!1}();!function(e){if(!t.useCORSRouteToGetCookie||!n)return e();var i=t.url;if(i+="string"==typeof t.useCORSRouteToGetCookie?t.useCORSRouteToGetCookie:"/__getcookie","undefined"!=typeof window)return void s({url:i,method:"GET"},e);var r=require("request");r.get(i,function(t,n,i){return t?void c("Failed to connect socket (failed to get cookie)","Error:",t):void e()})}(function(){t._raw=e(t.url,t),t.replay(),t.on("connect",function(){c.noPrefix("\n\n  |>    Now connected to Sails.\n\\___/   For help, see: http://bit.ly/1DmTvgK\n        (using "+e.sails.sdk.platform+" SDK @v"+e.sails.sdk.version+")\n\n\n")}),t.on("disconnect",function(){t.connectionLostTimestamp=(new Date).getTime(),c("===================================="),c("Socket was disconnected from Sails."),c("Usually, this is due to one of the following reasons:\n -> the server "+(t.url?t.url+" ":"")+"was taken down\n -> your browser lost internet connectivity"),c("====================================")}),t.on("reconnecting",function(e){c("\n        Socket is trying to reconnect to Sails...\n_-|>_-  (attempt #"+e+")\n\n")}),t.on("reconnect",function(e,n){var i=(new Date).getTime()-t.connectionLostTimestamp,r=i/1e3;c("\n  |>    Socket reconnected successfully after\n\\___/   being offline for ~"+r+" seconds.\n\n")}),t.on("error",function(e){c("Failed to connect socket (probably due to failed authorization on server)","Error:",e)})})},u.prototype.disconnect=function(){if(!this._raw)throw new Error("Cannot disconnect- socket is already disconnected");return this._raw.disconnect()},u.prototype.isConnected=function(){return this._raw?!!this._raw.connected:!1},u.prototype.replay=function(){var e=this;for(var t in e.eventQueue)for(var n in e.eventQueue[t])e._raw.on(t,e.eventQueue[t][n]);if(e.isConnected())o(e);else{var i=!1;e._raw.on("connect",function(){i||(o(e),i=!0)})}return e},u.prototype.on=function(e,t){return this._raw?(this._raw.on(e,t),this):(this.eventQueue[e]?this.eventQueue[e].push(t):this.eventQueue[e]=[t],this)},u.prototype.off=function(e,t){return this._raw?(this._raw.off(e,t),this):(this.eventQueue[e]&&this.eventQueue[e].indexOf(t)>-1&&this.eventQueue[e].splice(this.eventQueue[e].indexOf(t),1),this)},u.prototype.removeAllListeners=function(){return this._raw?(this._raw.removeAllListeners(),this):(this.eventQueue={},this)},u.prototype.get=function(e,t,n){return"function"==typeof t&&(n=t,t={}),this.request({method:"get",params:t,url:e},n)},u.prototype.post=function(e,t,n){return"function"==typeof t&&(n=t,t={}),this.request({method:"post",data:t,url:e},n)},u.prototype.put=function(e,t,n){return"function"==typeof t&&(n=t,t={}),this.request({method:"put",params:t,url:e},n)},u.prototype["delete"]=function(e,t,n){return"function"==typeof t&&(n=t,t={}),this.request({method:"delete",params:t,url:e},n)},u.prototype.request=function(e,t){var n='Usage:\nsocket.request( options, [fnToCallWhenComplete] )\n\noptions.url :: e.g. "/foo/bar"\noptions.method :: e.g. "get", "post", "put", or "delete", etc.\noptions.params :: e.g. { emailAddress: "mike@sailsjs.org" }\noptions.headers :: e.g. { "x-my-custom-header": "some string" }';if("object"!=typeof e||"string"!=typeof e.url)throw new Error("Invalid or missing URL!\n"+n);if(e.method&&"string"!=typeof e.method)throw new Error('Invalid `method` provided (should be a string like "post" or "put")\n'+n);if(e.headers&&"object"!=typeof e.headers)throw new Error("Invalid `headers` provided (should be an object with string values)\n"+n);if(e.params&&"object"!=typeof e.params)throw new Error("Invalid `params` provided (should be an object with string values)\n"+n);if(t&&"function"!=typeof t)throw new Error("Invalid callback function!\n"+n);var i={method:e.method.toLowerCase()||"get",headers:e.headers||{},data:e.params||e.data||{},url:e.url.replace(/^(.+)\/*\s*$/,"$1"),cb:t};return this.isConnected()?void l(this,i):(this.requestQueue=this.requestQueue||[],void this.requestQueue.push(i))},u.prototype._request=function(e,t){throw new Error("`_request()` was a private API deprecated as of v0.11 of the sails.io.js client. Use `.request()` instead.")},e.sails={autoConnect:!0,useCORSRouteToGetCookie:!0,environment:t.match(/(\#production|\.min\.js)/g)?"production":"development",sdk:i,transports:["polling","websocket"]},e.sails.connect=function(e,t){t=t||{},t.url=e||t.url||void 0;var n=new u(t);return n._connect(),n},e.socket=new u,setTimeout(function(){return e.sails.autoConnect?void e.socket._connect():void delete e.socket},0),e}var t=function(){if("object"!=typeof window||"object"!=typeof window.document||"function"!=typeof window.document.getElementsByTagName)return"";var e=window.document.getElementsByTagName("script"),t=e[e.length-1];return t.src}(),n={version:"__sails_io_sdk_version",platform:"__sails_io_sdk_platform",language:"__sails_io_sdk_language"},i={version:"0.11.0",platform:"undefined"==typeof module?"browser":"node",language:"javascript"};i.versionString=n.version+"="+i.version+"&"+n.platform+"="+i.platform+"&"+n.language+"="+i.language;var r="undefined"!=typeof io?io:null;return"object"==typeof module&&"undefined"!=typeof module.exports?(module.exports=e,e):"function"==typeof define&&define.amd?void define([],function(){return e}):e()}(),function(e,t){"use strict";function n(){var e=/^\s*(\[|\{[^\{])/,n=/[\}\]]\s*$/,i=/^\)\]\}',?\n/,r={"Content-Type":"application/json;charset=utf-8"},u=this.defaults={transformResponse:[function(r){return t.isString(r)&&(r=r.replace(i,""),e.test(r)&&n.test(r)&&(r=D(r))),r}],transformRequest:[function(e){return!y(e)||S(e)||A(e)?e:k(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:t.copy(r),put:t.copy(r),patch:t.copy(r)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},d=this.interceptors=[],f=this.responseInterceptors=[];this.$get=["$sailsSocketBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,n,i,r,b,x){function S(e){function n(e){var n=t.extend({},e,{data:o(e.data,e.headers,r.transformResponse)});return s(e.status)?n:b.reject(n)}function i(e){function n(e){var t;h(e,function(n,i){C(n)&&(t=n(),null!=t?e[i]=t:delete e[i])})}var i,r,o,s=u.headers,a=t.extend({},e.headers);s=t.extend({},s.common,s[O(e.method)]),n(s),n(a);e:for(i in s){r=O(i);for(o in a)if(O(o)===r)continue e;a[i]=s[i]}return a}var r={method:"get",transformRequest:u.transformRequest,transformResponse:u.transformResponse},a=i(e);t.extend(r,e),r.headers=a,r.method=N(r.method);var d=c(r.url)?F(r.xsrfCookieName||u.xsrfCookieName):void 0;d&&(a[r.xsrfHeaderName||u.xsrfHeaderName]=d);var f=function(e){a=e.headers;var t=o(e.data,l(a),e.transformRequest);return g(e.data)&&h(a,function(e,t){"content-type"===O(t)&&delete a[t]}),g(e.withCredentials)&&!g(u.withCredentials)&&(e.withCredentials=u.withCredentials),$(e,t,a).then(n,n)},p=[f,void 0],m=b.when(r);for(h(B,function(e){(e.request||e.requestError)&&p.unshift(e.request,e.requestError),(e.response||e.responseError)&&p.push(e.response,e.responseError)});p.length;){var v=p.shift(),y=p.shift();m=m.then(v,y)}return m.success=function(e){return m.then(function(t){e(t.data,t.status,t.headers,r)}),m},m.error=function(e){return m.then(null,function(t){e(t.data,t.status,t.headers,r)}),m},m}function A(e){t.forEach(arguments,function(e){S[e]=function(n,i){return S(t.extend(i||{},{method:e,url:n}))}})}function E(e){t.forEach(arguments,function(e){S[e]=function(n,i,r){return S(t.extend(r||{},{method:e,url:n,data:i}))}})}function $(n,i,o){function c(e,t,n,i){f&&(s(e)?f.put(w,[e,t,a(n),i]):f.remove(w)),d(t,e,n,i),r.$$phase||r.$apply()}function d(e,t,i,r){t=Math.max(t,0),(s(t)?m.resolve:m.reject)({data:e,status:t,headers:l(i),config:n,statusText:r})}function h(){var e=T(S.pendingRequests,n);-1!==e&&S.pendingRequests.splice(e,1)}var f,p,m=b.defer(),g=m.promise,w=D(n.url,n.params);if(S.pendingRequests.push(n),g.then(h,h),(n.cache||u.cache)&&n.cache!==!1&&"GET"==n.method&&(f=y(n.cache)?n.cache:y(u.cache)?u.cache:L),f)if(p=f.get(w),v(p)){if(p.then)return p.then(h,h),p;_(p)?d(p[1],p[0],t.copy(p[2]),p[3]):d(p,200,{},"OK")}else f.put(w,g);return t.isUndefined(p)&&e(n.method,w,i,c,o,n.timeout,n.withCredentials,n.responseType),g}function D(e,n){if(!n)return e;var i=[];return p(n,function(e,n){null===e||g(e)||(_(e)||(e=[e]),t.forEach(e,function(e){y(e)&&(e=w(e)?e.toIsoString():k(e)),i.push(m(n)+"="+m(e))}))}),i.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+i.join("&")),e}function F(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null}var L=i("$sailsSocket"),B=[];return t.forEach(d,function(e){B.unshift(t.isString(e)?x.get(e):x.invoke(e))}),t.forEach(f,function(e,n){var i=t.isString(e)?x.get(e):x.invoke(e);B.splice(n,0,{response:function(e){return i(b.when(e))},responseError:function(e){return i(b.reject(e))}})}),S.pendingRequests=[],A("get","delete","head"),S.subscribe=e.subscribe,E("post","put"),S.defaults=u,S}]}function i(e,n,i,r,o){function s(t,i,r,o,s,a,l,u){function c(e,t){o(t.statusCode,e)}i=i||e.url(),n.io.socket.request({method:t.toLowerCase(),url:i,data:D(r),headers:s},c)}if(!n.io)throw new Error("socket.io client not found");if(!n.io.sails)throw new Error("sails.io client not found");n.io.socket||console.warn("no connected socket...");var a=function(e,n){return n?function(){var t=arguments;o(function(){n.apply(e,t)},0)}:t.noop};return s.subscribe=function(e,i){var r=a(n.io.socket,i);return n.io.socket.on(e,r),t.bind(n.io.socket,n.io.socket.removeListener,e,r)},s}function r(){this.$get=["$browser","$window","$injector","$q","$timeout",function(e,t,n,r,o){return i(e,t,n,r,o)}]}function o(e,t,n){return C(n)?n(e,t):(h(n,function(n){e=n(e,t)}),e)}function s(e){return e>=200&&300>e}function a(e){var t,n,i,r={};return e?(h(e.split("\n"),function(e){i=e.indexOf(":"),t=O(trim(e.substr(0,i))),n=trim(e.substr(i+1)),t&&(r[t]?r[t]+=", "+n:r[t]=n)}),r):r}function l(e){var t=y(e)?e:void 0;return function(n){return t||(t=a(e)),n?t[O(n)]||null:t}}function u(e,t){var n=e;return"undefined"!=typeof msie&&(F.setAttribute("href",n),n=F.href),F.setAttribute("href",n),{href:F.href,protocol:F.protocol?F.protocol.replace(/:$/,""):"",host:F.host,search:F.search?F.search.replace(/^\?/,""):"",hash:F.hash?F.hash.replace(/^#/,""):"",hostname:F.hostname,port:F.port,pathname:"/"===F.pathname.charAt(0)?F.pathname:"/"+F.pathname}}function c(e){var t=b(e)?u(e):e;return t.protocol===L.protocol&&t.host===L.host}function d(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)?n=void 0:$(t)?n="$WINDOW":t&&document===t?n="$DOCUMENT":x(t)&&(n="$SCOPE"),n}function h(e,t,n){var i;if(e)if(C(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(n,e[i],i);else if(e.forEach&&e.forEach!==h)e.forEach(t,n);else if(E(e))for(i=0;i<e.length;i++)t.call(n,e[i],i);else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i);return e}function f(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function p(e,t,n){for(var i=f(e),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function m(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function g(e){return"undefined"==typeof e}function v(e){return"undefined"!=typeof e}function y(e){return null!=e&&"object"==typeof e}function b(e){return"string"==typeof e}function w(e){return"[object Date]"==={}.toString.call(e)}function C(e){return"function"==typeof e}function x(e){return e&&e.$evalAsync&&e.$watch}function S(e){return"[object File]"==={}.toString.call(e)}function A(e){return"[object Blob]"==={}.toString.call(e)}function _(e){return"[object Array]"==={}.toString.call(e)}function E(e){if(null==e||$(e))return!1;var t=e.length;return 1===e.nodeType&&t?!0:b(e)||_(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function $(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function k(e,t){return"undefined"==typeof e?void 0:JSON.stringify(e,d,t?"  ":null)}function D(e){return b(e)?JSON.parse(e):e}function T(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}t.module("angularSails.io",[]).constant("$$sailsConnectionMetaData",{version:"__sails_io_sdk_version",platform:"__sails_io_sdk_platform",language:"__sails_io_sdk_language"}).constant("$$sailsSDKParams",{version:"0.11.0",platform:"undefined"==typeof module?"browser":"node",language:"javascript",flavor:"angular"}).factory("$$sailsSDKInfo",["$$sailsConnectionMetaData","$$sailsSDKParams",function(e,t){function n(){var n=e.version+"="+t.version+"&"+e.platform+"="+t.platform+"&"+e.language+"="+t.language;return n}return{getVersionString:n}}]).factory("SocketIo",["$window",function(e){if(!e.io)throw new Error("Socket IO Not Found!");return e.io}]).provider("$sailsSocket",function(){var e=!1,n={autoConnect:!0,environment:"development",baseUrl:"http://localhost:1337"},i=function(i,r,o,s){function a(){var e={};this.socket={connected:!1},this.on=function(t,n){return e[t]=n,this},this.become=function(t){for(var n in e)t.on(n,e[n]);return t}}function l(e,n){t.isString(n)&&(n=t.fromJson(n)),this.data=n.body||{},this.headers=n.headers||{},this.status=n.statusCode||200,this.config=e}function u(t,n){var i=n.response;delete n.response;var r=n.method.toLowerCase();t.emit(r,n,d(t,function(t){e&&console.log(t);var r=new l(n,t);r.status>=400?i.reject(r):i.resolve(r)}))}var c=s.getVersionString(),d=function(e,n){return n?function(){var t=arguments;r(function(){n.apply(e,t)},0)}:t.noop},h=function(e){var i=this;i._requestQueue=[],i._socketOptions=t.extend({},n,e),i._socket=new a,i._socketOptions.autoConnect&&i.connect()};return h.prototype.connect=function(e,n){var r=i.defer(),s=this;n=n||{},e=e||s._socketOptions.baseUrl||void 0,"string"!=typeof n.query?n.query=c:n.query+="&"+c;var a=o.connect(e,n);return s._socket=s._socket.become(a),s._socket.on("connect",function(){t.forEach(s._requestQueue,function(e,t){u(s._socket,e)})}),s._socket.once("connect",r.resolve),s._socket.on("connecting",r.notify),s._socket.once("connect_failed",r.reject),s.connection=r,r.promise},h.prototype.isConnected=function(){return this.connection&&1===this.connection.promise.$$state.status},h.prototype.get=function(e,t){return this._request({method:"get",url:e,data:t})},h.prototype.post=function(e,t){return this._request({method:"post",url:e,data:t})},h.prototype.post=function(e,t){return this._request({method:"post",url:e,data:t})},h.prototype["delete"]=function(e,t){return this._request({method:"delete",url:e,data:t})},h.prototype._request=function(t){var n=i.defer(),r="Usage:\n socket."+(t.method||"request")+"( destinationURL, [dataToSend] )";if(t=t||{},t.data=t.data||{},t.headers=t.headers||{},t.url=t.url.replace(/^(.+)\/*\s*$/,"$1"),"string"!=typeof t.url)throw new Error("Invalid or missing URL!\n"+r);var o=this,s={method:t.method,data:t.data,url:t.url,headers:t.headers,response:n};return n.promise.success=function(t){return n.promise.then(function(n){e&&console.log(n),t(n.data,n.statusCode,n.headers,s)}),n.promise},n.promise.error=function(e){return n.promise.then(null,function(t){e(t.data,t.statusCode,t.headers,s)}),n.promise},o._socket&&o.isConnected()?u(o._socket,s):o._requestQueue.push(s),n.promise},h.prototype.on=function(e,t){var n=this;n._socket.on(e,d(n._socket,t))},function(e){var t=new h(e);return t}};return{$get:["$q","$timeout","SocketIo","$$sailsSDKInfo",i]}}),t.module("sails.io",[]).provider("$sailsSocket",n).provider("$sailsSocketBackend",r);var F=document.createElement("a"),L=u(e.location.href,!0),O=function(e){return b(e)?e.toLowerCase():e},N=(Object.prototype.hasOwnProperty,function(e){return b(e)?e.toUpperCase():e}),B=function(e){return b(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},M=function(e){return b(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(O=B,N=M)}(window,angular),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.download=t()}(this,function(){return function(e,t,n){function i(e){var t=e.split(/[:;,]/),n=t[1],i="base64"==t[2]?atob:decodeURIComponent,r=i(t.pop()),o=r.length,s=0,a=new Uint8Array(o);for(s;o>s;++s)a[s]=r.charCodeAt(s);return new h([a],{type:n})}function r(e,t){if("download"in c)return c.href=e,c.setAttribute("download",m),c.innerHTML="downloading...",u.body.appendChild(c),setTimeout(function(){c.click(),u.body.removeChild(c),t===!0&&setTimeout(function(){o.URL.revokeObjectURL(c.href)},250)},66),!0;if("undefined"!=typeof safari)return e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=u.createElement("iframe");u.body.appendChild(n),t||(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout(function(){u.body.removeChild(n)},333)}var o=window,s="application/octet-stream",a=n||s,l=e,u=document,c=u.createElement("a"),d=function(e){return String(e)},h=o.Blob||o.MozBlob||o.WebKitBlob||d;h=h.call?h.bind(o):Blob;var f,p,m=t||"download";if("true"===String(this)&&(l=[l,a],a=l[0],l=l[1]),String(l).match(/^data\:[\w+\-]+\/[\w+\-]+[,;]/))return navigator.msSaveBlob?navigator.msSaveBlob(i(l),m):r(l);if(f=l instanceof h?l:new h([l],{type:a}),navigator.msSaveBlob)return navigator.msSaveBlob(f,m);if(o.URL)r(o.URL.createObjectURL(f),!0);else{if("string"==typeof f||f.constructor===d)try{return r("data:"+a+";base64,"+o.btoa(f))}catch(g){return r("data:"+a+","+encodeURIComponent(f))}p=new FileReader,p.onload=function(e){r(this.result)},p.readAsDataURL(f)}return!0}}),angular.module("angular-preload-image",[]),angular.module("angular-preload-image").factory("preLoader",function(){return function(e,t,n){angular.element(new Image).bind("load",function(){t()}).bind("error",function(){n()}).attr("src",e)}}),angular.module("angular-preload-image").directive("preloadImage",["preLoader",function(e){return{restrict:"A",terminal:!0,priority:100,link:function(t,n,i){var r=i.ngSrc;t["default"]=i.defaultImage||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEWEygNWiLqlwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAMSURBVAjXY/j//z8ABf4C/tzMWecAAAAASUVORK5CYII=",i.$set("src",t["default"]),e(r,function(){i.$set("src",r)},function(){void 0!=i.fallbackImage&&i.$set("src",i.fallbackImage)})}}}]),angular.module("angular-preload-image").directive("preloadBgImage",["preLoader",function(e){return{restrict:"A",link:function(t,n,i){void 0!=i.preloadBgImage&&(t["default"]=i.defaultImage||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wEWEygNWiLqlwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAMSURBVAjXY/j//z8ABf4C/tzMWecAAAAASUVORK5CYII=",n.css({"background-image":'url("'+t["default"]+'")'}),e(i.preloadBgImage,function(){n.css({"background-image":'url("'+i.preloadBgImage+'")'})},function(){void 0!=i.fallbackImage&&n.css({"background-image":'url("'+i.fallbackImage+'")'})}))}}}]),angular.module("ngAsync",[]).service("$async",function(){return async.objectMap=function(e,t,n){var i,r=[],o=Object.keys(e);for(i=0;i<o.length;i+=1){var s={};s[o[i]]=e[o[i]],r[i]=s}this.map(r,t,function(e,t){if(e)return n(e);var r={};for(i=0;i<t.length;i+=1)r[o[i]]=t[i];return n(e,r)})},async}),angular.module("jumplink.cms.bootstrap.attachment",["jumplink.cms.attachment"]).directive("jlAttachmentBootstrap",["$compile","$window","mediumOptions","AttachmentService",function(e,t,n,i){return{restrict:"E",templateUrl:"/views/modern/attachment.bootstrap.jade",scope:{attachment:"=",attachmentIndex:"=",parent:"=",path:"=",authenticated:"=",destroy:"=",centerImage:"="},link:function(e,t,n){console.log("[jlAttachmentBootstrap.link]",e)},controller:["$scope","AttachmentService",function(e,t){e.open=t.open}]}}]),angular.module("jumplink.cms.attachment",["sails.io"]).service("AttachmentService",["moment","$sailsSocket","$async","$log","$window",function(e,t,n,i,r){var o=function(e,t){r.open(e,t)},s=function(e,t,n,i){return e[t].attachments.length>0&&e[t].attachments.splice(n,1),i(null,e,t,n)},a=function(e,n,r,o){t.put("/blog/destroyAttachment",{blogPostID:e[n].id,attachmentUploadedAs:e[n].attachments[r].uploadedAs}).success(function(e,t,n,r){i.debug(null,e,t,n,r),o()}).error(function(e,t,n,r){i.error(e,t,n,r),o("error",e,t,n,r)})},l=function(e,t,n,r){var o=e.indexOf(t);return i.debug("[BlogService.destroy]",e[o],n),a(e,o,n,function(t,i,a,l,u){return t?r(t,i,a,l,u):s(e,o,n,r)})};return{open:o,destroyLocally:s,destroyExternally:a,destroy:l}}]),angular.module("jumplink.cms.bootstrap.blog",["jumplink.cms.blog","mgcrea.ngStrap","angular-medium-editor","angularFileUpload","ngFocus"]).service("BlogBootstrapService",["$log","focus","BlogService","$modal","FileUploader",function(e,t,n,i,r){var o=null,s=null,a=null,l=function(e){s.$scope.blogPost=e,s.$promise.then(s.show)},u=function(t,u,c,d){angular.isString(a)||(a=c),o=i({title:"Blogpost bearbeiten",templateUrl:"/views/modern/blog/editmodal.bootstrap.jade",show:!1}),o.$scope.ok=!1,o.$scope.accept=function(e){o.$scope.ok=!0,e()},o.$scope.abort=function(e){o.$scope.ok=!1,e()},angular.isUndefined(u)&&(u={path:"assets/files/blog",thumbnail:{width:300,path:"assets/files/blog"},rescrop:{width:1200,cropwidth:1200,cropheight:1200}});var f={url:"blog/upload",removeAfterUpload:!0,headers:{options:JSON.stringify(u)}};return o.$scope.uploader=new r(f),o.$scope.openTypeChooserModal=l,angular.isFunction(d)&&(t.uploader.onComplete=d),o.$scope.uploader.onCompleteItem=function(t,n,i,r){e.debug("[BlogBootstrapService.onCompleteItem] fileItem",t,"response",n),angular.isArray(t.blogPost.attachments)||(t.blogPost.attachments=[]);for(var o=0;o<n.files.length;o++)t.blogPost.attachments.push(n.files[o])},o.$scope.uploader.onProgressItem=function(t,n){e.debug("[BlogBootstrapService.onProgressItem]",t,n)},o.$scope.upload=function(e,t){e.blogPost=t,e.upload()},s=i({title:"Typ wählen",templateUrl:"/views/modern/blog/typechoosermodal.bootstrap.jade",show:!1}),s.$scope.chooseType=n.chooseType,o.$scope.$on("modal.hide.before",function(t,i){return e.debug("edit closed",i.$scope.blogPost,i),i.$scope.ok?n.validate(i.$scope.blogPost,null,i.$scope.callback):void(i.$scope.callback&&i.$scope.callback("discarded",i.$scope.blogPost))}),h()},c=function(){return o},d=function(){return s},h=function(){return{editModal:c(),typeModal:d()}},f=function(n,i){e.debug("[BlogService.edit]",n),o.$scope.blogPost=n,o.$scope.callback=i,o.$scope.ok=!1,t("blogposttitle"),o.$promise.then(o.show)},p=function(e,t,i){t=n.create(t),f(t,i)};return{edit:f,update:f,createEdit:p,setModals:u,openTypeChooserModal:l}}]),angular.module("jumplink.cms.blog",["jumplink.cms.attachment","angularMoment","ngAsync","sails.io"]).service("BlogService",["moment","$sailsSocket","$async","$log","$filter","AttachmentService",function(e,t,n,i,r,o){var s=["news","other"],a=(o.destroyLocally,o.destroyExternally,o.destroy),l=function(e,t,n){return e.title?v(e,t,n):angular.isFunction(n)?n("Title not set",e):null},u=function(e,t){e.type=t},c=function(e,t,n){var i=e.indexOf(t);i>-1?(e.splice(i,1),angular.isFunction(n)&&n(null,e)):angular.isFunction(n)&&n("no blogPost on client site found to remove",e)},d=function(e,n,r){n.id?(i.debug("[jumplink.cms.blog.BlogService.destroy]",n),t["delete"]("/blog/"+n.id).success(function(t,i,o,s){c(e,n,r)})):c(e,n,r)},h=function(e){var t=!0;return r("orderBy")(e,"createdAt",t)},f=function(e){return e=h(e)},p=function(e,t,n){return e.push.apply(e,t),e=f(e),angular.isFunction(n)?n(null,e):e},m=function(e,t,n){return e.unshift(t),e=f(e),angular.isFunction(n)?n(null,e):e},g=function(t){return t&&t.createdAt||(t.createdAt=e()),t&&t.title||(t.title=""),t&&t.content||(t.content=""),t&&t.author||(t.author=""),t&&t.page||callback("Page not set."),t&&t.type||(t.type=s[0]),i.debug("[BlogService,create]",t),t},v=function(e,t,n){return angular.isUndefined(e.page)&&null!==t&&(e.page=t),e.name&&""!==e.name||(e.name=e.title.toLowerCase().replace(/[^a-z]+/g,"")),angular.isFunction(n)?n(null,e):e},y=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]=v(e[i],t);return angular.isFunction(n)?n(null,e):e},b=function(e,t){return i.debug("[jumplink.cms.blog.BlogService.refresh]"),e=f(e),angular.isFunction(t)?t(null,e):e},w=function(e,n,r,o,s){var a=["BlogService: Can't save blogPost.","BlogService: Can't save blogPost, blogPost to update not found.","BlogService: Can't save blogPost, parameters undefind."];return i.debug("[BlogService.saveOne]",n),angular.isDefined(n)&&angular.isDefined(s)?(n=v(n,o),void(angular.isUndefined(n.id)?t.post("/blog",n).success(function(e,t,n,i){angular.isArray(e)&&(e=e[0]),s(null,e)}).error(function(e,t,n,r){return angular.isArray(e)&&(e=e[0]),i.error(e,t,n,r),s(a[0])}):t.put("/blog/"+n.id,n).success(function(e,t,n,i){return angular.isArray(e)&&(e=e[0]),s(null,e)}).error(function(e,t,n,r){return i.error(e,t,n,r),s(a[0])}))):s(a[2])},C=function(e,t,r){var o=["[BlogService.saveBlocks] Can't save blogPosts, parameters undefind."];if(angular.isDefined(e)&&angular.isDefined(r))n.map(e,function(n,i){w(e,n,null,t,i)},function(t,n){return t?r(t):(e=f(e),r(null,e))});else if(i.error(o[0]),angular.isFunction(r))return r(o[0])},x=function(e,t,n,i,r){angular.isDefined(t)?w(e,t,n,i,r):C(e,i,r)},S=function(e,n,r,o){return t.put("/blog/find",{page:e,limit:n,skip:r}).then(function(e){return e.data=f(e.data),angular.isFunction(o)?o(null,e.data):e.data},function(t){return i.error("Error on find "+e,t),angular.isFunction(o)?o(t):null})},A=function(e,n,r,o){return t.put("/blog/count",{page:e}).then(function(e){return angular.isFunction(o)?o(null,e.data.count):e.data.count},function(t){return i.error("Error on resolve "+e,t),angular.isFunction(o)?o(t):null})},_=function(){t.subscribe("blog",function(e){switch(i.debug(e),e.verb){case"updated":$rootScope.authenticated&&$rootScope.pop("success","Ein Blogpost wurde aktualisiert",e.data.title),findEvent(e.id,function(t,n,r,o){t?i.debug(t):n=e.data,$scope.refresh()});break;case"created":$rootScope.authenticated&&$rootScope.pop("success","Ein Blogpost wurde erstellt",e.data.title),$scope.blogPosts.push(e.data),$scope.refresh();break;case"removedFrom":$rootScope.authenticated&&$rootScope.pop("success","Ein Blogpost wurde entfernt",e.data.title),findEvent(e.id,function(e,t,n,r){e?i.debug(e):BlogService.removeFromClient($scope.blogPosts,t,n)});break;case"destroyed":$rootScope.authenticated&&$rootScope.pop("success","Ein Blogpost wurde gelöscht",e.data.title),findEvent(e.id,function(e,t,n,r){return e?(i.debug(e),e):void BlogService.removeFromClient($scope.blogPosts,t,n)});break;case"addedTo":$rootScope.authenticated&&$rootScope.pop("success","Ein Blogpost wurde hinzugefügt",e.data.title)}})};return{validate:l,subscribe:_,append:p,prepent:m,sort:h,transform:f,saveOne:w,saveBlocks:C,save:x,fixEach:y,find:S,resolve:S,count:A,refresh:b,chooseType:u,removeFromClient:c,remove:d,destroy:d,deleteAttachment:a,destroyAttachment:a,create:g}}]),angular.module("jumplink.cms.admin",["sails.io"]).directive("adminbar",["$compile","$window","$sailsSocket","$state",function(e,t,n,i){return{restrict:"E",templateUrl:"/views/modern/adminbar.jade",scope:{upload:"=?",download:"=?",toogleHtml:"=?",refresh:"=?",save:"=?",add:"=?",addDropdown:"=?",addDropdownActions:"=?",adminSettingDropdown:"=?",authenticated:"=?",allowActions:"=?"},link:function(e,t,n){e.goToState=i.go,angular.isUndefined(e.adminSettingDropdown)&&(e.adminSettingDropdown=[{text:'<i class="fa fa-list"></i>&nbsp;Übersicht',click:"goToState('layout.administration')"},{text:'<i class="fa fa-users"></i>&nbsp;Benutzer',click:"goToState('layout.users')"},{text:'<i class="fa fa-sign-out"></i>&nbsp;Abmelden',click:"$root.logout()"}])}}}]),angular.module("jumplink.cms.browser",[]).directive("jlBrowser",["$compile","$window",function(e,t){return{restrict:"E",templateUrl:"/views/modern/browser.bootstrap.jade",scope:{force:"="},link:function(e,t,n){}}}]),angular.module("jumplink.cms.bootstrap.content",["jumplink.cms.content"]).service("ContentBootstrapService",["$log","$async","ImportExportBootstrapService","UtilityService","ContentService","SortableService",function(e,t,n,i,r,o){var s=null,a=null,l=function(e){a=e},u=function(i,l){var u={},c=function(t,i){e.debug("[ContentBootstrapService.onCompleteFile]",i);for(var r=[],o=0;o<i.length;o++)r=r.concat(i[o].data);n.setImports(r,{identifierKey:"name",descriptionKey:"title"})},d=function(n,i){e.debug("[ContentBootstrapService.onImportStart]",a),t.map(n,function(e,t){e.importOptions.doImport===!0?r.updateOrCreateByHostByTitleAndPage(a,e,t):t()},function(t,n){e.debug("[ContentBootstrapService.onImportStart] done",t,n),n=o.sort(n),i(t,n)})},h=function(t,n){e.debug("[ContentBootstrapService.onAbort]"),n()};s=n.setModals(i,u,c,d,h,l)};return{setHost:l,setupImportModal:u,showImportModal:n.show}}]),angular.module("jumplink.cms.content",["mgcrea.ngStrap","angular-medium-editor","ui.ace","sails.io","jumplink.cms.sortable","ngFocus","jumplink.cms.utilities"]).service("ContentService",["$rootScope","$log","$sailsSocket","$filter","$modal","$download","JLSailsService","SortableService","UtilityService","focus","$async",function(e,t,n,i,r,o,s,a,l,u,c){var d=!1,h=null,f=function(){return d},p=function(e){return h=r({title:"Inhaltsblock bearbeiten",templateUrl:"/views/modern/contentmodal.jade",show:!1}),h.$scope.ok=!1,h.$scope.accept=function(e){h.$scope.ok=!0,e()},h.$scope.abort=function(e){h.$scope.ok=!1,e()},h.$scope.changeName=!1,h.$scope.$watch("content.title",function(e,t){h.$scope.changeName&&angular.isDefined(h.$scope.content)&&(h.$scope.content.name=L(e))}),h.$scope.$on("modal.hide.before",function(e,t){return t.$scope.changeName=!1,t.$scope.ok?$(t.$scope.content,t.$scope.callback):angular.isFunction(t.$scope.callback)?t.$scope.callback("discarded",t.$scope.content):void 0}),m()},m=function(){return h},g=function(){n.subscribe("content",function(n){switch(t.debug("Content event!",n),n.verb){case"updated":e.authenticated&&e.pop("success","Seite wurde aktualisiert",n.id)}})},v=function(e,t){return d=!d,d&&e&&(e=b(e)),angular.isFunction(t)?t(null,d):d},y=function(e,t){return e.content=html_beautify(e.content),angular.isFunction(t)?t(null,e):e},b=function(e,t){for(var n=e.length-1;n>=0;n--)e[n].content=y(e[n].content);return angular.isFunction(t)?t(null,e):e},w=function(e,t){var n=l.findKeyValue(e,"name",t);return n>-1?e[n]:null},C=function(e){return e&&e.content||(e.content=""),e&&e.title||(e.title=""),e&&e.name||(e.name=""),e&&e.type||(e.type="dynamic"),e&&e.page||t.error("[ContentService] Page not set."),e},x=function(e,t,n){a.append(e,t,n,!0,"name")},S=function(e,t,n){var i=C({page:t});k(i,n,!0)},A=function(e,t,n,i){return a.swap(e,t,n,i)},_=function(e,t,n){return a.moveForward(e,t,n)},E=function(e,t,n){return a.moveBackward(e,t,n)},$=function(e,t){return e.title?O(e,t):angular.isFunction(t)?t("Title not set",e):null},k=function(e,n,i){t.debug("edit",e),h.$scope.content=e,h.$scope.callback=n,i?h.$scope.changeName=i:h.$scope.changeName=!1,u("contentedittitle"),h.$promise.then(h.show)},D=function(e,t,n,i){return a.remove(t,e,i)},T=function(e,i,r,o,s){var l=["Content konnte nicht gelöscht werden."];return("undefined"==typeof i||null===i)&&(i=e.indexOf(r)),e=a.remove(e,i,r),r.id?(t.debug("remove from server, too",r),void n["delete"]("/content/"+r.id+"?page="+o,{id:r.id,page:o}).success(function(t,n,i,r){return angular.isFunction(s)?s(null,e):e}).error(function(e,n,i,r){return t.error(l[0],e),
angular.isFunction(s)?s(e):e})):angular.isFunction(s)?s(null,e):e},F=function(e,n){N(e,function(e,i){return e?(t.error(e),angular.isFunction(n)?n(e):e):void b(i,function(e,i){return e?(t.error(e),angular.isFunction(n)?n(e):e):angular.isFunction(n)?n(null,i):i})})},L=function(e){var n="";return e&&""!==e&&(n=e.toLowerCase().replace(/[^a-z1-9]+/g,""),t.debug("set content.name to",n)),n},O=function(e,n){return angular.isDefined(e)?((angular.isUndefined(e.name)||""===e.name||null===e.name)&&(e.name=L(e.title)),angular.isNumber(e.position)||(e.position=0),e.type&&""!==e.type||(t.warn("Fix content type not set, set it to dynamic"),e.type="fix"),angular.isFunction(n)?n(null,e):e):angular.isFunction(n)?n("content not set"):null},N=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]=O(e[n]);return angular.isFunction(t)?t(null,e):e},B=function(e,i,r){var o=["Inhalt konnte nicht gespeichert werden"];e.page=i,O(e,function(e,i){return e?angular.isFunction(r)?r(e):e:void n.put("/content/replace",i).success(function(e,n,s,a){return null!==e&&"undefined"!=typeof e?(i=e,angular.isFunction(r)?r(null,i):i):(t.error(o[0]),angular.isFunction(r)?r(o[0]):o[0])}).error(function(e,n,i,s){return t.error(o[0],e),angular.isFunction(r)?r(e):e})})},M=function(e,r,o){var s=["Seite konnte nicht gespeichert werden"];N(e,function(e,a){return e?angular.isFunction(o)?o(e):e:n.put("/content/replaceall",{contents:a,page:r}).success(function(e,n,r,l){return null!==e&&"undefined"!=typeof e?(a=i("orderBy")(e,"position"),angular.isFunction(o)?o(null,a):a):(t.error(s[0]),angular.isFunction(o)?o(s[0]):s[0])}).error(function(e,n,i,r){t.error(s[0],e),angular.isFunction(o)&&o(e)})})},R=function(e,n,i,r,o){c.parallel(r,function(e,r){return e?(t.error("Error: On save content!",e),n("error","Seiteninhalt konnte nichtgespeichert werden",e),angular.isFunction(o)?o(e):e):(i.applyResults&&(i.scope=angular.extend(i.scope,r)),n("success","Seiteninhalt wurde gespeichert",""),angular.isFunction(o)?o(null,r):r)})},P=function(e,i,r,o,s){var a=["Error: On trying to find one with page: "+e+", name: "+i,"request has more than one results"],l={page:e,name:i},u="/content/find";return angular.isDefined(r)&&null!==r&&(l.type=r),n.put(u,l).then(function(e){return angular.isUndefined(e)||angular.isUndefined(e.data)?null:(e.data instanceof Array&&(e.data=e.data[0],t.error(a[1])),s&&(e.data=s(e.data)),angular.isFunction(o)?o(null,e.data):e.data)},function(e){return t.error(a[0],e),angular.isFunction(o)?o(a[0],e):e})},I=function(e,r,o,s){var a=["Error: On trying to find all with page: "+e+" and type: "+r,"Warn: On trying to find all "+e+" contents! Not found, content is empty!"],l={},u="/content/findall";return angular.isDefined(e)&&null!==e&&(l.page=e),angular.isDefined(r)&&null!==r&&(l.type=r),n.put(u,l).then(function(e){return angular.isUndefined(e)||angular.isUndefined(e.data)?(t.warn(a[1]),null):(e.data=i("orderBy")(e.data,"position"),s&&(e.data=s(e.data)),angular.isFunction(o)?void o(null,e.data):e.data)},function(e){return t.error(a[0],e),angular.isFunction(o)?o(a[0],e):e})},U=function(e,t){var n={method:"post",resultIsArray:!0};return s.resolve("/Content/findByHost",e,n,t)},H=function(e,n,i){var r={method:"post",resultIsArray:!0};return s.resolve("/Content/exportByHost",{host:e},r,function(e,r){return t.debug("[ContentService.exportByHost]",e,r),e?(n&&o(JSON.stringify(r),"error.txt","text/plain"),i(e)):(n&&o(JSON.stringify(r),"content.json","text/json"),i(e,r))})},z=function(e,n,i){t.debug("[contentsService.updateOrCreateByHostByTitleAndPage]",e,n);var r={method:"post",resultIsArray:!1};return s.resolve("/Content/updateOrCreateByHostByTitleAndPage",{host:e,content:n},r,i)},j=function(e,r,o,s){var a=["Error: On trying to find all with page: "+e+" and type: "+r,"Warn: On trying to find all "+e+" contents! Not found, content is empty!"],l={page:e},u="/content/findAllWithImage?page="+e;return r&&(l.type=r,u=u+"&type="+r),n.get(u,l).then(function(e){return angular.isUndefined(e)||angular.isUndefined(e.data)?(t.warn(a[1]),null):(e.data.contents=i("orderBy")(e.data.contents,"position"),e.data.images=i("orderBy")(e.data.images,"position"),s&&(e.data=s(e.data)),angular.isFunction(o)?o(null,e.data):e.data)},function(e){return t.error(a[0],e),angular.isFunction(o)?o(a[0],e):e})},W=function(e,t,n,i,r){return angular.isDefined(t)?P(e,t,n,r):I(e,n,i,r)};return{subscribe:g,setEditModal:p,getShowHtml:f,toogleShowHtml:v,beautify:y,beautifyEach:b,create:C,createEdit:S,append:x,swap:A,moveForward:_,moveBackward:E,edit:k,removeFromClient:D,remove:T,refresh:F,fix:O,fixEach:N,save:M,saveOne:B,saveParallel:R,find:W,resolve:W,findOne:P,resolveOne:P,findAll:I,resolveAll:I,findByHost:U,exportByHost:H,updateOrCreateByHostByTitleAndPage:z,findAllWithImage:j,resolveAllWithImage:j,getByName:w}}]),angular.module("jumplink.cms.content.medium",["jumplink.cms.content","angular-medium-editor"]).value("mediumOptions",{buttonLabels:"fontawesome",toolbar:{buttons:["bold","italic","underline","anchor","h2","h3","h4","quote","orderedlist","unorderedlist"]}}).service("ContentMediumService",["$rootScope","$log","$sailsSocket","$filter","$modal","SortableService","UtilityService","focus",function(e,t,n,i,r,o,s,a){var l=function(){this.button=document.createElement("button"),this.button.className="medium-editor-action",this.button.innerText="Image",this.button.innerHTML='<i class="fa fa-picture-o"></i>',this.button.onclick=this.onClick.bind(this)};return l.prototype.onClick=function(){this.classApplier.toggleSelection()},l.prototype.getButton=function(){return this.button},l.prototype.checkState=function(e){"MARK"===e.tagName&&this.button.classList.add("medium-editor-button-active")},{Imager:l}}]).directive("jlContent",["$compile","$window","mediumOptions","ContentMediumService",function(e,t,n,i){return{restrict:"E",templateUrl:"/views/modern/content.jade",scope:{authenticated:"=",html:"=",content:"=?",mediumOptions:"=?",mediumBindOptions:"=?"},link:function(e,t,r){angular.isUndefined(e.mediumOptions)&&(e.mediumOptions=n),angular.isUndefined(e.mediumBindOptions)&&(e.mediumBindOptions={extensions:{image:new i.Imager}})}}}]).directive("jlContentBlocks",["$compile","$window","mediumOptions","ContentMediumService","SubnavigationService","HistoryService",function(e,t,n,i,r,o){return{restrict:"E",templateUrl:"/views/modern/contentBlocks.jade",scope:{authenticated:"=",html:"=",contents:"=",navs:"=?",afterRefresh:"=?",afterSave:"=?",afterRemove:"=?",afterEdit:"=?",afterAdd:"=?",subnavigation:"=?",afterSaveNav:"=?",afterRemoveNav:"=?",afterEditNav:"=?",afterAddNav:"=?",logger:"=",page:"=?",mediumOptions:"=?",mediumBindOptions:"=?"},link:function(e,t,n){},controller:["$rootScope","$scope","ContentService","$log","$state",function(e,t,n,i,s){n.setEditModal(t),r.setEditModal(t),t.goTo=o.goToHashPosition,n.subscribe(),r.subscribe(),angular.isUndefined(t.page)&&(t.page=s.current.name),angular.isUndefined(t.subnavigation)&&(t.subnavigation=!1),angular.isUndefined(t.afterRefresh)&&(t.afterRefresh=function(e,n){return e?t.logger("error","Inhaltsblock wurde nicht erneuert!",e):void t.logger("success","Inhaltsblock erneuert!","")}),angular.isUndefined(t.afterSave)&&(t.afterSave=function(e,n){return e?t.logger("error","Inhaltsblock wurde nicht gespeichert!",e):void t.logger("success","Inhaltsblock gespeichert!",n.title)}),angular.isUndefined(t.afterRemove)&&(t.afterRemove=function(e,n){return e?t.logger("error","Inhaltsblock wurde nicht entfernt!",e):void t.logger("success","Inhaltsblock entfernt!",n.title)}),angular.isUndefined(t.afterEdit)&&(t.afterEdit=function(e,n){return e?t.logger("error","Inhaltsblock wurde nicht bearbeitet!",e):void t.logger("success","Inhaltsblock bearbeitet!",n.title)}),angular.isUndefined(t.afterAdd)&&(t.afterAdd=function(e,n){return e?t.logger("error","Inhaltsblock wurde nicht hinzugefügt!",e):void t.logger("success","Inhaltsblock hinzugefügt!",n.title)}),angular.isUndefined(t.afterSaveNav)&&(t.afterSaveNav=function(e,n){return e?t.logger("error","Navigation wurde nicht gespeichert!",e):void t.logger("success","Navigation gespeichert!",n.title)}),t.add=function(){return t.authenticated?void n.createEdit(t.contents,t.page,function(e,i){return e?t.afterAdd(e):void n.append(t.contents,i,t.afterAdd)}):!1},t.moveForward=function(e,n){return t.authenticated?void SortableService.moveForward(e,t.contents,function(e,n){return e?(i.error("Error: On move content forward!",e),e):void(t.contents=n)}):!1},t.moveBackward=function(e,n){return t.authenticated?void SortableService.moveBackward(e,t.contents,function(e,n){return e?(i.error("Error: On move content backward!",e),e):void(t.contents=n)}):!1},t.edit=function(e,i){return t.authenticated?void n.edit(i,t.afterEdit):!1},t.remove=function(e,i){return t.authenticated?void n.remove(t.contents,e,i,t.page,t.afterRemove):!1},t.refresh=function(){n.refresh(t.contents,t.afterRefresh)},t.toggleHtml=function(e,t){t.html=t.html!==!0},t.save=function(){return t.authenticated?(n.save(t.contents,t.page,t.afterSave),void(t.subnavigation&&r.save(t.navs,t.page,t.afterSaveNav))):!1}}]}}]),Date.now||(Date.now=function(){return(new Date).getTime()}),function(){"use strict";for(var e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},window.cancelAnimationFrame=clearTimeout}}(),angular.module("jumplink.cms.config",["sails.io"]).service("ConfigService",["$sailsSocket","$filter","$log",function(e,t,n){var i=function(t){return e.get("/config/find").then(function(e){return e.data},function(e){n.error("Error on resolve "+t,e)})};return{resolve:i}}]),angular.module("ngDownload",[]).service("$download",["$log",function(e){return angular.isDefined(download)?download:(e.error("[ngDownload] download is not defined, please install it from https://github.com/rndme/download"),null)}]),angular.module("jumplink.cms.event",["mgcrea.ngStrap","angular-medium-editor","angularFileUpload","angularMoment","ngFocus","ngAsync","sails.io","jumplink.cms.utilities"]).service("EventService",["moment","UtilityService","$sailsSocket","$async","$log","focus","$modal","FileUploader",function(e,t,n,i,r,o,s,a){var l=null,u=null,c=null,d=function(e,t){return e.title?E(e,t):angular.isFunction(t)?t("Title not set",e):null},h=function(e,t,n){e.type=t,n()},f=function(e){u.$scope.event=e,u.$promise.then(u.show)},p=function(e,t,n){angular.isString(c)||(c=n),l=s({title:"Ereignis bearbeiten",templateUrl:"/views/modern/events/editmodal.jade",show:!1}),l.$scope.ok=!1,l.$scope.accept=function(e){l.$scope.ok=!0,e()},l.$scope.abort=function(e){l.$scope.ok=!1,e()},angular.isUndefined(t)&&(t={});var i={url:"timeline/upload",removeAfterUpload:!0,headers:{options:JSON.stringify(t)}};return l.$scope.uploader=new a(i),l.$scope.openTypeChooserModal=f,l.$scope.uploader.onCompleteItem=function(e,t,n,i){e.event.download=t.files[0].uploadedAs},l.$scope.uploader.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},l.$scope.upload=function(e,t){e.event=t,e.upload()},u=s({title:"Typ wählen",templateUrl:"/views/modern/events/typechoosermodal.jade",show:!1}),u.$scope.chooseType=h,l.$scope.$on("modal.hide.before",function(e,t){return r.debug("edit closed",e,t),t.$scope.ok?d(t.$scope.event,t.$scope.callback):angular.isFunction(t.$scope.callback)?t.$scope.callback("discarded",t.$scope.event):void 0}),g()},m=function(){return u},g=function(){return{editModal:m(),typeModal:m()}},v=function(e,t,n){l.$scope.event=e,l.$scope.callback=n,l.$scope.ok=!1,o("eventtitle"),l.$promise.then(l.show)},y=function(t){for(var n=[],i=[],r=[],o=0;o<t.length;o++)angular.isDefined(t[o].to)&&(t[o].to=e(t[o].to)),angular.isDefined(t[o].from)?(t[o].from=e(t[o].from),t[o].from.isAfter()?r.push(t[o]):i.push(t[o])):n.push(t[o]);return{unknown:n,before:i,after:r}},b=function(e,t,n,i){var r=["no event on client site found to remove"],o=e[n].indexOf(t);return o>-1?(e[n].splice(o,1),angular.isFunction(i)?i(null,e):e):angular.isFunction(i)?i(r[0],e):r[0]},w=function(e,t,i,o){t.id?(r.debug(t),n["delete"]("/timeline/"+t.id).success(function(n,r,s,a){b(e,t,i,o)})):b(e,t,i,o)},C=function(e){return e=y(e),e.before=t.invertOrder(e.before),e},x=function(e,t,n){return angular.isUndefined(e)&&(e=[]),angular.isUndefined(t)&&(t=[]),angular.isUndefined(n)&&(n=[]),e.concat(t).concat(n)},S=function(e,t,n){e.unknown.push(t);var i=x(e.unknown,e.before,e.after);return e=C(i),angular.isFunction(n)?n(null,e):e},A=function(t){return t&&t.from||(t.from=e(),t.from.add(1,"hours"),t.from.minutes(0)),t&&t.title||(t.title=""),t&&t.person||(t.person=""),t&&t.place||(t.place=""),t&&t.page||callback("Page not set."),t},_=function(e,t,n){t=A(t),v(t,null,n)},E=function(e,t){return e.name&&""!==e.name||(e.name=e.title.toLowerCase().replace(/[^a-z]+/g,"")),angular.isFunction(t)?t(null,e):e},$=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]=E(e[n]);return angular.isFunction(t)?t(null,e):e},k=function(e){var t=x(e.unknown,e.before,e.after);return e=C(t)},D=function(e,t,i,o){var s=["EventService: Can't save event.","EventService: Can't save event, event to update not found.","EventService: Can't save event, parameters undefind."];angular.isDefined(i)&&angular.isDefined(t)&&angular.isDefined(o)?(i=E(i),angular.isUndefined(i.id)?n.post("/timeline",i).success(function(n,r,a,l){angular.isArray(n)&&(n=n[0]);var u=e[t].indexOf(i);u>-1?(e[t][u]=n,o(null,e[t][u])):o(s[1])}).error(function(e,t,n,i){angular.isArray(e)&&(e=e[0]),r.error(e,t,n,i),o(s[0])}):n.put("/timeline/"+i.id,i).success(function(e,t,n,r){angular.isArray(e)&&(e=e[0]),i=e,o(null,i)}).error(function(e,t,n,i){r.error(e,t,n,i),o(s[0])})):o(s[2])},T=function(e,t,n){i.map(e[t],function(n,i){D(e,t,n,i)},n)},F=function(e,t){var n=["EventService: Can't save eventBlocks, parameters undefind."];return angular.isDefined(e)&&angular.isDefined(t)?i.map(["after","before","unknown"],function(t,n){T(e,t,n)},function(n,i){if(n&&(r.error(n),angular.isFunction(t)))return t(n);var o=x(i[0],i[1],i[2]);return e=C(o),t(null,e)}):(r.error(n[0]),angular.isFunction(t)?t(n[0]):void 0)},L=function(e){return n.get("/timeline").then(function(e){return C(e.data)},function(t){r.error("Error on resolve "+e,t)})},O=function(){n.subscribe("timeline",function(e){switch(r.debug(e),e.verb){case"updated":$rootScope.authenticated&&$rootScope.pop("success","Ein Ereignis wurde aktualisiert",e.data.title),findEvent(e.id,function(t,n,i,o){return t?(r.debug(t),t):(n=e.data,void $scope.refresh())});break;case"created":$rootScope.authenticated&&$rootScope.pop("success","Ein Ereignis wurde erstellt",e.data.title),$scope.events.before.push(e.data),$scope.refresh();break;case"removedFrom":$rootScope.authenticated&&$rootScope.pop("success","Ein Ereignis wurde entfernt",e.data.title),findEvent(e.id,function(e,t,n,i){return e?(r.debug(e),e):void EventService.removeFromClient($scope.events,t,n)});break;case"destroyed":$rootScope.authenticated&&$rootScope.pop("success","Ein Ereignis wurde gelöscht",e.data.title),findEvent(e.id,function(e,t,n,i){return e?(r.debug(e),e):void EventService.removeFromClient($scope.events,t,n)});break;case"addedTo":$rootScope.authenticated&&$rootScope.pop("success","Ein Ereignis wurde hinzugefügt",e.data.title)}})};return{subscribe:O,split:y,merge:x,append:S,transform:C,saveOne:D,saveAllInBlock:T,saveBlocks:F,edit:v,createEdit:_,fixEach:$,resolve:L,setModals:p,refresh:k,openTypeChooserModal:f,chooseType:h,removeFromClient:b,remove:w}}]),angular.module("jumplink.cms.fallback",[]).service("FallbackService",["$window","$location","$log",function(e,t,n){var i=function(e){var i=t.protocol(),r=t.host();angular.isString(e)?"/"!==e.charAt(0)&&(e="/"+e):e="/fallback";var o=i+"://"+r+e+"?force=fallback";n.debug("Go to fallback url: "+o)};return{go:i}}]),angular.module("ngFocus",[]).factory("focus",["$timeout","$window",function(e,t){return function(n){e(function(){var e=t.document.getElementById(n);e&&e.focus()})}}]).directive("eventFocus",["focus",function(e){return function(t,n,i){n.on(i.eventFocus,function(){e(i.eventFocusId)}),t.$on("$destroy",function(){n.off(i.eventFocus)})}}]),"undefined"==typeof jumplink)var jumplink={};angular.module("jumplink.cms.history",["ui.router"]).service("HistoryService",["$window","$location","$state","$anchorScroll","$timeout","$log",function(e,t,n,i,r,o){var s=[],a=function(e,t){s.push({state:e,params:t})},l=function(){return s},u=function(e){if(o.debug("[jumplink.cms.history.HistoryService], history.length",s.length,"step",e,"history.length + step =",s.length+e),s.length+e<=0)return t.path("/");var i=this.previous(e||-1);return n.go(i.state,i.params)},c=function(e){return s[s.length-Math.abs(e||1)]},d=function(){return this.go(-1)},h=function(e){t.hash(e),i.yOffset=60,i()},f=function(){var e=t.hash();e?r(function(){h(e)},1e3):i()};return{push:a,all:l,go:u,previous:c,back:d,goToHashPosition:h,autoScroll:f}}]).run(["HistoryService","$state","$rootScope",function(e,t,n){n.$on("$stateChangeSuccess",function(t,n,i,r,o){r["abstract"]||e.push(r,o)}),console.log(e),e.push(t.current,t.params)}]),angular.module("jumplink.cms.bootstrap.importexport",["jumplink.cms.importexport","jumplink.cms.bootstrap.uploader","mgcrea.ngStrap","ngFocus"]).service("ImportExportBootstrapService",["$log","focus","$modal","FileUploader",function(e,t,n,i){var r=null,o=function(t,i,o,s,l,u){return r=n({title:"JSON importieren",templateUrl:"/views/modern/uploadmodal.bootstrap.jade",show:!1}),r.$scope.fileOptions=i,r.$scope.imports=[],r.$scope.ok=!1,r.$scope["import"]=function(t){r.$scope.ok=!0,angular.isFunction(s)?s(r.$scope.imports,function(e,n){angular.isFunction(u)&&u(e,n),r.$scope.imports=[],t()}):(e.warn("[ImportExportBootstrapService.abort] onImportStart is not defined!"),r.$scope.imports=[],t())},r.$scope.abort=function(t){r.$scope.ok=!1,r.$scope.imports=[],angular.isFunction(l)?l(r.$scope.imports,function(e){t()}):(e.warn("[ImportExportBootstrapService.abort] onAbort is not defined!"),t())},angular.isUndefined(r.$scope.fileOptions)&&(r.$scope.fileOptions={}),r.$scope.uploadOptions={url:"importexport/upload",removeAfterUpload:!0,alias:"import",headers:{options:JSON.stringify(r.$scope.fileOptions)}},r.$scope.onCompleteItem=function(t,n){e.debug("[ImportExportBootstrapService.onCompleteItem]"),angular.isFunction(o)&&o(t,n)},r.$scope.onCompleteAll=function(t,n){e.debug("[ImportExportBootstrapService.onCompleteAll]")},r.$scope.upload=function(e){e.upload()},r.$scope.$on("modal.hide.before",function(t,n){e.debug("edit closed",n.$scope,n),n.$scope.ok?n.$scope.callback(null,n.$scope):n.$scope.callback&&n.$scope.callback("discarded",n.$scope)}),a()},s=function(){return r},a=function(){return{uploadModal:s()}},l=function(n){e.debug("[BlogService.show]"),r.$scope.callback=n,r.$scope.ok=!1,t("blogposttitle"),r.$promise.then(r.show)},u=function(e,t){r.$scope.imports=r.$scope.imports.concat(e);for(var n=r.$scope.imports.length-1;n>=0;n--)r.$scope.imports[n].importOptions={doImport:!0,identifier:r.$scope.imports[n][t.identifierKey],description:r.$scope.imports[n][t.descriptionKey]}};return{show:l,setModals:o,setImports:u}}]),angular.module("jumplink.cms.importexport",["jumplink.cms.attachment","ngAsync","sails.io"]).service("ImportExportService",["$sailsSocket","$async","$log","$filter",function(e,t,n,i){return{}}]),angular.module("jumplink.cms.gallery",["mgcrea.ngStrap","ngAsync","angular-medium-editor","FBAngular","sails.io","angularFileUpload","jumplink.cms.sortable","jumplink.cms.content"]).service("GalleryService",["$rootScope","$sailsSocket","$async","$filter","Fullscreen","SortableService","ContentService","FileUploader","$modal","$log",function(e,t,n,i,r,o,s,a,l,u){var c=null;uploadModal=null,fullscreenImage=null;var d=[{text:'<i class="fa fa-eye"></i>&nbsp;Anzeigen',click:"goToImage(image)"},{text:'<i class="fa fa-edit"></i>&nbsp;Bearbeiten',click:"editImage(image)"},{text:'<i class="fa fa-trash"></i>&nbsp;Löschen',click:"$dropdown.hide();$dropdown.destroy();removeImage(image);"},{text:'<i class="fa fa-floppy-o"></i>&nbsp;Speichern',click:"saveImage(image)"}],h=function(){return d},f=function(e){return c=l({scope:e,title:"Bild bearbeiten",templateUrl:"/views/modern/gallery/editmodal.jade",show:!1}),p()},p=function(){return c},m=function(t,n,i){return t.$scope.imageBlocks=n,t.$scope.selects=v(n,i),t.$scope.selects.length>0&&(e.selectedContentBlock=t.$scope.selects[0].value),e.$watch("selectedContentBlock",function(e,t){u.debug("selected changed to",e)}),t},g=function(t,n,i,r,o,s){angular.isUndefined(r)&&(r={thumbnail:{width:300},rescrop:{width:1200,cropwidth:1200,cropheight:1200}});var c={url:"gallery/upload",removeAfterUpload:!0,headers:{options:JSON.stringify(r)}};return t.uploader=new a(c),t.uploader.filters.push({name:"imageFilter",fn:function(e,t){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(n)}}),angular.isFunction(s)&&(t.uploader.onComplete=s),t.uploader.onCompleteItem=function(t,n,i,r){u.debug("[GalleryService.uploader.onCompleteItem]",t,n,i,r),n.files.forEach(function(t,n,i){var r=e.selectedContentBlock,o=uploadModal.$scope.imageBlocks,s=o[r];u.debug("[GalleryService.$scope.uploader.onCompleteItem] selected",r,"imageBlocks",o,"currentImages",s);var a=0;s.length>0&&(a=s[s.length-1].position),e.authenticated&&e.pop("success","Ein Bild wurde hochgeladen",t.original.name),"undefined"==typeof t.position&&(a++,t.position=a,t.content=r),u.debug("[GalleryService.$scope.uploader.onCompleteItem] file",t),s.push(t)})},t.upload=function(e,t){e.image=t,e.upload()},uploadModal=l({scope:t,title:"Bilder hinzufügen",uploader:t.uploader,templateUrl:"/views/modern/gallery/uploadimagesmodal.jade",show:!1}),uploadModal=m(uploadModal,n,i),angular.isFunction(o)?o(y()):y()},v=function(e,t){var n=Object.keys(e),i=[];return n.forEach(function(e,n,r){var o=s.getByName(t,e).title||e;i.push({label:o,value:e})}),i},y=function(){return uploadModal},b=function(e,t,n,i){return e.page&&""!==e.page||(e.page=t),e.content&&""!==e.content||(e.content=n),angular.isFunction(i)?i(null,e):e},w=function(e,n,i,r){e=b(e,n,i);var o=["Bild konnte nicht gespeichert werden"];t.put("/gallery/"+e.id,e).success(function(e,t,n,i){angular.isArray(e)&&(e=e[0]),angular.isFunction(r)&&r(null,e)}).error(function(e,t,n,i){u.error(o[0],e),angular.isFunction(r)&&r(o[0],e)})},C=function(e,t,i){var r=Object.keys(e);n.map(r,function(n,i){x(e[n],t,n,i)},i)},x=function(e,t,i,r){n.map(e,function(e,n){w(e,t,i,n)},r)},S=function(e,n,i,r,s){("undefined"==typeof n||null===n)&&(n=e.indexOf(i)),e=o.remove(e,n,i),i.id?t["delete"]("/gallery/"+i.id+"?filename="+i.original.name+"&page="+r,{id:i.id,filename:i.original.name,page:r}).success(function(t,n,i,r){angular.isFunction(s)&&s(null,e)}).error(function(e,t,n,i){u.error(errors[0],e),angular.isFunction(s)&&s(e)}):angular.isFunction(s)&&s(null,e)},A=function(e,t,n){uploadModal.$promise.then(uploadModal.show),uploadModal=m(uploadModal,e,t),uploadModal.$scope.$on("modal.hide",function(){u.debug("upload modal closed"),angular.isFunction(n)&&n(null)})},_=function(e,t,n){return e[t.name]=[],angular.isFunction(n)?n(null,e[t.name]):e[t.name]},E=function(e,t){u.debug("edit",e),c.$scope.image=e,c.$promise.then(c.show),c.$scope.$on("modal.hide",function(){u.debug("edit closed"),angular.isFunction(t)&&t(null,c.$scope.image)})},$=function(t,n){var i,r,o,s,a=0,l=0;return $scope.isFullScreen(t)?(o=t.original.width/t.original.height,s=e.getWindowDimensions(),s.width/s.height<o?(n=s.width,r=t.original.width/n,i=t.original.height/r,a=(s.height-i)/2,i=s.height):(i=s.height,r=t.original.height/i,n=t.original.width/r,l=(s.width-n)/2,n=s.width),{width:n+"px",height:i+"px","padding-right":l+"px","padding-left":l+"px","padding-top":a+"px","padding-bottom":a+"px"}):(r=t.original.width/n,i=t.original.height/r,{width:n+"px",height:i+"px"})},k=function(){t.subscribe("gallery",function(t){switch(u.debug(t),t.verb){case"updated":e.authenticated&&u.debug("success","Ein Bild wurde aktualisiert",t.data.original.name);break;case"created":e.authenticated&&e.pop("success","Ein Bild wurde hochgeladen",t.data.original.name),$scope.images.push(t.data);break;case"removedFrom":e.authenticated&&e.pop("success","Ein Bild wurde entfernt",""),u.debug(t.data);break;case"destroyed":u.debug(t.data);break;case"addedTo":e.authenticated&&e.pop("success","Ein Bild wurde hinzugefügt",""),u.debug(t.data)}})},D=function(e,n){var r="/gallery?limit=0&page="+e;return n&&(r=r+"&content="+n),t.get(r).then(function(e){return i("orderBy")(e.data,"position")},function(e){u.error(e)})};return{getDropdown:h,setEditModal:f,getEditModal:p,setUploadModal:g,getUploadModal:y,saveOne:w,saveAll:x,saveAllBlocks:C,remove:S,add:A,addBlock:_,edit:E,aspect:$,subscribe:k,resolve:D}}]),angular.module("jumplink.cms.info",["sails.io"]).service("CmsService",["$log","$sailsSocket",function(e,t){var n=function(n,i){var r=["[CmsService] Error: On trying to get cms info, url: "+n,"[CmsService] Error: Result is null, url: "+n],o=["[CmsService] Warn: Request has more than one results, url: "+n];return t.get(n).then(function(t){return angular.isUndefined(t)||angular.isUndefined(t.data)?angular.isFunction(i)?i(r[1]):null:(t.data instanceof Array&&(t.data=t.data[0],e.warn(o[0])),angular.isFunction(i)?i(null,t.data):t.data)},function(t){return e.error(r[0],t),angular.isFunction(i)?i(r[0],t):t})},i=function(e){return n("/cms/infouser",e)},r=function(e){return n("/cms/infoadmin",e)},o=function(n){return t.post("/cms/restart").then(function(t){return e.debug("[CmsService.restart]",t),n(null,t)},function(t){return e.error("[CmsService.restart]",t),n(t)})};return{infoUser:i,infoAdmin:r,restart:o}}]),angular.module("jumplink.cms.multisite",["sails.io","jumplink.cms.sails"]).service("MultisiteService",["$rootScope","JLSailsService","$log",function(e,t,n){var i=function(e,n){var i={method:"get",resultIsArray:!0};return t.resolve("/multisite/find",e,i,n)},r=function(e,n){var i={method:"get",resultIsArray:!0};return t.resolve("/multisite/findnames",e,i,n)},o=function(e,n){var i={method:"get",resultIsArray:!0};return t.resolve("/multisite/findhosts",e,i,n)};return{resolve:i,resolveNames:r,resolveHosts:o}}]),angular.module("jumplink.cms.bootstrap.routes",["jumplink.cms.routes","jumplink.cms.bootstrap.importexport"]).service("RoutesBootstrapService",["$log","$async","ImportExportBootstrapService","UtilityService","RoutesService","SortableService",function(e,t,n,i,r,o){var s=null,a=null,l=function(e){a=e},u=function(i,l){var u={},c=function(t,i){e.debug("[RoutesBootstrapService.onCompleteFile]",i);for(var r=[],o=0;o<i.length;o++)r=r.concat(i[o].data);n.setImports(r,{identifierKey:"objectName",descriptionKey:"title"})},d=function(n,i){e.debug("[RoutesBootstrapService.onImportStart]",a),t.map(n,function(e,t){e.importOptions.doImport===!0?r.updateOrCreateByHostByObjectNameAndNavbar(a,e,t):t()},function(t,n){e.debug("[RoutesBootstrapService.onImportStart] done",t,n),n=o.sort(n),i(t,n)})},h=function(t,n){e.debug("[RoutesBootstrapService.onAbort]"),n()};s=n.setModals(i,u,c,d,h,l)};return{setHost:l,setupImportModal:u,showImportModal:n.show}}]),angular.module("jumplink.cms.routes",["ui.router","jumplink.cms.sails","jumplink.cms.sortable","jumplink.cms.utilities","ngDownload"]).provider("jlRoutes",["$stateProvider","$urlRouterProvider","$locationProvider",function jlRoutesProvider($stateProvider,$urlRouterProvider,$locationProvider){this.html5Mode=$locationProvider.html5Mode,this.otherwise=$urlRouterProvider.otherwise,this.state=$stateProvider.state,this.when=function(e,t){$urlRouterProvider.when(e,t)},this.setLayouts=function(e){for(var t in e)this.state(t,e[t])},this.setRoutes=function(routes,routeOptions){for(var i=0;i<routes.length;i++)if(routes[i].main){var options={};if("string"==typeof routes[i].url&&routes[i].url.length>0&&(options.url=routes[i].url),routes[i].customstate===!0?(angular.isDefined(routes[i].state.resolve)&&"string"==typeof routes[i].state.resolve&&routes[i].state.resolve.length>0&&(eval(routes[i].state.resolve),options.resolve=resolve),angular.isDefined(routes[i].state.views)&&"string"==typeof routes[i].state.views&&routes[i].state.views.length>0&&(eval(routes[i].state.views),options.views=view)):angular.isDefined(routes[i].objectName)&&angular.isDefined(routeOptions[routes[i].objectName])?(angular.isObject(routeOptions[routes[i].objectName].resolve)&&(options.resolve=routeOptions[routes[i].objectName].resolve),angular.isObject(routeOptions[routes[i].objectName].views)&&(options.views=routeOptions[routes[i].objectName].views)):console.error("objectName "+routes[i].objectName+" not found for route "+routes[i]),angular.isDefined(options.url)&&angular.isDefined(options.views)&&$stateProvider.state(routes[i].state.name,options),angular.isArray(routes[i].alternativeUrls))for(var a=0;a<routes[i].alternativeUrls.length;a++)console.log("New redirect: "+routes[i].alternativeUrls[a]+" -> "+routes[i].url),$urlRouterProvider.when(routes[i].alternativeUrls[a],routes[i].url)}},this.$get=function(){return new jlRoutes}}]).filter("showOnlyMainRoutes",function(){return function(e,t){if(t!==!0)return e;for(var n=[],i=0;i<e.length;i++)e[i].main===!0&&n.push(e[i]);return n}}).service("RoutesService",["$rootScope","$download","JLSailsService","$log","SortableService","UtilityService",function(e,t,n,i,r,o){var s=function(e){return i.debug("[RoutesService.create] data",e),angular.isObject(e)||(e={}),angular.isString(e.match)||(e.match=""),angular.isString(e.title)||(e.title=""),e.main!==!0&&e.main!==!1&&(e.main=!1),angular.isString(e.url)||(e.url=""),angular.isArray(e.alternativeUrls)||(e.alternativeUrls=[]),(angular.isUndefined(e.state)||!angular.isObject(e.state))&&(e.state={}),angular.isString(e.state.name)||(e.state.name=""),e.state.customstate!==!0&&e.state.customstate!==!1&&(e.state.customstate=!1),angular.isString(e.state.url)||(e.state.url=""),angular.isString(e.state.views)||(e.state.views=""),angular.isString(e.state.resolve)||(e.state.resolve=""),angular.isObject(e.fallback)||(e.fallback={}),angular.isString(e.fallback.url)||(e.fallback.url=""),e},a=function(e,t,n){i.debug("[RoutesService] data before",t),t=s(t),i.debug("[RoutesService] data after",t),r.append(e,t,n)},l=function(e,t,n,i){return r.swap(contents,t,n,i)},u=function(e,t,n){return r.moveForward(e,t,n)},c=function(e,t,n){return r.moveBackward(e,t,n)},d=function(e,t,n,i){return angular.isFunction(i)?r.remove(e,t,n,i):r.remove(e,t,n)},h=function(e,t,r,o){if((angular.isUndefined(r)||null===r)&&angular.isDefined(t)&&(r=e[t]),(angular.isUndefined(t)||null===t)&&(t=e.indexOf(r)),e=d(e,t,r),r.id){i.debug("[RoutesService.remove] remove from server, too",r);var s={method:"delete",resultIsArray:!1};return n.resolve("/routes/destroy/"+r.id,{id:r.id},s,o)}},f=function(e,t){var i={method:"post",resultIsArray:!0};return n.resolve("/routes/find",e,i,t)},p=function(e,t){var i={method:"post",resultIsArray:!1};return n.resolve("/routes/findOne",e,i,t)},m=function(e,t){var i={method:"post",resultIsArray:!0};return n.resolve("/Routes/findByHost",e,i,t)},g=function(e,r,o){var s={method:"post",resultIsArray:!0};return n.resolve("/Routes/exportByHost",{host:e},s,function(e,n){return i.debug("[RoutesService.exportByHost]",e,n),e?(r&&t(JSON.stringify(n),"error.txt","text/plain"),o(e)):(r&&t(JSON.stringify(n),"routes.json","text/json"),o(e,n))})},v=function(e,t){i.debug("[RoutesService.updateOrCreate]",e);var r={method:"post",resultIsArray:!1};return n.resolve("/Routes/updateOrCreate",{route:e},r,t)},y=function(e,t,r){i.debug("[RoutesService.updateOrCreateByHostByObjectNameAndNavbar]",e,t);var o={method:"post",resultIsArray:!1};return n.resolve("/Routes/updateOrCreateByHostByObjectNameAndNavbar",{
host:e,route:t},o,r)},b=function(e,t,r){i.debug("[RoutesService.updateOrCreateByHost]",e,t);var o={method:"post",resultIsArray:!1};return n.resolve("/Routes/updateOrCreateByHost",{host:e,route:t},o,r)},w=function(e,t){i.debug("[RoutesService.updateOrCreateEach]",e);var r={method:"post",resultIsArray:!0};return n.resolve("/Routes/updateOrCreateEach",{routes:e},r,t)},C=function(e,t,r){i.debug("[RoutesService.updateOrCreateEachByHost]",e,t);var o={method:"post",resultIsArray:!0};return n.resolve("/Routes/updateOrCreateEachByHost",{host:e,routes:t},o,r)},x=function(e){i.debug("[RoutesController.generateObjectnameFromStatename]",e);for(var t="",n=e.split("."),r=0;r<n.length;r++)t+=o.capitalizeFirstLetter(n[r]);return t=o.lowercaseFirstLetter(t)},S=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)t+=o.capitalizeFirstLetter(n[r]);return t=o.lowercaseFirstLetter(t),i.debug("[RoutesController.generateObjectnameFromUrl]",e,n,t,t.length),t};return{create:s,append:a,swap:l,moveForward:u,moveBackward:c,removeFromClient:d,remove:h,destroy:h,find:f,findOne:p,findByHost:m,exportByHost:g,updateOrCreate:v,updateOrCreateByHostByObjectNameAndNavbar:y,updateOrCreateByHost:b,updateOrCreateEach:w,updateOrCreateEachByHost:C,saveEachByHost:C,generateObjectnameFromStatename:x,generateObjectnameFromUrl:S}}]),angular.module("jumplink.cms.session",["sails.io","jumplink.cms.sails"]).service("SessionService",["$rootScope","JLSailsService","$sailsSocket","$q","$log",function(e,t,n,i,r){var o=function(e,n){r.debug("[SessionService.create]",e);var i={method:"post",resultIsArray:!1};return t.resolve("/session/create",e,i,n)},s=function(e,n){r.debug("[SessionService.destroy]",e);var i={method:"post",resultIsArray:!1};return t.resolve("/session/destroy",e,i,n)},a=function(e){r.log("[SessionService.isauthenticated]");i.defer();return n.get("/session/authenticated").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},l=function(){r.log("[SessionService.needToBeAuthenticated] authenticated");var e=i.defer();return n.get("/session/authenticated").then(function(t){return t.data?(r.log("is authenticated",t),e.resolve(t.data)):(r.log("is not authenticated",t),e.reject("You need to be logged in"))}),e.promise},u=function(e){r.log("[SessionService.bloggerOrBetter]");i.defer();return n.get("/session/bloggerOrBetter").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},c=function(e){r.log("[SessionService.developerOrBetter]");i.defer();return n.get("/session/developerOrBetter").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},d=function(e){r.log("[SessionService.siteadminOrBetter]");i.defer();return n.get("/session/siteadminOrBetter").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},h=function(e){r.log("[SessionService.superadmin]");i.defer();return n.get("/session/superadmin").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},f=function(e){r.log("[SessionService.employee]");i.defer();return n.get("/session/employee").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},p=function(e){r.log("[SessionService.employee]");i.defer();return n.get("/session/employeeOrBetter").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},m=function(e){r.log("[SessionService.authenticated] authenticated");var t=i.defer();return n.get("/session/employeeOrBetter").then(function(e){return e.data?(r.log("is employeeOrBetter",e),t.resolve(e.data)):(r.log("is not employeeOrBetter",e),t.reject("You must be an employee or a user with more credentials to do that"))}),t.promise},g=function(e){r.log("[SessionService.authenticated] authenticated");var t=i.defer();return n.get("/session/siteadminOrBetter").then(function(e){return e.data?(r.log("is siteadminOrBetter",e),t.resolve(e.data)):(r.log("is not employeeOrBetter",e),t.reject("You must be an admin or a user with more credentials to do that"))}),t.promise},v=function(e){r.log("[SessionService.getAllPolicies]");i.defer();return n.get("/session/getAllPolicies").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})},y=function(e){r.log("[SessionService.getUser]");i.defer();return n.get("/session/getUser").then(function(t){return angular.isFunction(e)?e(null,t.data):t.data})};return{create:o,destroy:s,authenticated:l,needToBeAuthenticated:l,isAuthenticated:a,bloggerOrBetter:u,developerOrBetter:c,siteadminOrBetter:d,superadmin:h,employee:f,employeeOrBetter:p,needToBeEmployeeOrBetter:m,needToBeSiteadminOrBetter:g,getAllPolicies:v,getUser:y}}]),angular.module("jumplink.cms.sidebar",["mgcrea.ngStrap.aside"]).directive("jlSidebar",["$compile","$window",function(e,t){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"/views/modern/sidebar.jade",scope:{routes:"=",title:"="},link:function(e,t,n){}}}]),angular.module("jumplink.cms.bootstrap.signin",["mgcrea.ngStrap","jumplink.cms.signin"]).service("SigninBootstrapService",["$rootScope","SigninService","$log","$modal",function(e,t,n,i){var r=function(e,r,o,s,a){n.debug("[SigninBootstrapService.siginWithModal]",e,r,o),angular.isFunction(r)&&!angular.isFunction(a)&&(a=r,r=!1),angular.isFunction(o)&&!angular.isFunction(a)&&(a=o,o=!1),angular.isFunction(s)&&!angular.isFunction(a)&&(a=s,s=null);var l=i({title:e,templateUrl:"/views/modern/signin.bootstrap.modal.jade",show:!1});l.$scope.aborted=!1,l.$scope.result=null,l.$scope.user={email:"",password:""},l.$scope.abort=function(e){l.$scope.aborted=!0},l.$scope.signin=function(e){n.debug("[SigninBootstrapService.siginWithModal.signin]",e),t.signin(e,r,o,s,function(e,t){return e?(l.$scope.error=e,l.$scope.error):(l.$scope.result=t,void n.debug(t))})},l.$scope.$on("modal.hide",function(){n.debug("signin modal closed"),angular.isFunction(a)&&a(l.$scope.error,l.$scope.result,l.$scope.user)}),l.$promise.then(l.show)};return{siginWithModal:r}}]),angular.module("jumplink.cms.signin",["jumplink.cms.session","jumplink.cms.history","ngAsync"]).service("SigninService",["SessionService","$log","HistoryService","$async",function(e,t,n,i){var r=function(i,r,o,s,a){angular.isFunction(r)&&!angular.isFunction(a)&&(a=r,r=!1),angular.isFunction(o)&&!angular.isFunction(a)&&(a=o,o=!1),angular.isFunction(s)&&!angular.isFunction(a)&&(a=s,s=null),t.debug("[SigninService.signin]",i),e.create(i,function(l,u){return l?a(l):u.authenticated?(o===!0&&e.getAllPolicies(function(e,i){return e?a(e):(t.debug("scope before extend",s),angular.extend(s,i),t.debug("scope after extend",s),void(r===!0&&n.back()))}),r===!0&&n.back(),t.debug("[SigninService.signin]",i),t.debug("[SigninService.signin] err result",l,u),a(null,u)):null})};return{signin:r}}]),angular.module("jumplink.cms.sails",["sails.io"]).service("JLSailsService",["$rootScope","$sailsSocket","$q","$log",function(e,t,n,i){var r=function(e,r,o,s,a){var l=n.defer(),u=["On trying to resolve "+e,"Request has more than one results","No result"];return angular.isUndefined(o)&&(o={}),angular.isUndefined(o.method)&&(o.method="get"),angular.isUndefined(o.resultIsArray)&&(o.resultIsArray=!1),angular.isUndefined(r)&&(r={}),t[o.method](e,r).then(function(e){return angular.isUndefined(e)||angular.isUndefined(e.data)?angular.isFunction(s)?s(null,null):l.resolve(null):(!o.resultIsArray&&angular.isArray(e.data)&&(e.data=e.data[0],i.warn(u[1])),a&&(e.data=a(e.data)),angular.isFunction(s)&&s(null,e.data),l.resolve(e.data))},function(e){return i.error(u[0],e),angular.isFunction(s)?s(u[0],e):l.reject(u[0])}),l.promise};return{resolve:r}}]),angular.module("jumplink.cms.sortable",["jumplink.cms.utilities"]).service("SortableService",["UtilityService","$log","$filter",function(e,t,n){var i=function(e){for(var t=e.length-1;t>=0;t--)e[t].position=t+1;return e},r=function(e){return n("orderBy")(e,"position")},o=function(e,t,n,i){var r=e[t],o=e[n],s=r.position;return r.position=o.position,o.position=s,e[t]=o,e[n]=r,angular.isFunction(i)?i(null,e):e},s=function(e,n,r,o){if(t.debug("[SortableService] move"),r>=e.length)for(var s=r-e.length;s--+1;)e.push(void 0);return e.splice(r,0,e.splice(n,1)[0]),e=i(e),angular.isFunction(o)&&o(null,e),e},a=function(n,i,r,o,s){t.debug("[SortableService.append] data",i);var a,l=["Unique key '"+s+"' already exist"],u=n.length,c=1,d=-1,h=function(e,t,n,i){return t.push(e),angular.isFunction(i)?i(null,t,n):t},f=function(e,t,n,i){return angular.isFunction(i)?i(e,t,n):e};return u>=1&&(c=n[u-1].position+1),a={position:c},a=angular.extend(a,i),t.debug("[SortableService.append] new_object",a),o&&a[s]?(d=e.findKeyValue(n,s,a[s]),d>-1?f(l[0],n,d,r):h(a,n,u,r)):h(a,n,u,r)},l=function(e,n,i,r,o,s){var l=["[SortableService] Error: Function parameters not correctly set"],u=function(){return t.error(l[0],e,n,i,r),o(l[0])};null===e?e=i[n]:null===n?n=i.indexOf(e):u(),angular.isArray(i)&&angular.isArray(r)||u(),a(r,e,function(t,r,s){return t?o(t):void d(i,n,e,function(e,t){return e?o(e):o(null,{index_from:n,array_from:t,index_to:s,array_to:r})})},!1)},u=function(e,t,n){return e+1<t.length?o(t,e,e+1,n):angular.isFunction(n)?n("Can't move forward, index is the last element.",t):t},c=function(e,t,n){return e-1>=0?o(t,e,e-1,n):angular.isFunction(n)?n("Can't move backward, index is the first element.",t):t},d=function(e,t,n,i){return("undefined"==typeof t||null===t)&&(t=e.indexOf(n)),t>-1&&e.splice(t,1),angular.isFunction(i)?i(null,e):e},h=function(e,n,i,r,o,a){a||(a=s);var l=e.indexOf(i),u=e[n];return t.debug("[SortableService] dropMove, dragObject:",i,"dragObjectIndex",l,"dropObject",u,"dropObjectIndex",n),a(e,l,n,o)};return{resetPosition:i,sort:r,swap:o,moveObjectToAnotherArray:l,move:s,moveForward:u,moveBackward:c,remove:d,append:a,dropMove:h}}]),angular.module("jumplink.cms.subnavigation",["mgcrea.ngStrap","sails.io","jumplink.cms.sortable","ngFocus","jumplink.cms.utilities"]).service("SubnavigationService",["$rootScope","$window","$log","$sailsSocket","$filter","$modal","SortableService","UtilityService","focus",function(e,t,n,i,r,o,s,a,l){var u=null,c=function(e){return u=o({scope:e,title:"Navigation bearbeiten",templateUrl:"/views/modern/editsubnavigationmodal.jade",show:!1}),d()},d=function(){return u},h=function(){i.subscribe("navigation",function(t){switch(n.debug("[SubnavigationService] Navigation event!",t),t.verb){case"updated":e.authenticated&&e.pop("success","Navigation wurde aktualisiert",t.id)}})},f=function(){angular.element(t).imagesLoaded(function(){angular.element(t).triggerHandler("resize")})},p=function(e){return e&&e.target||(e.target=""),e&&e.name||(e.name=""),e&&e.page||cb("Page not set."),e},m=function(e,t,n){t=p(t),s.append(e,t,n)},g=function(e,t,n,i){return s.swap(contents,t,n,i)},v=function(e,t,n){return s.moveForward(e,t,n)},y=function(e,t,n){return s.moveBackward(e,t,n)},b=function(e,t){if(u.$scope.navs=e,u.$promise.then(u.show),angular.isDefined(u.$scope.navs)&&u.$scope.navs.length>0){var n=Number(u.$scope.navs.length-1);l("subnavigationeditname"+n)}u.$scope.$on("modal.hide",function(){t(null,u.$scope.navs)})},w=function(e,t,n,i){return angular.isFunction(i)?s.remove(e,t,n,i):s.remove(e,t,n)},C=function(e,t,r,o,s){(angular.isUndefined(r)||null===r)&&angular.isDefined(t)&&(r=e[t]),(angular.isUndefined(t)||null===t)&&(t=e.indexOf(r)),e=w(e,t,r),r.id&&(n.debug("[SubnavigationService] remove from server, too",r),i["delete"]("/navigation/"+r.id+"?page="+o,{id:r.id,page:o}).success(function(t,n,i,r){return angular.isFunction(s)?s(null,e):void 0}).error(function(e,t,i,r){return n.error(errors[0],e),angular.isFunction(s)?s(e):void 0}))},x=function(e,t,i,r){n.debug("[SubnavigationService] remove subnavigation by target "+t);var o=a.findKeyValue(e,"target",t);o>-1?(n.debug("[SubnavigationService] subnavigation found "+o),C(e,o,null,i,r)):angular.isFunction(r)&&r("Subnavigation not found")},S=function(e,t,i,r){return angular.isDefined(t.name)&&angular.isString(t.name)&&""!==t.name?e.push(t):n.warn("Name not set, remove Subnavigation"),angular.isFunction(r)?r(null,e):e},A=function(e,t){for(var n=[],i=e.length-1;i>=0;i--)n=S(n,e[i],i);return angular.isFunction(t)?t(null,n):n},_=function(t,n,o){A(t,function(t,s){i.put("/navigation/replaceall",{navs:s,page:n}).success(function(t,n,i,a){if(null!==t&&"undefined"!=typeof t)s=r("orderBy")(t,"position"),angular.isFunction(o)&&o(null,s);else{var l="Navigation konnte nicht gespeichert werden";e.pop("error",l,""),angular.isFunction(o)&&o(l,s)}})})},E=function(e){return i.get("/navigation?page="+e,{page:e}).then(function(t){return angular.isUndefined(t)||angular.isUndefined(t.data)?(n.warn("Warn: On trying to resolve "+e+" navs!","Not found, navigation is empty!"),null):(t.data=r("orderBy")(t.data,"position"),n.debug("[SubnavigationService]",t),t.data)},function(t){n.error("[SubnavigationService] Error: On trying to resolve "+e+" navs!",t)})};return{resizeOnImagesLoaded:f,subscribe:h,setEditModal:c,getEditModal:d,create:p,append:m,add:m,swap:g,moveForward:v,moveBackward:y,edit:b,removeFromClient:w,remove:C,removeByTarget:x,save:_,resolve:E}}]).directive("jlSubnavigation",["$compile","$window","SubnavigationService","HistoryService",function(e,t,n,i){return{restrict:"E",templateUrl:"/views/modern/subnavigation.bootstrap.jade",scope:{authenticated:"=",navs:"=",afterSave:"=?",afterRemove:"=?",afterEdit:"=?",afterAdd:"=?",logger:"=",page:"=?"},link:function(e,t,n){},controller:["$rootScope","$scope","ContentService","$log","$state",function(e,t,r,o,s){n.setEditModal(t),t.goTo=i.goToHashPosition,n.subscribe(),angular.isUndefined(t.page)&&(t.page=s.current.name),angular.isUndefined(t.afterSave)&&(t.afterSave=function(e,n){return e?t.logger("error","Navigation wurde nicht gespeichert!",e):void t.logger("success","Navigation gespeichert!",n.title)}),angular.isUndefined(t.afterRemove)&&(t.afterRemove=function(e,n){return e?t.logger("error","Navigation wurde nicht entfernt!",e):void t.logger("success","Navigation entfernt!",n.title)}),angular.isUndefined(t.afterEdit)&&(t.afterEdit=function(e,n){return e?t.logger("error","Navigation wurde nicht bearbeitet!",e):void t.logger("success","Navigation bearbeitet!",n.title)}),angular.isUndefined(t.afterAdd)&&(t.afterAdd=function(e,n){return e?t.logger("error","Navigation wurde nicht hinzugefügt!",e):void t.logger("success","Navigation hinzugefügt!",n.title)}),t.add=function(){return t.authenticated?void n.add(t.navs,{page:page},t.afterAdd):!1},t.addNav=t.add,t.moveForward=function(e,n){SortableService.moveForward(e,t.navs,function(e,n){return e?(o.error("Error: On move subnavigation forward!",e),e):void(t.navs=n)})},t.moveForwardNav=t.moveForward,t.moveBackward=function(e,n){SortableService.moveBackward(e,t.navs,function(e,n){return e?(o.error("Error: On move content backward!",e),e):void(t.navs=n)})},t.moveBackwardNav=t.moveBackward,t.edit=function(e){return t.authenticated?void n.edit(e,t.afterEdit):!1},t.editNavs=t.edit,t.remove=function(e,i){return t.authenticated?void n.remove(t.navs,e,i,page,t.afterRemove):!1},t.removeNav=remove,t.save=function(){n.save(t.navs,page,t.afterSave)},t.onDragOnComplete=function(e,t,n){null===t&&o.debug("*click*",e),o.debug("onDragOnComplete, nav:",t,"index",e)},t.onDragOnNavComplete=t.onDragOnComplete,t.onDropOnComplete=function(e,n,i){SortableService.dropMove(t.navs,e,n,i,function(e,n){t.navs=n})},t.onDropOnNavComplete=t.onDropOnComplete,t.onDropOnAreaComplete=function(e,n){t.navs.indexOf(e)}}]}}]),angular.module("jumplink.cms.theme",["sails.io","ngAsync","jumplink.cms.sails"]).service("ThemeService",["$rootScope","$sailsSocket","$log","$async","JLSailsService",function(e,t,n,i,r){var o=!1,s=function(e,t){n.debug("[ThemeService.find]",e);var i={method:"get",resultIsArray:!0};return r.resolve("/theme/find",e,i,t)},a=function(e,t){var n={method:"post",resultIsArray:!0};return r.resolve("/theme/findbyhost",{host:e},n,t)},l=function(e,t){u(e,function(e,n){angular.isDefined(t)&&t(e,n)})},u=function(e,t){n.debug("[ThemeService.updateOrCreateEach]",e);var i={method:"post",resultIsArray:!0};return r.resolve("/Theme/updateOrCreateEach",{themes:e},i,t)},c=function(e,t,n){var i={method:"post",resultIsArray:!0};return r.resolve("/Theme/updateOrCreateEachByHost",{host:e,themes:t},i,n)},d=function(){o||(t.subscribe("theme",function(t){switch(e.authenticated&&n.debug(t),t.verb){case"updated":e.authenticated&&e.pop("success","Themeeinstellungen wurdne aktualisiert",t.data);break;case"created":e.authenticated&&e.pop("success","Themeeinstellungen wurden erstellt",t.data);break;case"removedFrom":e.authenticated&&e.pop("success","Themeeinstellungen wurden entfernt","");break;case"destroyed":e.authenticated&&e.pop("success","Themeeinstellungen wurden gelöscht","");break;case"addedTo":e.authenticated&&e.pop("success","Themeeinstellungen wurden hinzugefügt","")}}),o=!0)};return{find:s,findByHost:a,save:l,updateOrCreateEach:u,updateOrCreateEachByHost:c,subscribe:d}}]),angular.module("jumplink.cms.toolbar",["FBAngular"]).directive("jlToolbar",["$compile","$window",function(e,t){return{restrict:"E",templateUrl:"/views/modern/toolbar.jade",scope:{routes:"=",title:"=",shorttitle:"=",fluid:"=",position:"=",filter:"=",subnavigation:"=?"},link:function(e,t,n){},controller:["$scope","$log","Fullscreen",function(e,t,n){e.fullscreenIsSupported=n.isSupported(),e.isFullscreen=!1,t.debug("[jumplink.cms.toolbar.jlToolbar.controller]",e),n.$on("FBFullscreen.change",function(t,n){e.isFullscreen=n===!0}),e.toggleFullscreen=function(){n.isEnabled()?n.cancel():n.all()}}]}}]),angular.module("jumplink.cms.bootstrap.uploader",["angularFileUpload"]).directive("jlUploader",function(){return{restrict:"E",templateUrl:"/views/modern/uploader.bootstrap.jade",scope:{label:"@",labelFiles:"@",uploadOptions:"=",fileOptions:"=",onCompleteAll:"=",onCompleteItem:"="},link:function(e,t,n){},controller:["$rootScope","$scope","$log","FileUploader",function(e,t,n,i){t.files=[],angular.isUndefined(t.fileOptions)&&(t.fileOptions={}),t.uploader=new i(t.uploadOptions),n.debug("[jlUploader] uploadOptions",t.uploadOptions),n.debug("[jlUploader] uploader",t.uploader),n.debug("[jlUploader] onCompleteAll",t.onCompleteAll),n.debug("[jlUploader] onCompleteItem",t.onCompleteItem),t.uploader.onCompleteItem=function(e,i,r,o){n.debug("[jlUploader.onCompleteItem] status",r);for(var s=0;s<i.files.length;s++)n.debug("[jlUploader.onCompleteItem] response.files[i]",i.files[s]);t.files=t.files.concat(i.files),angular.isFunction(t.onCompleteItem)&&t.onCompleteItem(null,t.files)},t.uploader.onCompleteAll=function(){n.debug("[jlUploader.onCompleteAll]"),angular.isFunction(t.onCompleteAll)&&t.onCompleteAll(null,t.files)},t.upload=function(e){e.upload()},t.uploader.onProgressItem=function(e,t){n.debug("[jlUploader.onProgressItem]",e,t)}}]}}),angular.module("jumplink.cms.user",["sails.io","jumplink.cms.sails"]).service("UserService",["$rootScope","$sailsSocket","$log","JLSailsService",function(e,t,n,i){var r=!1,o=function(e,i){angular.isString(e.role)||(e.role="siteadmin"),angular.isDefined(e.id)?(n.debug("update user: sailsSocket.put('/user/"+e.id+"..'"),t.put("/user/"+e.id,e).success(function(e,t,r,o){n.debug(e,t,r,o),angular.isDefined(e)&&angular.isDefined(e.password)&&delete e.password,i(null,e,t,r,o)})):(n.debug("create user: sailsSocket.post('/user.."),t.post("/user",e).success(function(e,t,r,o){n.debug("data",e,"status",t,"headers",r,"config",o),angular.isDefined(e)&&angular.isDefined(e.password)&&delete e.password,i(null,e,t,r,o)}))},s=function(){r||(t.subscribe("user",function(t){switch(e.authenticated&&n.debug(t),t.verb){case"updated":e.authenticated&&e.pop("success","Ein Benutzer wurde aktualisiert",t.data.name);break;case"created":e.authenticated&&e.pop("success","Ein Benutzer wurde erstellt",t.data.name);break;case"removedFrom":e.authenticated&&e.pop("success","Ein Benutzer wurde entfernt","");break;case"destroyed":e.authenticated&&e.pop("success","Ein Benutzer wurde gelöscht","");break;case"addedTo":e.authenticated&&e.pop("success","Ein Benutzer wurde hinzugefügt","")}}),r=!0)},a=function(e,t){var i=e.indexOf(t);n.debug("removeFromClient",t,i),i>-1&&e.splice(i,1)},l=function(i,r){n.debug("$scope.remove",r),e.authenticated&&(i.length<=1?n.error("Der letzte Benutzer kann nicht gelöscht werden."):(a(i,r),r.id&&t["delete"]("/user/"+r.id,{id:r.id}).success(function(e,t,i,r){n.debug("user delete request",e,t,i,r)})))},u=function(e,t){var n={method:"post",resultIsArray:!0};return i.resolve("/user/findbyhost",{host:e},n,t)},c=function(e,t,r){n.debug("[UserService.updateOrCreateByHost]",e,routes);var o={method:"post",resultIsArray:!1};return i.resolve("/user/updateOrCreateByHost",{host:e,user:t},o,r)};return{save:o,subscribe:s,remove:l,findByHost:u,updateOrCreateByHost:c}}]),angular.module("jumplink.cms.utilities",[]).service("UtilityService",["$log",function(e){var t=function(e){for(var t=[],n=e.length-1;n>=0;n--)t.push(e[n]);return t},n=function(e,t,n){for(var i=-1,r=e.length-1;r>=0&&-1>=i;r--)e[r][t]===n&&(i=r);return i},i=function(e){var t=[];if(!angular.isObject(e))return console.error("[UtilityService.getKeys] is not an Object",e),t;for(var n in e)t.push(n);return t},r=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},o=function(e){return e.charAt(0).toLowerCase()+e.slice(1)};return{invertOrder:t,findKeyValue:n,getKeys:i,capitalizeFirstLetter:r,lowercaseFirstLetter:o}}]),angular.module("jumplink.cms.bootstrap.validation",["jumplink.cms.validation"]).provider("jlValidationBootstrap",["jlValidationProvider","$validationProvider",function(e,t){this.setup=function(){t.setErrorHTML(function(e){return"<span ng-show='form.name.$error.required' class='form-control-feedback'><i class='fa fa-exclamation-triangle'></i></span><label class=\"control-label has-error absolute-control-label-bottom\">"+e+"</label>"}),t.setSuccessHTML(function(e){return"<span class='form-control-feedback'><i class='fa fa-check'></i></span><label class=\"control-label has-success absolute-control-label-bottom\">"+e+"</label>"}),angular.extend(t,{validCallback:function(e){$(e).parents(".form-group:first").removeClass("has-error").addClass("has-success")},invalidCallback:function(e){$(e).parents(".form-group:first").removeClass("has-success").addClass("has-error")}})},this.getLocale=e.getLocale,this.changeLocale=e.changeLocale,this.$get=function(){return new jlValidationBootstrap}}]),angular.module("jumplink.cms.validation",["validation","validation.rule"]).provider("jlValidation",["$validationProvider",function(e){this.getLocale=function(){var t={minlength:e.getDefaultMsg("minlength"),maxlength:e.getDefaultMsg("maxlength"),required:e.getDefaultMsg("required"),email:e.getDefaultMsg("email"),number:e.getDefaultMsg("number"),url:e.getDefaultMsg("url")};return t},this.changeLocale=function(t){var n={};switch(t){case"de":n={minlength:{error:"Eingabe muss länger sein!",success:"Eingabe lang genug"},maxlength:{error:"Eingabe muss kürzer sein!",success:"Eingabe kurz genug"},required:{error:"Eine Eingabe ist erforderlich!",success:"Okay"},email:{error:"Eingabe muss einer E-Mail entsprechen!",success:"Eingabe ist eine E-Mail"},number:{error:"Eingabe darf nur Zahlen enthalten!",success:"Eingabe enthält nur Zahlen"},url:{error:"Eingabe muss einer URL entsprechen!",success:"Eingabe entspricht einer URL"}};break;case"en":}switch(t){case"de":e.setDefaultMsg(n);break;case"en":}},this.$get=function(){return new jlValidation}}]);
//# sourceMappingURL=libs.js.map
